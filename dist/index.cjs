"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),Ge=require("./useDevInspector-CvbgduVJ.cjs"),io=require("./vite.cjs");/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ot={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=T=>T.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),S=(T,a)=>({size:V,strokeWidth:h=2,absoluteStrokeWidth:_,color:L,class:q,...Z},{attrs:W,slots:$})=>e.h("svg",{...ot,width:V||ot.width,height:V||ot.height,stroke:L||ot.stroke,"stroke-width":_?Number(h)*24/Number(V):h,...W,class:["lucide",`lucide-${so(T)}`],...Z},[...a.map(M=>e.h(...M)),...$.default?[$.default()]:[]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=S("AlertCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=S("AlertTriangleIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=S("CalculatorIcon",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=S("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=S("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=S("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=S("ClipboardListIcon",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=S("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=S("CodeIcon",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=S("DatabaseIcon",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=S("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=S("ExternalLinkIcon",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=S("EyeOffIcon",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=S("EyeIcon",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=S("FileSpreadsheetIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=S("FileTextIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=S("FormInputIcon",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M17 12h.01",key:"1m0b6t"}],["path",{d:"M7 12h.01",key:"eqddd0"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=S("GitBranchIcon",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=S("GitMergeIcon",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=S("ListIcon",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=S("LockIcon",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=S("MailIcon",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=S("MessageSquareIcon",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=S("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=S("MousePointer2Icon",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=S("PenLineIcon",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=S("PenSquareIcon",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=S("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=S("SaveIcon",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=S("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=S("ServerIcon",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=S("ShieldQuestionIcon",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=S("ShieldIcon",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=S("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=S("TypeIcon",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=S("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=S("Wand2Icon",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=S("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=S("ZapIcon",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);async function To(T,a,V={}){var A;const h=await Promise.resolve().then(()=>require("./xlsx-qn1xoUuv.cjs")),{systemName:_="System",author:L=""}=V,q=new Date,Z=`${q.getFullYear()}/${q.getMonth()+1}/${q.getDate()}`,W=h.utils.book_new(),$=[];$.push(["画面機能仕様書","","","","","","","","","","","システム名","","","","",_,"","","","","","画面ID/画面名","","","","",(T==null?void 0:T.name)||"","","","","","","作成者","","","","",L,"","作成日","","","","",Z]),$.push([]),$.push(["URL","","","","","","","","","","","画面英語名","","","","","","","","","","","View Component","","","","",(T==null?void 0:T.componentPath)||"","","","","","","Figma URL","","","","",(T==null?void 0:T.figmaUrl)||""]),$.push([]),$.push(["機能概要"]),$.push([(T==null?void 0:T.description)||""]),$.push([]),$.push(["画面レイアウト　figmaURL"]),$.push([(T==null?void 0:T.figmaUrl)||""]),$.push([]),T!=null&&T.apis&&T.apis.length>0&&($.push(["API一覧"]),$.push(["","メソッド","","エンドポイント","","","","","","","","説明"]),T.apis.forEach(y=>{$.push(["",y.method,"",y.endpoint,"","","","","","","",y.description])}),$.push([])),$.push(["画面項目　ヘッダーフッターは省く"]),$.push(["","No.","","項目名","","","","","","","","","","","","説明","","","","","","","","","","","","","","","","表示条件","","","","","","","","","","","","","","","備考"]),Object.values(a).forEach((y,ce)=>{var E,d,k;const ye=y.id;let ae="",pe="",x="";if((E=y.note)!=null&&E.text&&(ae=y.note.text),y.fieldInfo&&(ae+=ae?`
`:"",ae+=`DB: ${y.fieldInfo.table}.${y.fieldInfo.column}`,y.fieldInfo.type&&(ae+=` (${y.fieldInfo.type})`),y.fieldInfo.description&&(ae+=`
${y.fieldInfo.description}`)),y.actionInfo&&(x=`[${{navigate:"画面遷移",api:"API呼び出し",modal:"モーダル表示",emit:"イベント発火",function:"関数実行",csv_export:"CSV出力",csv_import:"CSV取込",email:"メール送信"}[y.actionInfo.type]||y.actionInfo.type}]`,y.actionInfo.target&&(x+=` ${y.actionInfo.method||""} ${y.actionInfo.target}`),y.actionInfo.description&&(x+=`
${y.actionInfo.description}`)),y.links){const g=[];y.links.testPath&&g.push(`テスト: ${y.links.testPath}`),y.links.figmaUrl&&g.push(`Figma: ${y.links.figmaUrl}`),y.links.githubIssue&&g.push(`Issue: ${y.links.githubIssue}`),y.links.githubPr&&g.push(`PR: ${y.links.githubPr}`),g.length>0&&(x+=x?`

`:"",x+=g.join(`
`))}if(y.devMeta){const g=[];(d=y.devMeta.usedStores)!=null&&d.length&&g.push(`Store: ${y.devMeta.usedStores.join(", ")}`),(k=y.devMeta.usedComponents)!=null&&k.length&&g.push(`Components: ${y.devMeta.usedComponents.join(", ")}`),y.devMeta.accessibility&&g.push(`A11y: ${y.devMeta.accessibility}`),y.devMeta.responsive&&g.push(`Responsive: ${y.devMeta.responsive}`),g.length>0&&(x+=x?`

`:"",x+=`[開発情報]
`+g.join(`
`))}$.push(["",ce+1,"",ye,"","","","","","","","","","","",ae,"","","","","","","","","","","","","","","",pe,"","","","","","","","","","","","","","",x])});const G=h.utils.aoa_to_sheet($);G["!cols"]=[{wch:3},{wch:5},{wch:3},{wch:20},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:30},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:20},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:30}],h.utils.book_append_sheet(W,G,"画面設計書");const ne=`画面仕様書_${((A=T==null?void 0:T.name)==null?void 0:A.replace(/[/\\?%*:|"<>]/g,"-"))||"screen"}_${Z.replace(/\//g,"")}.xlsx`;return h.writeFile(W,ne),ne}const So={key:0,class:"di-panel","data-dev-inspector":""},_o={class:"di-header"},Mo={class:"di-header-title"},Io={class:"di-tab-bar"},Uo={key:0,class:"di-tab-badge"},Lo={key:0,class:"di-tab-badge"},Fo={key:0,class:"di-tab-badge"},Po={class:"di-edit-section"},Ao={class:"di-note-toggle-badge"},Oo={key:1,class:"di-note-filter"},zo={class:"di-filter-buttons"},jo=["onClick"],qo={key:2,class:"di-element-list-section"},Ho={class:"di-element-list-header"},Ro={class:"di-count-badge"},Ko={key:0},Yo={class:"di-element-list"},Go=["onClick","onMouseenter"],Xo={class:"di-element-item-body"},Jo={class:"di-element-item-label"},Zo={key:0,class:"di-unannotated-badge"},Qo={key:3,class:"di-unannotated-results"},Wo={class:"di-unannotated-summary"},el={key:0},tl={key:1},ol={key:2},ll={class:"di-unannotated-list"},nl=["onMouseenter"],al={class:"di-unannotated-text"},il=["onClick"],sl=["onClick"],dl={key:4,class:"di-unannotated-empty"},rl={key:5,class:"di-broken-warning"},cl={class:"di-broken-header"},ul={class:"di-broken-list"},ml={class:"di-broken-item-info"},pl={class:"di-broken-item-note"},vl={class:"di-broken-item-selector"},fl={class:"di-broken-item-actions"},Vl=["onClick"],hl=["onClick"],El={class:"di-broken-actions"},yl={class:"di-content"},kl={class:"di-section"},Nl={class:"di-screen-header"},bl={class:"di-screen-name"},gl={key:0,class:"di-screen-desc"},xl={key:1,class:"di-auth-badges"},wl={key:0,class:"di-auth-badge di-auth-required"},Bl={key:1,class:"di-auth-note"},Cl={key:0,class:"di-card"},$l={class:"di-card-label"},Dl={class:"di-code-blue"},Tl={key:1,class:"di-card"},Sl={class:"di-card-label"},_l=["href"],Ml={key:2,class:"di-card"},Il={class:"di-card-label"},Ul={class:"di-api-list"},Ll={class:"di-api-info"},Fl={class:"di-api-endpoint"},Pl={key:0,class:"di-api-desc"},Al={key:0,class:"di-api-timing-badge"},Ol={key:3,class:"di-card"},zl={class:"di-card-label"},jl={class:"di-screen-notes"},ql={key:1,class:"di-no-spec"},Hl={class:"di-card di-cross-search-section"},Rl={class:"di-cross-search-header"},Kl={class:"di-cross-search-body"},Yl={class:"di-filter-buttons",style:{"margin-bottom":"8px"}},Gl=["onClick"],Xl=["placeholder"],Jl={key:0,class:"di-cross-search-count"},Zl={key:1,class:"di-cross-search-results"},Ql={class:"di-cross-search-page-header"},Wl={key:0,class:"di-cross-search-page-name"},en=["onClick"],tn={class:"di-cross-search-field"},on={key:0,class:"di-cross-search-context"},ln={class:"di-card di-screen-flow-section"},nn={key:0,class:"di-screen-flow-badge"},an={key:0,class:"di-screen-flow-body"},sn={key:0,class:"di-screen-flow-empty"},dn={class:"di-flow-node-path"},rn={key:0,class:"di-flow-node-name"},cn=["onClick"],un={class:"di-flow-target"},mn={key:0,class:"di-flow-edge-label"},pn={key:1,class:"di-flow-orphans"},vn={class:"di-section"},fn={class:"di-section-header",style:{"margin-bottom":"8px"}},Vn={key:0,class:"di-section-badge"},hn={class:"di-master-table-name"},En=["onClick"],yn={class:"di-master-item-header"},kn={class:"di-master-col-name"},Nn={key:0,class:"di-master-col-type"},bn={class:"di-master-item-name"},gn={class:"di-master-entries-preview"},xn={key:0,class:"di-master-entry-more"},wn={class:"di-master-editor"},Bn={class:"di-master-editor-header"},Cn={class:"di-master-editor-body"},$n={class:"di-master-row"},Dn={class:"di-master-field"},Tn=["disabled"],Sn={class:"di-master-field"},_n=["disabled"],Mn={class:"di-master-row"},In={class:"di-master-field"},Un={class:"di-master-field"},Ln={class:"di-master-field",style:{"margin-bottom":"12px"}},Fn={class:"di-master-entries-header"},Pn={class:"di-master-entries-list"},An=["onUpdate:modelValue"],On=["onUpdate:modelValue"],zn=["onUpdate:modelValue"],jn=["onUpdate:modelValue"],qn=["onClick"],Hn={class:"di-master-entries-header",style:{"margin-top":"16px"}},Rn={key:0,class:"di-master-entries-list"},Kn=["onUpdate:modelValue"],Yn=["value"],Gn=["onUpdate:modelValue"],Xn=["value"],Jn=["onUpdate:modelValue"],Zn=["onUpdate:modelValue"],Qn=["onClick"],Wn={key:1,class:"di-master-empty",style:{"margin-top":"4px","font-size":"11px"}},ea={class:"di-master-editor-footer"},ta=["disabled"],oa={class:"di-section"},la={class:"di-section-header",style:{"margin-bottom":"8px"}},na={key:0,class:"di-section-badge"},aa=["onClick"],ia={class:"di-batch-item-info"},sa={class:"di-batch-item-name"},da={key:0,class:"di-batch-item-schedule"},ra={class:"di-batch-editor"},ca={class:"di-batch-editor-header"},ua={class:"di-batch-editor-body"},ma={class:"di-batch-row"},pa={class:"di-batch-field"},va={class:"di-batch-field"},fa={class:"di-batch-row"},Va={class:"di-batch-field"},ha={class:"di-batch-field",style:{"margin-bottom":"12px"}},Ea={class:"di-batch-row"},ya={class:"di-batch-field"},ka={class:"di-batch-tags-input"},Na=["onClick"],ba={class:"di-batch-field"},ga={class:"di-batch-tags-input"},xa=["onClick"],wa={class:"di-batch-section-label"},Ba={key:0},Ca={class:"di-batch-step-no"},$a=["onUpdate:modelValue"],Da=["onUpdate:modelValue"],Ta=["onUpdate:modelValue"],Sa=["onUpdate:modelValue"],_a=["onClick"],Ma={class:"di-batch-row"},Ia={class:"di-batch-field"},Ua={class:"di-batch-field"},La={class:"di-batch-row"},Fa={class:"di-batch-field"},Pa={class:"di-batch-field"},Aa={class:"di-batch-editor-footer"},Oa=["disabled"],za={class:"di-export-buttons"},ja={class:"di-action-buttons"},qa={key:0,class:"di-export-summary"},Ha={class:"di-export-summary-row"},Ra={class:"di-export-summary-count"},Ka={class:"di-export-summary-row"},Ya={class:"di-export-summary-count"},Ga={class:"di-export-summary-row"},Xa={class:"di-export-summary-count"},Ja={key:0,class:"di-indicator","data-dev-inspector":""},Za={class:"di-modal"},Qa=["value"],Wa={class:"di-modal-actions"},ei={class:"di-modal"},ti={class:"di-file-drop"},oi={key:0,class:"di-error"},li={class:"di-modal-actions"},ni=["disabled"],ai=e.defineComponent({__name:"DevPanel",setup(T){const a=Ge.useDevInspectorStore(),V=e.ref("elements"),h=e.ref(!1),_=e.ref(!1),L=e.ref(""),q=e.ref(""),Z={GET:"#10b981",POST:"#3b82f6",PUT:"#f59e0b",DELETE:"#ef4444",PATCH:"#8b5cf6"},W=e.computed(()=>a.currentScreenSpec),$=e.computed(()=>a.getScreenConfig()),M=e.computed(()=>{var n;const s=$.value,o=W.value;return!s&&!o?null:{name:(s==null?void 0:s.name)||(o==null?void 0:o.name)||"",description:(s==null?void 0:s.description)||(o==null?void 0:o.description)||"",componentPath:(s==null?void 0:s.componentPath)||(o==null?void 0:o.componentPath)||"",figmaUrl:(s==null?void 0:s.figmaUrl)||(o==null?void 0:o.figmaUrl)||"",apis:(s==null?void 0:s.apis)||((n=o==null?void 0:o.apis)==null?void 0:n.map(c=>({...c,loadTiming:void 0})))||[],auth:(s==null?void 0:s.auth)||null,notes:(s==null?void 0:s.notes)||(o!=null&&o.notes?o.notes.join(`
`):"")}}),G=e.computed(()=>Object.keys(a.elementConfigs).length),ie=e.computed(()=>{const s=typeof window<"u"?window.location.pathname:"/";return Object.entries(a.elementConfigs).filter(([,o])=>!o.pagePath||o.pagePath===s).map(([o,n])=>{var m,P,i;let c="";return(m=n.note)!=null&&m.text?c=n.note.text:n.fieldInfo?c=`${n.fieldInfo.table}.${n.fieldInfo.column}`:(P=n.actionInfo)!=null&&P.description?c=n.actionInfo.description:(i=n.actionInfo)!=null&&i.type?(c={navigate:"画面遷移",api:"API",modal:"モーダル",emit:"イベント",function:"関数",csv_export:"CSV出力",csv_import:"CSV取込",email:"メール送信"}[n.actionInfo.type]||n.actionInfo.type,n.actionInfo.target&&(c+=` → ${n.actionInfo.target}`)):n.formInfo&&(c=n.formInfo.label||n.formInfo.inputType||"フォーム"),c||(c=o),{id:o,desc:c,type:n.elementType,config:n}})}),ne=e.computed(()=>{const s=a.noteHighlightFilter;return s==="all"?ie.value:ie.value.filter(o=>{var i,Se,Oe,U,J;const n=o.config,c=(i=n.note)==null?void 0:i.displayType,m=!!((Se=n.note)!=null&&Se.condition||(Oe=n.note)!=null&&Oe.conditionColumn),P=!!((U=n.note)!=null&&U.storedCalc);switch(s){case"db":return c==="db_direct"||c==="db_formatted";case"calculated":return c==="calculated";case"storedCalc":return P;case"static":return c==="static";case"conditional":return m;case"action":return n.elementType==="action";case"form":return n.elementType==="form";case"other":return c==="other"||!c&&!n.elementType&&!!((J=n.note)!=null&&J.text);default:return!0}})}),A=e.computed(()=>Object.values(a.elementConfigs).filter(s=>{var o,n;return!!((o=s.note)!=null&&o.text||(n=s.note)!=null&&n.displayType)}).length),y=e.computed(()=>{const s=a.noteHighlightFilter;return s==="all"?A.value:Object.values(a.elementConfigs).filter(o=>{var P,i,Se,Oe,U,J,Ne;if(!((P=o.note)!=null&&P.text||(i=o.note)!=null&&i.displayType||o.elementType))return!1;const n=(Se=o.note)==null?void 0:Se.displayType,c=!!((Oe=o.note)!=null&&Oe.condition||(U=o.note)!=null&&U.conditionColumn),m=!!((J=o.note)!=null&&J.storedCalc);switch(s){case"db":return n==="db_direct"||n==="db_formatted";case"calculated":return n==="calculated";case"storedCalc":return m;case"static":return n==="static";case"conditional":return c;case"action":return o.elementType==="action";case"form":return o.elementType==="form";case"other":return n==="other"||!n&&!o.elementType&&!!((Ne=o.note)!=null&&Ne.text);default:return!0}}).length});function ce(){const s=a.exportConfigs();navigator.clipboard.writeText(s),h.value=!1}function ye(){const s=a.exportConfigs(),o=new Blob([s],{type:"application/json"}),n=URL.createObjectURL(o),c=document.createElement("a");c.href=n,c.download="dev-mode-configs.json",c.click(),URL.revokeObjectURL(n),h.value=!1}function ae(){a.downloadAnnotations()}async function pe(){try{await To(a.currentScreenSpec,a.elementConfigs,{systemName:"System"})}catch(s){console.error("Failed to export xlsx:",s),alert("xlsx export failed. Make sure xlsx package is installed.")}}function x(){try{a.importConfigs(L.value),L.value="",q.value="",_.value=!1}catch{q.value="JSONの形式が正しくありません"}}function E(s){var m;const n=(m=s.target.files)==null?void 0:m[0];if(!n)return;const c=new FileReader;c.onload=P=>{var i;L.value=(i=P.target)==null?void 0:i.result},c.readAsText(n)}function d(){confirm("すべての要素設定を削除しますか？")&&a.clearAllConfigs()}e.ref("/dev-inspector-analysis.json"),e.ref(!1),e.ref(""),e.ref(0),e.ref(!1);const k=[{value:"all",label:"すべて"},{value:"db",label:"DB"},{value:"calculated",label:"計算値"},{value:"storedCalc",label:"保存計算値"},{value:"static",label:"固定"},{value:"conditional",label:"条件付き"},{value:"action",label:"アクション"},{value:"form",label:"フォーム"},{value:"other",label:"その他"}];e.computed(()=>a.getCurrentPageApis());const g=e.computed(()=>a.brokenAnnotations.length);e.watch(()=>a.isPanelOpen,s=>{s&&a.detectBrokenAnnotations()});function O(){confirm(`${g.value}件の壊れたメモを削除しますか？`)&&a.deleteBrokenAnnotations()}const z=e.ref(!1),F=e.ref(null),C=e.ref({table:"",column:"",name:"",columnType:"",description:"",entries:[],transitions:[]}),R=e.computed(()=>Object.keys(a.masterDefinitions).length),se=e.computed(()=>{const s=Object.values(a.masterDefinitions),o={};for(const n of s)o[n.table]||(o[n.table]=[]),o[n.table].push(n);return o});function B(s){if(s){const o=a.getMasterDefinition(s);o&&(F.value=s,C.value={table:o.table,column:o.column,name:o.name,columnType:o.columnType||"",description:o.description||"",entries:[...o.entries.map(n=>({...n}))],transitions:o.transitions?o.transitions.map(n=>({...n})):[]})}else F.value=null,C.value={table:"",column:"",name:"",columnType:"",description:"",entries:[{value:"",label:""}],transitions:[]};z.value=!0}function v(){const s=C.value;if(!s.table||!s.column)return;const o=`${s.table}.${s.column}`,n=s.transitions.filter(m=>m.from||m.to||m.trigger),c={id:o,table:s.table,column:s.column,name:s.name||s.column,columnType:s.columnType||void 0,description:s.description||void 0,entries:s.entries.filter(m=>m.value||m.label),transitions:n.length>0?n:void 0,updatedAt:new Date().toISOString()};a.setMasterDefinition(c),z.value=!1}function f(){C.value.entries.push({value:"",label:""})}function ee(s){C.value.entries.splice(s,1)}function I(){C.value.transitions.push({from:"",to:"",trigger:""})}function ke(s){C.value.transitions.splice(s,1)}function we(s){confirm(`マスタ定義「${s}」を削除しますか？`)&&a.deleteMasterDefinition(s)}const K=e.ref(!1),Y=e.ref(null),N=e.ref({name:"",schedule:"",trigger:"",description:"",inputTables:[],outputTables:[],steps:[],timeout:"",retryPolicy:"",notifyOnError:"",notifyOnComplete:""}),me=e.ref(""),w=e.ref(""),j=e.computed(()=>Object.keys(a.batchDefinitions).length),H=e.computed(()=>Object.values(a.batchDefinitions));function X(s){if(s){const o=a.getBatchDefinition(s);o&&(Y.value=s,N.value={name:o.name,schedule:o.schedule||"",trigger:o.trigger||"",description:o.description||"",inputTables:o.inputTables?[...o.inputTables]:[],outputTables:o.outputTables?[...o.outputTables]:[],steps:o.steps.map(n=>({...n})),timeout:o.timeout||"",retryPolicy:o.retryPolicy||"",notifyOnError:o.notifyOnError||"",notifyOnComplete:o.notifyOnComplete||""})}else Y.value=null,N.value={name:"",schedule:"",trigger:"",description:"",inputTables:[],outputTables:[],steps:[{order:1,description:""}],timeout:"",retryPolicy:"",notifyOnError:"",notifyOnComplete:""};me.value="",w.value="",K.value=!0}function Q(){const s=N.value;if(!s.name)return;const n={id:Y.value||`batch_${s.name.replace(/\s+/g,"_").toLowerCase()}_${Date.now()}`,name:s.name,schedule:s.schedule||void 0,trigger:s.trigger||void 0,description:s.description||void 0,inputTables:s.inputTables.length>0?s.inputTables:void 0,outputTables:s.outputTables.length>0?s.outputTables:void 0,steps:s.steps.filter(c=>c.description).map((c,m)=>({...c,order:m+1})),timeout:s.timeout||void 0,retryPolicy:s.retryPolicy||void 0,notifyOnError:s.notifyOnError||void 0,notifyOnComplete:s.notifyOnComplete||void 0,updatedAt:new Date().toISOString()};a.setBatchDefinition(n),K.value=!1}function te(){const s=N.value.steps.length+1;N.value.steps.push({order:s,description:""})}function be(s){N.value.steps.splice(s,1)}function ue(s){var o;confirm(`バッチ定義「${((o=a.getBatchDefinition(s))==null?void 0:o.name)||s}」を削除しますか？`)&&a.deleteBatchDefinition(s)}function le(){const s=me.value.trim();s&&!N.value.inputTables.includes(s)&&N.value.inputTables.push(s),me.value=""}function qe(s){N.value.inputTables.splice(s,1)}function Ie(){const s=w.value.trim();s&&!N.value.outputTables.includes(s)&&N.value.outputTables.push(s),w.value=""}function Ue(s){N.value.outputTables.splice(s,1)}const $e=[{value:"column",label:"カラム",placeholder:"users.email, orders..."},{value:"api",label:"API",placeholder:"GET /api/users..."},{value:"text",label:"テキスト",placeholder:"メモ、説明文で検索..."}],Le=e.computed(()=>{var s;return((s=$e.find(o=>o.value===a.crossSearchMode))==null?void 0:s.placeholder)||"検索..."}),Be=e.computed(()=>{const s={};for(const o of a.crossSearchResults)s[o.pagePath]||(s[o.pagePath]={pagePath:o.pagePath,pageName:o.pageName,items:[]}),s[o.pagePath].items.push(o);return Object.values(s)}),ve=e.computed(()=>Be.value.length),he=e.computed(()=>{const s=a.unannotatedElements;return{binding:s.filter(o=>o.category==="binding").length,form:s.filter(o=>o.category==="form").length,action:s.filter(o=>o.category==="action").length}});function Ee(){a.showUnannotatedDetection?(a.showUnannotatedDetection=!1,a.unannotatedElements=[],a.hoveredUnannotatedSelector=null):(a.showUnannotatedDetection=!0,a.detectUnannotatedElements())}function ge(s){a.unannotatedElements=a.unannotatedElements.filter(o=>o.selector!==s)}function He(s){a.hoveredUnannotatedSelector=s;try{const o=document.querySelector(s);if(!o)return;const n=o.getBoundingClientRect();(n.bottom<0||n.top>window.innerHeight)&&o.scrollIntoView({behavior:"smooth",block:"center"})}catch{}}function Fe(){a.hoveredUnannotatedSelector=null}function Ce(s){a.hoveredSelector=s;try{const o=document.querySelector(s);if(!o)return;const n=o.getBoundingClientRect();(n.bottom<0||n.top>window.innerHeight)&&o.scrollIntoView({behavior:"smooth",block:"center"})}catch{}}function Pe(){a.hoveredSelector=null}const De=e.computed(()=>typeof window<"u"?window.location.pathname:"/"),Ae=e.computed(()=>{const s=a.screenFlowData,o={};for(const n of s.edges){if(!o[n.from]){const c=s.nodes.find(m=>m.path===n.from)||{path:n.from,name:n.from,annotationCount:0};o[n.from]={node:c,edges:[]}}o[n.from].edges.push(n)}return Object.values(o)});function Te(s){s&&a.startEditing(s)}return(s,o)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.unref(a).isEnabled&&!e.unref(a).isPanelOpen?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:o[0]||(o[0]=(...n)=>e.unref(a).openPanel&&e.unref(a).openPanel(...n)),class:"di-fab",title:"画面仕様を表示","data-dev-inspector":""},[e.createVNode(e.unref(lt),{style:{width:"20px",height:"20px"}})])):e.createCommentVNode("",!0)])),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.unref(a).isEnabled&&e.unref(a).isPanelOpen?(e.openBlock(),e.createElementBlock("div",So,[e.createElementVNode("div",_o,[e.createElementVNode("div",Mo,[e.createVNode(e.unref(Et),{style:{width:"20px",height:"20px",color:"#60a5fa"}}),o[52]||(o[52]=e.createElementVNode("span",null,"Developer Mode",-1))]),e.createElementVNode("button",{onClick:o[1]||(o[1]=(...n)=>e.unref(a).closePanel&&e.unref(a).closePanel(...n)),class:"di-close-btn"},[e.createVNode(e.unref(Me),{style:{width:"20px",height:"20px"}})])]),e.createElementVNode("div",Io,[e.createElementVNode("button",{onClick:o[2]||(o[2]=n=>V.value="elements"),class:e.normalizeClass(["di-tab-btn",{active:V.value==="elements"}])},[e.createVNode(e.unref(Nt),{style:{width:"14px",height:"14px"}}),o[53]||(o[53]=e.createElementVNode("span",null,"要素設定",-1)),G.value>0?(e.openBlock(),e.createElementBlock("span",Uo,e.toDisplayString(G.value),1)):e.createCommentVNode("",!0)],2),e.createElementVNode("button",{onClick:o[3]||(o[3]=n=>V.value="masters"),class:e.normalizeClass(["di-tab-btn",{active:V.value==="masters"}])},[e.createVNode(e.unref(Re),{style:{width:"14px",height:"14px"}}),o[54]||(o[54]=e.createElementVNode("span",null,"マスタ",-1)),R.value>0?(e.openBlock(),e.createElementBlock("span",Lo,e.toDisplayString(R.value),1)):e.createCommentVNode("",!0)],2),e.createElementVNode("button",{onClick:o[4]||(o[4]=n=>V.value="batches"),class:e.normalizeClass(["di-tab-btn",{active:V.value==="batches"}])},[e.createVNode(e.unref(ht),{style:{width:"14px",height:"14px"}}),o[55]||(o[55]=e.createElementVNode("span",null,"バッチ",-1)),j.value>0?(e.openBlock(),e.createElementBlock("span",Fo,e.toDisplayString(j.value),1)):e.createCommentVNode("",!0)],2),e.createElementVNode("button",{onClick:o[5]||(o[5]=n=>V.value="export"),class:e.normalizeClass(["di-tab-btn",{active:V.value==="export"}])},[e.createVNode(e.unref(it),{style:{width:"14px",height:"14px"}}),o[56]||(o[56]=e.createElementVNode("span",null,"出力",-1))],2)]),e.withDirectives(e.createElementVNode("div",Po,[e.createElementVNode("button",{onClick:o[6]||(o[6]=(...n)=>e.unref(a).togglePickMode&&e.unref(a).togglePickMode(...n)),class:e.normalizeClass(["di-pick-btn",{active:e.unref(a).isPickMode}])},[e.createVNode(e.unref(kt),{style:{width:"16px",height:"16px"}}),e.createElementVNode("span",null,e.toDisplayString(e.unref(a).isPickMode?"要素選択中...":"任意の要素にメモを追加"),1)],2),A.value>0?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:o[7]||(o[7]=(...n)=>e.unref(a).toggleNoteHighlights&&e.unref(a).toggleNoteHighlights(...n)),class:e.normalizeClass(["di-note-toggle-btn",{active:e.unref(a).showNoteHighlights}])},[e.unref(a).showNoteHighlights?(e.openBlock(),e.createBlock(e.unref(Vo),{key:0,style:{width:"14px",height:"14px"}})):(e.openBlock(),e.createBlock(e.unref(fo),{key:1,style:{width:"14px",height:"14px"}})),o[57]||(o[57]=e.createElementVNode("span",null,"メモハイライト",-1)),e.createElementVNode("span",Ao,e.toDisplayString(e.unref(a).noteHighlightFilter==="all"?A.value:`${y.value}/${A.value}`),1)],2)):e.createCommentVNode("",!0),A.value>0&&e.unref(a).showNoteHighlights?(e.openBlock(),e.createElementBlock("div",Oo,[e.createElementVNode("div",zo,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(k,n=>e.createElementVNode("button",{key:n.value,onClick:c=>e.unref(a).noteHighlightFilter=n.value,class:e.normalizeClass(["di-filter-btn",{active:e.unref(a).noteHighlightFilter===n.value}])},e.toDisplayString(n.label),11,jo)),64))])])):e.createCommentVNode("",!0),ie.value.length>0?(e.openBlock(),e.createElementBlock("div",qo,[e.createElementVNode("div",Ho,[e.createVNode(e.unref(Nt),{style:{width:"14px",height:"14px",color:"#94a3b8"}}),o[58]||(o[58]=e.createElementVNode("span",null,"登録済み要素",-1)),e.createElementVNode("span",Ro,[e.createTextVNode(e.toDisplayString(ne.value.length),1),ne.value.length!==ie.value.length?(e.openBlock(),e.createElementBlock("span",Ko," / "+e.toDisplayString(ie.value.length),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",Yo,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(ne.value,n=>(e.openBlock(),e.createElementBlock("div",{key:n.id,class:e.normalizeClass(["di-element-item",{"di-element-item-active":e.unref(a).hoveredSelector===n.id}]),onClick:c=>e.unref(a).startEditing(n.id),onMouseenter:c=>Ce(n.id),onMouseleave:Pe},[e.createElementVNode("span",{class:e.normalizeClass(["di-element-type-badge","di-element-type-"+(n.type||"other")])},e.toDisplayString(n.type==="datasource"?"DB":n.type==="action"?"Act":n.type==="form"?"Form":"-"),3),e.createElementVNode("div",Xo,[e.createElementVNode("div",Jo,e.toDisplayString(n.desc),1)])],42,Go))),128))])])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:Ee,class:e.normalizeClass(["di-unannotated-btn",{active:e.unref(a).showUnannotatedDetection}])},[e.createVNode(e.unref(po),{style:{width:"14px",height:"14px"}}),e.createElementVNode("span",null,e.toDisplayString(e.unref(a).showUnannotatedDetection?"未登録検出 ON":"未登録要素を検出"),1),e.unref(a).unannotatedElements.length>0?(e.openBlock(),e.createElementBlock("span",Zo,e.toDisplayString(e.unref(a).unannotatedElements.length),1)):e.createCommentVNode("",!0)],2),e.unref(a).showUnannotatedDetection&&e.unref(a).unannotatedElements.length>0?(e.openBlock(),e.createElementBlock("div",Qo,[e.createElementVNode("div",Wo,[e.createTextVNode(e.toDisplayString(e.unref(a).unannotatedElements.length)+"件検出: ",1),he.value.binding>0?(e.openBlock(),e.createElementBlock("span",el,"バインディング "+e.toDisplayString(he.value.binding),1)):e.createCommentVNode("",!0),he.value.form>0?(e.openBlock(),e.createElementBlock("span",tl," / フォーム "+e.toDisplayString(he.value.form),1)):e.createCommentVNode("",!0),he.value.action>0?(e.openBlock(),e.createElementBlock("span",ol," / アクション "+e.toDisplayString(he.value.action),1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",ll,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a).unannotatedElements,n=>(e.openBlock(),e.createElementBlock("div",{key:n.selector,class:e.normalizeClass(["di-unannotated-item",{"di-unannotated-item-active":e.unref(a).hoveredUnannotatedSelector===n.selector,["di-unannotated-item-"+n.category]:e.unref(a).hoveredUnannotatedSelector===n.selector}]),onMouseenter:c=>He(n.selector),onMouseleave:Fe},[e.createElementVNode("span",{class:e.normalizeClass(["di-unannotated-category","di-unannotated-cat-"+n.category])},e.toDisplayString(n.category==="binding"?"DB":n.category==="form"?"Form":"Act"),3),e.createElementVNode("span",al,e.toDisplayString(n.text||n.tagName),1),e.createElementVNode("button",{onClick:c=>e.unref(a).quickAnnotate(n.selector,n.suggestedType),class:"di-unannotated-register"}," 登録 ",8,il),e.createElementVNode("button",{onClick:c=>ge(n.selector),class:"di-unannotated-dismiss"},[e.createVNode(e.unref(Me),{style:{width:"10px",height:"10px"}})],8,sl)],42,nl))),128))])])):e.createCommentVNode("",!0),e.unref(a).showUnannotatedDetection&&e.unref(a).unannotatedElements.length===0?(e.openBlock(),e.createElementBlock("div",dl," 未登録の要素はありません ")):e.createCommentVNode("",!0),g.value>0?(e.openBlock(),e.createElementBlock("div",rl,[e.createElementVNode("div",cl,[e.createVNode(e.unref(co),{style:{width:"14px",height:"14px",color:"#f59e0b"}}),e.createElementVNode("span",null,e.toDisplayString(g.value)+"件のメモが見つかりません",1)]),o[61]||(o[61]=e.createElementVNode("div",{class:"di-broken-desc"},"コード変更によりセレクタが壊れた可能性があります",-1)),e.createElementVNode("div",ul,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a).brokenAnnotations,n=>{var c,m;return e.openBlock(),e.createElementBlock("div",{key:n,class:"di-broken-item"},[e.createElementVNode("div",ml,[e.createElementVNode("div",pl,e.toDisplayString(((m=(c=e.unref(a).elementConfigs[n])==null?void 0:c.note)==null?void 0:m.text)||"(メモなし)"),1),e.createElementVNode("div",vl,e.toDisplayString(n),1)]),e.createElementVNode("div",fl,[e.createElementVNode("button",{onClick:P=>e.unref(a).startRemap(n),class:"di-broken-remap-btn",title:"新しい要素に再設定"},[e.createVNode(e.unref(kt),{style:{width:"12px",height:"12px"}}),o[59]||(o[59]=e.createTextVNode(" 再設定 ",-1))],8,Vl),e.createElementVNode("button",{onClick:P=>{e.unref(a).deleteElementConfig(n),e.unref(a).detectBrokenAnnotations()},class:"di-broken-item-delete",title:"削除"},[e.createVNode(e.unref(We),{style:{width:"12px",height:"12px"}})],8,hl)])])}),128))]),e.createElementVNode("div",El,[e.createElementVNode("button",{onClick:O,class:"di-broken-delete-btn"},[e.createVNode(e.unref(We),{style:{width:"12px",height:"12px"}}),o[60]||(o[60]=e.createTextVNode(" まとめて削除 ",-1))])])])):e.createCommentVNode("",!0),e.createCommentVNode("",!0)],512),[[e.vShow,V.value==="elements"]]),e.createElementVNode("div",yl,[e.withDirectives(e.createElementVNode("div",null,[M.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("div",kl,[e.createElementVNode("div",Nl,[e.createElementVNode("h2",bl,e.toDisplayString(M.value.name),1),e.createElementVNode("button",{onClick:o[10]||(o[10]=n=>e.unref(a).editingScreen=!0),class:"di-screen-edit-btn",title:"画面情報を編集"},[e.createVNode(e.unref(bt),{style:{width:"14px",height:"14px"}})])]),M.value.description?(e.openBlock(),e.createElementBlock("p",gl,e.toDisplayString(M.value.description),1)):e.createCommentVNode("",!0),M.value.auth?(e.openBlock(),e.createElementBlock("div",xl,[M.value.auth.required?(e.openBlock(),e.createElementBlock("span",wl,[e.createVNode(e.unref(ko),{style:{width:"11px",height:"11px"}}),o[71]||(o[71]=e.createTextVNode(" ログイン必須 ",-1))])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(M.value.auth.roles||[],n=>(e.openBlock(),e.createElementBlock("span",{key:n,class:"di-auth-badge di-auth-role"},[e.createVNode(e.unref(Bo),{style:{width:"11px",height:"11px"}}),e.createTextVNode(" "+e.toDisplayString(n),1)]))),128)),M.value.auth.description?(e.openBlock(),e.createElementBlock("span",Bl,e.toDisplayString(M.value.auth.description),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),M.value.componentPath?(e.openBlock(),e.createElementBlock("div",Cl,[e.createElementVNode("div",$l,[e.createVNode(e.unref(Et),{style:{width:"16px",height:"16px"}}),o[72]||(o[72]=e.createElementVNode("span",null,"Component Path",-1))]),e.createElementVNode("code",Dl,e.toDisplayString(M.value.componentPath),1)])):e.createCommentVNode("",!0),M.value.figmaUrl?(e.openBlock(),e.createElementBlock("div",Tl,[e.createElementVNode("div",Sl,[e.createVNode(e.unref(vo),{style:{width:"16px",height:"16px"}}),o[73]||(o[73]=e.createElementVNode("span",null,"Figma Design",-1))]),e.createElementVNode("a",{href:M.value.figmaUrl,target:"_blank",class:"di-link-purple"},e.toDisplayString(M.value.figmaUrl),9,_l)])):e.createCommentVNode("",!0),M.value.apis.length?(e.openBlock(),e.createElementBlock("div",Ml,[e.createElementVNode("div",Il,[e.createVNode(e.unref(wo),{style:{width:"16px",height:"16px"}}),o[74]||(o[74]=e.createElementVNode("span",null,"API Endpoints",-1))]),e.createElementVNode("div",Ul,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(M.value.apis,(n,c)=>(e.openBlock(),e.createElementBlock("div",{key:c,class:"di-api-item"},[e.createElementVNode("span",{class:"di-method-badge",style:e.normalizeStyle({backgroundColor:Z[n.method]+"20",color:Z[n.method]})},e.toDisplayString(n.method),5),e.createElementVNode("div",Ll,[e.createElementVNode("code",Fl,e.toDisplayString(n.endpoint),1),n.description?(e.openBlock(),e.createElementBlock("p",Pl,e.toDisplayString(n.description),1)):e.createCommentVNode("",!0)]),n.loadTiming?(e.openBlock(),e.createElementBlock("span",Al,e.toDisplayString(n.loadTiming==="onMount"?"読込時":n.loadTiming==="action"?"アクション":"条件付き"),1)):e.createCommentVNode("",!0)]))),128))])])):e.createCommentVNode("",!0),M.value.notes?(e.openBlock(),e.createElementBlock("div",Ol,[e.createElementVNode("div",zl,[e.createVNode(e.unref(ro),{style:{width:"16px",height:"16px"}}),o[75]||(o[75]=e.createElementVNode("span",null,"Notes",-1))]),e.createElementVNode("p",jl,e.toDisplayString(M.value.notes),1)])):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock("div",ql,[e.createVNode(e.unref(lt),{style:{width:"48px",height:"48px",color:"#334155"}}),o[77]||(o[77]=e.createElementVNode("p",null,[e.createTextVNode("この画面の仕様情報は"),e.createElementVNode("br"),e.createTextVNode("まだ登録されていません")],-1)),e.createElementVNode("button",{onClick:o[11]||(o[11]=n=>e.unref(a).editingScreen=!0),class:"di-screen-register-btn"},[e.createVNode(e.unref(bt),{style:{width:"14px",height:"14px"}}),o[76]||(o[76]=e.createTextVNode(" 画面情報を登録 ",-1))])])),e.createElementVNode("div",Hl,[e.createElementVNode("div",Rl,[e.createVNode(e.unref(xo),{style:{width:"14px",height:"14px",color:"#94a3b8"}}),o[78]||(o[78]=e.createElementVNode("span",null,"横断検索",-1))]),o[79]||(o[79]=e.createElementVNode("div",{class:"di-cross-search-desc"},"全画面のメモを横断検索。カラム名・APIエンドポイント・メモ内テキストで絞り込めます。",-1)),e.createElementVNode("div",Kl,[e.createElementVNode("div",Yl,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList($e,n=>e.createElementVNode("button",{key:n.value,onClick:c=>e.unref(a).crossSearchMode=n.value,class:e.normalizeClass(["di-filter-btn",{active:e.unref(a).crossSearchMode===n.value}])},e.toDisplayString(n.label),11,Gl)),64))]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[12]||(o[12]=n=>e.unref(a).crossSearchQuery=n),type:"text",class:"di-cross-search-input",placeholder:Le.value},null,8,Xl),[[e.vModelText,e.unref(a).crossSearchQuery]]),e.unref(a).crossSearchQuery.trim()?(e.openBlock(),e.createElementBlock("div",Jl,e.toDisplayString(e.unref(a).crossSearchResults.length)+"件 ("+e.toDisplayString(ve.value)+"画面) ",1)):e.createCommentVNode("",!0),Be.value.length>0?(e.openBlock(),e.createElementBlock("div",Zl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Be.value,n=>(e.openBlock(),e.createElementBlock("div",{key:n.pagePath,class:"di-cross-search-group"},[e.createElementVNode("div",Ql,[e.createTextVNode(e.toDisplayString(n.pagePath)+" ",1),n.pageName!==n.pagePath?(e.openBlock(),e.createElementBlock("span",Wl,"("+e.toDisplayString(n.pageName)+")",1)):e.createCommentVNode("",!0)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.items,(c,m)=>(e.openBlock(),e.createElementBlock("div",{key:m,class:e.normalizeClass(["di-cross-search-item",c.elementType?"di-cross-item-"+c.elementType:""]),onClick:P=>c.selector&&e.unref(a).startEditing(c.selector)},[e.createElementVNode("span",tn,e.toDisplayString(c.matchedField),1),c.matchContext?(e.openBlock(),e.createElementBlock("span",on,e.toDisplayString(c.matchContext),1)):e.createCommentVNode("",!0)],10,en))),128))]))),128))])):e.createCommentVNode("",!0)])]),e.createElementVNode("div",ln,[e.createElementVNode("button",{onClick:o[13]||(o[13]=n=>e.unref(a).showScreenFlow=!e.unref(a).showScreenFlow),class:e.normalizeClass(["di-screen-flow-toggle",{active:e.unref(a).showScreenFlow}])},[e.createVNode(e.unref(yo),{style:{width:"14px",height:"14px"}}),o[80]||(o[80]=e.createElementVNode("span",null,"画面フロー",-1)),e.unref(a).screenFlowData.edges.length>0?(e.openBlock(),e.createElementBlock("span",nn,e.toDisplayString(e.unref(a).screenFlowData.nodes.length)+"画面 / "+e.toDisplayString(e.unref(a).screenFlowData.edges.length)+"遷移 ",1)):e.createCommentVNode("",!0)],2),e.unref(a).showScreenFlow?(e.openBlock(),e.createElementBlock("div",an,[e.unref(a).screenFlowData.edges.length===0?(e.openBlock(),e.createElementBlock("div",sn," navigate型のアクションが登録されていません ")):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Ae.value,n=>(e.openBlock(),e.createElementBlock("div",{key:n.node.path,class:"di-flow-group"},[e.createElementVNode("div",{class:e.normalizeClass(["di-flow-node",{"di-flow-node-current":n.node.path===De.value}])},[e.createElementVNode("span",dn,e.toDisplayString(n.node.path),1),n.node.name!==n.node.path?(e.openBlock(),e.createElementBlock("span",rn,"("+e.toDisplayString(n.node.name)+")",1)):e.createCommentVNode("",!0)],2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.edges,c=>(e.openBlock(),e.createElementBlock("div",{key:c.from+c.to,class:"di-flow-edge",onClick:m=>Te(c.selector)},[o[81]||(o[81]=e.createElementVNode("span",{class:"di-flow-arrow"},"→",-1)),e.createElementVNode("span",un,e.toDisplayString(c.to),1),c.label?(e.openBlock(),e.createElementBlock("span",mn,"["+e.toDisplayString(c.label)+"]",1)):e.createCommentVNode("",!0)],8,cn))),128))]))),128)),e.unref(a).screenFlowData.orphanPages.length>0?(e.openBlock(),e.createElementBlock("div",pn,[o[82]||(o[82]=e.createElementVNode("div",{class:"di-flow-orphans-header"},"遷移なしのページ",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a).screenFlowData.orphanPages,n=>(e.openBlock(),e.createElementBlock("span",{key:n.path,class:"di-flow-orphan-item"},e.toDisplayString(n.path),1))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])],512),[[e.vShow,V.value==="elements"]]),e.withDirectives(e.createElementVNode("div",null,[e.createElementVNode("div",vn,[e.createElementVNode("div",fn,[e.createVNode(e.unref(Re),{style:{width:"16px",height:"16px",color:"#a78bfa"}}),o[83]||(o[83]=e.createElementVNode("span",null,"マスタ定義",-1)),R.value>0?(e.openBlock(),e.createElementBlock("span",Vn,e.toDisplayString(R.value),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:o[14]||(o[14]=n=>B()),class:"di-btn-icon",style:{"margin-left":"auto"},title:"新規追加"},[e.createVNode(e.unref(Je),{style:{width:"14px",height:"14px"}})])]),R.value>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(se.value,(n,c)=>(e.openBlock(),e.createElementBlock("div",{key:c,class:"di-master-table-group"},[e.createElementVNode("div",hn,e.toDisplayString(c),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n,m=>(e.openBlock(),e.createElementBlock("div",{key:m.id,class:"di-master-item",onClick:P=>B(m.id)},[e.createElementVNode("div",yn,[e.createElementVNode("span",kn,"."+e.toDisplayString(m.column),1),m.columnType?(e.openBlock(),e.createElementBlock("span",Nn,e.toDisplayString(m.columnType),1)):e.createCommentVNode("",!0),e.createElementVNode("span",bn,e.toDisplayString(m.name),1)]),e.createElementVNode("div",gn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.entries.slice(0,5),(P,i)=>(e.openBlock(),e.createElementBlock("span",{key:i,class:"di-master-entry-chip",style:e.normalizeStyle(P.color?{borderColor:P.color,color:P.color}:{})},e.toDisplayString(P.value)+"="+e.toDisplayString(P.label),5))),128)),m.entries.length>5?(e.openBlock(),e.createElementBlock("span",xn,"+"+e.toDisplayString(m.entries.length-5),1)):e.createCommentVNode("",!0)])],8,En))),128))]))),128)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"di-master-empty",onClick:o[15]||(o[15]=n=>B())},[...o[84]||(o[84]=[e.createElementVNode("span",null,"テーブル.カラムのマスタ値を定義",-1)])]))]),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[z.value?(e.openBlock(),e.createElementBlock("div",{key:0,"data-dev-inspector":"",class:"di-modal-overlay",onClick:o[24]||(o[24]=e.withModifiers(n=>z.value=!1,["self"]))},[e.createElementVNode("div",wn,[e.createElementVNode("div",Bn,[e.createElementVNode("h3",null,e.toDisplayString(F.value?"マスタ定義を編集":"新規マスタ定義"),1),e.createElementVNode("button",{onClick:o[16]||(o[16]=n=>z.value=!1),class:"di-close-btn"},[e.createVNode(e.unref(Me),{style:{width:"16px",height:"16px"}})])]),e.createElementVNode("div",Cn,[e.createElementVNode("div",$n,[e.createElementVNode("div",Dn,[o[85]||(o[85]=e.createElementVNode("label",null,"テーブル",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[17]||(o[17]=n=>C.value.table=n),placeholder:"orders",disabled:!!F.value},null,8,Tn),[[e.vModelText,C.value.table]])]),e.createElementVNode("div",Sn,[o[86]||(o[86]=e.createElementVNode("label",null,"カラム",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[18]||(o[18]=n=>C.value.column=n),placeholder:"status",disabled:!!F.value},null,8,_n),[[e.vModelText,C.value.column]])])]),e.createElementVNode("div",Mn,[e.createElementVNode("div",In,[o[87]||(o[87]=e.createElementVNode("label",null,"表示名",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[19]||(o[19]=n=>C.value.name=n),placeholder:"ステータス"},null,512),[[e.vModelText,C.value.name]])]),e.createElementVNode("div",Un,[o[88]||(o[88]=e.createElementVNode("label",null,"型",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[20]||(o[20]=n=>C.value.columnType=n),placeholder:"integer"},null,512),[[e.vModelText,C.value.columnType]])])]),e.createElementVNode("div",Ln,[o[89]||(o[89]=e.createElementVNode("label",null,"説明",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[21]||(o[21]=n=>C.value.description=n),placeholder:"注文のステータスを管理"},null,512),[[e.vModelText,C.value.description]])]),e.createElementVNode("div",Fn,[o[90]||(o[90]=e.createElementVNode("label",null,"マスタ値",-1)),e.createElementVNode("button",{onClick:f,class:"di-btn-icon",title:"追加"},[e.createVNode(e.unref(Je),{style:{width:"14px",height:"14px"}})])]),e.createElementVNode("div",Pn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value.entries,(n,c)=>(e.openBlock(),e.createElementBlock("div",{key:c,class:"di-master-entry-row"},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m=>n.value=m,placeholder:"値",class:"di-master-entry-value"},null,8,An),[[e.vModelText,n.value]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m=>n.label=m,placeholder:"ラベル",class:"di-master-entry-label"},null,8,On),[[e.vModelText,n.label]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m=>n.color=m,placeholder:"#色",class:"di-master-entry-color"},null,8,zn),[[e.vModelText,n.color]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m=>n.description=m,placeholder:"説明",class:"di-master-entry-desc"},null,8,jn),[[e.vModelText,n.description]]),e.createElementVNode("button",{onClick:m=>ee(c),class:"di-btn-icon di-btn-icon-danger"},[e.createVNode(e.unref(Me),{style:{width:"12px",height:"12px"}})],8,qn)]))),128))]),e.createElementVNode("div",Hn,[o[91]||(o[91]=e.createElementVNode("label",null,"状態遷移",-1)),e.createElementVNode("button",{onClick:I,class:"di-btn-icon",title:"遷移を追加"},[e.createVNode(e.unref(Je),{style:{width:"14px",height:"14px"}})])]),C.value.transitions.length>0?(e.openBlock(),e.createElementBlock("div",Rn,[o[95]||(o[95]=e.createElementVNode("div",{class:"di-transition-header"},[e.createElementVNode("span",{class:"di-transition-col-from"},"遷移元"),e.createElementVNode("span",{class:"di-transition-col-arrow"},"→"),e.createElementVNode("span",{class:"di-transition-col-to"},"遷移先"),e.createElementVNode("span",{class:"di-transition-col-trigger"},"トリガー"),e.createElementVNode("span",{class:"di-transition-col-condition"},"条件"),e.createElementVNode("span",{class:"di-transition-col-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value.transitions,(n,c)=>(e.openBlock(),e.createElementBlock("div",{key:c,class:"di-transition-row"},[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":m=>n.from=m,class:"di-transition-select di-transition-col-from"},[o[92]||(o[92]=e.createElementVNode("option",{value:""},"-",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value.entries.filter(m=>m.value),m=>(e.openBlock(),e.createElementBlock("option",{key:m.value,value:m.value},e.toDisplayString(m.label||m.value),9,Yn))),128))],8,Kn),[[e.vModelSelect,n.from]]),o[94]||(o[94]=e.createElementVNode("span",{class:"di-transition-col-arrow"},"→",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":m=>n.to=m,class:"di-transition-select di-transition-col-to"},[o[93]||(o[93]=e.createElementVNode("option",{value:""},"-",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value.entries.filter(m=>m.value),m=>(e.openBlock(),e.createElementBlock("option",{key:m.value,value:m.value},e.toDisplayString(m.label||m.value),9,Xn))),128))],8,Gn),[[e.vModelSelect,n.to]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m=>n.trigger=m,placeholder:"トリガー",class:"di-transition-input di-transition-col-trigger"},null,8,Jn),[[e.vModelText,n.trigger]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m=>n.condition=m,placeholder:"条件",class:"di-transition-input di-transition-col-condition"},null,8,Zn),[[e.vModelText,n.condition]]),e.createElementVNode("button",{onClick:m=>ke(c),class:"di-btn-icon di-btn-icon-danger"},[e.createVNode(e.unref(Me),{style:{width:"12px",height:"12px"}})],8,Qn)]))),128))])):(e.openBlock(),e.createElementBlock("div",Wn," 状態遷移を定義（任意） "))]),e.createElementVNode("div",ea,[F.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:o[22]||(o[22]=n=>{we(F.value),z.value=!1}),class:"di-btn-small di-btn-danger"},"削除")):e.createCommentVNode("",!0),o[96]||(o[96]=e.createElementVNode("div",{style:{flex:"1"}},null,-1)),e.createElementVNode("button",{onClick:o[23]||(o[23]=n=>z.value=!1),class:"di-btn-small"},"キャンセル"),e.createElementVNode("button",{onClick:v,class:"di-btn-small di-btn-primary",disabled:!C.value.table||!C.value.column},"保存",8,ta)])])])):e.createCommentVNode("",!0)]))],512),[[e.vShow,V.value==="masters"]]),e.withDirectives(e.createElementVNode("div",null,[e.createElementVNode("div",oa,[e.createElementVNode("div",la,[e.createVNode(e.unref(ht),{style:{width:"16px",height:"16px",color:"#f59e0b"}}),o[97]||(o[97]=e.createElementVNode("span",null,"バッチ処理",-1)),j.value>0?(e.openBlock(),e.createElementBlock("span",na,e.toDisplayString(j.value),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:o[25]||(o[25]=n=>X()),class:"di-btn-icon",style:{"margin-left":"auto"},title:"新規追加"},[e.createVNode(e.unref(Je),{style:{width:"14px",height:"14px"}})])]),j.value>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(H.value,n=>(e.openBlock(),e.createElementBlock("div",{key:n.id,class:"di-batch-item",onClick:c=>X(n.id)},[e.createElementVNode("div",ia,[e.createElementVNode("div",sa,e.toDisplayString(n.name),1),n.schedule?(e.openBlock(),e.createElementBlock("div",da,e.toDisplayString(n.schedule),1)):e.createCommentVNode("",!0)])],8,aa))),128)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"di-batch-empty",onClick:o[26]||(o[26]=n=>X())},[...o[98]||(o[98]=[e.createElementVNode("span",null,"バッチ処理を定義",-1)])]))]),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[K.value?(e.openBlock(),e.createElementBlock("div",{key:0,"data-dev-inspector":"",class:"di-modal-overlay",onClick:o[42]||(o[42]=e.withModifiers(n=>K.value=!1,["self"]))},[e.createElementVNode("div",ra,[e.createElementVNode("div",ca,[e.createElementVNode("h3",null,e.toDisplayString(Y.value?"バッチ処理を編集":"新規バッチ処理"),1),e.createElementVNode("button",{onClick:o[27]||(o[27]=n=>K.value=!1),class:"di-close-btn"},[e.createVNode(e.unref(Me),{style:{width:"16px",height:"16px"}})])]),e.createElementVNode("div",ua,[e.createElementVNode("div",ma,[e.createElementVNode("div",pa,[o[99]||(o[99]=e.createElementVNode("label",null,"バッチ名 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[28]||(o[28]=n=>N.value.name=n),placeholder:"月次レポート生成"},null,512),[[e.vModelText,N.value.name]])]),e.createElementVNode("div",va,[o[100]||(o[100]=e.createElementVNode("label",null,"スケジュール",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[29]||(o[29]=n=>N.value.schedule=n),placeholder:"毎月1日 AM2:00"},null,512),[[e.vModelText,N.value.schedule]])])]),e.createElementVNode("div",fa,[e.createElementVNode("div",Va,[o[101]||(o[101]=e.createElementVNode("label",null,"手動トリガー",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[30]||(o[30]=n=>N.value.trigger=n),placeholder:"管理画面から実行"},null,512),[[e.vModelText,N.value.trigger]])])]),e.createElementVNode("div",ha,[o[102]||(o[102]=e.createElementVNode("label",null,"説明",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[31]||(o[31]=n=>N.value.description=n),rows:"2",placeholder:"バッチ処理の概要..."},null,512),[[e.vModelText,N.value.description]])]),o[112]||(o[112]=e.createElementVNode("div",{class:"di-batch-section-label"},"入出力テーブル",-1)),e.createElementVNode("div",Ea,[e.createElementVNode("div",ya,[o[103]||(o[103]=e.createElementVNode("label",null,"入力テーブル",-1)),e.createElementVNode("div",ka,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(N.value.inputTables,(n,c)=>(e.openBlock(),e.createElementBlock("span",{key:c,class:"di-batch-tag"},[e.createTextVNode(e.toDisplayString(n)+" ",1),e.createElementVNode("button",{onClick:m=>qe(c),class:"di-batch-tag-remove"},"×",8,Na)]))),128)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[32]||(o[32]=n=>me.value=n),onKeydown:o[33]||(o[33]=e.withKeys(e.withModifiers(n=>le(),["prevent"]),["enter"])),type:"text",placeholder:"テーブル名",class:"di-batch-tag-input"},null,544),[[e.vModelText,me.value]])])]),e.createElementVNode("div",ba,[o[104]||(o[104]=e.createElementVNode("label",null,"出力テーブル",-1)),e.createElementVNode("div",ga,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(N.value.outputTables,(n,c)=>(e.openBlock(),e.createElementBlock("span",{key:c,class:"di-batch-tag"},[e.createTextVNode(e.toDisplayString(n)+" ",1),e.createElementVNode("button",{onClick:m=>Ue(c),class:"di-batch-tag-remove"},"×",8,xa)]))),128)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[34]||(o[34]=n=>w.value=n),onKeydown:o[35]||(o[35]=e.withKeys(e.withModifiers(n=>Ie(),["prevent"]),["enter"])),type:"text",placeholder:"テーブル名",class:"di-batch-tag-input"},null,544),[[e.vModelText,w.value]])])])]),e.createElementVNode("div",wa,[o[105]||(o[105]=e.createTextVNode(" 処理ステップ ",-1)),e.createElementVNode("button",{onClick:te,class:"di-btn-icon",style:{"margin-left":"auto"},title:"ステップ追加"},[e.createVNode(e.unref(Je),{style:{width:"14px",height:"14px"}})])]),N.value.steps.length>0?(e.openBlock(),e.createElementBlock("div",Ba,[o[107]||(o[107]=e.createElementVNode("div",{class:"di-batch-steps-header"},[e.createElementVNode("span",{class:"di-batch-step-no"},"No"),e.createElementVNode("span",{class:"di-batch-step-desc"},"処理内容"),e.createElementVNode("span",{class:"di-batch-step-target"},"対象"),e.createElementVNode("span",{class:"di-batch-step-type"},"種別"),e.createElementVNode("span",{class:"di-batch-step-error"},"エラー処理"),e.createElementVNode("span",{class:"di-batch-step-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(N.value.steps,(n,c)=>(e.openBlock(),e.createElementBlock("div",{key:c,class:"di-batch-step-row"},[e.createElementVNode("span",Ca,e.toDisplayString(c+1),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m=>n.description=m,placeholder:"処理内容",class:"di-batch-step-input di-batch-step-desc"},null,8,$a),[[e.vModelText,n.description]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m=>n.target=m,placeholder:"対象テーブル",class:"di-batch-step-input di-batch-step-target"},null,8,Da),[[e.vModelText,n.target]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":m=>n.type=m,class:"di-batch-step-select di-batch-step-type"},[...o[106]||(o[106]=[e.createElementVNode("option",{value:""},"-",-1),e.createElementVNode("option",{value:"query"},"query",-1),e.createElementVNode("option",{value:"api"},"api",-1),e.createElementVNode("option",{value:"file"},"file",-1),e.createElementVNode("option",{value:"mail"},"mail",-1),e.createElementVNode("option",{value:"other"},"other",-1)])],8,Ta),[[e.vModelSelect,n.type]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":m=>n.errorHandling=m,placeholder:"エラー時",class:"di-batch-step-input di-batch-step-error"},null,8,Sa),[[e.vModelText,n.errorHandling]]),e.createElementVNode("button",{onClick:m=>be(c),class:"di-btn-icon di-btn-icon-danger"},[e.createVNode(e.unref(Me),{style:{width:"12px",height:"12px"}})],8,_a)]))),128))])):e.createCommentVNode("",!0),o[113]||(o[113]=e.createElementVNode("div",{class:"di-batch-section-label"},"運用設定",-1)),e.createElementVNode("div",Ma,[e.createElementVNode("div",Ia,[o[108]||(o[108]=e.createElementVNode("label",null,"タイムアウト",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[36]||(o[36]=n=>N.value.timeout=n),placeholder:"30分"},null,512),[[e.vModelText,N.value.timeout]])]),e.createElementVNode("div",Ua,[o[109]||(o[109]=e.createElementVNode("label",null,"リトライ",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[37]||(o[37]=n=>N.value.retryPolicy=n),placeholder:"3回まで、5分間隔"},null,512),[[e.vModelText,N.value.retryPolicy]])])]),e.createElementVNode("div",La,[e.createElementVNode("div",Fa,[o[110]||(o[110]=e.createElementVNode("label",null,"エラー通知先",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[38]||(o[38]=n=>N.value.notifyOnError=n),placeholder:"admin@example.com"},null,512),[[e.vModelText,N.value.notifyOnError]])]),e.createElementVNode("div",Pa,[o[111]||(o[111]=e.createElementVNode("label",null,"完了通知先",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[39]||(o[39]=n=>N.value.notifyOnComplete=n),placeholder:"manager@example.com"},null,512),[[e.vModelText,N.value.notifyOnComplete]])])])]),e.createElementVNode("div",Aa,[Y.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:o[40]||(o[40]=n=>{ue(Y.value),K.value=!1}),class:"di-btn-small di-btn-danger"},"削除")):e.createCommentVNode("",!0),o[114]||(o[114]=e.createElementVNode("div",{style:{flex:"1"}},null,-1)),e.createElementVNode("button",{onClick:o[41]||(o[41]=n=>K.value=!1),class:"di-btn-small"},"キャンセル"),e.createElementVNode("button",{onClick:Q,class:"di-btn-small di-btn-primary",disabled:!N.value.name},"保存",8,Oa)])])])):e.createCommentVNode("",!0)]))],512),[[e.vShow,V.value==="batches"]]),e.withDirectives(e.createElementVNode("div",null,[e.createElementVNode("div",za,[e.createElementVNode("button",{onClick:ae,class:"di-btn-green"},[e.createVNode(e.unref(Eo),{style:{width:"16px",height:"16px"}}),o[115]||(o[115]=e.createTextVNode(" Git管理用に保存 ",-1))]),e.createElementVNode("button",{onClick:pe,class:"di-btn-blue"},[e.createVNode(e.unref(wt),{style:{width:"16px",height:"16px"}}),o[116]||(o[116]=e.createTextVNode(" 画面仕様書 (xlsx) 出力 ",-1))]),e.createElementVNode("button",{onClick:o[43]||(o[43]=n=>e.unref(a).downloadSddSpec()),class:"di-btn-green-outline"},[e.createVNode(e.unref(lt),{style:{width:"16px",height:"16px"}}),o[117]||(o[117]=e.createTextVNode(" SDD仕様書 (md) ",-1))]),e.createElementVNode("button",{onClick:o[44]||(o[44]=n=>e.unref(a).downloadClientSpec()),class:"di-btn-blue-outline"},[e.createVNode(e.unref(lt),{style:{width:"16px",height:"16px"}}),o[118]||(o[118]=e.createTextVNode(" 納品用仕様書 (md) ",-1))])]),o[126]||(o[126]=e.createElementVNode("p",{class:"di-export-hint"},[e.createTextVNode(" JSON: "),e.createElementVNode("code",null,"dev-annotations.json"),e.createTextVNode(" に配置してcommit ")],-1)),e.createElementVNode("div",ja,[e.createElementVNode("button",{onClick:o[45]||(o[45]=n=>h.value=!0),class:"di-btn-small"},[e.createVNode(e.unref(it),{style:{width:"14px",height:"14px"}}),o[119]||(o[119]=e.createTextVNode(" エクスポート ",-1))]),e.createElementVNode("button",{onClick:o[46]||(o[46]=n=>_.value=!0),class:"di-btn-small"},[e.createVNode(e.unref($o),{style:{width:"14px",height:"14px"}}),o[120]||(o[120]=e.createTextVNode(" インポート ",-1))]),G.value>0?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:d,class:"di-btn-small di-btn-danger"},[e.createVNode(e.unref(We),{style:{width:"14px",height:"14px"}}),o[121]||(o[121]=e.createTextVNode(" 全削除 ",-1))])):e.createCommentVNode("",!0)]),G.value>0||R.value>0||j.value>0?(e.openBlock(),e.createElementBlock("div",qa,[o[125]||(o[125]=e.createElementVNode("div",{class:"di-export-summary-title"},"登録状況",-1)),e.createElementVNode("div",Ha,[o[122]||(o[122]=e.createElementVNode("span",null,"要素設定",-1)),e.createElementVNode("span",Ra,e.toDisplayString(G.value)+"件",1)]),e.createElementVNode("div",Ka,[o[123]||(o[123]=e.createElementVNode("span",null,"マスタ定義",-1)),e.createElementVNode("span",Ya,e.toDisplayString(R.value)+"件",1)]),e.createElementVNode("div",Ga,[o[124]||(o[124]=e.createElementVNode("span",null,"バッチ処理",-1)),e.createElementVNode("span",Xa,e.toDisplayString(j.value)+"件",1)])])):e.createCommentVNode("",!0)],512),[[e.vShow,V.value==="export"]])]),o[127]||(o[127]=e.createElementVNode("div",{class:"di-footer"},[e.createElementVNode("kbd",null,"Ctrl"),e.createElementVNode("span",null,"+"),e.createElementVNode("kbd",null,"Shift"),e.createElementVNode("span",null,"+"),e.createElementVNode("kbd",null,"D"),e.createElementVNode("span",{class:"di-footer-text"},"で開発者モード切替")],-1))])):e.createCommentVNode("",!0)])),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.unref(a).isEnabled?(e.openBlock(),e.createElementBlock("div",Ja,[...o[128]||(o[128]=[e.createElementVNode("span",{class:"di-indicator-dot"},null,-1),e.createTextVNode(" Developer Mode ",-1)])])):e.createCommentVNode("",!0)])),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[h.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"di-modal-overlay",onClick:o[48]||(o[48]=e.withModifiers(n=>h.value=!1,["self"])),"data-dev-inspector":""},[e.createElementVNode("div",Za,[o[130]||(o[130]=e.createElementVNode("h3",{class:"di-modal-title"},"設定をエクスポート",-1)),e.createElementVNode("textarea",{readonly:"",value:e.unref(a).exportConfigs(),class:"di-modal-textarea"},null,8,Qa),e.createElementVNode("div",Wa,[e.createElementVNode("button",{onClick:o[47]||(o[47]=n=>h.value=!1),class:"di-btn-small"},"閉じる"),e.createElementVNode("button",{onClick:ye,class:"di-btn-small di-btn-gray"},[e.createVNode(e.unref(it),{style:{width:"14px",height:"14px"}}),o[129]||(o[129]=e.createTextVNode(" ファイル保存 ",-1))]),e.createElementVNode("button",{onClick:ce,class:"di-btn-small di-btn-primary"},"コピー")])])])):e.createCommentVNode("",!0)])),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[_.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"di-modal-overlay",onClick:o[51]||(o[51]=e.withModifiers(n=>_.value=!1,["self"])),"data-dev-inspector":""},[e.createElementVNode("div",ei,[o[132]||(o[132]=e.createElementVNode("h3",{class:"di-modal-title"},"設定をインポート",-1)),e.createElementVNode("label",ti,[e.createElementVNode("input",{type:"file",accept:".json",onChange:E},null,32),o[131]||(o[131]=e.createElementVNode("span",null,"JSONファイルをドラッグまたはクリック",-1))]),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[49]||(o[49]=n=>L.value=n),placeholder:"またはJSONを直接貼り付け...",class:"di-modal-textarea di-modal-textarea-input"},null,512),[[e.vModelText,L.value]]),q.value?(e.openBlock(),e.createElementBlock("p",oi,e.toDisplayString(q.value),1)):e.createCommentVNode("",!0),e.createElementVNode("div",li,[e.createElementVNode("button",{onClick:o[50]||(o[50]=n=>{_.value=!1,L.value="",q.value=""}),class:"di-btn-small"}," キャンセル "),e.createElementVNode("button",{onClick:x,disabled:!L.value,class:"di-btn-small di-btn-primary"}," インポート ",8,ni)])])])):e.createCommentVNode("",!0)]))],64))}}),at=(T,a)=>{const V=T.__vccOpts||T;for(const[h,_]of a)V[h]=_;return V},Ct=at(ai,[["__scopeId","data-v-842bba81"]]),ii={class:"di-editor-header"},si={class:"di-header-actions"},di={key:0,class:"di-static-indicator"},ri={key:1,class:"di-binding-indicator"},ci={key:0,class:"di-binding-source"},ui={class:"di-editor-tabs"},mi={class:"di-editor-content"},pi={class:"di-form-group"},vi={class:"di-display-type-grid"},fi=["onClick"],Vi={class:"di-display-type-desc"},hi={key:0,class:"di-field-tags"},Ei={class:"di-field-tags-list"},yi={class:"di-field-tag-name"},ki={key:0,class:"di-field-tag-type"},Ni=["onClick"],bi={key:1,class:"di-binding-selector"},gi={class:"di-form-group"},xi={class:"di-form-label"},wi={class:"di-binding-search-wrapper"},Bi={key:0,class:"di-binding-list"},Ci=["onClick"],$i={class:"di-binding-item-main"},Di={class:"di-binding-name"},Ti={class:"di-binding-type"},Si={key:0,class:"di-binding-component"},_i={key:1,class:"di-binding-empty"},Mi={key:2,class:"di-form-divider"},Ii={class:"di-form-row"},Ui={class:"di-form-group di-suggest-wrapper"},Li={key:0,class:"di-suggest-list"},Fi=["onMousedown"],Pi={class:"di-form-group di-suggest-wrapper"},Ai={key:0,class:"di-suggest-list"},Oi=["onMousedown"],zi={class:"di-form-group"},ji=["value"],qi=["disabled"],Hi={key:3,class:"di-master-inline"},Ri={key:0,class:"di-condition-badge",style:{background:"#a78bfa"}},Ki={key:0,class:"di-master-inline-section"},Yi={key:0,class:"di-master-entries-table"},Gi=["onUpdate:modelValue"],Xi=["onUpdate:modelValue"],Ji=["onUpdate:modelValue"],Zi=["onClick"],Qi={key:4,class:"di-form-group"},Wi={class:"di-stored-calc-toggle"},es={key:0,class:"di-condition-badge"},ts={key:5,class:"di-stored-calc-section"},os={class:"di-form-group"},ls={class:"di-form-group di-suggest-wrapper"},ns={class:"di-stored-calc-tags"},as=["onClick"],is={key:0,class:"di-suggest-list"},ss=["onMousedown"],ds={class:"di-form-group"},rs={key:1,class:"di-form-group di-suggest-wrapper"},cs={key:0,class:"di-calc-tag"},us=["onClick"],ms={key:1,class:"di-calc-text"},ps=["placeholder"],vs={key:0,class:"di-suggest-list"},fs=["onMousedown"],Vs={key:2,class:"di-form-group"},hs={class:"di-condition-toggle"},Es={key:0,class:"di-condition-badge"},ys={key:0,class:"di-condition-section"},ks={class:"di-form-group"},Ns={class:"di-form-group di-suggest-wrapper"},bs={class:"di-form-row"},gs={class:"di-form-group"},xs={key:0,class:"di-form-group"},ws={class:"di-form-row"},Bs={class:"di-form-group"},Cs={class:"di-form-group",style:{flex:"0 0 80px"}},$s={class:"di-form-row"},Ds={class:"di-form-group"},Ts={class:"di-form-group"},Ss={class:"di-form-group"},_s={class:"di-form-group"},Ms={class:"di-form-group"},Is={class:"di-form-group"},Us=["placeholder"],Ls={key:0,class:"di-form-group"},Fs={class:"di-form-group"},Ps={class:"di-form-divider"},As={class:"di-csv-file-settings"},Os={class:"di-form-row"},zs={class:"di-form-group"},js={class:"di-form-group"},qs={class:"di-form-row",style:{"align-items":"center"}},Hs={class:"di-csv-checkbox-label"},Rs={class:"di-form-group"},Ks={class:"di-csv-columns-section"},Ys={key:0,class:"di-csv-columns-table"},Gs={class:"di-csv-col-no"},Xs=["onUpdate:modelValue"],Js=["onUpdate:modelValue"],Zs=["onUpdate:modelValue"],Qs=["onUpdate:modelValue"],Ws={class:"di-csv-col-req di-csv-checkbox-center"},ed=["onUpdate:modelValue"],td=["onUpdate:modelValue"],od={class:"di-csv-col-act"},ld=["onClick","disabled"],nd=["onClick","disabled"],ad=["onClick"],id={class:"di-form-group"},sd={class:"di-form-group"},dd={class:"di-form-group"},rd={class:"di-form-group"},cd={class:"di-form-group"},ud={class:"di-form-group"},md={class:"di-csv-error-section"},pd={key:0,class:"di-csv-columns-table"},vd=["onUpdate:modelValue"],fd=["value"],Vd=["onUpdate:modelValue"],hd=["onUpdate:modelValue"],Ed=["onUpdate:modelValue"],yd=["onClick"],kd={class:"di-form-divider"},Nd={class:"di-form-row"},bd={class:"di-form-group"},gd={class:"di-form-group"},xd={class:"di-form-row"},wd={class:"di-form-group"},Bd={class:"di-form-group"},Cd={class:"di-form-group"},$d={class:"di-form-group"},Dd={class:"di-form-group"},Td={class:"di-form-group"},Sd={class:"di-email-variables-input"},_d=["onClick"],Md={class:"di-form-group"},Id={class:"di-form-group"},Ud={class:"di-form-group"},Ld={class:"di-form-group"},Fd={class:"di-form-group"},Pd={key:0,class:"di-field-tags"},Ad={class:"di-field-tags-list"},Od={class:"di-field-tag-name"},zd={key:0,class:"di-field-tag-type"},jd=["onClick"],qd={key:1,class:"di-binding-selector"},Hd={class:"di-form-group"},Rd={class:"di-form-label"},Kd={class:"di-binding-search-wrapper"},Yd={key:0,class:"di-binding-list"},Gd=["onClick"],Xd={class:"di-binding-item-main"},Jd={class:"di-binding-name"},Zd={class:"di-binding-type"},Qd={key:0,class:"di-binding-component"},Wd={key:2,class:"di-master-inline"},er={key:0,class:"di-condition-badge",style:{background:"#a78bfa"}},tr={key:0,class:"di-master-inline-section"},or={key:0,class:"di-master-entries-table"},lr=["onUpdate:modelValue"],nr=["onUpdate:modelValue"],ar=["onUpdate:modelValue"],ir=["onClick"],sr={class:"di-condition-toggle"},dr={key:0,class:"di-condition-badge"},rr={class:"di-form-group di-suggest-wrapper"},cr={class:"di-calc-tags-input"},ur=["onClick"],mr=["placeholder"],pr={class:"di-form-group"},vr={class:"di-form-group"},fr={class:"di-form-group"},Vr={class:"di-form-group"},hr={class:"di-editor-footer"},Er={class:"di-editor-actions"},yr=e.defineComponent({__name:"DevElementEditor",setup(T){const a=Ge.useDevInspectorStore(),V=e.ref("datasource"),h=e.ref(""),_=e.ref(""),L=e.ref(""),q=e.ref(""),Z=e.ref(""),W=e.ref(!1),$=e.ref([]),M=e.ref(""),G=e.ref(""),ie=e.ref(""),ne=e.ref(""),A=e.ref([]),y=e.ref("UTF-8"),ce=e.ref(","),ye=e.ref(!0),ae=e.ref(""),pe=e.ref(""),x=e.ref(""),E=e.ref(void 0),d=e.ref(""),k=e.ref(""),g=e.ref(""),O=e.ref([]),z=e.ref(""),F=e.ref(""),C=e.ref(""),R=e.ref(""),se=e.ref(""),B=e.ref(""),v=e.ref(""),f=e.ref([]),ee=e.ref(""),I=e.ref(""),ke=e.ref(""),we=e.ref(""),K=e.ref(!1),Y=e.ref([]),N=e.computed(()=>{if(j.value.length>0){const r=j.value[0];if(r.table&&r.column)return`${r.table}.${r.column}`}return""}),me=e.computed(()=>N.value&&a.getMasterDefinition(N.value)||null),w=e.ref("db_direct"),j=e.ref([]),H=e.ref(""),X=e.ref(""),Q=e.ref(""),te=e.ref(""),be=e.ref(""),ue=e.ref([]),le=e.ref(""),qe=e.ref(!1),Ie=e.ref(""),Ue=e.ref(""),$e=e.ref(""),Le=e.ref(""),Be=e.ref(""),ve=e.ref(!1),he=e.ref(""),Ee=e.ref([]),ge=e.ref(""),He=e.ref(!1),Fe=e.ref(""),Ce=e.ref(""),Pe=e.ref(""),De=e.ref(""),Ae=e.ref(""),Te=e.ref(!1),s=e.ref(""),o=e.ref(""),n=e.ref(""),c=e.ref(!1),m=e.computed(()=>a.editingElementId!==null),P=e.computed(()=>a.editingElementId),i=e.computed(()=>h.value==="csv_export"||h.value==="csv_import"),Se=e.computed(()=>h.value==="email"),Oe=e.computed(()=>i.value||Se.value),U=[{value:"db_direct",label:"DBカラム (そのまま)",icon:Re,color:"#3b82f6",description:"DBの値をそのまま表示"},{value:"db_formatted",label:"DBカラム (整形)",icon:nt,color:"#8b5cf6",description:"DBの値を整形して表示"},{value:"calculated",label:"計算値",icon:Vt,color:"#f59e0b",description:"複数カラムから計算"},{value:"static",label:"固定文言",icon:Co,color:"#10b981",description:"コード内の固定テキスト"},{value:"other",label:"その他メモ",icon:bo,color:"#94a3b8",description:"自由メモ"}];e.watch(P,r=>{if(r){const t=a.getElementConfig(r);try{const l=document.querySelector(r);if(l){t!=null&&t.elementType?V.value=t.elementType:V.value=a.detectElementType(l);const u=l.querySelector("[data-di-binding]")||(l.hasAttribute("data-di-binding")?l:null)||l.closest("[data-di-binding]");if(u){const p=u.getAttribute("data-di-binding"),D=u.getAttribute("data-di-db"),re=u.getAttribute("data-di-db-type"),Xe=u.getAttribute("data-di-db-comment");if(p&&(n.value=p,o.value="api",c.value=!1),D){const[vt,ft]=D.split(".");vt&&ft&&(j.value.push({table:vt,column:ft,type:re||void 0,description:Xe||void 0}),w.value||(w.value="db_direct"))}}}}catch(l){console.warn("[DevInspector] Failed to read element:",l)}if(t!=null&&t.fieldInfoList&&t.fieldInfoList.length>0?j.value=t.fieldInfoList.map(l=>({...l})):t!=null&&t.fieldInfo&&(j.value=[{...t.fieldInfo}]),H.value="",X.value="",Q.value="",te.value="",t!=null&&t.note&&(s.value=t.note.text||s.value,w.value=t.note.displayType||w.value,be.value=t.note.formatDescription||"",Ie.value=t.note.sampleValue||"",Ue.value=t.note.decimalHandling||"",$e.value=t.note.unit||"",Le.value=t.note.nullDisplay||"",Be.value=t.note.displayFormat||"",Rt(t.note.calcDescription||"",t.note.calcSources||[]),ve.value=t.note.storedCalc||!1,he.value=t.note.storedCalcLogic||"",Ee.value=t.note.storedCalcSources?[...t.note.storedCalcSources]:[],Fe.value=t.note.storedCalcTiming||"",Ce.value=t.note.condition||"",Pe.value=t.note.conditionColumn||"",De.value=t.note.hiddenBehavior||"",Ae.value=t.note.hiddenNote||"",Te.value=!!(t.note.condition||t.note.conditionColumn)),t!=null&&t.sourceBinding&&(o.value=t.sourceBinding.type||o.value,n.value=t.sourceBinding.source||n.value,c.value=t.sourceBinding.isStatic||!1),t!=null&&t.actionInfo){if(h.value=t.actionInfo.type||"",_.value=t.actionInfo.target||"",L.value=t.actionInfo.method||"",q.value=t.actionInfo.description||"",t.actionInfo.csvSpec){const l=t.actionInfo.csvSpec;A.value=l.columns.map(u=>({...u})),y.value=l.encoding||"UTF-8",ce.value=l.delimiter||",",ye.value=l.hasHeaderRow!==!1,ae.value=l.filenamePattern||"",pe.value=l.sortOrder||"",x.value=l.filterCondition||"",E.value=l.maxRows,d.value=l.errorHandling||"",k.value=l.duplicateHandling||"",g.value=l.preValidation||"",O.value=l.errorDefs?l.errorDefs.map(u=>({...u})):[]}if(t.actionInfo.emailSpec){const l=t.actionInfo.emailSpec;z.value=l.trigger||"",F.value=l.to||"",C.value=l.cc||"",R.value=l.bcc||"",se.value=l.subject||"",B.value=l.bodyTemplate||"",v.value=l.templatePath||"",f.value=l.variables?[...l.variables]:[],I.value=l.attachments||"",ke.value=l.conditions||"",we.value=l.errorHandling||""}}t!=null&&t.formInfo&&(Z.value=t.formInfo.inputType||"",W.value=t.formInfo.required||!1,$.value=t.formInfo.validation?[...t.formInfo.validation]:[],G.value=t.formInfo.placeholder||"",ie.value=t.formInfo.defaultValue||"",ne.value=t.formInfo.description||"")}else J()});function J(){V.value="datasource",w.value="db_direct",j.value=[],H.value="",X.value="",Q.value="",te.value="",be.value="",Ie.value="",Ue.value="",$e.value="",Le.value="",Be.value="",ue.value=[],le.value="",ve.value=!1,he.value="",Ee.value=[],ge.value="",Fe.value="",Ce.value="",Pe.value="",De.value="",Ae.value="",Te.value=!1,s.value="",o.value="",n.value="",c.value=!1,h.value="",_.value="",L.value="",q.value="",A.value=[],y.value="UTF-8",ce.value=",",ye.value=!0,ae.value="",pe.value="",x.value="",E.value=void 0,d.value="",k.value="",g.value="",O.value=[],Z.value="",W.value=!1,$.value=[],M.value="",G.value="",ie.value="",ne.value="",z.value="",F.value="",C.value="",R.value="",se.value="",B.value="",v.value="",f.value=[],ee.value="",I.value="",ke.value="",we.value="",K.value=!1,Y.value=[]}function Ne(){a.stopEditing(),J()}function je(){if(P.value)try{const r=document.querySelector(P.value);if(!r)return;const t=a.autoDetectElementInfo(r,P.value);t.sourceBinding&&(o.value=t.sourceBinding.type||"",n.value=t.sourceBinding.source||"",c.value=t.sourceBinding.isStatic||!1,t.sourceBinding.isStatic&&!w.value&&(w.value="static",s.value=s.value||"固定文言")),t.fieldInfo&&(j.value.push({table:t.fieldInfo.table||"",column:t.fieldInfo.column||"",type:t.fieldInfo.type||void 0,description:t.fieldInfo.description||void 0}),w.value||(w.value="db_direct")),t.note&&!s.value&&(s.value=t.note.text||"")}catch(r){console.error("[DevInspector] Auto-detect failed:",r)}}function Ze(){if(!P.value)return;const r=[...j.value];(w.value==="db_direct"||w.value==="db_formatted")&&H.value&&X.value&&r.push({table:H.value,column:X.value,type:Q.value||void 0,description:te.value||void 0});const t=r.length>0?r:void 0,l=r.length>0?r[0]:void 0,u=w.value==="db_direct"||w.value==="db_formatted",p=w.value||s.value?{text:s.value||"",displayType:w.value,formatDescription:w.value==="db_formatted"&&be.value||void 0,calcDescription:w.value==="calculated"&&Ht()||void 0,calcSources:w.value==="calculated"&&rt().length>0?rt():void 0,storedCalc:u&&ve.value?!0:void 0,storedCalcLogic:u&&ve.value&&he.value||void 0,storedCalcSources:u&&ve.value&&Ee.value.length>0?Ee.value:void 0,storedCalcTiming:u&&ve.value&&Fe.value||void 0,sampleValue:Ie.value||void 0,decimalHandling:Ue.value||void 0,unit:$e.value||void 0,nullDisplay:Le.value||void 0,displayFormat:Be.value||void 0,condition:Ce.value||void 0,conditionColumn:Pe.value||void 0,hiddenBehavior:De.value||void 0,hiddenNote:Ae.value||void 0}:void 0,D=o.value?{type:o.value,source:n.value||void 0,isStatic:c.value}:void 0,re=V.value==="action"&&h.value?{type:h.value,target:_.value||void 0,method:L.value?L.value:void 0,description:q.value||void 0,csvSpec:eo(),emailSpec:to()}:void 0,Xe=V.value==="form"?{inputType:Z.value||void 0,required:W.value||void 0,validation:$.value.length>0?$.value:void 0,placeholder:G.value||void 0,defaultValue:ie.value||void 0,description:ne.value||void 0}:void 0;a.setElementConfig(P.value,{elementType:V.value,fieldInfo:l,fieldInfoList:t,actionInfo:re,formInfo:Xe,note:p,sourceBinding:D}),K.value&&N.value&&ao(),Ne()}function et(){P.value&&(a.deleteElementConfig(P.value),Ne())}const Ke=["string","text","integer","bigint","float","decimal","boolean","date","datetime","time","timestamp","binary","json","jsonb","VARCHAR","TEXT","INT","BIGINT","BOOLEAN","DATE","DATETIME","TIMESTAMP","JSON"],fe=e.ref(""),ze=e.ref(!1),Ye=e.computed(()=>a.searchSchemaColumns(fe.value).slice(0,30));function tt(r){j.value.push({table:r.table,column:r.column,type:r.type||void 0,description:r.comment||void 0}),ze.value=!1,fe.value=""}function b(){!H.value||!X.value||(j.value.push({table:H.value,column:X.value,type:Q.value||void 0,description:te.value||void 0}),H.value="",X.value="",Q.value="",te.value="")}function de(r){j.value.splice(r,1)}const Ve=e.computed(()=>a.getSchemaColumns().length>0),xe=e.ref(!1),_e=e.ref(!1),oe=e.computed(()=>{var u;const r=new Set;for(const p of Object.values(a.elementConfigs))if(p.fieldInfoList)for(const D of p.fieldInfoList)D.table&&r.add(D.table);else(u=p.fieldInfo)!=null&&u.table&&r.add(p.fieldInfo.table);for(const p of a.getSchemaColumns())r.add(p.table);const t=[...r].sort();if(!H.value)return t;const l=H.value.toLowerCase();return t.filter(p=>p.toLowerCase().includes(l))}),Qe=e.computed(()=>{var u;const r=new Set;for(const p of Object.values(a.elementConfigs))if(p.fieldInfoList)for(const D of p.fieldInfoList)D.column&&(!H.value||D.table===H.value)&&r.add(D.column);else(u=p.fieldInfo)!=null&&u.column&&(!H.value||p.fieldInfo.table===H.value)&&r.add(p.fieldInfo.column);for(const p of a.getSchemaColumns())(!H.value||p.table===H.value)&&r.add(p.column);const t=[...r].sort();if(!X.value)return t;const l=X.value.toLowerCase();return t.filter(p=>p.toLowerCase().includes(l))});function Mt(){setTimeout(()=>{xe.value=!1},150)}function It(){setTimeout(()=>{_e.value=!1},150)}function Ut(r){if(H.value=r,xe.value=!1,X.value){const t=a.getSchemaColumns().find(l=>l.table===r&&l.column===X.value);t&&(Q.value=t.type||"",te.value=t.comment||"")}}function Lt(r){if(X.value=r,_e.value=!1,H.value){const t=a.getSchemaColumns().find(l=>l.table===H.value&&l.column===r);t&&(Q.value=t.type||"",te.value=t.comment||"")}}const st=e.computed(()=>{var u,p;const r=new Set;for(const D of Object.values(a.elementConfigs))if(D.fieldInfoList)for(const re of D.fieldInfoList)re.table&&re.column&&r.add(`${re.table}.${re.column}`);else(u=D.fieldInfo)!=null&&u.table&&((p=D.fieldInfo)!=null&&p.column)&&r.add(`${D.fieldInfo.table}.${D.fieldInfo.column}`);for(const D of a.getSchemaColumns())r.add(D.fullName);const t=[...r].sort();if(!le.value)return t;const l=le.value.trim().toLowerCase();if(/^[a-z0-9_.]+$/i.test(l)){const D=t.filter(re=>re.toLowerCase().includes(l));if(D.length>0)return D}return t});function Ft(r){le.value.trim()&&ue.value.push({type:"text",value:le.value}),ue.value.push({type:"tag",value:r}),le.value=""}function Pt(r){ue.value.splice(r,1)}function At(r){if(r.key==="Backspace"&&!le.value&&ue.value.length>0){const t=ue.value.pop();t.type==="text"&&(le.value=t.value)}}function Ot(){setTimeout(()=>{qe.value=!1},150)}const dt=e.computed(()=>{var u,p;const r=new Set;for(const D of a.getSchemaColumns())r.add(D.fullName);for(const D of Object.values(a.elementConfigs))if(D.fieldInfoList)for(const re of D.fieldInfoList)re.table&&re.column&&r.add(`${re.table}.${re.column}`);else(u=D.fieldInfo)!=null&&u.table&&((p=D.fieldInfo)!=null&&p.column)&&r.add(`${D.fieldInfo.table}.${D.fieldInfo.column}`);const t=[...r].sort();if(!ge.value)return t;const l=ge.value.trim().toLowerCase();return t.filter(D=>D.toLowerCase().includes(l))});function zt(){setTimeout(()=>{He.value=!1},150)}function jt(){const r=ge.value.trim();r&&!Ee.value.includes(r)&&Ee.value.push(r),ge.value=""}function qt(r){Ee.value.includes(r)||Ee.value.push(r),ge.value=""}function Ht(){const r=ue.value.map(t=>t.value);return le.value.trim()&&r.push(le.value.trim()),r.join(" ").replace(/\s+/g," ").trim()}function rt(){return ue.value.filter(r=>r.type==="tag").map(r=>r.value)}function Rt(r,t){if(!r&&t.length===0){ue.value=[],le.value="";return}if(t.length===0){ue.value=[],le.value=r;return}const l=[];let u=r;for(const D of t){const re=u.indexOf(D);if(re>=0){const Xe=u.substring(0,re).trim();Xe&&l.push({type:"text",value:Xe}),l.push({type:"tag",value:D}),u=u.substring(re+D.length)}}const p=u.trim();p&&l.push({type:"text",value:p}),l.length===0?le.value=r:(ue.value=l,le.value="")}function Kt(){const r=M.value.trim();r&&!$.value.includes(r)&&$.value.push(r),M.value=""}function Yt(r){$.value.splice(r,1)}function Gt(r){r.key==="Backspace"&&!M.value&&$.value.length>0&&$.value.pop()}function Xt(){A.value.push({name:"",dbMapping:"",type:"string",required:!1,description:""})}function Jt(r){A.value.splice(r,1)}function ct(r,t){const l=r+t;if(l<0||l>=A.value.length)return;const u=A.value[r];A.value[r]=A.value[l],A.value[l]=u,A.value=[...A.value]}function Zt(){O.value.push({condition:"",message:"",column:"",severity:"error"})}function Qt(r){O.value.splice(r,1)}const Wt=e.computed(()=>A.value.filter(r=>r.name).map(r=>r.name));function eo(){if(h.value!=="csv_export"&&h.value!=="csv_import")return;const r=O.value.filter(t=>t.condition||t.message);return{columns:A.value.filter(t=>t.name),encoding:y.value||void 0,delimiter:ce.value||void 0,hasHeaderRow:ye.value,filenamePattern:ae.value||void 0,sortOrder:pe.value||void 0,filterCondition:x.value||void 0,maxRows:E.value||void 0,errorHandling:d.value||void 0,duplicateHandling:k.value||void 0,preValidation:g.value||void 0,errorDefs:r.length>0?r:void 0}}function to(){if(h.value==="email")return{trigger:z.value||"",to:F.value||"",cc:C.value||void 0,bcc:R.value||void 0,subject:se.value||"",bodyTemplate:B.value||void 0,templatePath:v.value||void 0,variables:f.value.length>0?f.value:void 0,attachments:I.value||void 0,conditions:ke.value||void 0,errorHandling:we.value||void 0}}function oo(){const r=ee.value.trim();r&&!f.value.includes(r)&&f.value.push(r),ee.value=""}function lo(r){f.value.splice(r,1)}function no(r){r.key==="Backspace"&&!ee.value&&f.value.length>0&&f.value.pop()}e.watch(N,r=>{if(r){const t=a.getMasterDefinition(r);t?(Y.value=t.entries.map(l=>({...l})),K.value=!0):(Y.value=[],K.value=!1)}else Y.value=[],K.value=!1});function ut(){K.value=!K.value,K.value&&Y.value.length===0&&Y.value.push({value:"",label:""})}function mt(){Y.value.push({value:"",label:""})}function pt(r){Y.value.splice(r,1)}function ao(){var p;if(!N.value)return;const[r,t]=N.value.split(".");if(!r||!t)return;const l=Y.value.filter(D=>D.value||D.label);if(l.length===0){a.deleteMasterDefinition(N.value);return}const u=a.getMasterDefinition(N.value);a.setMasterDefinition({id:N.value,table:r,column:t,name:(u==null?void 0:u.name)||t,columnType:(u==null?void 0:u.columnType)||((p=j.value[0])==null?void 0:p.type),description:u==null?void 0:u.description,entries:l,updatedAt:new Date().toISOString()})}return(r,t)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[m.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"di-editor-overlay",onClick:e.withModifiers(Ne,["self"]),"data-dev-inspector":""},[e.createElementVNode("div",{class:e.normalizeClass(["di-editor-modal",{"di-editor-modal-wide":Oe.value}])},[e.createElementVNode("div",ii,[t[74]||(t[74]=e.createElementVNode("h3",null,"要素情報を編集",-1)),e.createElementVNode("div",si,[e.createElementVNode("button",{onClick:je,class:"di-btn-auto",title:"自動検出"},[e.createVNode(e.unref(nt),{style:{width:"16px",height:"16px"}})]),e.createElementVNode("button",{onClick:Ne,class:"di-editor-close"},[e.createVNode(e.unref(Me),{style:{width:"20px",height:"20px"}})])])]),c.value?(e.openBlock(),e.createElementBlock("div",di,[...t[75]||(t[75]=[e.createElementVNode("span",{class:"di-static-badge"},"固定文言",-1),e.createElementVNode("span",{class:"di-static-hint"},"このテキストはソースコードに直接記述されています",-1)])])):o.value?(e.openBlock(),e.createElementBlock("div",ri,[e.createElementVNode("span",{class:e.normalizeClass(["di-binding-badge","di-binding-"+o.value])},e.toDisplayString(o.value),3),n.value?(e.openBlock(),e.createElementBlock("span",ci,e.toDisplayString(n.value),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",ui,[e.createElementVNode("button",{onClick:t[0]||(t[0]=l=>V.value="datasource"),class:e.normalizeClass(["di-editor-tab",{"di-editor-tab-active":V.value==="datasource"}])},[e.createVNode(e.unref(Re),{style:{width:"14px",height:"14px"}}),t[76]||(t[76]=e.createTextVNode(" データソース ",-1))],2),e.createElementVNode("button",{onClick:t[1]||(t[1]=l=>V.value="action"),class:e.normalizeClass(["di-editor-tab",{"di-editor-tab-active":V.value==="action"}])},[e.createVNode(e.unref(Do),{style:{width:"14px",height:"14px"}}),t[77]||(t[77]=e.createTextVNode(" アクション ",-1))],2),e.createElementVNode("button",{onClick:t[2]||(t[2]=l=>V.value="form"),class:e.normalizeClass(["di-editor-tab",{"di-editor-tab-active":V.value==="form"}])},[e.createVNode(e.unref(ho),{style:{width:"14px",height:"14px"}}),t[78]||(t[78]=e.createTextVNode(" フォーム ",-1))],2)]),e.createElementVNode("div",mi,[V.value==="datasource"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("div",pi,[t[79]||(t[79]=e.createElementVNode("label",{class:"di-form-label"},"表示タイプ",-1)),e.createElementVNode("div",vi,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(U,l=>e.createElementVNode("button",{key:l.value,onClick:u=>w.value=l.value,class:e.normalizeClass(["di-display-type-card",{"di-display-type-active":w.value===l.value}]),style:e.normalizeStyle(w.value===l.value?{borderColor:l.color,background:l.color+"18"}:{})},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.icon),{style:e.normalizeStyle([{width:"20px",height:"20px"},{color:w.value===l.value?l.color:"#64748b"}])},null,8,["style"])),e.createElementVNode("span",{class:"di-display-type-label",style:e.normalizeStyle({color:w.value===l.value?l.color:"#94a3b8"})},e.toDisplayString(l.label),5),e.createElementVNode("span",Vi,e.toDisplayString(l.description),1)],14,fi)),64))])]),w.value==="db_direct"||w.value==="db_formatted"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[j.value.length>0?(e.openBlock(),e.createElementBlock("div",hi,[t[80]||(t[80]=e.createElementVNode("label",{class:"di-form-label"},"登録済みカラム",-1)),e.createElementVNode("div",Ei,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(j.value,(l,u)=>(e.openBlock(),e.createElementBlock("div",{key:u,class:"di-field-tag"},[e.createElementVNode("span",yi,e.toDisplayString(l.table)+"."+e.toDisplayString(l.column),1),l.type?(e.openBlock(),e.createElementBlock("span",ki,e.toDisplayString(l.type),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:p=>de(u),class:"di-field-tag-remove"},"×",8,Ni)]))),128))])])):e.createCommentVNode("",!0),Ve.value?(e.openBlock(),e.createElementBlock("div",bi,[e.createElementVNode("div",gi,[e.createElementVNode("label",xi,[e.createVNode(e.unref(Re),{style:{width:"12px",height:"12px",display:"inline","vertical-align":"middle"}}),t[81]||(t[81]=e.createTextVNode(" schema.rb から選択 ",-1))]),e.createElementVNode("div",wi,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>fe.value=l),onFocus:t[4]||(t[4]=l=>ze.value=!0),type:"text",placeholder:"テーブル.カラムを検索... (例: users, email)",class:"di-input di-binding-search"},null,544),[[e.vModelText,fe.value]]),fe.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:t[5]||(t[5]=l=>{fe.value="",ze.value=!1}),class:"di-binding-clear"},[e.createVNode(e.unref(Me),{style:{width:"14px",height:"14px"}})])):e.createCommentVNode("",!0)]),ze.value&&Ye.value.length>0?(e.openBlock(),e.createElementBlock("div",Bi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Ye.value,l=>(e.openBlock(),e.createElementBlock("button",{key:l.fullName,onClick:u=>tt(l),class:"di-binding-item has-db"},[e.createElementVNode("div",$i,[e.createElementVNode("span",Di,e.toDisplayString(l.fullName),1),e.createElementVNode("span",Ti,e.toDisplayString(l.type),1)]),l.comment?(e.openBlock(),e.createElementBlock("span",Si,e.toDisplayString(l.comment),1)):e.createCommentVNode("",!0)],8,Ci))),128))])):ze.value&&fe.value&&Ye.value.length===0?(e.openBlock(),e.createElementBlock("div",_i," 該当するカラムが見つかりません ")):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0),Ve.value?(e.openBlock(),e.createElementBlock("div",Mi,[...t[82]||(t[82]=[e.createElementVNode("span",null,"または手動入力",-1)])])):e.createCommentVNode("",!0),e.createElementVNode("div",Ii,[e.createElementVNode("div",Ui,[t[83]||(t[83]=e.createElementVNode("label",{class:"di-form-label"},"テーブル名 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>H.value=l),onFocus:t[7]||(t[7]=l=>xe.value=!0),onBlur:t[8]||(t[8]=l=>Mt()),type:"text",placeholder:"users",class:"di-input",autocomplete:"off"},null,544),[[e.vModelText,H.value]]),xe.value&&oe.value.length>0?(e.openBlock(),e.createElementBlock("div",Li,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(oe.value.slice(0,10),l=>(e.openBlock(),e.createElementBlock("button",{key:l,onMousedown:e.withModifiers(u=>Ut(l),["prevent"]),class:"di-suggest-item"},e.toDisplayString(l),41,Fi))),128))])):e.createCommentVNode("",!0)]),e.createElementVNode("div",Pi,[t[84]||(t[84]=e.createElementVNode("label",{class:"di-form-label"},"カラム名 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>X.value=l),onFocus:t[10]||(t[10]=l=>_e.value=!0),onBlur:t[11]||(t[11]=l=>It()),type:"text",placeholder:"name",class:"di-input",autocomplete:"off"},null,544),[[e.vModelText,X.value]]),_e.value&&Qe.value.length>0?(e.openBlock(),e.createElementBlock("div",Ai,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Qe.value.slice(0,10),l=>(e.openBlock(),e.createElementBlock("button",{key:l,onMousedown:e.withModifiers(u=>Lt(l),["prevent"]),class:"di-suggest-item"},e.toDisplayString(l),41,Oi))),128))])):e.createCommentVNode("",!0)])]),e.createElementVNode("div",zi,[t[86]||(t[86]=e.createElementVNode("label",{class:"di-form-label"},"データ型",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[12]||(t[12]=l=>Q.value=l),class:"di-select"},[t[85]||(t[85]=e.createElementVNode("option",{value:""},"選択してください",-1)),(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(Ke,l=>e.createElementVNode("option",{key:l,value:l},e.toDisplayString(l),9,ji)),64))],512),[[e.vModelSelect,Q.value]])]),e.createElementVNode("button",{onClick:b,class:"di-btn-add-field",disabled:!H.value||!X.value}," + カラムを追加 ",8,qi),N.value?(e.openBlock(),e.createElementBlock("div",Hi,[e.createElementVNode("button",{onClick:ut,class:e.normalizeClass(["di-btn-condition-toggle",{"di-condition-active":K.value}])},[e.createVNode(e.unref(yt),{style:{width:"14px",height:"14px"}}),t[87]||(t[87]=e.createTextVNode(" マスタ値を定義 ",-1)),me.value?(e.openBlock(),e.createElementBlock("span",Ri,e.toDisplayString(me.value.entries.length)+"件",1)):e.createCommentVNode("",!0)],2),K.value?(e.openBlock(),e.createElementBlock("div",Ki,[Y.value.length>0?(e.openBlock(),e.createElementBlock("div",Yi,[t[88]||(t[88]=e.createElementVNode("div",{class:"di-master-entries-header"},[e.createElementVNode("span",{class:"di-master-col-val"},"値"),e.createElementVNode("span",{class:"di-master-col-lbl"},"ラベル"),e.createElementVNode("span",{class:"di-master-col-color"},"色"),e.createElementVNode("span",{class:"di-master-col-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Y.value,(l,u)=>(e.openBlock(),e.createElementBlock("div",{key:u,class:"di-master-entry-row"},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":p=>l.value=p,placeholder:"1",class:"di-master-input di-master-col-val"},null,8,Gi),[[e.vModelText,l.value]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":p=>l.label=p,placeholder:"受付",class:"di-master-input di-master-col-lbl"},null,8,Xi),[[e.vModelText,l.label]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":p=>l.color=p,type:"color",class:"di-master-color-input"},null,8,Ji),[[e.vModelText,l.color]]),e.createElementVNode("button",{onClick:p=>pt(u),class:"di-master-entry-remove"},"×",8,Zi)]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:mt,class:"di-btn-add-field",style:{"margin-top":"4px"}}," + 値を追加 ")])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),w.value==="db_formatted"?(e.openBlock(),e.createElementBlock("div",Qi,[t[89]||(t[89]=e.createElementVNode("label",{class:"di-form-label"},"整形方法",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[13]||(t[13]=l=>be.value=l),rows:"2",placeholder:"YYYY年MM月DD日 に整形、姓 + 名 で結合 など",class:"di-textarea"},null,512),[[e.vModelText,be.value]])])):e.createCommentVNode("",!0),e.createElementVNode("div",Wi,[e.createElementVNode("button",{onClick:t[14]||(t[14]=l=>ve.value=!ve.value),class:e.normalizeClass(["di-btn-condition-toggle",{"di-condition-active":ve.value}])},[e.createVNode(e.unref(Vt),{style:{width:"14px",height:"14px"}}),t[90]||(t[90]=e.createTextVNode(" このカラムは計算値を保存している ",-1)),ve.value?(e.openBlock(),e.createElementBlock("span",es,"設定あり")):e.createCommentVNode("",!0)],2)]),ve.value?(e.openBlock(),e.createElementBlock("div",ts,[e.createElementVNode("div",os,[t[91]||(t[91]=e.createElementVNode("label",{class:"di-form-label"},"計算ロジック",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[15]||(t[15]=l=>he.value=l),rows:"2",placeholder:"SUM(order_items.price * quantity)、unit_price × quantity など",class:"di-textarea di-textarea-mono"},null,512),[[e.vModelText,he.value]])]),e.createElementVNode("div",ls,[t[92]||(t[92]=e.createElementVNode("label",{class:"di-form-label"},"元データ（テーブル.カラム）",-1)),e.createElementVNode("div",ns,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Ee.value,(l,u)=>(e.openBlock(),e.createElementBlock("span",{key:u,class:"di-calc-tag"},[e.createTextVNode(e.toDisplayString(l)+" ",1),e.createElementVNode("button",{onClick:e.withModifiers(p=>Ee.value.splice(u,1),["stop"]),class:"di-calc-tag-remove"},"×",8,as)]))),128)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[16]||(t[16]=l=>ge.value=l),onFocus:t[17]||(t[17]=l=>He.value=!0),onBlur:zt,onKeydown:t[18]||(t[18]=e.withKeys(e.withModifiers(l=>jt(),["prevent"]),["enter"])),type:"text",placeholder:"order_items.price",class:"di-calc-tags-field",autocomplete:"off"},null,544),[[e.vModelText,ge.value]])]),He.value&&dt.value.length>0?(e.openBlock(),e.createElementBlock("div",is,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(dt.value.slice(0,12),l=>(e.openBlock(),e.createElementBlock("button",{key:l,onMousedown:e.withModifiers(u=>qt(l),["prevent"]),class:"di-suggest-item"},[e.createVNode(e.unref(Re),{style:{width:"10px",height:"10px",opacity:"0.5","flex-shrink":"0"}}),e.createTextVNode(" "+e.toDisplayString(l),1)],40,ss))),128))])):e.createCommentVNode("",!0),t[93]||(t[93]=e.createElementVNode("span",{class:"di-form-hint"},"Enter で追加、またはドロップダウンから選択",-1))]),e.createElementVNode("div",ds,[t[95]||(t[95]=e.createElementVNode("label",{class:"di-form-label"},"計算タイミング",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[19]||(t[19]=l=>Fe.value=l),class:"di-select"},[...t[94]||(t[94]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"on_save"},"保存時（アプリ側で計算）",-1),e.createElementVNode("option",{value:"trigger"},"DBトリガー",-1),e.createElementVNode("option",{value:"batch"},"バッチ（定期実行）",-1),e.createElementVNode("option",{value:"realtime"},"リアルタイム（ビュー/マテビュー）",-1)])],512),[[e.vModelSelect,Fe.value]])])])):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),w.value==="calculated"?(e.openBlock(),e.createElementBlock("div",rs,[t[96]||(t[96]=e.createElementVNode("label",{class:"di-form-label"},"計算ロジック",-1)),e.createElementVNode("div",{class:"di-calc-tags-input",onClick:t[23]||(t[23]=l=>{var u;return(u=r.$refs.calcInputEl)==null?void 0:u.focus()})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(ue.value,(l,u)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:u},[l.type==="tag"?(e.openBlock(),e.createElementBlock("span",cs,[e.createTextVNode(e.toDisplayString(l.value)+" ",1),e.createElementVNode("button",{onClick:e.withModifiers(p=>Pt(u),["stop"]),class:"di-calc-tag-remove"},"×",8,us)])):(e.openBlock(),e.createElementBlock("span",ms,e.toDisplayString(l.value),1))],64))),128)),e.withDirectives(e.createElementVNode("input",{ref:"calcInputEl","onUpdate:modelValue":t[20]||(t[20]=l=>le.value=l),onFocus:t[21]||(t[21]=l=>qe.value=!0),onBlur:t[22]||(t[22]=l=>Ot()),onKeydown:At,type:"text",placeholder:ue.value.length===0?"カラムを選択 or 自由入力 (例: × 2)":"",class:"di-calc-tags-field",autocomplete:"off"},null,40,ps),[[e.vModelText,le.value]])]),qe.value&&st.value.length>0?(e.openBlock(),e.createElementBlock("div",vs,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(st.value.slice(0,12),l=>(e.openBlock(),e.createElementBlock("button",{key:l,onMousedown:e.withModifiers(u=>Ft(l),["prevent"]),class:"di-suggest-item"},[e.createVNode(e.unref(Re),{style:{width:"10px",height:"10px",opacity:"0.5","flex-shrink":"0"}}),e.createTextVNode(" "+e.toDisplayString(l),1)],40,fs))),128))])):e.createCommentVNode("",!0),t[97]||(t[97]=e.createElementVNode("span",{class:"di-form-hint"},"DBカラムはドロップダウンから挿入、演算子や数値はそのまま入力",-1))])):e.createCommentVNode("",!0),w.value==="static"||w.value==="other"?(e.openBlock(),e.createElementBlock("div",Vs,[t[98]||(t[98]=e.createElementVNode("label",{class:"di-form-label"},"メモ",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[24]||(t[24]=l=>s.value=l),rows:"4",placeholder:"この要素についてのメモ...",class:"di-textarea"},null,512),[[e.vModelText,s.value]])])):e.createCommentVNode("",!0),w.value&&w.value!=="other"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[e.createElementVNode("div",hs,[e.createElementVNode("button",{onClick:t[25]||(t[25]=l=>Te.value=!Te.value),class:e.normalizeClass(["di-btn-condition-toggle",{"di-condition-active":Te.value||Ce.value}])},[e.createVNode(e.unref(gt),{style:{width:"14px",height:"14px"}}),t[99]||(t[99]=e.createTextVNode(" 条件付き表示 ",-1)),Ce.value?(e.openBlock(),e.createElementBlock("span",Es,"設定あり")):e.createCommentVNode("",!0)],2)]),Te.value?(e.openBlock(),e.createElementBlock("div",ys,[e.createElementVNode("div",ks,[t[100]||(t[100]=e.createElementVNode("label",{class:"di-form-label"},"表示条件",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[26]||(t[26]=l=>Ce.value=l),type:"text",placeholder:"管理者ロール時のみ / ステータスがactiveの時",class:"di-input"},null,512),[[e.vModelText,Ce.value]])]),e.createElementVNode("div",Ns,[t[101]||(t[101]=e.createElementVNode("label",{class:"di-form-label"},"判定カラム",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[27]||(t[27]=l=>Pe.value=l),type:"text",placeholder:"users.role / orders.status",class:"di-input di-input-mono"},null,512),[[e.vModelText,Pe.value]])]),e.createElementVNode("div",bs,[e.createElementVNode("div",gs,[t[103]||(t[103]=e.createElementVNode("label",{class:"di-form-label"},"条件不一致時の挙動",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[28]||(t[28]=l=>De.value=l),class:"di-select"},[...t[102]||(t[102]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"hidden"},"非表示",-1),e.createElementVNode("option",{value:"disabled"},"無効化 (グレーアウト)",-1),e.createElementVNode("option",{value:"different_value"},"別の値を表示",-1),e.createElementVNode("option",{value:"empty"},"空欄",-1)])],512),[[e.vModelSelect,De.value]])])]),De.value==="different_value"?(e.openBlock(),e.createElementBlock("div",xs,[t[104]||(t[104]=e.createElementVNode("label",{class:"di-form-label"},"代わりに表示する値",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[29]||(t[29]=l=>Ae.value=l),type:"text",placeholder:"「権限がありません」/ 「***」",class:"di-input"},null,512),[[e.vModelText,Ae.value]])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),w.value==="db_direct"||w.value==="db_formatted"||w.value==="calculated"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:4},[t[112]||(t[112]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"表示の詳細")],-1)),e.createElementVNode("div",ws,[e.createElementVNode("div",Bs,[t[105]||(t[105]=e.createElementVNode("label",{class:"di-form-label"},"サンプル値",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[30]||(t[30]=l=>Ie.value=l),type:"text",placeholder:"12,500 / 田中太郎",class:"di-input di-input-mono"},null,512),[[e.vModelText,Ie.value]])]),e.createElementVNode("div",Cs,[t[106]||(t[106]=e.createElementVNode("label",{class:"di-form-label"},"単位",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[31]||(t[31]=l=>$e.value=l),type:"text",placeholder:"円 / %",class:"di-input"},null,512),[[e.vModelText,$e.value]])])]),e.createElementVNode("div",$s,[e.createElementVNode("div",Ds,[t[108]||(t[108]=e.createElementVNode("label",{class:"di-form-label"},"小数点の扱い",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[32]||(t[32]=l=>Ue.value=l),class:"di-select"},[...t[107]||(t[107]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"round"},"四捨五入",-1),e.createElementVNode("option",{value:"floor"},"切り捨て",-1),e.createElementVNode("option",{value:"ceil"},"切り上げ",-1),e.createElementVNode("option",{value:"decimal_1"},"小数第1位まで",-1),e.createElementVNode("option",{value:"decimal_2"},"小数第2位まで",-1),e.createElementVNode("option",{value:"integer"},"整数のみ",-1)])],512),[[e.vModelSelect,Ue.value]])]),e.createElementVNode("div",Ts,[t[109]||(t[109]=e.createElementVNode("label",{class:"di-form-label"},"NULL/ゼロ時",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[33]||(t[33]=l=>Le.value=l),type:"text",placeholder:"- / 0 / 非表示 / N/A",class:"di-input"},null,512),[[e.vModelText,Le.value]])])]),e.createElementVNode("div",Ss,[t[110]||(t[110]=e.createElementVNode("label",{class:"di-form-label"},"表示フォーマット",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[34]||(t[34]=l=>Be.value=l),type:"text",placeholder:"カンマ区切り / ¥記号付き / YYYY/MM/DD",class:"di-input"},null,512),[[e.vModelText,Be.value]])]),e.createElementVNode("div",_s,[t[111]||(t[111]=e.createElementVNode("label",{class:"di-form-label"},"補足メモ（任意）",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[35]||(t[35]=l=>s.value=l),rows:"2",placeholder:"補足情報があれば...",class:"di-textarea"},null,512),[[e.vModelText,s.value]])])],64)):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),V.value==="action"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("div",Ms,[t[114]||(t[114]=e.createElementVNode("label",{class:"di-form-label"},"アクションタイプ",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[36]||(t[36]=l=>h.value=l),class:"di-select"},[...t[113]||(t[113]=[e.createElementVNode("option",{value:""},"選択してください",-1),e.createElementVNode("option",{value:"navigate"},"画面遷移",-1),e.createElementVNode("option",{value:"api"},"API呼び出し",-1),e.createElementVNode("option",{value:"modal"},"モーダル表示",-1),e.createElementVNode("option",{value:"emit"},"イベント発火",-1),e.createElementVNode("option",{value:"function"},"関数実行",-1),e.createElementVNode("option",{value:"csv_export"},"CSV出力",-1),e.createElementVNode("option",{value:"csv_import"},"CSV取込",-1),e.createElementVNode("option",{value:"email"},"メール送信",-1)])],512),[[e.vModelSelect,h.value]])]),e.createElementVNode("div",Is,[t[115]||(t[115]=e.createElementVNode("label",{class:"di-form-label"},"ターゲット",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[37]||(t[37]=l=>_.value=l),type:"text",placeholder:h.value==="navigate"?"/tasks":h.value==="api"?"/api/users":h.value==="modal"?"confirm-dialog":h.value==="csv_export"?"/api/export/users":h.value==="csv_import"?"/api/import/users":"",class:"di-input di-input-mono"},null,8,Us),[[e.vModelText,_.value]])]),h.value==="api"?(e.openBlock(),e.createElementBlock("div",Ls,[t[117]||(t[117]=e.createElementVNode("label",{class:"di-form-label"},"HTTPメソッド",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[38]||(t[38]=l=>L.value=l),class:"di-select"},[...t[116]||(t[116]=[e.createElementVNode("option",{value:""},"選択してください",-1),e.createElementVNode("option",{value:"GET"},"GET",-1),e.createElementVNode("option",{value:"POST"},"POST",-1),e.createElementVNode("option",{value:"PUT"},"PUT",-1),e.createElementVNode("option",{value:"DELETE"},"DELETE",-1),e.createElementVNode("option",{value:"PATCH"},"PATCH",-1)])],512),[[e.vModelSelect,L.value]])])):e.createCommentVNode("",!0),e.createElementVNode("div",Fs,[t[118]||(t[118]=e.createElementVNode("label",{class:"di-form-label"},"説明",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[39]||(t[39]=l=>q.value=l),rows:"3",placeholder:"このアクションの説明...",class:"di-textarea"},null,512),[[e.vModelText,q.value]])]),h.value==="csv_export"||h.value==="csv_import"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("div",Ps,[e.createElementVNode("span",null,[e.createVNode(e.unref(wt),{style:{width:"12px",height:"12px",display:"inline","vertical-align":"middle"}}),t[119]||(t[119]=e.createTextVNode(" CSV仕様",-1))])]),e.createElementVNode("div",As,[t[126]||(t[126]=e.createElementVNode("label",{class:"di-form-label"},"ファイル設定",-1)),e.createElementVNode("div",Os,[e.createElementVNode("div",zs,[t[121]||(t[121]=e.createElementVNode("label",{class:"di-form-label"},"エンコーディング",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[40]||(t[40]=l=>y.value=l),class:"di-select"},[...t[120]||(t[120]=[e.createElementVNode("option",{value:"UTF-8"},"UTF-8",-1),e.createElementVNode("option",{value:"Shift_JIS"},"Shift_JIS",-1),e.createElementVNode("option",{value:"EUC-JP"},"EUC-JP",-1),e.createElementVNode("option",{value:"UTF-8 BOM"},"UTF-8 BOM",-1)])],512),[[e.vModelSelect,y.value]])]),e.createElementVNode("div",js,[t[123]||(t[123]=e.createElementVNode("label",{class:"di-form-label"},"区切り文字",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[41]||(t[41]=l=>ce.value=l),class:"di-select"},[...t[122]||(t[122]=[e.createElementVNode("option",{value:","},"カンマ (,)",-1),e.createElementVNode("option",{value:"	"},"タブ",-1),e.createElementVNode("option",{value:"|"},"パイプ (|)",-1)])],512),[[e.vModelSelect,ce.value]])])]),e.createElementVNode("div",qs,[e.createElementVNode("label",Hs,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":t[42]||(t[42]=l=>ye.value=l),class:"di-checkbox"},null,512),[[e.vModelCheckbox,ye.value]]),t[124]||(t[124]=e.createTextVNode(" ヘッダー行あり ",-1))])]),e.createElementVNode("div",Rs,[t[125]||(t[125]=e.createElementVNode("label",{class:"di-form-label"},"ファイル名パターン",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[43]||(t[43]=l=>ae.value=l),type:"text",placeholder:"users_{YYYYMMDD}.csv",class:"di-input di-input-mono"},null,512),[[e.vModelText,ae.value]])])]),e.createElementVNode("div",Ks,[t[129]||(t[129]=e.createElementVNode("label",{class:"di-form-label"},"CSV列定義",-1)),A.value.length>0?(e.openBlock(),e.createElementBlock("div",Ys,[t[128]||(t[128]=e.createElementVNode("div",{class:"di-csv-columns-header"},[e.createElementVNode("span",{class:"di-csv-col-no"},"No"),e.createElementVNode("span",{class:"di-csv-col-name"},"項目名"),e.createElementVNode("span",{class:"di-csv-col-db"},"DBマッピング"),e.createElementVNode("span",{class:"di-csv-col-proc"},"加工"),e.createElementVNode("span",{class:"di-csv-col-type"},"型"),e.createElementVNode("span",{class:"di-csv-col-req"},"必須"),e.createElementVNode("span",{class:"di-csv-col-desc"},"説明"),e.createElementVNode("span",{class:"di-csv-col-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(A.value,(l,u)=>(e.openBlock(),e.createElementBlock("div",{key:u,class:"di-csv-column-row"},[e.createElementVNode("span",Gs,e.toDisplayString(u+1),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":p=>l.name=p,placeholder:"項目名",class:"di-csv-input di-csv-col-name"},null,8,Xs),[[e.vModelText,l.name]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":p=>l.dbMapping=p,placeholder:"table.col",class:"di-csv-input di-csv-col-db"},null,8,Js),[[e.vModelText,l.dbMapping]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":p=>l.processing=p,placeholder:"姓+名, IF...",class:"di-csv-input di-csv-col-proc"},null,8,Zs),[[e.vModelText,l.processing]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":p=>l.type=p,class:"di-csv-select di-csv-col-type"},[...t[127]||(t[127]=[e.createElementVNode("option",{value:""},"-",-1),e.createElementVNode("option",{value:"string"},"string",-1),e.createElementVNode("option",{value:"integer"},"integer",-1),e.createElementVNode("option",{value:"decimal"},"decimal",-1),e.createElementVNode("option",{value:"date"},"date",-1),e.createElementVNode("option",{value:"datetime"},"datetime",-1),e.createElementVNode("option",{value:"boolean"},"boolean",-1)])],8,Qs),[[e.vModelSelect,l.type]]),e.createElementVNode("label",Ws,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":p=>l.required=p,class:"di-checkbox"},null,8,ed),[[e.vModelCheckbox,l.required]])]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":p=>l.description=p,placeholder:"備考",class:"di-csv-input di-csv-col-desc"},null,8,td),[[e.vModelText,l.description]]),e.createElementVNode("div",od,[e.createElementVNode("button",{onClick:p=>ct(u,-1),disabled:u===0,class:"di-csv-move-btn",title:"上へ"},[e.createVNode(e.unref(mo),{style:{width:"12px",height:"12px"}})],8,ld),e.createElementVNode("button",{onClick:p=>ct(u,1),disabled:u===A.value.length-1,class:"di-csv-move-btn",title:"下へ"},[e.createVNode(e.unref(xt),{style:{width:"12px",height:"12px"}})],8,nd),e.createElementVNode("button",{onClick:p=>Jt(u),class:"di-csv-remove-btn",title:"削除"},"×",8,ad)])]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:Xt,class:"di-btn-add-field"}," + 列を追加 ")]),h.value==="csv_export"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[t[133]||(t[133]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"出力オプション")],-1)),e.createElementVNode("div",id,[t[130]||(t[130]=e.createElementVNode("label",{class:"di-form-label"},"ソート順",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[44]||(t[44]=l=>pe.value=l),type:"text",placeholder:"created_at DESC",class:"di-input di-input-mono"},null,512),[[e.vModelText,pe.value]])]),e.createElementVNode("div",sd,[t[131]||(t[131]=e.createElementVNode("label",{class:"di-form-label"},"抽出条件",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[45]||(t[45]=l=>x.value=l),type:"text",placeholder:"status = 'active'",class:"di-input di-input-mono"},null,512),[[e.vModelText,x.value]])]),e.createElementVNode("div",dd,[t[132]||(t[132]=e.createElementVNode("label",{class:"di-form-label"},"最大行数",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[46]||(t[46]=l=>E.value=l),type:"number",placeholder:"10000",class:"di-input"},null,512),[[e.vModelText,E.value,void 0,{number:!0}]])])],64)):e.createCommentVNode("",!0),h.value==="csv_import"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[t[139]||(t[139]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"取込オプション")],-1)),e.createElementVNode("div",rd,[t[135]||(t[135]=e.createElementVNode("label",{class:"di-form-label"},"エラー処理",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[47]||(t[47]=l=>d.value=l),class:"di-select"},[...t[134]||(t[134]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"stop_on_first"},"最初のエラーで停止",-1),e.createElementVNode("option",{value:"skip_and_continue"},"スキップして続行",-1),e.createElementVNode("option",{value:"collect_all"},"全エラー収集",-1)])],512),[[e.vModelSelect,d.value]])]),e.createElementVNode("div",cd,[t[137]||(t[137]=e.createElementVNode("label",{class:"di-form-label"},"重複処理",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[48]||(t[48]=l=>k.value=l),class:"di-select"},[...t[136]||(t[136]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"skip"},"スキップ",-1),e.createElementVNode("option",{value:"overwrite"},"上書き",-1),e.createElementVNode("option",{value:"error"},"エラー",-1)])],512),[[e.vModelSelect,k.value]])]),e.createElementVNode("div",ud,[t[138]||(t[138]=e.createElementVNode("label",{class:"di-form-label"},"事前バリデーション",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[49]||(t[49]=l=>g.value=l),rows:"2",placeholder:"取込前のチェック内容...",class:"di-textarea"},null,512),[[e.vModelText,g.value]])])],64)):e.createCommentVNode("",!0),t[143]||(t[143]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"エラー定義")],-1)),e.createElementVNode("div",md,[O.value.length>0?(e.openBlock(),e.createElementBlock("div",pd,[t[142]||(t[142]=e.createElementVNode("div",{class:"di-csv-columns-header"},[e.createElementVNode("span",{class:"di-csv-err-col"},"対象列"),e.createElementVNode("span",{class:"di-csv-err-cond"},"エラー条件"),e.createElementVNode("span",{class:"di-csv-err-msg"},"エラーメッセージ"),e.createElementVNode("span",{class:"di-csv-err-sev"},"種別"),e.createElementVNode("span",{class:"di-csv-err-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(O.value,(l,u)=>(e.openBlock(),e.createElementBlock("div",{key:u,class:"di-csv-column-row"},[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":p=>l.column=p,class:"di-csv-select di-csv-err-col"},[t[140]||(t[140]=e.createElementVNode("option",{value:""},"（全体）",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Wt.value,p=>(e.openBlock(),e.createElementBlock("option",{key:p,value:p},e.toDisplayString(p),9,fd))),128))],8,vd),[[e.vModelSelect,l.column]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":p=>l.condition=p,placeholder:"必須項目が空",class:"di-csv-input di-csv-err-cond"},null,8,Vd),[[e.vModelText,l.condition]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":p=>l.message=p,placeholder:"○○は必須です",class:"di-csv-input di-csv-err-msg"},null,8,hd),[[e.vModelText,l.message]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":p=>l.severity=p,class:"di-csv-select di-csv-err-sev"},[...t[141]||(t[141]=[e.createElementVNode("option",{value:"error"},"エラー",-1),e.createElementVNode("option",{value:"warning"},"警告",-1)])],8,Ed),[[e.vModelSelect,l.severity]]),e.createElementVNode("button",{onClick:p=>Qt(u),class:"di-csv-remove-btn",title:"削除"},"×",8,yd)]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:Zt,class:"di-btn-add-field"}," + エラー定義を追加 ")])],64)):e.createCommentVNode("",!0),h.value==="email"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createElementVNode("div",kd,[e.createElementVNode("span",null,[e.createVNode(e.unref(No),{style:{width:"12px",height:"12px",display:"inline","vertical-align":"middle"}}),t[144]||(t[144]=e.createTextVNode(" メール基本設定",-1))])]),e.createElementVNode("div",Nd,[e.createElementVNode("div",bd,[t[145]||(t[145]=e.createElementVNode("label",{class:"di-form-label"},"トリガー *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[50]||(t[50]=l=>z.value=l),type:"text",placeholder:"注文確定時、ボタンクリック",class:"di-input"},null,512),[[e.vModelText,z.value]])]),e.createElementVNode("div",gd,[t[146]||(t[146]=e.createElementVNode("label",{class:"di-form-label"},"宛先 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[51]||(t[51]=l=>F.value=l),type:"text",placeholder:"ユーザーメール、管理者固定",class:"di-input"},null,512),[[e.vModelText,F.value]])])]),e.createElementVNode("div",xd,[e.createElementVNode("div",wd,[t[147]||(t[147]=e.createElementVNode("label",{class:"di-form-label"},"CC",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[52]||(t[52]=l=>C.value=l),type:"text",placeholder:"CC宛先",class:"di-input"},null,512),[[e.vModelText,C.value]])]),e.createElementVNode("div",Bd,[t[148]||(t[148]=e.createElementVNode("label",{class:"di-form-label"},"BCC",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[53]||(t[53]=l=>R.value=l),type:"text",placeholder:"BCC宛先",class:"di-input"},null,512),[[e.vModelText,R.value]])])]),e.createElementVNode("div",Cd,[t[149]||(t[149]=e.createElementVNode("label",{class:"di-form-label"},"件名テンプレート *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[54]||(t[54]=l=>se.value=l),type:"text",placeholder:"【注文確認】ご注文番号 {orderNumber}",class:"di-input"},null,512),[[e.vModelText,se.value]])]),e.createElementVNode("div",$d,[t[150]||(t[150]=e.createElementVNode("label",{class:"di-form-label"},"本文テンプレート概要",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[55]||(t[55]=l=>B.value=l),rows:"3",placeholder:"本文の概要を記述...",class:"di-textarea"},null,512),[[e.vModelText,B.value]])]),e.createElementVNode("div",Dd,[t[151]||(t[151]=e.createElementVNode("label",{class:"di-form-label"},"テンプレートファイルパス",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[56]||(t[56]=l=>v.value=l),type:"text",placeholder:"resources/mail/order_confirm.blade.php",class:"di-input di-input-mono"},null,512),[[e.vModelText,v.value]])]),t[156]||(t[156]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"差し込み変数")],-1)),e.createElementVNode("div",Td,[e.createElementVNode("div",Sd,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,(l,u)=>(e.openBlock(),e.createElementBlock("span",{key:u,class:"di-calc-tag"},[e.createTextVNode(e.toDisplayString(l)+" ",1),e.createElementVNode("button",{onClick:e.withModifiers(p=>lo(u),["stop"]),class:"di-calc-tag-remove"},"×",8,_d)]))),128)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[57]||(t[57]=l=>ee.value=l),onKeydown:[t[58]||(t[58]=e.withKeys(e.withModifiers(l=>oo(),["prevent"]),["enter"])),no],type:"text",placeholder:"変数名を入力してEnter (例: userName)",class:"di-calc-tags-field",autocomplete:"off"},null,544),[[e.vModelText,ee.value]])]),t[152]||(t[152]=e.createElementVNode("span",{class:"di-form-hint"},"Enter で追加",-1))]),t[157]||(t[157]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"オプション")],-1)),e.createElementVNode("div",Md,[t[153]||(t[153]=e.createElementVNode("label",{class:"di-form-label"},"添付ファイル",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[59]||(t[59]=l=>I.value=l),type:"text",placeholder:"添付ファイルの説明",class:"di-input"},null,512),[[e.vModelText,I.value]])]),e.createElementVNode("div",Id,[t[154]||(t[154]=e.createElementVNode("label",{class:"di-form-label"},"送信条件",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[60]||(t[60]=l=>ke.value=l),type:"text",placeholder:"メール送信設定がONの場合",class:"di-input"},null,512),[[e.vModelText,ke.value]])]),e.createElementVNode("div",Ud,[t[155]||(t[155]=e.createElementVNode("label",{class:"di-form-label"},"エラー処理",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[61]||(t[61]=l=>we.value=l),type:"text",placeholder:"キューに入れてリトライ",class:"di-input"},null,512),[[e.vModelText,we.value]])])],64)):e.createCommentVNode("",!0),e.createElementVNode("div",Ld,[t[158]||(t[158]=e.createElementVNode("label",{class:"di-form-label"},"補足メモ（任意）",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[62]||(t[62]=l=>s.value=l),rows:"2",placeholder:"補足情報があれば...",class:"di-textarea"},null,512),[[e.vModelText,s.value]])])],64)):e.createCommentVNode("",!0),V.value==="form"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createElementVNode("div",Fd,[t[160]||(t[160]=e.createElementVNode("label",{class:"di-form-label"},"入力タイプ",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[63]||(t[63]=l=>Z.value=l),class:"di-select"},[...t[159]||(t[159]=[e.createElementVNode("option",{value:""},"選択してください",-1),e.createElementVNode("option",{value:"text"},"テキスト (text)",-1),e.createElementVNode("option",{value:"number"},"数値 (number)",-1),e.createElementVNode("option",{value:"email"},"メール (email)",-1),e.createElementVNode("option",{value:"password"},"パスワード (password)",-1),e.createElementVNode("option",{value:"tel"},"電話番号 (tel)",-1),e.createElementVNode("option",{value:"url"},"URL (url)",-1),e.createElementVNode("option",{value:"date"},"日付 (date)",-1),e.createElementVNode("option",{value:"datetime-local"},"日時 (datetime-local)",-1),e.createElementVNode("option",{value:"select"},"セレクト (select)",-1),e.createElementVNode("option",{value:"textarea"},"テキストエリア (textarea)",-1),e.createElementVNode("option",{value:"checkbox"},"チェックボックス (checkbox)",-1),e.createElementVNode("option",{value:"radio"},"ラジオボタン (radio)",-1),e.createElementVNode("option",{value:"file"},"ファイル (file)",-1)])],512),[[e.vModelSelect,Z.value]])]),j.value.length>0?(e.openBlock(),e.createElementBlock("div",Pd,[t[161]||(t[161]=e.createElementVNode("label",{class:"di-form-label"},"対応カラム",-1)),e.createElementVNode("div",Ad,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(j.value,(l,u)=>(e.openBlock(),e.createElementBlock("div",{key:u,class:"di-field-tag"},[e.createElementVNode("span",Od,e.toDisplayString(l.table)+"."+e.toDisplayString(l.column),1),l.type?(e.openBlock(),e.createElementBlock("span",zd,e.toDisplayString(l.type),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:p=>de(u),class:"di-field-tag-remove"},"×",8,jd)]))),128))])])):e.createCommentVNode("",!0),Ve.value?(e.openBlock(),e.createElementBlock("div",qd,[e.createElementVNode("div",Hd,[e.createElementVNode("label",Rd,[e.createVNode(e.unref(Re),{style:{width:"12px",height:"12px",display:"inline","vertical-align":"middle"}}),t[162]||(t[162]=e.createTextVNode(" 対応するDBカラム ",-1))]),e.createElementVNode("div",Kd,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[64]||(t[64]=l=>fe.value=l),onFocus:t[65]||(t[65]=l=>ze.value=!0),type:"text",placeholder:"テーブル.カラムを検索...",class:"di-input di-binding-search"},null,544),[[e.vModelText,fe.value]]),fe.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:t[66]||(t[66]=l=>{fe.value="",ze.value=!1}),class:"di-binding-clear"},[e.createVNode(e.unref(Me),{style:{width:"14px",height:"14px"}})])):e.createCommentVNode("",!0)]),ze.value&&Ye.value.length>0?(e.openBlock(),e.createElementBlock("div",Yd,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Ye.value,l=>(e.openBlock(),e.createElementBlock("button",{key:l.fullName,onClick:u=>tt(l),class:"di-binding-item has-db"},[e.createElementVNode("div",Xd,[e.createElementVNode("span",Jd,e.toDisplayString(l.fullName),1),e.createElementVNode("span",Zd,e.toDisplayString(l.type),1)]),l.comment?(e.openBlock(),e.createElementBlock("span",Qd,e.toDisplayString(l.comment),1)):e.createCommentVNode("",!0)],8,Gd))),128))])):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0),N.value&&(Z.value==="select"||Z.value==="radio"||Z.value==="checkbox")?(e.openBlock(),e.createElementBlock("div",Wd,[e.createElementVNode("button",{onClick:ut,class:e.normalizeClass(["di-btn-condition-toggle",{"di-condition-active":K.value}])},[e.createVNode(e.unref(yt),{style:{width:"14px",height:"14px"}}),t[163]||(t[163]=e.createTextVNode(" 選択肢を定義 ",-1)),me.value?(e.openBlock(),e.createElementBlock("span",er,e.toDisplayString(me.value.entries.length)+"件",1)):e.createCommentVNode("",!0)],2),K.value?(e.openBlock(),e.createElementBlock("div",tr,[Y.value.length>0?(e.openBlock(),e.createElementBlock("div",or,[t[164]||(t[164]=e.createElementVNode("div",{class:"di-master-entries-header"},[e.createElementVNode("span",{class:"di-master-col-val"},"値"),e.createElementVNode("span",{class:"di-master-col-lbl"},"ラベル"),e.createElementVNode("span",{class:"di-master-col-color"},"色"),e.createElementVNode("span",{class:"di-master-col-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Y.value,(l,u)=>(e.openBlock(),e.createElementBlock("div",{key:u,class:"di-master-entry-row"},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":p=>l.value=p,placeholder:"1",class:"di-master-input di-master-col-val"},null,8,lr),[[e.vModelText,l.value]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":p=>l.label=p,placeholder:"受付",class:"di-master-input di-master-col-lbl"},null,8,nr),[[e.vModelText,l.label]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":p=>l.color=p,type:"color",class:"di-master-color-input"},null,8,ar),[[e.vModelText,l.color]]),e.createElementVNode("button",{onClick:p=>pt(u),class:"di-master-entry-remove"},"×",8,ir)]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:mt,class:"di-btn-add-field",style:{"margin-top":"4px"}}," + 値を追加 ")])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",sr,[e.createElementVNode("button",{onClick:t[67]||(t[67]=l=>W.value=!W.value),class:e.normalizeClass(["di-btn-condition-toggle",{"di-condition-active":W.value}])},[e.createVNode(e.unref(gt),{style:{width:"14px",height:"14px"}}),t[165]||(t[165]=e.createTextVNode(" 必須入力 ",-1)),W.value?(e.openBlock(),e.createElementBlock("span",dr,"必須")):e.createCommentVNode("",!0)],2)]),e.createElementVNode("div",rr,[t[166]||(t[166]=e.createElementVNode("label",{class:"di-form-label"},"バリデーションルール",-1)),e.createElementVNode("div",cr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList($.value,(l,u)=>(e.openBlock(),e.createElementBlock("span",{key:u,class:"di-calc-tag",style:{background:"#ec4899"}},[e.createTextVNode(e.toDisplayString(l)+" ",1),e.createElementVNode("button",{onClick:e.withModifiers(p=>Yt(u),["stop"]),class:"di-calc-tag-remove"},"×",8,ur)]))),128)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[68]||(t[68]=l=>M.value=l),onKeydown:[t[69]||(t[69]=e.withKeys(e.withModifiers(l=>Kt(),["prevent"]),["enter"])),Gt],type:"text",placeholder:$.value.length===0?"max:255, email, 必須 など (Enter で追加)":"",class:"di-calc-tags-field",autocomplete:"off"},null,40,mr),[[e.vModelText,M.value]])]),t[167]||(t[167]=e.createElementVNode("span",{class:"di-form-hint"},"Enter で追加、Backspace で削除",-1))]),e.createElementVNode("div",pr,[t[168]||(t[168]=e.createElementVNode("label",{class:"di-form-label"},"プレースホルダー",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[70]||(t[70]=l=>G.value=l),type:"text",placeholder:"例: user@example.com",class:"di-input"},null,512),[[e.vModelText,G.value]])]),e.createElementVNode("div",vr,[t[169]||(t[169]=e.createElementVNode("label",{class:"di-form-label"},"デフォルト値",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[71]||(t[71]=l=>ie.value=l),type:"text",placeholder:"初期値",class:"di-input di-input-mono"},null,512),[[e.vModelText,ie.value]])]),e.createElementVNode("div",fr,[t[170]||(t[170]=e.createElementVNode("label",{class:"di-form-label"},"説明",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[72]||(t[72]=l=>ne.value=l),rows:"3",placeholder:"このフォーム要素の説明...",class:"di-textarea"},null,512),[[e.vModelText,ne.value]])]),e.createElementVNode("div",Vr,[t[171]||(t[171]=e.createElementVNode("label",{class:"di-form-label"},"補足メモ（任意）",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[73]||(t[73]=l=>s.value=l),rows:"2",placeholder:"補足情報があれば...",class:"di-textarea"},null,512),[[e.vModelText,s.value]])])],64)):e.createCommentVNode("",!0)]),e.createElementVNode("div",hr,[e.createElementVNode("button",{onClick:et,class:"di-btn-delete"},[e.createVNode(e.unref(We),{style:{width:"14px",height:"14px"}}),t[172]||(t[172]=e.createTextVNode(" 削除 ",-1))]),e.createElementVNode("div",Er,[e.createElementVNode("button",{onClick:Ne,class:"di-btn-cancel"},"キャンセル"),e.createElementVNode("button",{onClick:Ze,class:"di-btn-save"},[e.createVNode(e.unref(Bt),{style:{width:"14px",height:"14px"}}),t[173]||(t[173]=e.createTextVNode(" 保存 ",-1))])])])],2)])):e.createCommentVNode("",!0)]))}}),$t=at(yr,[["__scopeId","data-v-d0c9d835"]]),kr={key:0,"data-dev-inspector":"",class:"di-loading-overlay"},Nr={class:"di-highlight-label"},br=["onClick"],gr={key:0,class:"di-note-label-row"},xr=["onClick"],wr={"data-dev-inspector":"",class:"di-scan-banner"},Br=["onClick"],Cr={class:"di-analysis-type"},$r={key:0,class:"di-analysis-tags"},Dr={key:1,class:"di-analysis-db"},Tr={key:2,class:"di-analysis-api-source"},Sr={key:3,class:"di-analysis-conditional"},_r=["onClick"],Mr={key:0,class:"di-analysis-text"},Ir={"data-dev-inspector":"",class:"di-analysis-banner"},Ur=["onClick"],Lr={key:0,class:"di-unannotated-label-text"},Fr=e.defineComponent({__name:"DevPickOverlay",setup(T){const a=Ge.useDevInspectorStore(),V=e.ref(null),h=e.ref(null),_=e.ref(0),L=e.ref(0),q=e.ref(0),Z={db_direct:"#3b82f6",db_formatted:"#8b5cf6",calculated:"#f59e0b",static:"#10b981",other:"#94a3b8"},W={action:"#a78bfa",form:"#ec4899"};function $(x){return{db:"DB",form:"フォーム",button:"ボタン",link:"リンク",modal:"モーダル",conditional:"条件",computed:"計算",api:"API",other:"その他"}[x]||x}function M(x){var d,k;const E=a.getElementConfig(x);if(E!=null&&E.elementType&&W[E.elementType])return W[E.elementType];if((d=E==null?void 0:E.note)!=null&&d.displayType)return Z[E.note.displayType]||"#60a5fa";if(!(E!=null&&E.sourceBinding)){const g=((k=E==null?void 0:E.note)==null?void 0:k.type)||"info";return{info:"#60a5fa",warning:"#fbbf24",todo:"#10b981",question:"#a78bfa"}[g]||"#60a5fa"}return E.sourceBinding.isStatic?"#10b981":E.sourceBinding.type==="v-model"?"#8b5cf6":E.sourceBinding.type==="api"?"#f59e0b":"#60a5fa"}function G(x){var z,F,C,R,se;const E=a.noteHighlightFilter;if(E==="all")return!0;const d=a.getElementConfig(x);if(!d)return!1;const k=(z=d.note)==null?void 0:z.displayType,g=!!((F=d.note)!=null&&F.condition||(C=d.note)!=null&&C.conditionColumn),O=!!((R=d.note)!=null&&R.storedCalc);switch(E){case"db":return k==="db_direct"||k==="db_formatted";case"calculated":return k==="calculated";case"storedCalc":return O;case"static":return k==="static";case"conditional":return g;case"action":return d.elementType==="action";case"form":return d.elementType==="form";case"other":return k==="other"||!k&&!d.elementType&&!!((se=d.note)!=null&&se.text);default:return!0}}const ie=e.computed(()=>{var g,O,z,F,C,R,se,B,v,f,ee,I,ke,we,K,Y,N,me,w,j,H,X,Q,te,be,ue,le,qe,Ie,Ue,$e,Le,Be,ve,he,Ee,ge,He,Fe,Ce,Pe,De,Ae,Te,s,o,n;const x=_.value,E=L.value;q.value;const d=[];if(!a.isEnabled)return d;const k=a.getConfiguredSelectors();for(const c of k)try{const m=document.querySelector(c);if(m){const P=m.getBoundingClientRect(),i=a.getElementConfig(c),Se=((g=i==null?void 0:i.sourceBinding)==null?void 0:g.isStatic)||!1,Oe=((O=i==null?void 0:i.sourceBinding)==null?void 0:O.type)||"";let U="",J="";const Ne=(z=i==null?void 0:i.note)==null?void 0:z.displayType,je=[];if((F=i==null?void 0:i.note)!=null&&F.sampleValue?je.push(`例: ${i.note.sampleValue}${i.note.unit?i.note.unit:""}`):(C=i==null?void 0:i.note)!=null&&C.unit&&je.push(`単位: ${i.note.unit}`),(R=i==null?void 0:i.note)!=null&&R.decimalHandling){const b={round:"四捨五入",floor:"切り捨て",ceil:"切り上げ",decimal_1:"小数第1位",decimal_2:"小数第2位",integer:"整数"};je.push(b[i.note.decimalHandling]||i.note.decimalHandling)}(se=i==null?void 0:i.note)!=null&&se.nullDisplay&&je.push(`NULL時: ${i.note.nullDisplay}`),(B=i==null?void 0:i.note)!=null&&B.displayFormat&&je.push(i.note.displayFormat);const Ze=je.length>0?`
${je.join(" / ")}`:"",et=!!((v=i==null?void 0:i.note)!=null&&v.condition||(f=i==null?void 0:i.note)!=null&&f.conditionColumn);let Ke="";if(et){const b={hidden:"非表示",disabled:"無効化",different_value:"別の値",empty:"空欄"},de=[];(ee=i==null?void 0:i.note)!=null&&ee.condition&&de.push(i.note.condition),(I=i==null?void 0:i.note)!=null&&I.conditionColumn&&de.push(`判定: ${i.note.conditionColumn}`),(ke=i==null?void 0:i.note)!=null&&ke.hiddenBehavior&&de.push(`不一致時: ${b[i.note.hiddenBehavior]||i.note.hiddenBehavior}`),(we=i==null?void 0:i.note)!=null&&we.hiddenNote&&de.push(`→ ${i.note.hiddenNote}`),Ke=`
条件: ${de.join(" / ")}`}const fe=et?" ⚡":"";if((i==null?void 0:i.elementType)==="action"&&(i!=null&&i.actionInfo)){const b=i.actionInfo;b.type==="navigate"?U=`遷移: ${b.target||"?"}`:b.type==="api"?U=`API: ${b.method||"GET"} ${b.target||"?"}`:b.type==="modal"?U=`モーダル: ${b.target||"?"}`:b.type==="emit"?U=`イベント: ${b.target||"?"}`:b.type==="function"?U=`関数: ${b.target||"?"}`:U="アクション",J=(b.description||U)+((K=i==null?void 0:i.note)!=null&&K.text?`
${i.note.text}`:"")}else if((i==null?void 0:i.elementType)==="form"&&(i!=null&&i.formInfo)){const b=i.formInfo,de=(Y=i==null?void 0:i.fieldInfoList)!=null&&Y.length?i.fieldInfoList:i!=null&&i.fieldInfo?[i.fieldInfo]:[],Ve=de.length>0?de.map(Qe=>`${Qe.table}.${Qe.column}`).join(", "):"",xe=de.length>0?`${de[0].table}.${de[0].column}`:"",_e=xe?a.getMasterDefinition(xe):null;b.inputType==="select"?U=`選択: ${Ve||b.description||"?"}${_e?` (${_e.entries.length}件)`:""}`:b.inputType==="textarea"?U=`テキスト: ${Ve||b.description||"?"}`:b.inputType==="checkbox"?U=`チェック: ${Ve||b.description||"?"}`:b.inputType==="radio"?U=`ラジオ: ${Ve||b.description||"?"}`:U=`入力: ${Ve||b.description||b.inputType||"?"}`,b.required&&(U+=" (必須)");const oe=[];b.description&&oe.push(b.description),(N=b.validation)!=null&&N.length&&oe.push(`検証: ${b.validation.join(", ")}`),b.placeholder&&oe.push(`placeholder: ${b.placeholder}`),b.defaultValue&&oe.push(`初期値: ${b.defaultValue}`),J=oe.join(`
`)+((me=i==null?void 0:i.note)!=null&&me.text?`
${i.note.text}`:"")}else if((i==null?void 0:i.elementType)==="action")U="アクション",J=((w=i==null?void 0:i.note)==null?void 0:w.text)||"";else if((i==null?void 0:i.elementType)==="form")U="フォーム",J=((j=i==null?void 0:i.note)==null?void 0:j.text)||"";else if(Ne==="db_direct"){const b=(H=i==null?void 0:i.fieldInfoList)!=null&&H.length?i.fieldInfoList:i!=null&&i.fieldInfo?[i.fieldInfo]:[];if(b.length>0){const de=b.map(oe=>`${oe.table}.${oe.column}`).join(", "),Ve=`${b[0].table}.${b[0].column}`,xe=a.getMasterDefinition(Ve),_e=xe?` (${xe.entries.length}値)`:"";U=`DB: ${de}${_e}${fe}`,J=b.map(oe=>`${oe.table}.${oe.column}${oe.type?` (${oe.type})`:""}`).join(`
`)+Ze+Ke+((X=i==null?void 0:i.note)!=null&&X.text?`
${i.note.text}`:"")}}else if(Ne==="db_formatted"){const b=(Q=i==null?void 0:i.fieldInfoList)!=null&&Q.length?i.fieldInfoList:i!=null&&i.fieldInfo?[i.fieldInfo]:[];if(b.length>0){const de=b.map(oe=>`${oe.table}.${oe.column}`).join(", "),Ve=`${b[0].table}.${b[0].column}`,xe=a.getMasterDefinition(Ve),_e=xe?` (${xe.entries.length}値)`:"";U=`DB: ${de} (整形)${_e}${fe}`,J=b.map(oe=>`${oe.table}.${oe.column}`).join(`
`)+((te=i==null?void 0:i.note)!=null&&te.formatDescription?`
整形: ${i.note.formatDescription}`:"")+Ze+Ke+((be=i==null?void 0:i.note)!=null&&be.text?`
${i.note.text}`:"")}}else Ne==="calculated"?(U="計算値"+((ue=i==null?void 0:i.note)!=null&&ue.unit?` (${i.note.unit})`:"")+fe,J=(((le=i==null?void 0:i.note)==null?void 0:le.calcDescription)||"計算値")+((Ie=(qe=i==null?void 0:i.note)==null?void 0:qe.calcSources)!=null&&Ie.length?`
参照: ${i.note.calcSources.join(", ")}`:"")+Ze+Ke+((Ue=i==null?void 0:i.note)!=null&&Ue.text?`
${i.note.text}`:"")):Ne==="static"?(U="固定"+fe,J=((($e=i==null?void 0:i.note)==null?void 0:$e.text)||"固定文言")+Ke):Ne==="other"?(U="メモ",J=((Le=i==null?void 0:i.note)==null?void 0:Le.text)||""):(Be=i==null?void 0:i.fieldInfoList)!=null&&Be.length||(ve=i==null?void 0:i.fieldInfo)!=null&&ve.table&&((he=i==null?void 0:i.fieldInfo)!=null&&he.column)?(U=`DB: ${((Ee=i==null?void 0:i.fieldInfoList)!=null&&Ee.length?i.fieldInfoList:i!=null&&i.fieldInfo?[i.fieldInfo]:[]).map(Ve=>`${Ve.table}.${Ve.column}`).join(", ")}`,J=((ge=i==null?void 0:i.note)==null?void 0:ge.text)||""):Se?(U="固定",J=((He=i==null?void 0:i.note)==null?void 0:He.text)||"固定文言"):Oe==="v-model"?(U="フォーム",J=((Fe=i==null?void 0:i.note)==null?void 0:Fe.text)||""):Oe==="api"?(U="データ",J=((Ce=i==null?void 0:i.note)==null?void 0:Ce.text)||""):(Pe=i==null?void 0:i.note)!=null&&Pe.type?(U={info:"情報",warning:"注意",todo:"TODO",question:"質問"}[i.note.type]||"メモ",J=((De=i==null?void 0:i.note)==null?void 0:De.text)||""):(U="メモ",J=((Ae=i==null?void 0:i.note)==null?void 0:Ae.text)||"");const ze=J||((Te=i==null?void 0:i.note)==null?void 0:Te.text)||"",Ye=((s=i==null?void 0:i.note)==null?void 0:s.type)||"info",tt=!!((o=i==null?void 0:i.note)!=null&&o.text||(n=i==null?void 0:i.note)!=null&&n.displayType);d.push({selector:c,top:`${P.top+x}px`,left:`${P.left+E}px`,width:`${P.width}px`,height:`${P.height}px`,color:M(c),isStatic:Se,label:U,noteText:ze,noteType:Ye,hasNote:tt})}}catch{}return d}),ne=e.computed(()=>{var k;const x=_.value,E=L.value;q.value;const d=[];if(!a.isEnabled||a.scanResults.length===0)return d;for(const g of a.scanResults)try{const O=document.querySelector(g.selector);if(O){const z=O.getBoundingClientRect();d.push({selector:g.selector,top:`${z.top+x}px`,left:`${z.left+E}px`,width:`${z.width}px`,height:`${z.height}px`,isStatic:((k=g.detected.sourceBinding)==null?void 0:k.isStatic)||!1})}}catch{}return d}),A=e.computed(()=>{var g,O;const x=_.value,E=L.value;q.value;const d=[],k=a.analysisFilter;if(k==="none"||!a.isEnabled||a.analysisResults.length===0)return d;for(const z of a.analysisResults){if(!z.matched)continue;const F=z.element;try{const C=document.querySelector(z.selector);if(!C)continue;const R=C.getBoundingClientRect();if(R.width>window.innerWidth*.8||R.height>window.innerHeight*.5)continue;const se=C.querySelector("[data-di-binding]")||(C.hasAttribute("data-di-binding")?C:null);let B="",v=F.binding||"";const f=[...F.tags||[]];if(se){const te=se.getAttribute("data-di-db"),be=se.getAttribute("data-di-binding");te&&(B=te,f.includes("db")||f.push("db")),be&&(v=be)}!B&&F.db&&(B=`${F.db.table}.${F.db.column}`,f.includes("db")||f.push("db"));let ee="";F.api&&(ee=`${F.api.method} ${F.api.endpoint}`,f.includes("api")||f.push("api"));let I="";if(v){const te=a.getApiSourceForBinding(v);te&&te.endpoint?I=`${te.method||"GET"} ${te.endpoint}`:te&&te.composable&&(I=te.composable)}const ke=(g=F.conditional)==null?void 0:g.expression,we=(O=F.modal)==null?void 0:O.target,K=!!B||f.includes("db"),Y=!!ee||f.includes("api"),N=f.includes("form"),me=f.includes("button"),w=f.includes("link"),j=f.includes("modal"),H=f.includes("conditional"),X=f.includes("computed");if(k==="db-api"){if(!K&&!Y)continue}else if(k==="form"){if(!N)continue}else if(k==="button"){if(!me)continue}else if(k==="link"){if(!w)continue}else if(k==="modal"){if(!j)continue}else if(k==="conditional"){if(!H)continue}else if(k==="computed"){if(!X)continue}else if(k==="other"&&(K||Y||N||me||w||j||H||X))continue;let Q="other";K?Q="db":Y?Q="api":N?Q="form":me?Q="button":w?Q="link":j?Q="modal":H?Q="conditional":X&&(Q="computed"),d.push({selector:z.selector,top:`${R.top+x}px`,left:`${R.left+E}px`,width:`${R.width}px`,height:`${R.height}px`,tags:f,primaryTag:Q,text:F.text||v||"",dbInfo:B,apiInfo:ee,apiSource:I,conditionalExpr:ke,modalTarget:we})}catch{}}return d}),y=e.computed(()=>{const x=_.value,E=L.value;q.value;const d=[];if(!a.isEnabled||!a.showUnannotatedDetection||a.unannotatedElements.length===0)return d;for(const k of a.unannotatedElements)try{const g=document.querySelector(k.selector);if(!g)continue;const O=g.getBoundingClientRect();d.push({selector:k.selector,top:`${O.top+x}px`,left:`${O.left+E}px`,width:`${O.width}px`,height:`${O.height}px`,category:k.category,text:k.text})}catch{}return d});function ce(x){if(!a.isPickMode)return;if(x.target.closest("[data-dev-inspector]")){V.value=null,h.value=null,a.setHoveredSelector(null);return}const d=document.elementFromPoint(x.clientX,x.clientY);if(!d||d===document.body||d===document.documentElement){V.value=null,h.value=null,a.setHoveredSelector(null);return}if(d.closest("[data-dev-inspector]"))return;h.value=d;const k=d.getBoundingClientRect();V.value={top:`${k.top+window.scrollY}px`,left:`${k.left+window.scrollX}px`,width:`${k.width}px`,height:`${k.height}px`};const g=a.generateSelector(d);a.setHoveredSelector(g)}function ye(x){if(!(!a.isPickMode||x.target.closest("[data-dev-inspector]"))&&(x.preventDefault(),x.stopPropagation(),h.value)){const d=a.generateSelector(h.value);if(a.remapTargetId){a.remapAnnotation(a.remapTargetId,d),a.remapTargetId=null,a.togglePickMode(),a.openPanel();return}a.startEditing(d),a.togglePickMode()}}function ae(x){x.key==="Escape"&&a.isPickMode&&(a.remapTargetId=null,a.togglePickMode())}function pe(){_.value=window.scrollY,L.value=window.scrollX,q.value++}return e.onMounted(()=>{window.addEventListener("mousemove",ce,!0),window.addEventListener("click",ye,!0),window.addEventListener("keydown",ae),window.addEventListener("scroll",pe),window.addEventListener("resize",pe)}),e.onUnmounted(()=>{window.removeEventListener("mousemove",ce,!0),window.removeEventListener("click",ye,!0),window.removeEventListener("keydown",ae),window.removeEventListener("scroll",pe),window.removeEventListener("resize",pe)}),e.watch(()=>a.isPickMode,x=>{x||(V.value=null,h.value=null)}),(x,E)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.unref(a).isInitializing?(e.openBlock(),e.createElementBlock("div",kr,[...E[1]||(E[1]=[e.createElementVNode("div",{class:"di-loading-content"},[e.createElementVNode("div",{class:"di-loading-spinner"}),e.createElementVNode("span",{class:"di-loading-text"},"Developer Mode 起動中...")],-1)])])):e.createCommentVNode("",!0),e.unref(a).isPickMode&&V.value?(e.openBlock(),e.createElementBlock("div",{key:1,"data-dev-inspector":"",class:"di-highlight",style:e.normalizeStyle({top:V.value.top,left:V.value.left,width:V.value.width,height:V.value.height})},[e.createElementVNode("div",Nr,e.toDisplayString(e.unref(a).hoveredSelector),1)],4)):e.createCommentVNode("",!0),e.unref(a).isPickMode?(e.openBlock(),e.createElementBlock("div",{key:2,"data-dev-inspector":"",class:"di-pick-banner",style:e.normalizeStyle(e.unref(a).remapTargetId?{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)"}:{})},[e.createElementVNode("span",null,e.toDisplayString(e.unref(a).remapTargetId?"新しい要素をクリックして再設定":"要素をクリックしてメモを追加"),1),E[2]||(E[2]=e.createElementVNode("kbd",null,"ESC",-1)),E[3]||(E[3]=e.createElementVNode("span",{class:"di-pick-hint"},"でキャンセル",-1))],4)):e.createCommentVNode("",!0),e.unref(a).isEnabled&&!e.unref(a).isPickMode&&!e.unref(a).editingElementId?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:3},e.renderList(ie.value,d=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{key:d.selector,"data-dev-inspector":"",class:e.normalizeClass([d.hasNote?"di-note-highlight":"di-annotation-box",{"di-element-hovered-pulse":e.unref(a).hoveredSelector===d.selector}]),style:e.normalizeStyle({top:d.top,left:d.left,width:d.width,height:d.height,borderColor:(d.hasNote,d.color),backgroundColor:e.unref(a).hoveredSelector===d.selector?d.color+"30":d.color+(d.hasNote?"18":"15")}),onClick:k=>e.unref(a).startEditing(d.selector)},[d.hasNote?(e.openBlock(),e.createElementBlock("div",gr,[e.createElementVNode("span",{class:"di-note-indicator",style:e.normalizeStyle({backgroundColor:d.color})},null,4),e.createElementVNode("div",{class:"di-annotation-label",style:e.normalizeStyle({backgroundColor:d.color})},e.toDisplayString(d.label),5)])):(e.openBlock(),e.createElementBlock("div",{key:1,class:"di-annotation-label",style:e.normalizeStyle({backgroundColor:d.color})},e.toDisplayString(d.label),5))],14,br)),[[e.vShow,!d.hasNote||e.unref(a).showNoteHighlights&&G(d.selector)]])),128)):e.createCommentVNode("",!0),e.unref(a).isEnabled&&!e.unref(a).editingElementId&&ne.value.length>0&&e.unref(a).analysisResults.length===0?(e.openBlock(),e.createElementBlock(e.Fragment,{key:4},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(ne.value,d=>(e.openBlock(),e.createElementBlock("div",{key:"scan-"+d.selector,"data-dev-inspector":"",class:e.normalizeClass(["di-scan-highlight",{"di-scan-static":d.isStatic}]),style:e.normalizeStyle({top:d.top,left:d.left,width:d.width,height:d.height}),onClick:k=>e.unref(a).startEditing(d.selector)},[e.createElementVNode("div",{class:e.normalizeClass(["di-scan-label",{"di-scan-label-static":d.isStatic}])},e.toDisplayString(d.isStatic?"固定文言":"動的データ"),3)],14,xr))),128)),e.createElementVNode("div",wr,[e.createElementVNode("span",null,e.toDisplayString(ne.value.length)+"件の要素を検出",1),e.createElementVNode("button",{onClick:E[0]||(E[0]=d=>e.unref(a).clearScanResults()),class:"di-scan-banner-close"},"✕ 閉じる")])],64)):e.createCommentVNode("",!0),e.unref(a).isEnabled&&!e.unref(a).editingElementId&&A.value.length>0?(e.openBlock(),e.createElementBlock(e.Fragment,{key:5},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(A.value,d=>(e.openBlock(),e.createElementBlock("div",{key:"analysis-"+d.selector,"data-dev-inspector":"",class:e.normalizeClass(["di-analysis-highlight","di-analysis-"+d.primaryTag]),style:e.normalizeStyle({top:d.top,left:d.left,width:d.width,height:d.height}),onClick:k=>e.unref(a).startEditing(d.selector)},[e.createElementVNode("div",{class:e.normalizeClass(["di-analysis-label","di-analysis-label-"+d.primaryTag])},[e.createElementVNode("span",Cr,e.toDisplayString($(d.primaryTag)),1),d.tags.length>1?(e.openBlock(),e.createElementBlock("span",$r,"+"+e.toDisplayString(d.tags.length-1),1)):e.createCommentVNode("",!0),d.dbInfo?(e.openBlock(),e.createElementBlock("span",Dr,e.toDisplayString(d.dbInfo),1)):e.createCommentVNode("",!0),d.apiSource?(e.openBlock(),e.createElementBlock("span",Tr,"← "+e.toDisplayString(d.apiSource),1)):e.createCommentVNode("",!0),d.conditionalExpr?(e.openBlock(),e.createElementBlock("span",Sr,e.toDisplayString(d.conditionalExpr),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"di-analysis-delete",onClick:e.withModifiers(k=>e.unref(a).removeAnalysisResult(d.selector),["stop"]),title:"この要素を非表示"},"×",8,_r)],2),d.text&&d.text.length<30?(e.openBlock(),e.createElementBlock("div",Mr,e.toDisplayString(d.text),1)):e.createCommentVNode("",!0)],14,Br))),128)),e.createElementVNode("div",Ir,[e.createElementVNode("span",null,"📊 分析データ: "+e.toDisplayString(A.value.length)+"件の要素",1)])],64)):e.createCommentVNode("",!0),e.unref(a).isEnabled&&!e.unref(a).isPickMode&&!e.unref(a).editingElementId&&y.value.length>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:6},e.renderList(y.value,d=>(e.openBlock(),e.createElementBlock("div",{key:"unannotated-"+d.selector,"data-dev-inspector":"",class:e.normalizeClass(["di-unannotated-highlight",{"di-unannotated-hovered":e.unref(a).hoveredUnannotatedSelector===d.selector,["di-unannotated-hovered-"+d.category]:e.unref(a).hoveredUnannotatedSelector===d.selector}]),style:e.normalizeStyle({top:d.top,left:d.left,width:d.width,height:d.height}),onClick:k=>e.unref(a).quickAnnotate(d.selector,d.category==="form"?"form":d.category==="action"?"action":"datasource")},[e.createElementVNode("div",{class:e.normalizeClass(["di-unannotated-label",{["di-unannotated-label-"+d.category]:e.unref(a).hoveredUnannotatedSelector===d.selector}])},[e.createElementVNode("span",null,e.toDisplayString(d.category==="binding"?"DB":d.category==="form"?"Form":"Act"),1),d.text?(e.openBlock(),e.createElementBlock("span",Lr,e.toDisplayString(d.text),1)):e.createCommentVNode("",!0)],2)],14,Ur))),128)):e.createCommentVNode("",!0)]))}}),Dt=at(Fr,[["__scopeId","data-v-45f6653b"]]),Pr={class:"di-editor-modal"},Ar={class:"di-editor-header"},Or={class:"di-header-actions"},zr={class:"di-path-badge"},jr={class:"di-editor-content"},qr={class:"di-form-group"},Hr={class:"di-form-group"},Rr={class:"di-form-section"},Kr={class:"di-form-section-header"},Yr={class:"di-api-header-actions"},Gr={class:"di-dropdown-wrapper"},Xr={key:1,class:"di-suggestion-dropdown"},Jr={key:0,class:"di-suggestion-actions"},Zr=["onMousedown","disabled"],Qr={class:"di-suggestion-endpoint"},Wr={key:0,class:"di-suggestion-timing"},ec={key:1,class:"di-suggestion-empty"},tc={key:0,class:"di-suggestion-banner"},oc={key:1,class:"di-suggestion-banner di-suggestion-banner-empty"},lc={key:2,class:"di-empty-hint"},nc={class:"di-api-entry-row"},ac=["onUpdate:modelValue"],ic=["value"],sc=["onUpdate:modelValue"],dc=["onClick"],rc={class:"di-api-entry-row2"},cc=["onUpdate:modelValue"],uc=["onUpdate:modelValue"],mc=["value"],pc={class:"di-form-section"},vc={class:"di-auth-row"},fc={key:0,class:"di-auth-details"},Vc={class:"di-form-group"},hc={class:"di-form-group"},Ec={class:"di-form-group"},yc={class:"di-form-group"},kc={class:"di-editor-footer"},Nc={class:"di-editor-actions"},bc=["disabled"],gc=e.defineComponent({__name:"DevScreenEditor",setup(T){const a=Ge.useDevInspectorStore(),V=e.ref(""),h=e.ref(""),_=e.ref([]),L=e.ref(!1),q=e.ref(""),Z=e.ref(""),W=e.ref(""),$=e.ref(""),M=e.ref(!1),G=e.ref([]),ie=e.ref(!1),ne=e.computed(()=>typeof window<"u"?window.location.pathname:"/");e.watch(()=>a.editingScreen,B=>{B&&A()});function A(){var v,f,ee,I;const B=a.getScreenConfig();B?(V.value=B.name,h.value=B.description||"",_.value=B.apis.map(ke=>({...ke})),L.value=((v=B.auth)==null?void 0:v.required)||!1,q.value=((ee=(f=B.auth)==null?void 0:f.roles)==null?void 0:ee.join(", "))||"",Z.value=((I=B.auth)==null?void 0:I.description)||"",W.value=B.figmaUrl||"",$.value=B.notes||""):y()}function y(){V.value="",h.value="",_.value=[],L.value=!1,q.value="",Z.value="",W.value="",$.value=""}function ce(){a.editingScreen=!1,y()}function ye(){_.value.push({method:"GET",endpoint:"",description:"",loadTiming:"onMount"})}function ae(B){_.value.splice(B,1)}function pe(){if(!V.value.trim())return;const B={path:ne.value,name:V.value.trim(),description:h.value.trim()||void 0,apis:_.value.filter(v=>v.endpoint.trim()),auth:L.value||q.value.trim()?{required:L.value,roles:q.value.trim()?q.value.split(",").map(v=>v.trim()).filter(Boolean):void 0,description:Z.value.trim()||void 0}:void 0,figmaUrl:W.value.trim()||void 0,notes:$.value.trim()||void 0,updatedAt:new Date().toISOString()};a.setScreenConfig(B),ce()}function x(){a.deleteScreenConfig(ne.value),ce()}const E={GET:"#10b981",POST:"#3b82f6",PUT:"#f59e0b",DELETE:"#ef4444",PATCH:"#8b5cf6"},d={onMount:"読込時",action:"アクション",conditional:"条件付き"};function k(){G.value=a.suggestScreenApis(),M.value=!0}function g(B){return _.value.some(v=>v.method===B.method&&v.endpoint===B.endpoint)}const O=e.computed(()=>G.value.filter(B=>!g(B)));function z(B){g(B)||_.value.push({...B})}function F(){for(const B of O.value)_.value.push({...B})}function C(){setTimeout(()=>{ie.value=!1},150)}const R=["GET","POST","PUT","DELETE","PATCH"],se=[{value:"onMount",label:"画面読込時"},{value:"action",label:"アクション時"},{value:"conditional",label:"条件付き"}];return(B,v)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.unref(a).editingScreen?(e.openBlock(),e.createElementBlock("div",{key:0,class:"di-editor-overlay",onClick:e.withModifiers(ce,["self"]),"data-dev-inspector":""},[e.createElementVNode("div",Pr,[e.createElementVNode("div",Ar,[v[9]||(v[9]=e.createElementVNode("h3",null,"画面情報を編集",-1)),e.createElementVNode("div",Or,[e.createElementVNode("span",zr,e.toDisplayString(ne.value),1),e.createElementVNode("button",{onClick:ce,class:"di-editor-close"},[e.createVNode(e.unref(Me),{style:{width:"20px",height:"20px"}})])])]),e.createElementVNode("div",jr,[e.createElementVNode("div",qr,[v[10]||(v[10]=e.createElementVNode("label",{class:"di-form-label"},"画面名 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":v[0]||(v[0]=f=>V.value=f),type:"text",placeholder:"ユーザー詳細",class:"di-input"},null,512),[[e.vModelText,V.value]])]),e.createElementVNode("div",Hr,[v[11]||(v[11]=e.createElementVNode("label",{class:"di-form-label"},"画面の説明",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":v[1]||(v[1]=f=>h.value=f),rows:"2",placeholder:"この画面の概要...",class:"di-textarea"},null,512),[[e.vModelText,h.value]])]),e.createElementVNode("div",Rr,[e.createElementVNode("div",Kr,[v[15]||(v[15]=e.createElementVNode("label",{class:"di-form-label"},"API一覧",-1)),e.createElementVNode("div",Yr,[e.createElementVNode("button",{onClick:k,class:"di-btn-suggest",title:"要素情報からAPI推定"},[e.createVNode(e.unref(nt),{style:{width:"13px",height:"13px"}}),v[12]||(v[12]=e.createTextVNode(" 自動推定 ",-1))]),e.createElementVNode("div",Gr,[G.value.length>0?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:v[2]||(v[2]=f=>ie.value=!ie.value),onBlur:v[3]||(v[3]=f=>C()),class:"di-btn-dropdown",title:"推定結果から選択"},[e.createVNode(e.unref(xt),{style:{width:"13px",height:"13px"}}),v[13]||(v[13]=e.createTextVNode(" 候補から選択 ",-1))],32)):e.createCommentVNode("",!0),ie.value&&G.value.length>0?(e.openBlock(),e.createElementBlock("div",Xr,[O.value.length>0?(e.openBlock(),e.createElementBlock("div",Jr,[e.createElementVNode("button",{onMousedown:e.withModifiers(F,["prevent"]),class:"di-suggestion-add-all"}," すべて追加 ("+e.toDisplayString(O.value.length)+") ",33)])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(G.value,(f,ee)=>(e.openBlock(),e.createElementBlock("button",{key:ee,onMousedown:e.withModifiers(I=>z(f),["prevent"]),class:e.normalizeClass(["di-suggestion-item",{"di-suggestion-added":g(f)}]),disabled:g(f)},[e.createElementVNode("span",{class:"di-suggestion-method",style:e.normalizeStyle({backgroundColor:E[f.method]+"20",color:E[f.method]})},e.toDisplayString(f.method),5),e.createElementVNode("code",Qr,e.toDisplayString(f.endpoint),1),f.loadTiming?(e.openBlock(),e.createElementBlock("span",Wr,e.toDisplayString(d[f.loadTiming]||f.loadTiming),1)):e.createCommentVNode("",!0),g(f)?(e.openBlock(),e.createBlock(e.unref(uo),{key:1,style:{width:"12px",height:"12px",color:"#10b981","flex-shrink":"0"}})):e.createCommentVNode("",!0)],42,Zr))),128)),G.value.length===0?(e.openBlock(),e.createElementBlock("div",ec," 推定結果がありません ")):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),e.createElementVNode("button",{onClick:ye,class:"di-btn-add"},[e.createVNode(e.unref(Je),{style:{width:"14px",height:"14px"}}),v[14]||(v[14]=e.createTextVNode(" 手動追加 ",-1))])])]),M.value&&G.value.length>0&&O.value.length>0?(e.openBlock(),e.createElementBlock("div",tc,[e.createVNode(e.unref(nt),{style:{width:"13px",height:"13px",color:"#f59e0b","flex-shrink":"0"}}),e.createElementVNode("span",null,e.toDisplayString(G.value.length)+"件のAPIを推定しました",1),e.createElementVNode("button",{onMousedown:e.withModifiers(F,["prevent"]),class:"di-suggestion-banner-btn"},"すべて追加",32)])):M.value&&G.value.length===0?(e.openBlock(),e.createElementBlock("div",oc,[...v[16]||(v[16]=[e.createElementVNode("span",null,"要素のDB情報からAPIを推定できませんでした。要素にDB情報を登録してください。",-1)])])):e.createCommentVNode("",!0),_.value.length===0&&!M.value?(e.openBlock(),e.createElementBlock("div",lc," APIが未登録です。「自動推定」で要素情報からAPIを推定できます。 ")):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_.value,(f,ee)=>(e.openBlock(),e.createElementBlock("div",{key:ee,class:"di-api-entry"},[e.createElementVNode("div",nc,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":I=>f.method=I,class:"di-select di-select-method"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(R,I=>e.createElementVNode("option",{key:I,value:I},e.toDisplayString(I),9,ic)),64))],8,ac),[[e.vModelSelect,f.method]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":I=>f.endpoint=I,type:"text",placeholder:"/api/users/:id",class:"di-input di-input-endpoint"},null,8,sc),[[e.vModelText,f.endpoint]]),e.createElementVNode("button",{onClick:I=>ae(ee),class:"di-btn-remove"},[e.createVNode(e.unref(go),{style:{width:"14px",height:"14px"}})],8,dc)]),e.createElementVNode("div",rc,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":I=>f.description=I,type:"text",placeholder:"説明（任意）",class:"di-input di-input-desc"},null,8,cc),[[e.vModelText,f.description]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":I=>f.loadTiming=I,class:"di-select di-select-timing"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(se,I=>e.createElementVNode("option",{key:I.value,value:I.value},e.toDisplayString(I.label),9,mc)),64))],8,uc),[[e.vModelSelect,f.loadTiming]])])]))),128))]),e.createElementVNode("div",pc,[v[20]||(v[20]=e.createElementVNode("label",{class:"di-form-label"},"認証設定",-1)),e.createElementVNode("div",vc,[e.createElementVNode("button",{onClick:v[4]||(v[4]=f=>L.value=!L.value),class:e.normalizeClass(["di-toggle-btn",{active:L.value}])},[e.createElementVNode("span",{class:e.normalizeClass(["di-toggle-knob",{active:L.value}])},null,2)],2),v[17]||(v[17]=e.createElementVNode("span",{class:"di-auth-label"},"ログイン必須",-1))]),L.value?(e.openBlock(),e.createElementBlock("div",fc,[e.createElementVNode("div",Vc,[v[18]||(v[18]=e.createElementVNode("label",{class:"di-form-label"},"必要ロール（カンマ区切り）",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":v[5]||(v[5]=f=>q.value=f),type:"text",placeholder:"admin, manager",class:"di-input"},null,512),[[e.vModelText,q.value]])]),e.createElementVNode("div",hc,[v[19]||(v[19]=e.createElementVNode("label",{class:"di-form-label"},"認証メモ",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":v[6]||(v[6]=f=>Z.value=f),type:"text",placeholder:"自分のデータのみ閲覧可",class:"di-input"},null,512),[[e.vModelText,Z.value]])])])):e.createCommentVNode("",!0)]),e.createElementVNode("div",Ec,[v[21]||(v[21]=e.createElementVNode("label",{class:"di-form-label"},"Figma URL",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":v[7]||(v[7]=f=>W.value=f),type:"text",placeholder:"https://www.figma.com/design/...",class:"di-input"},null,512),[[e.vModelText,W.value]])]),e.createElementVNode("div",yc,[v[22]||(v[22]=e.createElementVNode("label",{class:"di-form-label"},"メモ",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":v[8]||(v[8]=f=>$.value=f),rows:"3",placeholder:"この画面に関するメモ...",class:"di-textarea"},null,512),[[e.vModelText,$.value]])])]),e.createElementVNode("div",kc,[e.createElementVNode("button",{onClick:x,class:"di-btn-delete"},[e.createVNode(e.unref(We),{style:{width:"14px",height:"14px"}}),v[23]||(v[23]=e.createTextVNode(" 削除 ",-1))]),e.createElementVNode("div",Nc,[e.createElementVNode("button",{onClick:ce,class:"di-btn-cancel"},"キャンセル"),e.createElementVNode("button",{onClick:pe,class:"di-btn-save",disabled:!V.value.trim()},[e.createVNode(e.unref(Bt),{style:{width:"14px",height:"14px"}}),v[24]||(v[24]=e.createTextVNode(" 保存 ",-1))],8,bc)])])])])):e.createCommentVNode("",!0)]))}}),Tt=at(gc,[["__scopeId","data-v-a3b58e7a"]]),xc={key:0,"data-dev-inspector":""},St=e.defineComponent({__name:"DevInspector",props:{storageKey:{default:"devInspector:elementConfigs"},enabledInProduction:{type:Boolean,default:!1},initialAnnotations:{},analysisData:{},analysisDataUrl:{},autoLoadAnalysis:{type:Boolean},autoApplyAnalysis:{type:Boolean}},setup(T){const a=T,V=Ge.useDevInspectorStore();return e.onMounted(()=>{V.init({storageKey:a.storageKey,enabledInProduction:a.enabledInProduction,initialAnnotations:a.initialAnnotations})}),(h,_)=>e.unref(V).isAvailable?(e.openBlock(),e.createElementBlock("div",xc,[e.createVNode(Ct),e.createVNode($t),e.createVNode(Tt),e.createVNode(Dt)])):e.createCommentVNode("",!0)}}),_t={install(T,a={}){const{autoRegister:V=!0,...h}=a;V&&T.component("DevInspector",St),T.provide("devInspectorOptions",h)}};exports.useDevInspector=Ge.useDevInspector;exports.useDevInspectorStore=Ge.useDevInspectorStore;exports.vitePluginDevInspector=io.default;exports.DevElementEditor=$t;exports.DevInspector=St;exports.DevPanel=Ct;exports.DevPickOverlay=Dt;exports.DevScreenEditor=Tt;exports.VueDevInspector=_t;exports.default=_t;
