"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),X=require("./useDevInspector-DCo9VRJj.cjs"),De=require("./vite.cjs");/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=m=>m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),g=(m,l)=>({size:d,strokeWidth:p=2,absoluteStrokeWidth:V,color:x,class:$,...D},{attrs:b,slots:c})=>e.h("svg",{...Q,width:d||Q.width,height:d||Q.height,stroke:x||Q.stroke,"stroke-width":V?Number(p)*24/Number(d):p,...b,class:["lucide",`lucide-${Ie(m)}`],...D},[...l.map(U=>e.h(...U)),...c.default?[c.default()]:[]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=g("AlertCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=g("AlertTriangleIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=g("CheckSquareIcon",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=g("CodeIcon",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=g("DatabaseIcon",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=g("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=g("ExternalLinkIcon",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=g("FileSpreadsheetIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=g("FileTextIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=g("GitBranchIcon",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=g("GlobeIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=g("HelpCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=g("InfoIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=g("LinkIcon",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=g("Loader2Icon",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=g("MessageSquareIcon",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=g("MousePointer2Icon",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=g("PenLineIcon",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=g("SaveIcon",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=g("ScanIcon",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=g("ServerIcon",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=g("Settings2Icon",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=g("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=g("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=g("Wand2Icon",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=g("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=g("ZapIcon",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);async function Ye(m,l,d={}){var v;const p=await Promise.resolve().then(()=>require("./xlsx-qn1xoUuv.cjs")),{systemName:V="System",author:x=""}=d,$=new Date,D=`${$.getFullYear()}/${$.getMonth()+1}/${$.getDate()}`,b=p.utils.book_new(),c=[];c.push(["画面機能仕様書","","","","","","","","","","","システム名","","","","",V,"","","","","","画面ID/画面名","","","","",(m==null?void 0:m.name)||"","","","","","","作成者","","","","",x,"","作成日","","","","",D]),c.push([]),c.push(["URL","","","","","","","","","","","画面英語名","","","","","","","","","","","View Component","","","","",(m==null?void 0:m.componentPath)||"","","","","","","Figma URL","","","","",(m==null?void 0:m.figmaUrl)||""]),c.push([]),c.push(["機能概要"]),c.push([(m==null?void 0:m.description)||""]),c.push([]),c.push(["画面レイアウト　figmaURL"]),c.push([(m==null?void 0:m.figmaUrl)||""]),c.push([]),m!=null&&m.apis&&m.apis.length>0&&(c.push(["API一覧"]),c.push(["","メソッド","","エンドポイント","","","","","","","","説明"]),m.apis.forEach(s=>{c.push(["",s.method,"",s.endpoint,"","","","","","","",s.description])}),c.push([])),c.push(["画面項目　ヘッダーフッターは省く"]),c.push(["","No.","","項目名","","","","","","","","","","","","説明","","","","","","","","","","","","","","","","表示条件","","","","","","","","","","","","","","","備考"]),Object.values(l).forEach((s,a)=>{var w,B,N;const f=s.id;let h="",E="",k="";if((w=s.note)!=null&&w.text&&(h=s.note.text),s.fieldInfo&&(h+=h?`
`:"",h+=`DB: ${s.fieldInfo.table}.${s.fieldInfo.column}`,s.fieldInfo.type&&(h+=` (${s.fieldInfo.type})`),s.fieldInfo.description&&(h+=`
${s.fieldInfo.description}`)),s.actionInfo&&(k=`[${{navigate:"画面遷移",api:"API呼び出し",modal:"モーダル表示",emit:"イベント発火",function:"関数実行"}[s.actionInfo.type]||s.actionInfo.type}]`,s.actionInfo.target&&(k+=` ${s.actionInfo.method||""} ${s.actionInfo.target}`),s.actionInfo.description&&(k+=`
${s.actionInfo.description}`)),s.links){const y=[];s.links.testPath&&y.push(`テスト: ${s.links.testPath}`),s.links.figmaUrl&&y.push(`Figma: ${s.links.figmaUrl}`),s.links.githubIssue&&y.push(`Issue: ${s.links.githubIssue}`),s.links.githubPr&&y.push(`PR: ${s.links.githubPr}`),y.length>0&&(k+=k?`

`:"",k+=y.join(`
`))}if(s.devMeta){const y=[];(B=s.devMeta.usedStores)!=null&&B.length&&y.push(`Store: ${s.devMeta.usedStores.join(", ")}`),(N=s.devMeta.usedComponents)!=null&&N.length&&y.push(`Components: ${s.devMeta.usedComponents.join(", ")}`),s.devMeta.accessibility&&y.push(`A11y: ${s.devMeta.accessibility}`),s.devMeta.responsive&&y.push(`Responsive: ${s.devMeta.responsive}`),y.length>0&&(k+=k?`

`:"",k+=`[開発情報]
`+y.join(`
`))}c.push(["",a+1,"",f,"","","","","","","","","","","",h,"","","","","","","","","","","","","","","",E,"","","","","","","","","","","","","","",k])});const z=p.utils.aoa_to_sheet(c);z["!cols"]=[{wch:3},{wch:5},{wch:3},{wch:20},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:30},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:20},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:30}],p.utils.book_append_sheet(b,z,"画面設計書");const P=`画面仕様書_${((v=m==null?void 0:m.name)==null?void 0:v.replace(/[/\\?%*:|"<>]/g,"-"))||"screen"}_${D.replace(/\//g,"")}.xlsx`;return p.writeFile(b,P),P}const Ze={key:0,class:"di-panel","data-dev-inspector":""},Je={class:"di-header"},We={class:"di-header-title"},Qe={class:"di-edit-section"},et={class:"di-scan-section"},tt=["disabled"],lt=["disabled"],ot={class:"di-scan-section"},nt=["disabled","title"],at={key:0,class:"di-scan-results"},st={key:0,class:"di-scan-result-item"},it={class:"di-scan-result-count"},dt={class:"di-scan-result-count"},rt={class:"di-analysis-section"},ct={class:"di-analysis-header"},ut={class:"di-analysis-input"},mt={class:"di-analysis-buttons"},pt=["disabled"],vt=["disabled"],yt={key:0,class:"di-analysis-error"},ft={key:1,class:"di-analysis-status"},kt={class:"di-analysis-count"},bt={key:2,class:"di-analysis-filter"},ht={class:"di-filter-buttons"},Et=["onClick"],Vt={key:0,class:"di-hidden-actions"},Nt=["disabled"],gt={key:1},xt={key:2},wt={class:"di-content"},Bt={class:"di-section"},Ct={class:"di-screen-name"},$t={class:"di-screen-desc"},Dt={class:"di-card"},It={class:"di-card-label"},Mt={class:"di-code-blue"},St={key:0,class:"di-card"},Tt={class:"di-card-label"},_t=["href"],Pt={key:1,class:"di-card"},At={class:"di-card-label"},Lt={class:"di-api-list"},Ut={class:"di-api-info"},zt={class:"di-api-endpoint"},Ft={class:"di-api-desc"},Rt={key:2,class:"di-card"},qt={class:"di-card-label"},jt={class:"di-notes-list"},Ot={key:1,class:"di-no-spec"},Ht={class:"di-card"},Gt={class:"di-card-header"},Xt={class:"di-card-label"},Kt={class:"di-count-badge"},Yt={key:0,class:"di-export-buttons"},Zt={key:1,class:"di-export-hint"},Jt={class:"di-action-buttons"},Wt={key:0,class:"di-indicator","data-dev-inspector":""},Qt={class:"di-modal"},el=["value"],tl={class:"di-modal-actions"},ll={class:"di-modal"},ol={class:"di-file-drop"},nl={key:0,class:"di-error"},al={class:"di-modal-actions"},sl=["disabled"],il=e.defineComponent({__name:"DevPanel",setup(m){const l=X.useDevInspectorStore(),d=e.inject("router",null),p=e.ref(!1),V=e.ref(!1),x=e.ref(""),$=e.ref(""),D={GET:"#10b981",POST:"#3b82f6",PUT:"#f59e0b",DELETE:"#ef4444",PATCH:"#8b5cf6"},b=e.computed(()=>l.currentScreenSpec),c=e.computed(()=>Object.keys(l.elementConfigs).length);function U(){const C=l.exportConfigs();navigator.clipboard.writeText(C),p.value=!1}function z(){const C=l.exportConfigs(),n=new Blob([C],{type:"application/json"}),F=URL.createObjectURL(n),r=document.createElement("a");r.href=F,r.download="dev-mode-configs.json",r.click(),URL.revokeObjectURL(F),p.value=!1}function M(){l.downloadAnnotations()}async function P(){try{await Ye(l.currentScreenSpec,l.elementConfigs,{systemName:"System"})}catch(C){console.error("Failed to export xlsx:",C),alert("xlsx export failed. Make sure xlsx package is installed.")}}function v(){try{l.importConfigs(x.value),x.value="",$.value="",V.value=!1}catch{$.value="JSONの形式が正しくありません"}}function s(C){var j;const F=(j=C.target.files)==null?void 0:j[0];if(!F)return;const r=new FileReader;r.onload=le=>{var q;x.value=(q=le.target)==null?void 0:q.result},r.readAsText(F)}function a(){confirm("すべての要素設定を削除しますか？")&&l.clearAllConfigs()}const f=e.ref(0),h=e.ref(!1),E=e.ref([]);async function k(C=!1){h.value=!0,f.value=await l.scanCurrentPage({rescan:C})}async function w(){if(!d){alert("Vue Routerが見つかりません。全ページスキャンにはVue Routerが必要です。");return}confirm("全ページをスキャンします。ページ遷移が発生しますがよろしいですか？")&&(h.value=!0,E.value=await l.scanAllPages(d))}const B=e.ref("/dev-inspector-analysis.json"),N=e.ref(!1),y=e.ref(""),S=e.ref(0),u=e.ref(!1),T=[{value:"all",label:"すべて"},{value:"db-api",label:"DB/API"},{value:"static",label:"固定文言"},{value:"data",label:"動的データ"},{value:"other",label:"その他"},{value:"none",label:"非表示"}];async function A(){N.value=!0,y.value="";try{if(await l.loadAnalysisData(B.value),l.analysisData){const C=Object.values(l.analysisData.components).reduce((n,F)=>n+F.elements.length,0);alert(`分析データを読み込みました（${Object.keys(l.analysisData.components).length}コンポーネント、${C}要素）`)}else y.value="分析データの読み込みに失敗しました"}catch(C){y.value=`読み込みエラー: ${C}`}finally{N.value=!1}}async function L(){if(!l.analysisData){alert("先に分析データを読み込んでください");return}S.value=await l.applyAnalysisToPage()}async function _(){u.value=!0;try{l.clearHiddenSelectors(),l.analysisData&&await l.applyAnalysisToPage()}finally{u.value=!1}}return(C,n)=>{var F;return e.openBlock(),e.createElementBlock(e.Fragment,null,[(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.unref(l).isEnabled&&!e.unref(l).isPanelOpen?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:n[0]||(n[0]=(...r)=>e.unref(l).openPanel&&e.unref(l).openPanel(...r)),class:"di-fab",title:"画面仕様を表示","data-dev-inspector":""},[e.createVNode(e.unref(ve),{style:{width:"20px",height:"20px"}})])):e.createCommentVNode("",!0)])),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.unref(l).isEnabled&&e.unref(l).isPanelOpen?(e.openBlock(),e.createElementBlock("div",Ze,[e.createElementVNode("div",Je,[e.createElementVNode("div",We,[e.createVNode(e.unref(me),{style:{width:"20px",height:"20px",color:"#60a5fa"}}),n[15]||(n[15]=e.createElementVNode("span",null,"Developer Mode",-1))]),e.createElementVNode("button",{onClick:n[1]||(n[1]=(...r)=>e.unref(l).closePanel&&e.unref(l).closePanel(...r)),class:"di-close-btn"},[e.createVNode(e.unref(se),{style:{width:"20px",height:"20px"}})])]),e.createElementVNode("div",Qe,[e.createElementVNode("button",{onClick:n[2]||(n[2]=(...r)=>e.unref(l).togglePickMode&&e.unref(l).togglePickMode(...r)),class:e.normalizeClass(["di-pick-btn",{active:e.unref(l).isPickMode}])},[e.createVNode(e.unref(qe),{style:{width:"16px",height:"16px"}}),e.createElementVNode("span",null,e.toDisplayString(e.unref(l).isPickMode?"要素選択中...":"任意の要素にメモを追加"),1)],2),e.createElementVNode("div",et,[e.createElementVNode("button",{onClick:n[3]||(n[3]=r=>k(!1)),class:"di-scan-btn",disabled:e.unref(l).isScanning,title:"新規要素のみスキャン"},[e.unref(l).isScanning&&!e.unref(l).currentScanPage?(e.openBlock(),e.createBlock(e.unref(te),{key:0,class:"di-spin",style:{width:"16px",height:"16px"}})):(e.openBlock(),e.createBlock(e.unref(ae),{key:1,style:{width:"16px",height:"16px"}})),e.createElementVNode("span",null,e.toDisplayString(e.unref(l).isScanning&&!e.unref(l).currentScanPage?`${e.unref(l).scanProgress}%`:"スキャン"),1)],8,tt),e.createElementVNode("button",{onClick:n[4]||(n[4]=r=>k(!0)),class:"di-scan-btn di-scan-btn-rescan",disabled:e.unref(l).isScanning,title:"既存の設定をクリアして再スキャン"},[e.createVNode(e.unref(ae),{style:{width:"16px",height:"16px"}}),n[16]||(n[16]=e.createElementVNode("span",null,"再スキャン",-1))],8,lt)]),e.createElementVNode("div",ot,[e.createElementVNode("button",{onClick:w,class:"di-scan-btn di-scan-btn-all",disabled:e.unref(l).isScanning,title:e.unref(d)?"全ページをスキャン":"Vue Routerが必要です"},[e.unref(l).isScanning&&e.unref(l).currentScanPage?(e.openBlock(),e.createBlock(e.unref(te),{key:0,class:"di-spin",style:{width:"16px",height:"16px"}})):(e.openBlock(),e.createBlock(e.unref(Le),{key:1,style:{width:"16px",height:"16px"}})),e.createElementVNode("span",null,e.toDisplayString(e.unref(l).currentScanPage?`${e.unref(l).currentScanPage}`:"全ページスキャン"),1)],8,nt)]),h.value&&(f.value>0||E.value.length>0)?(e.openBlock(),e.createElementBlock("div",at,[f.value>0?(e.openBlock(),e.createElementBlock("div",st,[e.createElementVNode("span",it,e.toDisplayString(f.value),1),n[17]||(n[17]=e.createElementVNode("span",null,"件の要素を検出・登録しました",-1))])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(E.value,r=>(e.openBlock(),e.createElementBlock("div",{key:r.page,class:"di-scan-result-item"},[e.createElementVNode("code",null,e.toDisplayString(r.page),1),e.createElementVNode("span",dt,e.toDisplayString(r.count),1)]))),128)),e.createElementVNode("button",{onClick:n[5]||(n[5]=r=>{h.value=!1,E.value=[]}),class:"di-scan-close"}," 閉じる ")])):e.createCommentVNode("",!0),e.createElementVNode("div",rt,[e.createElementVNode("div",ct,[e.createVNode(e.unref(ye),{style:{width:"16px",height:"16px",color:"#3b82f6"}}),n[18]||(n[18]=e.createElementVNode("span",null,"CLIソース解析",-1))]),e.createElementVNode("div",ut,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":n[6]||(n[6]=r=>B.value=r),type:"text",class:"di-analysis-url",placeholder:"/dev-inspector-analysis.json"},null,512),[[e.vModelText,B.value]])]),e.createElementVNode("div",mt,[e.createElementVNode("button",{onClick:A,class:"di-analysis-btn",disabled:N.value},[N.value?(e.openBlock(),e.createBlock(e.unref(te),{key:0,class:"di-spin",style:{width:"14px",height:"14px"}})):(e.openBlock(),e.createBlock(e.unref(ee),{key:1,style:{width:"14px",height:"14px"}})),n[19]||(n[19]=e.createElementVNode("span",null,"読み込み",-1))],8,pt),e.createElementVNode("button",{onClick:L,class:"di-analysis-btn di-analysis-btn-apply",disabled:!e.unref(l).analysisData},[e.createVNode(e.unref(ae),{style:{width:"14px",height:"14px"}}),n[20]||(n[20]=e.createElementVNode("span",null,"ページに適用",-1))],8,vt)]),y.value?(e.openBlock(),e.createElementBlock("div",yt,e.toDisplayString(y.value),1)):e.createCommentVNode("",!0),e.unref(l).analysisResults.length>0?(e.openBlock(),e.createElementBlock("div",ft,[e.createElementVNode("span",kt,e.toDisplayString(e.unref(l).analysisResults.filter(r=>r.matched).length),1),e.createElementVNode("span",null,"/ "+e.toDisplayString(e.unref(l).analysisResults.length)+" 要素がマッチ",1)])):e.createCommentVNode("",!0),e.unref(l).analysisResults.length>0?(e.openBlock(),e.createElementBlock("div",bt,[n[22]||(n[22]=e.createElementVNode("span",{class:"di-filter-label"},"表示フィルター:",-1)),e.createElementVNode("div",ht,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(T,r=>e.createElementVNode("button",{key:r.value,onClick:j=>e.unref(l).analysisFilter=r.value,class:e.normalizeClass(["di-filter-btn",{active:e.unref(l).analysisFilter===r.value}])},e.toDisplayString(r.label),11,Et)),64))]),e.unref(l).hiddenAnalysisSelectors.size>0?(e.openBlock(),e.createElementBlock("div",Vt,[e.createElementVNode("button",{onClick:_,class:"di-restore-btn",disabled:u.value},[u.value?(e.openBlock(),e.createBlock(e.unref(te),{key:0,class:"di-spin",style:{width:"12px",height:"12px"}})):e.createCommentVNode("",!0),u.value?(e.openBlock(),e.createElementBlock("span",gt,"リセット中...")):(e.openBlock(),e.createElementBlock("span",xt,"非表示 ("+e.toDisplayString(e.unref(l).hiddenAnalysisSelectors.size)+") をリセット",1))],8,Nt),e.createElementVNode("button",{onClick:n[7]||(n[7]=r=>e.unref(l).downloadChanges()),class:"di-export-changes-btn",title:"削除した要素をエクスポート (CLI merge用)"},[e.createVNode(e.unref(ee),{style:{width:"12px",height:"12px"}}),n[21]||(n[21]=e.createElementVNode("span",null,"変更をエクスポート",-1))])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])]),e.createElementVNode("div",wt,[b.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("div",Bt,[e.createElementVNode("h2",Ct,e.toDisplayString(b.value.name),1),e.createElementVNode("p",$t,e.toDisplayString(b.value.description),1)]),e.createElementVNode("div",Dt,[e.createElementVNode("div",It,[e.createVNode(e.unref(me),{style:{width:"16px",height:"16px"}}),n[23]||(n[23]=e.createElementVNode("span",null,"Component Path",-1))]),e.createElementVNode("code",Mt,e.toDisplayString(b.value.componentPath),1)]),b.value.figmaUrl?(e.openBlock(),e.createElementBlock("div",St,[e.createElementVNode("div",Tt,[e.createVNode(e.unref(_e),{style:{width:"16px",height:"16px"}}),n[24]||(n[24]=e.createElementVNode("span",null,"Figma Design",-1))]),e.createElementVNode("a",{href:b.value.figmaUrl,target:"_blank",class:"di-link-purple"},e.toDisplayString(b.value.figmaUrl),9,_t)])):e.createCommentVNode("",!0),b.value.apis.length?(e.openBlock(),e.createElementBlock("div",Pt,[e.createElementVNode("div",At,[e.createVNode(e.unref(ye),{style:{width:"16px",height:"16px"}}),n[25]||(n[25]=e.createElementVNode("span",null,"API Endpoints",-1))]),e.createElementVNode("div",Lt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(b.value.apis,(r,j)=>(e.openBlock(),e.createElementBlock("div",{key:j,class:"di-api-item"},[e.createElementVNode("span",{class:"di-method-badge",style:e.normalizeStyle({backgroundColor:D[r.method]+"20",color:D[r.method]})},e.toDisplayString(r.method),5),e.createElementVNode("div",Ut,[e.createElementVNode("code",zt,e.toDisplayString(r.endpoint),1),e.createElementVNode("p",Ft,e.toDisplayString(r.description),1)])]))),128))])])):e.createCommentVNode("",!0),(F=b.value.notes)!=null&&F.length?(e.openBlock(),e.createElementBlock("div",Rt,[e.createElementVNode("div",qt,[e.createVNode(e.unref(Me),{style:{width:"16px",height:"16px"}}),n[26]||(n[26]=e.createElementVNode("span",null,"Notes",-1))]),e.createElementVNode("ul",jt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(b.value.notes,(r,j)=>(e.openBlock(),e.createElementBlock("li",{key:j,class:"di-note-item"},[n[27]||(n[27]=e.createElementVNode("span",{class:"di-bullet"},"•",-1)),e.createElementVNode("span",null,e.toDisplayString(r),1)]))),128))])])):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock("div",Ot,[e.createVNode(e.unref(ve),{style:{width:"48px",height:"48px",color:"#334155"}}),n[28]||(n[28]=e.createElementVNode("p",null,[e.createTextVNode("この画面の仕様情報は"),e.createElementVNode("br"),e.createTextVNode("まだ登録されていません")],-1))])),e.createElementVNode("div",Ht,[e.createElementVNode("div",Gt,[e.createElementVNode("div",Xt,[e.createVNode(e.unref(je),{style:{width:"16px",height:"16px"}}),n[29]||(n[29]=e.createElementVNode("span",null,"登録済み要素",-1)),e.createElementVNode("span",Kt,e.toDisplayString(c.value),1)])]),c.value>0?(e.openBlock(),e.createElementBlock("div",Yt,[e.createElementVNode("button",{onClick:M,class:"di-btn-green"},[e.createVNode(e.unref(Ae),{style:{width:"16px",height:"16px"}}),n[30]||(n[30]=e.createTextVNode(" Git管理用に保存 ",-1))]),e.createElementVNode("button",{onClick:P,class:"di-btn-blue"},[e.createVNode(e.unref(Pe),{style:{width:"16px",height:"16px"}}),n[31]||(n[31]=e.createTextVNode(" 画面仕様書 (xlsx) 出力 ",-1))])])):e.createCommentVNode("",!0),c.value>0?(e.openBlock(),e.createElementBlock("p",Zt,[...n[32]||(n[32]=[e.createTextVNode(" JSON: ",-1),e.createElementVNode("code",null,"dev-annotations.json",-1),e.createTextVNode(" に配置してcommit ",-1)])])):e.createCommentVNode("",!0),e.createElementVNode("div",Jt,[e.createElementVNode("button",{onClick:n[8]||(n[8]=r=>p.value=!0),class:"di-btn-small"},[e.createVNode(e.unref(ee),{style:{width:"14px",height:"14px"}}),n[33]||(n[33]=e.createTextVNode(" エクスポート ",-1))]),e.createElementVNode("button",{onClick:n[9]||(n[9]=r=>V.value=!0),class:"di-btn-small"},[e.createVNode(e.unref(Ge),{style:{width:"14px",height:"14px"}}),n[34]||(n[34]=e.createTextVNode(" インポート ",-1))]),c.value>0?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:a,class:"di-btn-small di-btn-danger"},[e.createVNode(e.unref(fe),{style:{width:"14px",height:"14px"}}),n[35]||(n[35]=e.createTextVNode(" 全削除 ",-1))])):e.createCommentVNode("",!0)])])]),n[36]||(n[36]=e.createElementVNode("div",{class:"di-footer"},[e.createElementVNode("kbd",null,"Ctrl"),e.createElementVNode("span",null,"+"),e.createElementVNode("kbd",null,"Shift"),e.createElementVNode("span",null,"+"),e.createElementVNode("kbd",null,"D"),e.createElementVNode("span",{class:"di-footer-text"},"で開発者モード切替")],-1))])):e.createCommentVNode("",!0)])),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.unref(l).isEnabled?(e.openBlock(),e.createElementBlock("div",Wt,[...n[37]||(n[37]=[e.createElementVNode("span",{class:"di-indicator-dot"},null,-1),e.createTextVNode(" Developer Mode ",-1)])])):e.createCommentVNode("",!0)])),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[p.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"di-modal-overlay",onClick:n[11]||(n[11]=e.withModifiers(r=>p.value=!1,["self"])),"data-dev-inspector":""},[e.createElementVNode("div",Qt,[n[39]||(n[39]=e.createElementVNode("h3",{class:"di-modal-title"},"設定をエクスポート",-1)),e.createElementVNode("textarea",{readonly:"",value:e.unref(l).exportConfigs(),class:"di-modal-textarea"},null,8,el),e.createElementVNode("div",tl,[e.createElementVNode("button",{onClick:n[10]||(n[10]=r=>p.value=!1),class:"di-btn-small"},"閉じる"),e.createElementVNode("button",{onClick:z,class:"di-btn-small di-btn-gray"},[e.createVNode(e.unref(ee),{style:{width:"14px",height:"14px"}}),n[38]||(n[38]=e.createTextVNode(" ファイル保存 ",-1))]),e.createElementVNode("button",{onClick:U,class:"di-btn-small di-btn-primary"},"コピー")])])])):e.createCommentVNode("",!0)])),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[V.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"di-modal-overlay",onClick:n[14]||(n[14]=e.withModifiers(r=>V.value=!1,["self"])),"data-dev-inspector":""},[e.createElementVNode("div",ll,[n[41]||(n[41]=e.createElementVNode("h3",{class:"di-modal-title"},"設定をインポート",-1)),e.createElementVNode("label",ol,[e.createElementVNode("input",{type:"file",accept:".json",onChange:s},null,32),n[40]||(n[40]=e.createElementVNode("span",null,"JSONファイルをドラッグまたはクリック",-1))]),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":n[12]||(n[12]=r=>x.value=r),placeholder:"またはJSONを直接貼り付け...",class:"di-modal-textarea di-modal-textarea-input"},null,512),[[e.vModelText,x.value]]),$.value?(e.openBlock(),e.createElementBlock("p",nl,e.toDisplayString($.value),1)):e.createCommentVNode("",!0),e.createElementVNode("div",al,[e.createElementVNode("button",{onClick:n[13]||(n[13]=r=>{V.value=!1,x.value="",$.value=""}),class:"di-btn-small"}," キャンセル "),e.createElementVNode("button",{onClick:v,disabled:!x.value,class:"di-btn-small di-btn-primary"}," インポート ",8,sl)])])])):e.createCommentVNode("",!0)]))],64)}}}),ie=(m,l)=>{const d=m.__vccOpts||m;for(const[p,V]of l)d[p]=V;return d},ke=ie(il,[["__scopeId","data-v-d57ef689"]]),dl={class:"di-editor-modal"},rl={class:"di-editor-header"},cl={class:"di-header-actions"},ul={key:0,class:"di-static-indicator"},ml={key:1,class:"di-binding-indicator"},pl={key:0,class:"di-binding-source"},vl={class:"di-editor-tabs"},yl={class:"di-editor-content"},fl={class:"di-form-group"},kl={class:"di-note-types"},bl=["onClick"],hl={class:"di-form-group"},El={class:"di-form-group"},Vl={key:0,class:"di-binding-selector"},Nl={class:"di-form-group"},gl={class:"di-form-label"},xl={class:"di-binding-search-wrapper"},wl={key:0,class:"di-binding-list"},Bl=["onClick"],Cl={class:"di-binding-item-main"},$l={class:"di-binding-name"},Dl={class:"di-binding-type"},Il={key:0,class:"di-binding-component"},Ml={key:1,class:"di-binding-empty"},Sl={class:"di-form-row"},Tl={class:"di-form-group"},_l={class:"di-form-group"},Pl={class:"di-form-group"},Al=["value"],Ll={class:"di-form-group"},Ul={class:"di-form-group"},zl={class:"di-form-group"},Fl=["value"],Rl={key:0,class:"di-form-row"},ql={class:"di-form-group",style:{flex:"0 0 100px"}},jl=["value"],Ol={class:"di-form-group",style:{flex:"1"}},Hl={key:1,class:"di-form-group"},Gl={class:"di-form-label"},Xl=["placeholder"],Kl={class:"di-form-group"},Yl={class:"di-form-group"},Zl={class:"di-form-group"},Jl={class:"di-form-row"},Wl={class:"di-form-group"},Ql={class:"di-form-group"},eo={class:"di-form-group"},to={class:"di-form-group"},lo={class:"di-form-group"},oo={class:"di-form-group"},no={class:"di-form-group"},ao={class:"di-form-group"},so={class:"di-form-group"},io={class:"di-editor-footer"},ro={class:"di-editor-actions"},co=e.defineComponent({__name:"DevElementEditor",setup(m){const l=X.useDevInspectorStore(),d=e.ref("note"),p=e.ref(""),V=e.ref(""),x=e.ref(""),$=e.ref(""),D=e.ref(""),b=e.ref("navigate"),c=e.ref(""),U=e.ref("GET"),z=e.ref(""),M=e.ref(""),P=e.ref(""),v=e.ref("info"),s=e.ref(""),a=e.ref(""),f=e.ref(""),h=e.ref(""),E=e.ref(""),k=e.ref(""),w=e.ref(""),B=e.ref(""),N=e.ref(""),y=e.ref(""),S=e.ref(""),u=e.ref(""),T=e.ref(""),A=e.ref(!1),L=e.computed(()=>l.editingElementId!==null),_=e.computed(()=>l.editingElementId);e.watch(_,I=>{var t,o,H,Y,Z,R;if(I){const i=l.getElementConfig(I);let J=!1;try{const O=document.querySelector(I);if(O){const G=O.querySelector("[data-di-binding]")||(O.hasAttribute("data-di-binding")?O:null)||O.closest("[data-di-binding]");if(G){const ne=G.getAttribute("data-di-binding"),W=G.getAttribute("data-di-db"),re=G.getAttribute("data-di-component"),Ce=G.getAttribute("data-di-db-type"),$e=G.getAttribute("data-di-db-comment");if(ne&&(T.value=ne,u.value="api",A.value=!1,J=!0),W){const[ce,ue]=W.split(".");ce&&ue&&(p.value=ce,V.value=ue,x.value=Ce||"",D.value=$e||"",J=!0)}re&&(w.value=re),J&&(M.value=`【データバインディング】${ne}${W?` → ${W}`:""}`,v.value="info",d.value="field")}}}catch(O){console.warn("[DevInspector] Failed to read data-di-* attributes:",O)}i!=null&&i.fieldInfo&&(p.value=i.fieldInfo.table||p.value,V.value=i.fieldInfo.column||V.value,x.value=i.fieldInfo.type||"",$.value=((t=i.fieldInfo.validation)==null?void 0:t.join(", "))||"",D.value=i.fieldInfo.description||D.value),i!=null&&i.actionInfo&&(b.value=i.actionInfo.type||"navigate",c.value=i.actionInfo.target||"",U.value=i.actionInfo.method||"GET",z.value=i.actionInfo.description||""),i!=null&&i.note&&(M.value=i.note.text||M.value,P.value=i.note.author||"",v.value=i.note.type||"info"),i!=null&&i.links&&(s.value=i.links.testPath||"",a.value=i.links.figmaUrl||"",f.value=i.links.githubIssue||"",h.value=i.links.githubPr||"",E.value=i.links.relatedDocs||""),i!=null&&i.devMeta&&(k.value=((o=i.devMeta.usedStores)==null?void 0:o.join(", "))||"",w.value=((H=i.devMeta.usedComponents)==null?void 0:H.join(", "))||w.value,B.value=((Y=i.devMeta.i18nKeys)==null?void 0:Y.join(", "))||"",N.value=((Z=i.devMeta.designTokens)==null?void 0:Z.join(", "))||"",y.value=i.devMeta.accessibility||"",S.value=i.devMeta.responsive||""),i!=null&&i.sourceBinding&&(u.value=i.sourceBinding.type||u.value,T.value=i.sourceBinding.source||T.value,A.value=i.sourceBinding.isStatic||!1),J||((R=i==null?void 0:i.note)!=null&&R.text?d.value="note":i!=null&&i.fieldInfo?d.value="field":i!=null&&i.actionInfo?d.value="action":i!=null&&i.links?d.value="links":i!=null&&i.devMeta?d.value="meta":d.value="note")}else C()});function C(){p.value="",V.value="",x.value="",$.value="",D.value="",b.value="navigate",c.value="",U.value="GET",z.value="",M.value="",P.value="",v.value="info",s.value="",a.value="",f.value="",h.value="",E.value="",k.value="",w.value="",B.value="",N.value="",y.value="",S.value="",u.value="",T.value="",A.value=!1,d.value="note"}function n(){l.stopEditing(),C()}function F(){var I;if(_.value)try{const t=document.querySelector(_.value);if(!t)return;const o=l.autoDetectElementInfo(t,_.value);o.sourceBinding&&(u.value=o.sourceBinding.type||"",T.value=o.sourceBinding.source||"",A.value=o.sourceBinding.isStatic||!1,o.sourceBinding.isStatic&&!M.value&&(M.value="固定文言",v.value="info")),o.fieldInfo&&(p.value=o.fieldInfo.table||"",V.value=o.fieldInfo.column||"",x.value=o.fieldInfo.type||"",D.value=o.fieldInfo.description||"",d.value="field"),o.note&&(M.value=o.note.text||"",v.value=o.note.type||"info"),(I=o.devMeta)!=null&&I.usedComponents&&(w.value=o.devMeta.usedComponents.join(", "))}catch(t){console.error("[DevInspector] Auto-detect failed:",t)}}function r(){if(!_.value)return;const I=p.value&&V.value?{table:p.value,column:V.value,type:x.value||void 0,validation:$.value?$.value.split(",").map(R=>R.trim()):void 0,description:D.value||void 0}:void 0,t=c.value?{type:b.value,target:c.value,method:b.value==="api"?U.value:void 0,description:z.value||void 0}:void 0,o=M.value?{text:M.value,author:P.value||void 0,type:v.value}:void 0,H=s.value||a.value||f.value||h.value||E.value?{testPath:s.value||void 0,figmaUrl:a.value||void 0,githubIssue:f.value||void 0,githubPr:h.value||void 0,relatedDocs:E.value||void 0}:void 0,Y=k.value||w.value||B.value||N.value||y.value||S.value?{usedStores:k.value?k.value.split(",").map(R=>R.trim()):void 0,usedComponents:w.value?w.value.split(",").map(R=>R.trim()):void 0,i18nKeys:B.value?B.value.split(",").map(R=>R.trim()):void 0,designTokens:N.value?N.value.split(",").map(R=>R.trim()):void 0,accessibility:y.value||void 0,responsive:S.value||void 0}:void 0,Z=u.value?{type:u.value,source:T.value||void 0,isStatic:A.value}:void 0;l.setElementConfig(_.value,{fieldInfo:I,actionInfo:t,note:o,links:H,devMeta:Y,sourceBinding:Z}),n()}function j(){_.value&&(l.deleteElementConfig(_.value),n())}const le=["string","text","integer","bigint","float","decimal","boolean","date","datetime","time","timestamp","binary","json","jsonb","VARCHAR","TEXT","INT","BIGINT","BOOLEAN","DATE","DATETIME","TIMESTAMP","JSON"],q=e.ref(""),K=e.ref(!1),oe=e.computed(()=>l.searchSchemaColumns(q.value).slice(0,30));function Ne(I){p.value=I.table,V.value=I.column,x.value=I.type||"",D.value=I.comment||"",K.value=!1,q.value=""}const ge=e.computed(()=>{if(!_.value)return!1;try{const I=document.querySelector(_.value);if(!I)return!1;const t=I.querySelector("[data-di-binding]")||(I.hasAttribute("data-di-binding")?I:null);return!!(t!=null&&t.getAttribute("data-di-db"))}catch{return!1}}),de=e.computed(()=>l.getSchemaColumns().length>0),xe=[{value:"navigate",label:"画面遷移"},{value:"api",label:"API呼び出し"},{value:"modal",label:"モーダル表示"},{value:"emit",label:"イベント発火"},{value:"function",label:"関数実行"}],we=["GET","POST","PUT","DELETE","PATCH"],Be=[{value:"info",label:"情報",icon:ze,color:"#60a5fa"},{value:"warning",label:"注意",icon:Se,color:"#fbbf24"},{value:"todo",label:"TODO",icon:Te,color:"#10b981"},{value:"question",label:"質問",icon:Ue,color:"#a78bfa"}];return(I,t)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[L.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"di-editor-overlay",onClick:e.withModifiers(n,["self"]),"data-dev-inspector":""},[e.createElementVNode("div",dl,[e.createElementVNode("div",rl,[t[31]||(t[31]=e.createElementVNode("h3",null,"要素情報を編集",-1)),e.createElementVNode("div",cl,[e.createElementVNode("button",{onClick:F,class:"di-btn-auto",title:"自動検出"},[e.createVNode(e.unref(Xe),{style:{width:"16px",height:"16px"}})]),e.createElementVNode("button",{onClick:n,class:"di-editor-close"},[e.createVNode(e.unref(se),{style:{width:"20px",height:"20px"}})])])]),A.value?(e.openBlock(),e.createElementBlock("div",ul,[...t[32]||(t[32]=[e.createElementVNode("span",{class:"di-static-badge"},"固定文言",-1),e.createElementVNode("span",{class:"di-static-hint"},"このテキストはソースコードに直接記述されています",-1)])])):u.value?(e.openBlock(),e.createElementBlock("div",ml,[e.createElementVNode("span",{class:e.normalizeClass(["di-binding-badge","di-binding-"+u.value])},e.toDisplayString(u.value),3),T.value?(e.openBlock(),e.createElementBlock("span",pl,e.toDisplayString(T.value),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",vl,[e.createElementVNode("button",{onClick:t[0]||(t[0]=o=>d.value="note"),class:e.normalizeClass(["di-editor-tab",{active:d.value==="note"}]),style:e.normalizeStyle(d.value==="note"?{color:"#10b981",borderColor:"#10b981",background:"rgba(16, 185, 129, 0.1)"}:{})},[e.createVNode(e.unref(Re),{style:{width:"12px",height:"12px"}}),t[33]||(t[33]=e.createTextVNode(" メモ ",-1))],6),ge.value||de.value||p.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:t[1]||(t[1]=o=>d.value="field"),class:e.normalizeClass(["di-editor-tab",{active:d.value==="field"}]),style:e.normalizeStyle(d.value==="field"?{color:"#60a5fa",borderColor:"#60a5fa",background:"rgba(96, 165, 250, 0.1)"}:{})},[e.createVNode(e.unref(pe),{style:{width:"12px",height:"12px"}}),t[34]||(t[34]=e.createTextVNode(" データ ",-1))],6)):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:t[2]||(t[2]=o=>d.value="action"),class:e.normalizeClass(["di-editor-tab",{active:d.value==="action"}]),style:e.normalizeStyle(d.value==="action"?{color:"#a78bfa",borderColor:"#a78bfa",background:"rgba(167, 139, 250, 0.1)"}:{})},[e.createVNode(e.unref(Ke),{style:{width:"12px",height:"12px"}}),t[35]||(t[35]=e.createTextVNode(" アクション ",-1))],6),e.createElementVNode("button",{onClick:t[3]||(t[3]=o=>d.value="links"),class:e.normalizeClass(["di-editor-tab",{active:d.value==="links"}]),style:e.normalizeStyle(d.value==="links"?{color:"#f59e0b",borderColor:"#f59e0b",background:"rgba(245, 158, 11, 0.1)"}:{})},[e.createVNode(e.unref(Fe),{style:{width:"12px",height:"12px"}}),t[36]||(t[36]=e.createTextVNode(" リンク ",-1))],6),e.createElementVNode("button",{onClick:t[4]||(t[4]=o=>d.value="meta"),class:e.normalizeClass(["di-editor-tab",{active:d.value==="meta"}]),style:e.normalizeStyle(d.value==="meta"?{color:"#ec4899",borderColor:"#ec4899",background:"rgba(236, 72, 153, 0.1)"}:{})},[e.createVNode(e.unref(He),{style:{width:"12px",height:"12px"}}),t[37]||(t[37]=e.createTextVNode(" 開発情報 ",-1))],6)]),e.createElementVNode("div",yl,[d.value==="note"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("div",fl,[t[38]||(t[38]=e.createElementVNode("label",{class:"di-form-label"},"タイプ",-1)),e.createElementVNode("div",kl,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(Be,o=>e.createElementVNode("button",{key:o.value,onClick:H=>v.value=o.value,class:"di-note-type-btn",style:e.normalizeStyle(v.value===o.value?{color:o.color,borderColor:o.color,background:o.color+"15"}:{})},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.icon),{style:e.normalizeStyle([{width:"16px",height:"16px"},{color:v.value===o.value?o.color:"#64748b"}])},null,8,["style"])),e.createElementVNode("span",{style:e.normalizeStyle({color:v.value===o.value?o.color:"#94a3b8"})},e.toDisplayString(o.label),5)],12,bl)),64))])]),e.createElementVNode("div",hl,[t[39]||(t[39]=e.createElementVNode("label",{class:"di-form-label"},"メモ内容 *",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>M.value=o),rows:"4",placeholder:"この要素についてのメモ、説明、注意事項など...",class:"di-textarea"},null,512),[[e.vModelText,M.value]])]),e.createElementVNode("div",El,[t[40]||(t[40]=e.createElementVNode("label",{class:"di-form-label"},"記入者（オプション）",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>P.value=o),type:"text",placeholder:"名前",class:"di-input"},null,512),[[e.vModelText,P.value]])])],64)):e.createCommentVNode("",!0),d.value==="field"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[de.value?(e.openBlock(),e.createElementBlock("div",Vl,[e.createElementVNode("div",Nl,[e.createElementVNode("label",gl,[e.createVNode(e.unref(pe),{style:{width:"12px",height:"12px",display:"inline","vertical-align":"middle"}}),t[41]||(t[41]=e.createTextVNode(" schema.rb から選択 ",-1))]),e.createElementVNode("div",xl,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>q.value=o),onFocus:t[8]||(t[8]=o=>K.value=!0),type:"text",placeholder:"テーブル.カラムを検索... (例: users, email)",class:"di-input di-binding-search"},null,544),[[e.vModelText,q.value]]),q.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:t[9]||(t[9]=o=>{q.value="",K.value=!1}),class:"di-binding-clear"},[e.createVNode(e.unref(se),{style:{width:"14px",height:"14px"}})])):e.createCommentVNode("",!0)]),K.value&&oe.value.length>0?(e.openBlock(),e.createElementBlock("div",wl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(oe.value,o=>(e.openBlock(),e.createElementBlock("button",{key:o.fullName,onClick:H=>Ne(o),class:"di-binding-item has-db"},[e.createElementVNode("div",Cl,[e.createElementVNode("span",$l,e.toDisplayString(o.fullName),1),e.createElementVNode("span",Dl,e.toDisplayString(o.type),1)]),o.comment?(e.openBlock(),e.createElementBlock("span",Il,e.toDisplayString(o.comment),1)):e.createCommentVNode("",!0)],8,Bl))),128))])):K.value&&q.value&&oe.value.length===0?(e.openBlock(),e.createElementBlock("div",Ml," 該当するカラムが見つかりません ")):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0),t[48]||(t[48]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"または手動入力")],-1)),e.createElementVNode("div",Sl,[e.createElementVNode("div",Tl,[t[42]||(t[42]=e.createElementVNode("label",{class:"di-form-label"},"テーブル名 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>p.value=o),type:"text",placeholder:"users",class:"di-input"},null,512),[[e.vModelText,p.value]])]),e.createElementVNode("div",_l,[t[43]||(t[43]=e.createElementVNode("label",{class:"di-form-label"},"カラム名 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>V.value=o),type:"text",placeholder:"name",class:"di-input"},null,512),[[e.vModelText,V.value]])])]),e.createElementVNode("div",Pl,[t[45]||(t[45]=e.createElementVNode("label",{class:"di-form-label"},"データ型",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[12]||(t[12]=o=>x.value=o),class:"di-select"},[t[44]||(t[44]=e.createElementVNode("option",{value:""},"選択してください",-1)),(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(le,o=>e.createElementVNode("option",{key:o,value:o},e.toDisplayString(o),9,Al)),64))],512),[[e.vModelSelect,x.value]])]),e.createElementVNode("div",Ll,[t[46]||(t[46]=e.createElementVNode("label",{class:"di-form-label"},"バリデーション (カンマ区切り)",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>$.value=o),type:"text",placeholder:"required, max:255",class:"di-input"},null,512),[[e.vModelText,$.value]])]),e.createElementVNode("div",Ul,[t[47]||(t[47]=e.createElementVNode("label",{class:"di-form-label"},"説明",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[14]||(t[14]=o=>D.value=o),rows:"2",placeholder:"このフィールドの説明...",class:"di-textarea"},null,512),[[e.vModelText,D.value]])])],64)):e.createCommentVNode("",!0),d.value==="action"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createElementVNode("div",zl,[t[49]||(t[49]=e.createElementVNode("label",{class:"di-form-label"},"アクションタイプ",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[15]||(t[15]=o=>b.value=o),class:"di-select"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(xe,o=>e.createElementVNode("option",{key:o.value,value:o.value},e.toDisplayString(o.label),9,Fl)),64))],512),[[e.vModelSelect,b.value]])]),b.value==="api"?(e.openBlock(),e.createElementBlock("div",Rl,[e.createElementVNode("div",ql,[t[50]||(t[50]=e.createElementVNode("label",{class:"di-form-label"},"メソッド",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[16]||(t[16]=o=>U.value=o),class:"di-select"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(we,o=>e.createElementVNode("option",{key:o,value:o},e.toDisplayString(o),9,jl)),64))],512),[[e.vModelSelect,U.value]])]),e.createElementVNode("div",Ol,[t[51]||(t[51]=e.createElementVNode("label",{class:"di-form-label"},"エンドポイント",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[17]||(t[17]=o=>c.value=o),type:"text",placeholder:"/api/tasks",class:"di-input"},null,512),[[e.vModelText,c.value]])])])):(e.openBlock(),e.createElementBlock("div",Hl,[e.createElementVNode("label",Gl,e.toDisplayString(b.value==="navigate"?"遷移先パス":b.value==="modal"?"モーダル名":b.value==="emit"?"イベント名":"関数名"),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[18]||(t[18]=o=>c.value=o),type:"text",placeholder:b.value==="navigate"?"/tasks":b.value==="modal"?"ConfirmDialog":b.value==="emit"?"onSubmit":"handleClick",class:"di-input"},null,8,Xl),[[e.vModelText,c.value]])])),e.createElementVNode("div",Kl,[t[52]||(t[52]=e.createElementVNode("label",{class:"di-form-label"},"説明",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[19]||(t[19]=o=>z.value=o),rows:"2",placeholder:"このアクションの説明...",class:"di-textarea"},null,512),[[e.vModelText,z.value]])])],64)):e.createCommentVNode("",!0),d.value==="links"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[e.createElementVNode("div",Yl,[t[53]||(t[53]=e.createElementVNode("label",{class:"di-form-label"},"テストファイルパス",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[20]||(t[20]=o=>s.value=o),type:"text",placeholder:"src/__tests__/components/MyComponent.test.ts",class:"di-input di-input-mono"},null,512),[[e.vModelText,s.value]])]),e.createElementVNode("div",Zl,[t[54]||(t[54]=e.createElementVNode("label",{class:"di-form-label"},"Figma URL",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[21]||(t[21]=o=>a.value=o),type:"text",placeholder:"https://www.figma.com/design/...",class:"di-input"},null,512),[[e.vModelText,a.value]])]),e.createElementVNode("div",Jl,[e.createElementVNode("div",Wl,[t[55]||(t[55]=e.createElementVNode("label",{class:"di-form-label"},"GitHub Issue",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[22]||(t[22]=o=>f.value=o),type:"text",placeholder:"#123",class:"di-input"},null,512),[[e.vModelText,f.value]])]),e.createElementVNode("div",Ql,[t[56]||(t[56]=e.createElementVNode("label",{class:"di-form-label"},"GitHub PR",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[23]||(t[23]=o=>h.value=o),type:"text",placeholder:"#456",class:"di-input"},null,512),[[e.vModelText,h.value]])])]),e.createElementVNode("div",eo,[t[57]||(t[57]=e.createElementVNode("label",{class:"di-form-label"},"関連ドキュメント",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[24]||(t[24]=o=>E.value=o),type:"text",placeholder:"https://docs.example.com/...",class:"di-input"},null,512),[[e.vModelText,E.value]])])],64)):e.createCommentVNode("",!0),d.value==="meta"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:4},[e.createElementVNode("div",to,[t[58]||(t[58]=e.createElementVNode("label",{class:"di-form-label"},"使用Piniaストア (カンマ区切り)",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[25]||(t[25]=o=>k.value=o),type:"text",placeholder:"useUserStore, useThemeStore",class:"di-input di-input-mono"},null,512),[[e.vModelText,k.value]])]),e.createElementVNode("div",lo,[t[59]||(t[59]=e.createElementVNode("label",{class:"di-form-label"},"使用コンポーネント (カンマ区切り)",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[26]||(t[26]=o=>w.value=o),type:"text",placeholder:"Button, Modal, Input",class:"di-input di-input-mono"},null,512),[[e.vModelText,w.value]])]),e.createElementVNode("div",oo,[t[60]||(t[60]=e.createElementVNode("label",{class:"di-form-label"},"i18nキー (カンマ区切り)",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[27]||(t[27]=o=>B.value=o),type:"text",placeholder:"common.save, errors.required",class:"di-input di-input-mono"},null,512),[[e.vModelText,B.value]])]),e.createElementVNode("div",no,[t[61]||(t[61]=e.createElementVNode("label",{class:"di-form-label"},"デザイントークン (カンマ区切り)",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[28]||(t[28]=o=>N.value=o),type:"text",placeholder:"primaryColor, secondaryColor",class:"di-input di-input-mono"},null,512),[[e.vModelText,N.value]])]),e.createElementVNode("div",ao,[t[62]||(t[62]=e.createElementVNode("label",{class:"di-form-label"},"アクセシビリティ",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[29]||(t[29]=o=>y.value=o),rows:"2",placeholder:"キーボード操作、スクリーンリーダー対応などのメモ...",class:"di-textarea"},null,512),[[e.vModelText,y.value]])]),e.createElementVNode("div",so,[t[63]||(t[63]=e.createElementVNode("label",{class:"di-form-label"},"レスポンシブ動作",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[30]||(t[30]=o=>S.value=o),rows:"2",placeholder:"モバイルでの表示変更、ブレークポイントなど...",class:"di-textarea"},null,512),[[e.vModelText,S.value]])])],64)):e.createCommentVNode("",!0)]),e.createElementVNode("div",io,[e.createElementVNode("button",{onClick:j,class:"di-btn-delete"},[e.createVNode(e.unref(fe),{style:{width:"14px",height:"14px"}}),t[64]||(t[64]=e.createTextVNode(" 削除 ",-1))]),e.createElementVNode("div",ro,[e.createElementVNode("button",{onClick:n,class:"di-btn-cancel"},"キャンセル"),e.createElementVNode("button",{onClick:r,class:"di-btn-save"},[e.createVNode(e.unref(Oe),{style:{width:"14px",height:"14px"}}),t[65]||(t[65]=e.createTextVNode(" 保存 ",-1))])])])])])):e.createCommentVNode("",!0)]))}}),be=ie(co,[["__scopeId","data-v-28a37438"]]),uo={key:0,"data-dev-inspector":"",class:"di-loading-overlay"},mo={class:"di-highlight-label"},po={key:2,"data-dev-inspector":"",class:"di-pick-banner"},vo=["onClick"],yo=["onClick"],fo={"data-dev-inspector":"",class:"di-scan-banner"},ko=["onClick"],bo={class:"di-analysis-type"},ho={key:0,class:"di-analysis-db"},Eo=["onClick"],Vo={key:0,class:"di-analysis-text"},No={"data-dev-inspector":"",class:"di-analysis-banner"},go=e.defineComponent({__name:"DevPickOverlay",setup(m){const l=X.useDevInspectorStore(),d=e.ref(null),p=e.ref(null),V=e.ref(0),x=e.ref(0);function $(v){var a;const s=l.getElementConfig(v);if(!(s!=null&&s.sourceBinding)){const f=((a=s==null?void 0:s.note)==null?void 0:a.type)||"info";return{info:"#60a5fa",warning:"#fbbf24",todo:"#10b981",question:"#a78bfa"}[f]||"#60a5fa"}return s.sourceBinding.isStatic?"#10b981":s.sourceBinding.type==="v-model"?"#8b5cf6":s.sourceBinding.type==="api"?"#f59e0b":"#60a5fa"}const D=e.computed(()=>{var h,E,k,w,B;const v=V.value,s=x.value,a=[];if(!l.isEnabled)return a;const f=l.getConfiguredSelectors();for(const N of f)try{const y=document.querySelector(N);if(y){const S=y.getBoundingClientRect(),u=l.getElementConfig(N),T=((h=u==null?void 0:u.sourceBinding)==null?void 0:h.isStatic)||!1,A=((E=u==null?void 0:u.sourceBinding)==null?void 0:E.type)||"";let L="";(k=u==null?void 0:u.fieldInfo)!=null&&k.table&&((w=u==null?void 0:u.fieldInfo)!=null&&w.column)?L=`DB: ${u.fieldInfo.table}.${u.fieldInfo.column}`:T?L="固定":A==="v-model"?L="フォーム":A==="api"?L="データ":(B=u==null?void 0:u.note)!=null&&B.type?L={info:"情報",warning:"注意",todo:"TODO",question:"質問"}[u.note.type]||"メモ":L="メモ",a.push({selector:N,top:`${S.top+v}px`,left:`${S.left+s}px`,width:`${S.width}px`,height:`${S.height}px`,color:$(N),isStatic:T,label:L})}}catch{}return a}),b=e.computed(()=>{var f;const v=V.value,s=x.value,a=[];if(!l.isEnabled||l.scanResults.length===0)return a;for(const h of l.scanResults)try{const E=document.querySelector(h.selector);if(E){const k=E.getBoundingClientRect();a.push({selector:h.selector,top:`${k.top+v}px`,left:`${k.left+s}px`,width:`${k.width}px`,height:`${k.height}px`,isStatic:((f=h.detected.sourceBinding)==null?void 0:f.isStatic)||!1})}}catch{}return a}),c=e.computed(()=>{const v=V.value,s=x.value,a=[],f=l.analysisFilter;if(f==="none"||!l.isEnabled||l.analysisResults.length===0)return a;for(const h of l.analysisResults){if(!h.matched)continue;const E=h.element;try{const k=document.querySelector(h.selector);if(!k)continue;const w=k.getBoundingClientRect();if(w.width>window.innerWidth*.8||w.height>window.innerHeight*.5)continue;const B=k.querySelector("[data-di-binding]")||(k.hasAttribute("data-di-binding")?k:null);let N="",y=E.type,S=E.binding||"";if(B){const C=B.getAttribute("data-di-db"),n=B.getAttribute("data-di-binding");C&&(N=C,y="data"),n&&(S=n,N||(y="data"))}!N&&E.db&&(N=`${E.db.table}.${E.db.column}`);let u="";E.api&&(u=`${E.api.method} ${E.api.endpoint}`);const T=!!N,A=!!u,L=y==="static",_=y==="data";if(f==="db-api"){if(!T&&!A)continue}else if(f==="static"){if(!L)continue}else if(f==="data"){if(!_)continue}else if(f==="other"&&(T||A||L||_))continue;a.push({selector:h.selector,top:`${w.top+v}px`,left:`${w.left+s}px`,width:`${w.width}px`,height:`${w.height}px`,type:y,text:E.text||S||"",dbInfo:N,apiInfo:u})}catch{}}return a});function U(v){if(!l.isPickMode)return;if(v.target.closest("[data-dev-inspector]")){d.value=null,p.value=null,l.setHoveredSelector(null);return}const a=document.elementFromPoint(v.clientX,v.clientY);if(!a||a===document.body||a===document.documentElement){d.value=null,p.value=null,l.setHoveredSelector(null);return}if(a.closest("[data-dev-inspector]"))return;p.value=a;const f=a.getBoundingClientRect();d.value={top:`${f.top+window.scrollY}px`,left:`${f.left+window.scrollX}px`,width:`${f.width}px`,height:`${f.height}px`};const h=l.generateSelector(a);l.setHoveredSelector(h)}function z(v){if(!(!l.isPickMode||v.target.closest("[data-dev-inspector]"))&&(v.preventDefault(),v.stopPropagation(),p.value)){const a=l.generateSelector(p.value);l.startEditing(a),l.togglePickMode()}}function M(v){v.key==="Escape"&&l.isPickMode&&l.togglePickMode()}function P(){V.value=window.scrollY,x.value=window.scrollX}return e.onMounted(()=>{window.addEventListener("mousemove",U,!0),window.addEventListener("click",z,!0),window.addEventListener("keydown",M),window.addEventListener("scroll",P),window.addEventListener("resize",P)}),e.onUnmounted(()=>{window.removeEventListener("mousemove",U,!0),window.removeEventListener("click",z,!0),window.removeEventListener("keydown",M),window.removeEventListener("scroll",P),window.removeEventListener("resize",P)}),e.watch(()=>l.isPickMode,v=>{v||(d.value=null,p.value=null)}),(v,s)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.unref(l).isInitializing?(e.openBlock(),e.createElementBlock("div",uo,[...s[2]||(s[2]=[e.createElementVNode("div",{class:"di-loading-content"},[e.createElementVNode("div",{class:"di-loading-spinner"}),e.createElementVNode("span",{class:"di-loading-text"},"Developer Mode 起動中...")],-1)])])):e.createCommentVNode("",!0),e.unref(l).isPickMode&&d.value?(e.openBlock(),e.createElementBlock("div",{key:1,"data-dev-inspector":"",class:"di-highlight",style:e.normalizeStyle({top:d.value.top,left:d.value.left,width:d.value.width,height:d.value.height})},[e.createElementVNode("div",mo,e.toDisplayString(e.unref(l).hoveredSelector),1)],4)):e.createCommentVNode("",!0),e.unref(l).isPickMode?(e.openBlock(),e.createElementBlock("div",po,[...s[3]||(s[3]=[e.createElementVNode("span",null,"要素をクリックしてメモを追加",-1),e.createElementVNode("kbd",null,"ESC",-1),e.createElementVNode("span",{class:"di-pick-hint"},"でキャンセル",-1)])])):e.createCommentVNode("",!0),e.unref(l).isEnabled&&!e.unref(l).isPickMode&&!e.unref(l).editingElementId?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:3},e.renderList(D.value,a=>(e.openBlock(),e.createElementBlock("div",{key:a.selector,"data-dev-inspector":"",class:"di-annotation-box",style:e.normalizeStyle({top:a.top,left:a.left,width:a.width,height:a.height,borderColor:a.color,backgroundColor:a.color+"15"}),onClick:f=>e.unref(l).startEditing(a.selector)},[e.createElementVNode("div",{class:"di-annotation-label",style:e.normalizeStyle({backgroundColor:a.color})},e.toDisplayString(a.label),5)],12,vo))),128)):e.createCommentVNode("",!0),e.unref(l).isEnabled&&!e.unref(l).editingElementId&&b.value.length>0&&e.unref(l).analysisResults.length===0?(e.openBlock(),e.createElementBlock(e.Fragment,{key:4},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(b.value,a=>(e.openBlock(),e.createElementBlock("div",{key:"scan-"+a.selector,"data-dev-inspector":"",class:e.normalizeClass(["di-scan-highlight",{"di-scan-static":a.isStatic}]),style:e.normalizeStyle({top:a.top,left:a.left,width:a.width,height:a.height}),onClick:f=>e.unref(l).startEditing(a.selector)},[e.createElementVNode("div",{class:e.normalizeClass(["di-scan-label",{"di-scan-label-static":a.isStatic}])},e.toDisplayString(a.isStatic?"固定文言":"動的データ"),3)],14,yo))),128)),e.createElementVNode("div",fo,[e.createElementVNode("span",null,e.toDisplayString(b.value.length)+"件の要素を検出",1),e.createElementVNode("button",{onClick:s[0]||(s[0]=a=>e.unref(l).clearScanResults()),class:"di-scan-banner-close"},"✕ 閉じる")])],64)):e.createCommentVNode("",!0),e.unref(l).isEnabled&&!e.unref(l).editingElementId&&c.value.length>0?(e.openBlock(),e.createElementBlock(e.Fragment,{key:5},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.value,a=>(e.openBlock(),e.createElementBlock("div",{key:"analysis-"+a.selector,"data-dev-inspector":"",class:e.normalizeClass(["di-analysis-highlight",{"di-analysis-static":a.type==="static","di-analysis-data":a.type==="data","di-analysis-form":a.type==="form","di-analysis-button":a.type==="button","di-analysis-link":a.type==="link"}]),style:e.normalizeStyle({top:a.top,left:a.left,width:a.width,height:a.height}),onClick:f=>e.unref(l).startEditing(a.selector)},[e.createElementVNode("div",{class:e.normalizeClass(["di-analysis-label","di-analysis-label-"+(a.dbInfo?"db":a.type)])},[e.createElementVNode("span",bo,e.toDisplayString(a.dbInfo?"DB":a.type==="static"?"固定":a.type==="data"?"データ":a.type),1),a.dbInfo?(e.openBlock(),e.createElementBlock("span",ho,e.toDisplayString(a.dbInfo),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"di-analysis-delete",onClick:e.withModifiers(f=>e.unref(l).removeAnalysisResult(a.selector),["stop"]),title:"この要素を非表示"},"×",8,Eo)],2),a.text&&a.text.length<30?(e.openBlock(),e.createElementBlock("div",Vo,e.toDisplayString(a.text),1)):e.createCommentVNode("",!0)],14,ko))),128)),e.createElementVNode("div",No,[e.createElementVNode("span",null,"📊 分析データ: "+e.toDisplayString(c.value.length)+"件の要素",1),e.createElementVNode("button",{onClick:s[1]||(s[1]=a=>e.unref(l).clearAnalysisResults()),class:"di-analysis-banner-close"},"✕ 閉じる")])],64)):e.createCommentVNode("",!0)]))}}),he=ie(go,[["__scopeId","data-v-6f59c92a"]]),xo={key:0,"data-dev-inspector":""},Ee=e.defineComponent({__name:"DevInspector",props:{storageKey:{default:"devInspector:elementConfigs"},enabledInProduction:{type:Boolean,default:!1},initialAnnotations:{},analysisData:{},analysisDataUrl:{},autoLoadAnalysis:{type:Boolean},autoApplyAnalysis:{type:Boolean}},setup(m){const l=m,d=X.useDevInspectorStore();return e.onMounted(()=>{d.init({storageKey:l.storageKey,enabledInProduction:l.enabledInProduction,initialAnnotations:l.initialAnnotations})}),(p,V)=>e.unref(d).isAvailable?(e.openBlock(),e.createElementBlock("div",xo,[e.createVNode(ke),e.createVNode(be),e.createVNode(he)])):e.createCommentVNode("",!0)}}),Ve={install(m,l={}){const{autoRegister:d=!0,...p}=l;d&&m.component("DevInspector",Ee),m.provide("devInspectorOptions",p)}};exports.useDevInspector=X.useDevInspector;exports.useDevInspectorStore=X.useDevInspectorStore;exports.vitePluginDevInspector=De.default;exports.DevElementEditor=be;exports.DevInspector=Ee;exports.DevPanel=ke;exports.DevPickOverlay=he;exports.VueDevInspector=Ve;exports.default=Ve;
