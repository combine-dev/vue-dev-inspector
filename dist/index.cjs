"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),mt=require("./useDevInspector-BC5J2qZg.cjs"),Uo=require("./vite.cjs");/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=U=>U.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),I=(U,a)=>({size:h,strokeWidth:b=2,absoluteStrokeWidth:O,color:q,class:K,...ie},{attrs:de,slots:S})=>e.h("svg",{...kt,width:h||kt.width,height:h||kt.height,stroke:q||kt.stroke,"stroke-width":O?Number(b)*24/Number(h):b,...de,class:["lucide",`lucide-${Fo(U)}`],...ie},[...a.map(j=>e.h(...j)),...S.default?[S.default()]:[]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=I("AlertCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=I("AlertTriangleIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=I("ArrowUpDownIcon",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=I("BarChart3Icon",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=I("CalculatorIcon",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=I("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=I("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=I("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=I("ClipboardListIcon",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=I("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=I("CodeIcon",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=I("DatabaseIcon",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=I("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=I("ExternalLinkIcon",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=I("EyeOffIcon",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=I("EyeIcon",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=I("FileSpreadsheetIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=I("FileTextIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=I("FormInputIcon",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M17 12h.01",key:"1m0b6t"}],["path",{d:"M7 12h.01",key:"eqddd0"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=I("GitBranchIcon",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=I("GitMergeIcon",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=I("ListIcon",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=I("LockIcon",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=I("MailIcon",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=I("MessageSquareIcon",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=I("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=I("MousePointer2Icon",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=I("PenLineIcon",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=I("PenSquareIcon",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=I("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=I("SaveIcon",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=I("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=I("ServerIcon",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=I("ShieldQuestionIcon",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=I("ShieldIcon",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=I("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=I("TypeIcon",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=I("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=I("Wand2Icon",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=I("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=I("ZapIcon",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);async function al(U,a,h={}){var Z;const b=await Promise.resolve().then(()=>require("./xlsx-qn1xoUuv.cjs")),{systemName:O="System",author:q=""}=h,K=new Date,ie=`${K.getFullYear()}/${K.getMonth()+1}/${K.getDate()}`,de=b.utils.book_new(),S=[];S.push(["画面機能仕様書","","","","","","","","","","","システム名","","","","",O,"","","","","","画面ID/画面名","","","","",(U==null?void 0:U.name)||"","","","","","","作成者","","","","",q,"","作成日","","","","",ie]),S.push([]),S.push(["URL","","","","","","","","","","","画面英語名","","","","","","","","","","","View Component","","","","",(U==null?void 0:U.componentPath)||"","","","","","","Figma URL","","","","",(U==null?void 0:U.figmaUrl)||""]),S.push([]),S.push(["機能概要"]),S.push([(U==null?void 0:U.description)||""]),S.push([]),S.push(["画面レイアウト　figmaURL"]),S.push([(U==null?void 0:U.figmaUrl)||""]),S.push([]),U!=null&&U.apis&&U.apis.length>0&&(S.push(["API一覧"]),S.push(["","メソッド","","エンドポイント","","","","","","","","説明"]),U.apis.forEach(g=>{S.push(["",g.method,"",g.endpoint,"","","","","","","",g.description])}),S.push([])),S.push(["画面項目　ヘッダーフッターは省く"]),S.push(["","No.","","項目名","","","","","","","","","","","","説明","","","","","","","","","","","","","","","","表示条件","","","","","","","","","","","","","","","備考"]),Object.values(a).forEach((g,ke)=>{var H,Ce,D;const He=g.id;let pe="",Te="",te="";if((H=g.note)!=null&&H.text&&(pe=g.note.text),g.fieldInfo&&(pe+=pe?`
`:"",pe+=`DB: ${g.fieldInfo.table}.${g.fieldInfo.column}`,g.fieldInfo.type&&(pe+=` (${g.fieldInfo.type})`),g.fieldInfo.description&&(pe+=`
${g.fieldInfo.description}`)),g.actionInfo&&(te=`[${{navigate:"画面遷移",api:"API呼び出し",modal:"モーダル表示",emit:"イベント発火",function:"関数実行",csv_export:"CSV出力",csv_import:"CSV取込",email:"メール送信",sort:"ソート"}[g.actionInfo.type]||g.actionInfo.type}]`,g.actionInfo.target&&(te+=` ${g.actionInfo.method||""} ${g.actionInfo.target}`),g.actionInfo.description&&(te+=`
${g.actionInfo.description}`)),g.links){const k=[];g.links.testPath&&k.push(`テスト: ${g.links.testPath}`),g.links.figmaUrl&&k.push(`Figma: ${g.links.figmaUrl}`),g.links.githubIssue&&k.push(`Issue: ${g.links.githubIssue}`),g.links.githubPr&&k.push(`PR: ${g.links.githubPr}`),k.length>0&&(te+=te?`

`:"",te+=k.join(`
`))}if(g.devMeta){const k=[];(Ce=g.devMeta.usedStores)!=null&&Ce.length&&k.push(`Store: ${g.devMeta.usedStores.join(", ")}`),(D=g.devMeta.usedComponents)!=null&&D.length&&k.push(`Components: ${g.devMeta.usedComponents.join(", ")}`),g.devMeta.accessibility&&k.push(`A11y: ${g.devMeta.accessibility}`),g.devMeta.responsive&&k.push(`Responsive: ${g.devMeta.responsive}`),k.length>0&&(te+=te?`

`:"",te+=`[開発情報]
`+k.join(`
`))}S.push(["",ke+1,"",He,"","","","","","","","","","","",pe,"","","","","","","","","","","","","","","",Te,"","","","","","","","","","","","","","",te])});const Q=b.utils.aoa_to_sheet(S);Q["!cols"]=[{wch:3},{wch:5},{wch:3},{wch:20},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:30},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:20},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:30}],b.utils.book_append_sheet(de,Q,"画面設計書");const ee=`画面仕様書_${((Z=U==null?void 0:U.name)==null?void 0:Z.replace(/[/\\?%*:|"<>]/g,"-"))||"screen"}_${ie.replace(/\//g,"")}.xlsx`;return b.writeFile(de,ee),ee}const il={key:0,class:"di-panel","data-dev-inspector":""},sl={class:"di-header"},dl={class:"di-header-title"},rl={class:"di-tab-bar"},cl={key:0,class:"di-tab-badge"},ul={key:0,class:"di-tab-badge"},ml={key:0,class:"di-tab-badge"},pl={class:"di-edit-section"},vl={class:"di-note-toggle-badge"},fl={key:1,class:"di-note-filter"},Vl={class:"di-filter-buttons"},El=["onClick"],kl={key:2,class:"di-element-list-section"},hl={class:"di-element-list-header"},yl={class:"di-count-badge"},gl={key:0},bl={class:"di-element-tree"},Nl={key:0,class:"di-tree-group"},Bl={class:"di-tree-icon"},xl={class:"di-count-badge"},Cl={key:0,class:"di-element-list"},wl=["onDragstart","onClick","onMouseenter"],Dl={class:"di-element-item-body"},$l={class:"di-element-item-label"},_l={key:1,class:"di-tree-group"},Sl={class:"di-tree-icon"},Tl={class:"di-count-badge"},Ml={key:0,class:"di-tree-children"},Il={key:0,class:"di-rename-row"},Ul=["onKeydown","onBlur"],Fl=["onClick","onDragover","onDragleave","onDrop"],Ll={class:"di-tree-icon"},Pl={class:"di-count-badge"},Al=["onClick"],zl={key:2},Ol={key:0,class:"di-element-list"},jl=["onDragstart","onClick","onMouseenter"],ql={class:"di-element-item-body"},Hl={class:"di-element-item-label"},Rl={key:1,class:"di-tree-children"},Kl={key:0,class:"di-rename-row"},Gl=["onKeydown","onBlur"],Yl=["onClick","onDragover","onDragleave","onDrop"],Xl={class:"di-tree-icon"},Wl={class:"di-count-badge"},Zl=["onClick"],Jl={key:2},Ql={key:0,class:"di-element-list"},en=["onDragstart","onClick","onMouseenter"],tn={class:"di-element-item-body"},on={class:"di-element-item-label"},ln={key:1,class:"di-tree-children"},nn={key:0,class:"di-rename-row"},an=["onKeydown","onBlur"],sn=["onClick","onDragover","onDragleave","onDrop"],dn={class:"di-tree-icon"},rn={class:"di-count-badge"},cn=["onClick"],un={key:2},mn={key:0,class:"di-element-list"},pn=["onDragstart","onClick","onMouseenter"],vn={class:"di-element-item-body"},fn={class:"di-element-item-label"},Vn={key:2,class:"di-tree-group"},En={class:"di-tree-icon"},kn={class:"di-count-badge"},hn={key:0,class:"di-tree-children"},yn={key:0,class:"di-rename-row"},gn=["onKeydown","onBlur"],bn=["onClick","onDragover","onDragleave","onDrop"],Nn={class:"di-tree-icon"},Bn={class:"di-count-badge"},xn=["onClick"],Cn={key:2},wn={key:0,class:"di-element-list"},Dn=["onDragstart","onClick","onMouseenter"],$n={class:"di-element-item-body"},_n={class:"di-element-item-label"},Sn={key:1,class:"di-tree-children"},Tn={key:0,class:"di-rename-row"},Mn=["onKeydown","onBlur"],In=["onClick","onDragover","onDragleave","onDrop"],Un={class:"di-tree-icon"},Fn={class:"di-count-badge"},Ln=["onClick"],Pn={key:2},An={key:0,class:"di-element-list"},zn=["onDragstart","onClick","onMouseenter"],On={class:"di-element-item-body"},jn={class:"di-element-item-label"},qn={key:0,class:"di-tree-subgroup"},Hn={class:"di-tree-icon"},Rn={class:"di-count-badge"},Kn={key:0,class:"di-element-list"},Gn=["onDragstart","onClick","onMouseenter"],Yn={class:"di-element-item-body"},Xn={class:"di-element-item-label"},Wn={key:0,class:"di-unannotated-badge"},Zn={key:3,class:"di-unannotated-results"},Jn={class:"di-unannotated-summary"},Qn={key:0},ea={key:1},ta={key:2},oa={class:"di-unannotated-list"},la=["onMouseenter"],na={class:"di-unannotated-text"},aa=["onClick"],ia=["onClick"],sa={key:4,class:"di-unannotated-empty"},da={key:5,class:"di-broken-warning"},ra={class:"di-broken-header"},ca={class:"di-broken-list"},ua={class:"di-broken-item-info"},ma={class:"di-broken-item-note"},pa={class:"di-broken-item-selector"},va={class:"di-broken-item-actions"},fa=["onClick"],Va=["onClick"],Ea={class:"di-broken-actions"},ka={class:"di-content"},ha={class:"di-section"},ya={class:"di-screen-header"},ga={class:"di-screen-name"},ba={key:0,class:"di-screen-desc"},Na={key:1,class:"di-auth-badges"},Ba={key:0,class:"di-auth-badge di-auth-required"},xa={key:1,class:"di-auth-note"},Ca={key:0,class:"di-card"},wa={class:"di-card-label"},Da={class:"di-code-blue"},$a={key:1,class:"di-card"},_a={class:"di-card-label"},Sa=["href"],Ta={key:2,class:"di-card"},Ma={class:"di-card-label"},Ia={class:"di-api-list"},Ua={class:"di-api-info"},Fa={class:"di-api-endpoint"},La={key:0,class:"di-api-desc"},Pa={key:0,class:"di-api-timing-badge"},Aa={key:3,class:"di-card"},za={class:"di-card-label"},Oa={class:"di-screen-notes"},ja={key:1,class:"di-no-spec"},qa={class:"di-card di-cross-search-section"},Ha={class:"di-cross-search-header"},Ra={class:"di-cross-search-body"},Ka={class:"di-filter-buttons",style:{"margin-bottom":"8px"}},Ga=["onClick"],Ya=["placeholder"],Xa={key:0,class:"di-cross-search-count"},Wa={key:1,class:"di-cross-search-results"},Za={class:"di-cross-search-page-header"},Ja={key:0,class:"di-cross-search-page-name"},Qa=["onClick"],ei={class:"di-cross-search-field"},ti={key:0,class:"di-cross-search-context"},oi={class:"di-card di-screen-flow-section"},li={key:0,class:"di-screen-flow-badge"},ni={key:0,class:"di-screen-flow-body"},ai={key:0,class:"di-screen-flow-empty"},ii={class:"di-flow-node-path"},si={key:0,class:"di-flow-node-name"},di=["onClick"],ri={class:"di-flow-target"},ci={key:0,class:"di-flow-edge-label"},ui={key:1,class:"di-flow-orphans"},mi={class:"di-section"},pi={class:"di-section-header",style:{"margin-bottom":"8px"}},vi={key:0,class:"di-section-badge"},fi={class:"di-master-table-name"},Vi=["onClick"],Ei={class:"di-master-item-header"},ki={class:"di-master-col-name"},hi={key:0,class:"di-master-col-type"},yi={class:"di-master-item-name"},gi={class:"di-master-entries-preview"},bi={key:0,class:"di-master-entry-more"},Ni={class:"di-master-editor"},Bi={class:"di-master-editor-header"},xi={class:"di-master-editor-body"},Ci={class:"di-master-row"},wi={class:"di-master-field"},Di=["disabled"],$i={class:"di-master-field"},_i=["disabled"],Si={class:"di-master-row"},Ti={class:"di-master-field"},Mi={class:"di-master-field"},Ii={class:"di-master-field",style:{"margin-bottom":"12px"}},Ui={class:"di-master-entries-header"},Fi={class:"di-master-entries-list"},Li=["onUpdate:modelValue"],Pi=["onUpdate:modelValue"],Ai=["onUpdate:modelValue"],zi=["onUpdate:modelValue"],Oi=["onClick"],ji={class:"di-master-entries-header",style:{"margin-top":"16px"}},qi={key:0,class:"di-master-entries-list"},Hi=["onUpdate:modelValue"],Ri=["value"],Ki=["onUpdate:modelValue"],Gi=["value"],Yi=["onUpdate:modelValue"],Xi=["onUpdate:modelValue"],Wi=["onClick"],Zi={key:1,class:"di-master-empty",style:{"margin-top":"4px","font-size":"11px"}},Ji={class:"di-master-editor-footer"},Qi=["disabled"],es={class:"di-section"},ts={class:"di-section-header",style:{"margin-bottom":"8px"}},os={key:0,class:"di-section-badge"},ls=["onClick"],ns={class:"di-batch-item-info"},as={class:"di-batch-item-name"},is={key:0,class:"di-batch-item-schedule"},ss={class:"di-batch-editor"},ds={class:"di-batch-editor-header"},rs={class:"di-batch-editor-body"},cs={class:"di-batch-row"},us={class:"di-batch-field"},ms={class:"di-batch-field"},ps={class:"di-batch-row"},vs={class:"di-batch-field"},fs={class:"di-batch-field",style:{"margin-bottom":"12px"}},Vs={class:"di-batch-row"},Es={class:"di-batch-field"},ks={class:"di-batch-tags-input"},hs=["onClick"],ys={class:"di-batch-field"},gs={class:"di-batch-tags-input"},bs=["onClick"],Ns={class:"di-batch-section-label"},Bs={key:0},xs={class:"di-batch-step-no"},Cs=["onUpdate:modelValue"],ws=["onUpdate:modelValue"],Ds=["onUpdate:modelValue"],$s=["onUpdate:modelValue"],_s=["onClick"],Ss={class:"di-batch-row"},Ts={class:"di-batch-field"},Ms={class:"di-batch-field"},Is={class:"di-batch-row"},Us={class:"di-batch-field"},Fs={class:"di-batch-field"},Ls={class:"di-batch-editor-footer"},Ps=["disabled"],As={class:"di-export-buttons"},zs={class:"di-action-buttons"},Os={key:0,class:"di-export-summary"},js={class:"di-export-summary-row"},qs={class:"di-export-summary-count"},Hs={class:"di-export-summary-row"},Rs={class:"di-export-summary-count"},Ks={class:"di-export-summary-row"},Gs={class:"di-export-summary-count"},Ys={key:0,class:"di-indicator","data-dev-inspector":""},Xs={class:"di-modal"},Ws=["value"],Zs={class:"di-modal-actions"},Js={class:"di-modal"},Qs={class:"di-file-drop"},ed={key:0,class:"di-error"},td={class:"di-modal-actions"},od=["disabled"],ld=e.defineComponent({__name:"DevPanel",setup(U){const a=mt.useDevInspectorStore(),h=e.ref("elements"),b=e.ref(!1),O=e.ref(!1),q=e.ref(""),K=e.ref(""),ie={GET:"#10b981",POST:"#3b82f6",PUT:"#f59e0b",DELETE:"#ef4444",PATCH:"#8b5cf6"},de=e.computed(()=>a.currentScreenSpec),S=e.computed(()=>a.getScreenConfig()),j=e.computed(()=>{var m;const s=S.value,o=de.value;return!s&&!o?null:{name:(s==null?void 0:s.name)||(o==null?void 0:o.name)||"",description:(s==null?void 0:s.description)||(o==null?void 0:o.description)||"",componentPath:(s==null?void 0:s.componentPath)||(o==null?void 0:o.componentPath)||"",figmaUrl:(s==null?void 0:s.figmaUrl)||(o==null?void 0:o.figmaUrl)||"",apis:(s==null?void 0:s.apis)||((m=o==null?void 0:o.apis)==null?void 0:m.map(B=>({...B,loadTiming:void 0})))||[],auth:(s==null?void 0:s.auth)||null,notes:(s==null?void 0:s.notes)||(o!=null&&o.notes?o.notes.join(`
`):"")}}),Q=e.computed(()=>Object.keys(a.elementConfigs).length),me=e.computed(()=>{const s=typeof window<"u"?window.location.pathname:"/";return Object.entries(a.elementConfigs).filter(([,o])=>!o.pagePath||o.pagePath===s).map(([o,m])=>{var n,d,c;let B="";return(n=m.note)!=null&&n.text?B=m.note.text:m.fieldInfo?B=`${m.fieldInfo.table}.${m.fieldInfo.column}`:(d=m.actionInfo)!=null&&d.description?B=m.actionInfo.description:(c=m.actionInfo)!=null&&c.type?(B={navigate:"画面遷移",api:"API",modal:"モーダル",emit:"イベント",function:"関数",csv_export:"CSV出力",csv_import:"CSV取込",email:"メール送信"}[m.actionInfo.type]||m.actionInfo.type,m.actionInfo.target&&(B+=` → ${m.actionInfo.target}`)):m.formInfo&&(B=m.formInfo.label||m.formInfo.inputType||"フォーム"),B||(B=o),{id:o,desc:B,type:m.elementType,isConditional:!!m.isConditional,tabContext:m.tabContext||"",modalName:m.modalName||"",config:m}})}),ee=e.computed(()=>{const s=a.noteHighlightFilter;return s==="all"?me.value:me.value.filter(o=>{var c,V,E,G,T;const m=o.config,B=(c=m.note)==null?void 0:c.displayType,n=!!((V=m.note)!=null&&V.condition||(E=m.note)!=null&&E.conditionColumn),d=!!((G=m.note)!=null&&G.storedCalc);switch(s){case"db":return B==="db_direct"||B==="db_formatted";case"calculated":return B==="calculated";case"storedCalc":return d;case"static":return B==="static";case"conditional":return n;case"action":return m.elementType==="action";case"form":return m.elementType==="form";case"other":return B==="other"||!B&&!m.elementType&&!!((T=m.note)!=null&&T.text);default:return!0}})}),Z=e.computed(()=>ee.value.filter(s=>!s.isConditional&&!s.tabContext));function g(s){let o=s.elements.length;for(const m of Object.values(s.children))o+=g(m);return o}function ke(s,o){const m={};return s.forEach(B=>{const n=B[o];if(!n)return;const d=n.split(">").map(V=>V.trim()).filter(Boolean);let c=m;for(let V=0;V<d.length;V++){const E=d[V];c[E]||(c[E]={elements:[],children:{}}),V===d.length-1&&c[E].elements.push(B),c=c[E].children}}),m}const He=e.computed(()=>ke(ee.value.filter(s=>s.tabContext&&!s.isConditional),"tabContext")),pe=e.computed(()=>ee.value.filter(s=>s.tabContext&&!s.isConditional)),Te=e.ref(!0),te=e.ref(!1),H=e.ref({}),Ce=e.computed(()=>ee.value.filter(s=>s.isConditional)),D=e.computed(()=>ee.value.filter(s=>s.isConditional&&s.modalName)),k=e.computed(()=>ke(D.value,"modalName")),u=e.computed(()=>ee.value.filter(s=>s.isConditional&&!s.modalName)),C=e.ref(!1),$=e.ref({}),R=e.computed(()=>Object.values(a.elementConfigs).filter(s=>{var o,m;return!!((o=s.note)!=null&&o.text||(m=s.note)!=null&&m.displayType)}).length),_=e.computed(()=>{const s=a.noteHighlightFilter;return s==="all"?R.value:Object.values(a.elementConfigs).filter(o=>{var d,c,V,E,G,T,qe;if(!((d=o.note)!=null&&d.text||(c=o.note)!=null&&c.displayType||o.elementType))return!1;const m=(V=o.note)==null?void 0:V.displayType,B=!!((E=o.note)!=null&&E.condition||(G=o.note)!=null&&G.conditionColumn),n=!!((T=o.note)!=null&&T.storedCalc);switch(s){case"db":return m==="db_direct"||m==="db_formatted";case"calculated":return m==="calculated";case"storedCalc":return n;case"static":return m==="static";case"conditional":return B;case"action":return o.elementType==="action";case"form":return o.elementType==="form";case"other":return m==="other"||!m&&!o.elementType&&!!((qe=o.note)!=null&&qe.text);default:return!0}}).length});function z(){const s=a.exportConfigs();navigator.clipboard.writeText(s),b.value=!1}function N(){const s=a.exportConfigs(),o=new Blob([s],{type:"application/json"}),m=URL.createObjectURL(o),B=document.createElement("a");B.href=m,B.download="dev-mode-configs.json",B.click(),URL.revokeObjectURL(m),b.value=!1}function f(){a.downloadAnnotations()}async function y(){try{await al(a.currentScreenSpec,a.elementConfigs,{systemName:"System"})}catch(s){console.error("Failed to export xlsx:",s),alert("xlsx export failed. Make sure xlsx package is installed.")}}function re(){try{a.importConfigs(q.value),q.value="",K.value="",O.value=!1}catch{K.value="JSONの形式が正しくありません"}}function P(s){var n;const m=(n=s.target.files)==null?void 0:n[0];if(!m)return;const B=new FileReader;B.onload=d=>{var c;q.value=(c=d.target)==null?void 0:c.result},B.readAsText(m)}function Me(){confirm("すべての要素設定を削除しますか？")&&a.clearAllConfigs()}e.ref("/dev-inspector-analysis.json"),e.ref(!1),e.ref(""),e.ref(0),e.ref(!1);const oe=[{value:"all",label:"すべて"},{value:"db",label:"DB"},{value:"calculated",label:"計算値"},{value:"storedCalc",label:"保存計算値"},{value:"static",label:"固定"},{value:"conditional",label:"条件付き"},{value:"action",label:"アクション"},{value:"form",label:"フォーム"},{value:"other",label:"その他"}];e.computed(()=>a.getCurrentPageApis());const Ie=e.computed(()=>a.brokenAnnotations.length);e.watch(()=>a.isPanelOpen,s=>{s&&a.detectBrokenAnnotations()});function Ae(){confirm(`${Ie.value}件の壊れたメモを削除しますか？`)&&a.deleteBrokenAnnotations()}const $e=e.ref(!1),we=e.ref(null),A=e.ref({table:"",column:"",name:"",columnType:"",description:"",entries:[],transitions:[]}),he=e.computed(()=>Object.keys(a.masterDefinitions).length),Re=e.computed(()=>{const s=Object.values(a.masterDefinitions),o={};for(const m of s)o[m.table]||(o[m.table]=[]),o[m.table].push(m);return o});function Ue(s){if(s){const o=a.getMasterDefinition(s);o&&(we.value=s,A.value={table:o.table,column:o.column,name:o.name,columnType:o.columnType||"",description:o.description||"",entries:[...o.entries.map(m=>({...m}))],transitions:o.transitions?o.transitions.map(m=>({...m})):[]})}else we.value=null,A.value={table:"",column:"",name:"",columnType:"",description:"",entries:[{value:"",label:""}],transitions:[]};$e.value=!0}function Ke(){const s=A.value;if(!s.table||!s.column)return;const o=`${s.table}.${s.column}`,m=s.transitions.filter(n=>n.from||n.to||n.trigger),B={id:o,table:s.table,column:s.column,name:s.name||s.column,columnType:s.columnType||void 0,description:s.description||void 0,entries:s.entries.filter(n=>n.value||n.label),transitions:m.length>0?m:void 0,updatedAt:new Date().toISOString()};a.setMasterDefinition(B),$e.value=!1}function Ge(){A.value.entries.push({value:"",label:""})}function Ye(s){A.value.entries.splice(s,1)}function ae(){A.value.transitions.push({from:"",to:"",trigger:""})}function ye(s){A.value.transitions.splice(s,1)}function ve(s){confirm(`マスタ定義「${s}」を削除しますか？`)&&a.deleteMasterDefinition(s)}const De=e.ref(!1),ze=e.ref(null),M=e.ref({name:"",schedule:"",trigger:"",description:"",inputTables:[],outputTables:[],steps:[],timeout:"",retryPolicy:"",notifyOnError:"",notifyOnComplete:""}),Oe=e.ref(""),nt=e.ref(""),Ze=e.computed(()=>Object.keys(a.batchDefinitions).length),Fe=e.computed(()=>Object.values(a.batchDefinitions));function ge(s){if(s){const o=a.getBatchDefinition(s);o&&(ze.value=s,M.value={name:o.name,schedule:o.schedule||"",trigger:o.trigger||"",description:o.description||"",inputTables:o.inputTables?[...o.inputTables]:[],outputTables:o.outputTables?[...o.outputTables]:[],steps:o.steps.map(m=>({...m})),timeout:o.timeout||"",retryPolicy:o.retryPolicy||"",notifyOnError:o.notifyOnError||"",notifyOnComplete:o.notifyOnComplete||""})}else ze.value=null,M.value={name:"",schedule:"",trigger:"",description:"",inputTables:[],outputTables:[],steps:[{order:1,description:""}],timeout:"",retryPolicy:"",notifyOnError:"",notifyOnComplete:""};Oe.value="",nt.value="",De.value=!0}function Pe(){const s=M.value;if(!s.name)return;const m={id:ze.value||`batch_${s.name.replace(/\s+/g,"_").toLowerCase()}_${Date.now()}`,name:s.name,schedule:s.schedule||void 0,trigger:s.trigger||void 0,description:s.description||void 0,inputTables:s.inputTables.length>0?s.inputTables:void 0,outputTables:s.outputTables.length>0?s.outputTables:void 0,steps:s.steps.filter(B=>B.description).map((B,n)=>({...B,order:n+1})),timeout:s.timeout||void 0,retryPolicy:s.retryPolicy||void 0,notifyOnError:s.notifyOnError||void 0,notifyOnComplete:s.notifyOnComplete||void 0,updatedAt:new Date().toISOString()};a.setBatchDefinition(m),De.value=!1}function st(){const s=M.value.steps.length+1;M.value.steps.push({order:s,description:""})}function F(s){M.value.steps.splice(s,1)}function fe(s){var o;confirm(`バッチ定義「${((o=a.getBatchDefinition(s))==null?void 0:o.name)||s}」を削除しますか？`)&&a.deleteBatchDefinition(s)}function le(){const s=Oe.value.trim();s&&!M.value.inputTables.includes(s)&&M.value.inputTables.push(s),Oe.value=""}function be(s){M.value.inputTables.splice(s,1)}function Xe(){const s=nt.value.trim();s&&!M.value.outputTables.includes(s)&&M.value.outputTables.push(s),nt.value=""}function Je(s){M.value.outputTables.splice(s,1)}const tt=[{value:"column",label:"カラム",placeholder:"users.email, orders..."},{value:"api",label:"API",placeholder:"GET /api/users..."},{value:"text",label:"テキスト",placeholder:"メモ、説明文で検索..."}],_e=e.computed(()=>{var s;return((s=tt.find(o=>o.value===a.crossSearchMode))==null?void 0:s.placeholder)||"検索..."}),ce=e.computed(()=>{const s={};for(const o of a.crossSearchResults)s[o.pagePath]||(s[o.pagePath]={pagePath:o.pagePath,pageName:o.pageName,items:[]}),s[o.pagePath].items.push(o);return Object.values(s)}),dt=e.computed(()=>ce.value.length),je=e.computed(()=>{const s=a.unannotatedElements;return{binding:s.filter(o=>o.category==="binding").length,form:s.filter(o=>o.category==="form").length,action:s.filter(o=>o.category==="action").length}});function at(){a.showUnannotatedDetection?(a.showUnannotatedDetection=!1,a.unannotatedElements=[],a.hoveredUnannotatedSelector=null):(a.showUnannotatedDetection=!0,a.detectUnannotatedElements())}function it(s){a.unannotatedElements=a.unannotatedElements.filter(o=>o.selector!==s)}function Qe(s){a.hoveredUnannotatedSelector=s;try{const o=document.querySelector(s);if(!o)return;const m=o.getBoundingClientRect();(m.bottom<0||m.top>window.innerHeight)&&o.scrollIntoView({behavior:"smooth",block:"center"})}catch{}}function ot(){a.hoveredUnannotatedSelector=null}function se(s){a.hoveredSelector=s;try{const o=document.querySelector(s);if(!o)return;const m=o.getBoundingClientRect();(m.bottom<0||m.top>window.innerHeight)&&o.scrollIntoView({behavior:"smooth",block:"center"})}catch{}}function i(){a.hoveredSelector=null}const J=e.ref(null),Y=e.ref(null);function L(s,o){J.value=o,s.dataTransfer&&(s.dataTransfer.effectAllowed="move",s.dataTransfer.setData("text/plain",o))}function X(){J.value=null,Y.value=null}function Ve(s,o){s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="move"),Y.value=o}function Ee(s,o){const m=s.relatedTarget,B=s.currentTarget;B&&m&&B.contains(m)||Y.value===o&&(Y.value=null)}function Se(s,o){s.preventDefault(),Y.value=null;const m=J.value;if(J.value=null,!(!m||!a.elementConfigs[m])){if(o==="__page__")a.setElementConfig(m,{tabContext:void 0,modalName:void 0,isConditional:!1});else if(o.startsWith("tab:")){const n=o.slice(4);a.setElementConfig(m,{tabContext:n,modalName:void 0,isConditional:!1})}else if(o==="__modal_unnamed__")a.setElementConfig(m,{isConditional:!0,modalName:void 0,tabContext:void 0});else if(o.startsWith("modal:")){const n=o.slice(6);a.setElementConfig(m,{isConditional:!0,modalName:n,tabContext:void 0})}}}const Le=e.ref(null),ne=e.ref("");function W(s,o,m){m.stopPropagation(),Le.value=s,ne.value=o}function Ne(s){const o=ne.value.trim();if(Le.value=null,!!o){if(s.startsWith("tab:")){const m=s.slice(4),B=m.split(" > ");B[B.length-1]=o;const n=B.join(" > ");if(m===n)return;for(const[V,E]of Object.entries(a.elementConfigs))E.tabContext&&(E.tabContext===m?a.setElementConfig(V,{tabContext:n}):E.tabContext.startsWith(m+" > ")&&a.setElementConfig(V,{tabContext:n+E.tabContext.slice(m.length)}));const d=m.replace(/ > /g,">"),c=n.replace(/ > /g,">");H.value[d]!==void 0&&(H.value[c]=H.value[d],delete H.value[d])}else if(s.startsWith("modal:")){const m=s.slice(6),B=m.split(" > ");B[B.length-1]=o;const n=B.join(" > ");if(m===n)return;for(const[V,E]of Object.entries(a.elementConfigs))E.modalName&&(E.modalName===m?a.setElementConfig(V,{modalName:n}):E.modalName.startsWith(m+" > ")&&a.setElementConfig(V,{modalName:n+E.modalName.slice(m.length)}));const d=m.replace(/ > /g,">"),c=n.replace(/ > /g,">");$.value[d]!==void 0&&($.value[c]=$.value[d],delete $.value[d])}}}function et(){Le.value=null,ne.value=""}function We(s,o){s.key==="Enter"?Ne(o):s.key==="Escape"&&et()}const x=e.computed(()=>typeof window<"u"?window.location.pathname:"/"),Be=e.computed(()=>{const s=a.screenFlowData,o={};for(const m of s.edges){if(!o[m.from]){const B=s.nodes.find(n=>n.path===m.from)||{path:m.from,name:m.from,annotationCount:0};o[m.from]={node:B,edges:[]}}o[m.from].edges.push(m)}return Object.values(o)});function ue(s){s&&a.startEditing(s)}return(s,o)=>{var m,B;return e.openBlock(),e.createElementBlock(e.Fragment,null,[(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.unref(a).isEnabled&&!e.unref(a).isPanelOpen?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:o[0]||(o[0]=(...n)=>e.unref(a).openPanel&&e.unref(a).openPanel(...n)),class:"di-fab",title:"画面仕様を表示","data-dev-inspector":""},[e.createVNode(e.unref(ht),{style:{width:"20px",height:"20px"}})])):e.createCommentVNode("",!0)])),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.unref(a).isEnabled&&e.unref(a).isPanelOpen?(e.openBlock(),e.createElementBlock("div",il,[e.createElementVNode("div",sl,[e.createElementVNode("div",dl,[e.createVNode(e.unref(qt),{style:{width:"20px",height:"20px",color:"#60a5fa"}}),o[67]||(o[67]=e.createElementVNode("span",null,"Developer Mode",-1))]),e.createElementVNode("button",{onClick:o[1]||(o[1]=(...n)=>e.unref(a).closePanel&&e.unref(a).closePanel(...n)),class:"di-close-btn"},[e.createVNode(e.unref(lt),{style:{width:"20px",height:"20px"}})])]),e.createElementVNode("div",rl,[e.createElementVNode("button",{onClick:o[2]||(o[2]=n=>h.value="elements"),class:e.normalizeClass(["di-tab-btn",{active:h.value==="elements"}])},[e.createVNode(e.unref(Kt),{style:{width:"14px",height:"14px"}}),o[68]||(o[68]=e.createElementVNode("span",null,"要素設定",-1)),Q.value>0?(e.openBlock(),e.createElementBlock("span",cl,e.toDisplayString(Q.value),1)):e.createCommentVNode("",!0)],2),e.createElementVNode("button",{onClick:o[3]||(o[3]=n=>h.value="masters"),class:e.normalizeClass(["di-tab-btn",{active:h.value==="masters"}])},[e.createVNode(e.unref(rt),{style:{width:"14px",height:"14px"}}),o[69]||(o[69]=e.createElementVNode("span",null,"マスタ",-1)),he.value>0?(e.openBlock(),e.createElementBlock("span",ul,e.toDisplayString(he.value),1)):e.createCommentVNode("",!0)],2),e.createElementVNode("button",{onClick:o[4]||(o[4]=n=>h.value="batches"),class:e.normalizeClass(["di-tab-btn",{active:h.value==="batches"}])},[e.createVNode(e.unref(jt),{style:{width:"14px",height:"14px"}}),o[70]||(o[70]=e.createElementVNode("span",null,"バッチ",-1)),Ze.value>0?(e.openBlock(),e.createElementBlock("span",ml,e.toDisplayString(Ze.value),1)):e.createCommentVNode("",!0)],2),e.createElementVNode("button",{onClick:o[5]||(o[5]=n=>h.value="export"),class:e.normalizeClass(["di-tab-btn",{active:h.value==="export"}])},[e.createVNode(e.unref(Bt),{style:{width:"14px",height:"14px"}}),o[71]||(o[71]=e.createElementVNode("span",null,"出力",-1))],2)]),e.withDirectives(e.createElementVNode("div",pl,[e.createElementVNode("button",{onClick:o[6]||(o[6]=(...n)=>e.unref(a).togglePickMode&&e.unref(a).togglePickMode(...n)),class:e.normalizeClass(["di-pick-btn",{active:e.unref(a).isPickMode}])},[e.createVNode(e.unref(Rt),{style:{width:"16px",height:"16px"}}),e.createElementVNode("span",null,e.toDisplayString(e.unref(a).isPickMode?"要素選択中...":"任意の要素にメモを追加"),1)],2),R.value>0?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:o[7]||(o[7]=(...n)=>e.unref(a).toggleNoteHighlights&&e.unref(a).toggleNoteHighlights(...n)),class:e.normalizeClass(["di-note-toggle-btn",{active:e.unref(a).showNoteHighlights}])},[e.unref(a).showNoteHighlights?(e.openBlock(),e.createBlock(e.unref(Ro),{key:0,style:{width:"14px",height:"14px"}})):(e.openBlock(),e.createBlock(e.unref(Ho),{key:1,style:{width:"14px",height:"14px"}})),o[72]||(o[72]=e.createElementVNode("span",null,"メモハイライト",-1)),e.createElementVNode("span",vl,e.toDisplayString(e.unref(a).noteHighlightFilter==="all"?R.value:`${_.value}/${R.value}`),1)],2)):e.createCommentVNode("",!0),R.value>0&&e.unref(a).showNoteHighlights?(e.openBlock(),e.createElementBlock("div",fl,[e.createElementVNode("div",Vl,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(oe,n=>e.createElementVNode("button",{key:n.value,onClick:d=>e.unref(a).noteHighlightFilter=n.value,class:e.normalizeClass(["di-filter-btn",{active:e.unref(a).noteHighlightFilter===n.value}])},e.toDisplayString(n.label),11,El)),64))])])):e.createCommentVNode("",!0),me.value.length>0?(e.openBlock(),e.createElementBlock("div",kl,[e.createElementVNode("div",hl,[e.createVNode(e.unref(Kt),{style:{width:"14px",height:"14px",color:"#94a3b8"}}),o[73]||(o[73]=e.createElementVNode("span",null,"登録済み要素",-1)),e.createElementVNode("span",yl,[e.createTextVNode(e.toDisplayString(ee.value.length),1),ee.value.length!==me.value.length?(e.openBlock(),e.createElementBlock("span",gl," / "+e.toDisplayString(me.value.length),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",bl,[Z.value.length>0||Y.value==="__page__"?(e.openBlock(),e.createElementBlock("div",Nl,[e.createElementVNode("button",{class:e.normalizeClass(["di-tree-group-header",{"di-drop-target":Y.value==="__page__"}]),onClick:o[8]||(o[8]=n=>Te.value=!Te.value),onDragover:o[9]||(o[9]=n=>Ve(n,"__page__")),onDragleave:o[10]||(o[10]=n=>Ee(n,"__page__")),onDrop:o[11]||(o[11]=n=>Se(n,"__page__"))},[e.createElementVNode("span",Bl,e.toDisplayString(Te.value?"▼":"▶"),1),o[74]||(o[74]=e.createElementVNode("span",null,"タブ外",-1)),e.createElementVNode("span",xl,e.toDisplayString(Z.value.length),1)],34),Te.value?(e.openBlock(),e.createElementBlock("div",Cl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Z.value,n=>(e.openBlock(),e.createElementBlock("div",{key:n.id,class:e.normalizeClass(["di-element-item",{"di-element-item-active":e.unref(a).hoveredSelector===n.id,"di-dragging":J.value===n.id}]),draggable:"true",onDragstart:d=>L(d,n.id),onDragend:X,onClick:d=>e.unref(a).startEditing(n.id),onMouseenter:d=>se(n.id),onMouseleave:i},[e.createElementVNode("span",{class:e.normalizeClass(["di-element-type-badge","di-element-type-"+(n.type||"other")])},e.toDisplayString(n.type==="datasource"?"DB":n.type==="action"?"Act":n.type==="form"?"Form":"-"),3),e.createElementVNode("div",Dl,[e.createElementVNode("div",$l,e.toDisplayString(n.desc),1)])],42,wl))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),pe.value.length>0||J.value&&!((m=Y.value)!=null&&m.startsWith("modal:"))&&Y.value!=="__modal_unnamed__"?(e.openBlock(),e.createElementBlock("div",_l,[e.createElementVNode("button",{class:"di-tree-group-header",onClick:o[12]||(o[12]=n=>te.value=!te.value)},[e.createElementVNode("span",Sl,e.toDisplayString(te.value?"▼":"▶"),1),o[75]||(o[75]=e.createElementVNode("span",null,"タブ内",-1)),e.createElementVNode("span",Tl,e.toDisplayString(pe.value.length),1)]),te.value?(e.openBlock(),e.createElementBlock("div",Ml,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(He.value,(n,d)=>(e.openBlock(),e.createElementBlock("div",{key:"t1-"+d,class:"di-tree-subgroup"},[Le.value==="tab:"+d?(e.openBlock(),e.createElementBlock("div",Il,[o[76]||(o[76]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-tab"},"T",-1)),e.withDirectives(e.createElementVNode("input",{class:"di-rename-input","onUpdate:modelValue":o[13]||(o[13]=c=>ne.value=c),onKeydown:c=>We(c,"tab:"+d),onBlur:c=>Ne("tab:"+d),ref_for:!0,ref:"renameInputRef",autofocus:""},null,40,Ul),[[e.vModelText,ne.value]])])):(e.openBlock(),e.createElementBlock("button",{key:1,class:e.normalizeClass(["di-tree-group-header di-tree-subgroup-header",{"di-drop-target":Y.value==="tab:"+d}]),onClick:c=>H.value[d]=!H.value[d],onDragover:c=>Ve(c,"tab:"+d),onDragleave:c=>Ee(c,"tab:"+d),onDrop:c=>Se(c,"tab:"+d)},[e.createElementVNode("span",Ll,e.toDisplayString(H.value[d]?"▼":"▶"),1),o[77]||(o[77]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-tab"},"T",-1)),e.createElementVNode("span",null,e.toDisplayString(d),1),e.createElementVNode("span",Pl,e.toDisplayString(g(n)),1),e.createElementVNode("span",{class:"di-rename-btn",onClick:c=>W("tab:"+d,String(d),c),title:"名前変更"},"✏",8,Al)],42,Fl)),H.value[d]?(e.openBlock(),e.createElementBlock("div",zl,[n.elements.length>0?(e.openBlock(),e.createElementBlock("div",Ol,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.elements,c=>(e.openBlock(),e.createElementBlock("div",{key:c.id,class:e.normalizeClass(["di-element-item",{"di-element-item-active":e.unref(a).hoveredSelector===c.id,"di-dragging":J.value===c.id}]),draggable:"true",onDragstart:V=>L(V,c.id),onDragend:X,onClick:V=>e.unref(a).startEditing(c.id),onMouseenter:V=>se(c.id),onMouseleave:i},[e.createElementVNode("span",{class:e.normalizeClass(["di-element-type-badge","di-element-type-"+(c.type||"other")])},e.toDisplayString(c.type==="datasource"?"DB":c.type==="action"?"Act":c.type==="form"?"Form":"-"),3),e.createElementVNode("div",ql,[e.createElementVNode("div",Hl,e.toDisplayString(c.desc),1)])],42,jl))),128))])):e.createCommentVNode("",!0),Object.keys(n.children).length>0?(e.openBlock(),e.createElementBlock("div",Rl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.children,(c,V)=>(e.openBlock(),e.createElementBlock("div",{key:"t2-"+V,class:"di-tree-subgroup"},[Le.value==="tab:"+d+" > "+V?(e.openBlock(),e.createElementBlock("div",Kl,[o[78]||(o[78]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-tab"},"T",-1)),e.withDirectives(e.createElementVNode("input",{class:"di-rename-input","onUpdate:modelValue":o[14]||(o[14]=E=>ne.value=E),onKeydown:E=>We(E,"tab:"+d+" > "+V),onBlur:E=>Ne("tab:"+d+" > "+V),autofocus:""},null,40,Gl),[[e.vModelText,ne.value]])])):(e.openBlock(),e.createElementBlock("button",{key:1,class:e.normalizeClass(["di-tree-group-header di-tree-subgroup-header",{"di-drop-target":Y.value==="tab:"+d+" > "+V}]),onClick:E=>H.value[d+">"+V]=!H.value[d+">"+V],onDragover:E=>Ve(E,"tab:"+d+" > "+V),onDragleave:E=>Ee(E,"tab:"+d+" > "+V),onDrop:E=>Se(E,"tab:"+d+" > "+V)},[e.createElementVNode("span",Xl,e.toDisplayString(H.value[d+">"+V]?"▼":"▶"),1),o[79]||(o[79]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-tab"},"T",-1)),e.createElementVNode("span",null,e.toDisplayString(V),1),e.createElementVNode("span",Wl,e.toDisplayString(g(c)),1),e.createElementVNode("span",{class:"di-rename-btn",onClick:E=>W("tab:"+d+" > "+V,String(V),E),title:"名前変更"},"✏",8,Zl)],42,Yl)),H.value[d+">"+V]?(e.openBlock(),e.createElementBlock("div",Jl,[c.elements.length>0?(e.openBlock(),e.createElementBlock("div",Ql,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.elements,E=>(e.openBlock(),e.createElementBlock("div",{key:E.id,class:e.normalizeClass(["di-element-item",{"di-element-item-active":e.unref(a).hoveredSelector===E.id,"di-dragging":J.value===E.id}]),draggable:"true",onDragstart:G=>L(G,E.id),onDragend:X,onClick:G=>e.unref(a).startEditing(E.id),onMouseenter:G=>se(E.id),onMouseleave:i},[e.createElementVNode("span",{class:e.normalizeClass(["di-element-type-badge","di-element-type-"+(E.type||"other")])},e.toDisplayString(E.type==="datasource"?"DB":E.type==="action"?"Act":E.type==="form"?"Form":"-"),3),e.createElementVNode("div",tn,[e.createElementVNode("div",on,e.toDisplayString(E.desc),1)])],42,en))),128))])):e.createCommentVNode("",!0),Object.keys(c.children).length>0?(e.openBlock(),e.createElementBlock("div",ln,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.children,(E,G)=>(e.openBlock(),e.createElementBlock("div",{key:"t3-"+G,class:"di-tree-subgroup"},[Le.value==="tab:"+d+" > "+V+" > "+G?(e.openBlock(),e.createElementBlock("div",nn,[o[80]||(o[80]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-tab"},"T",-1)),e.withDirectives(e.createElementVNode("input",{class:"di-rename-input","onUpdate:modelValue":o[15]||(o[15]=T=>ne.value=T),onKeydown:T=>We(T,"tab:"+d+" > "+V+" > "+G),onBlur:T=>Ne("tab:"+d+" > "+V+" > "+G),autofocus:""},null,40,an),[[e.vModelText,ne.value]])])):(e.openBlock(),e.createElementBlock("button",{key:1,class:e.normalizeClass(["di-tree-group-header di-tree-subgroup-header",{"di-drop-target":Y.value==="tab:"+d+" > "+V+" > "+G}]),onClick:T=>H.value[d+">"+V+">"+G]=!H.value[d+">"+V+">"+G],onDragover:T=>Ve(T,"tab:"+d+" > "+V+" > "+G),onDragleave:T=>Ee(T,"tab:"+d+" > "+V+" > "+G),onDrop:T=>Se(T,"tab:"+d+" > "+V+" > "+G)},[e.createElementVNode("span",dn,e.toDisplayString(H.value[d+">"+V+">"+G]?"▼":"▶"),1),o[81]||(o[81]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-tab"},"T",-1)),e.createElementVNode("span",null,e.toDisplayString(G),1),e.createElementVNode("span",rn,e.toDisplayString(g(E)),1),e.createElementVNode("span",{class:"di-rename-btn",onClick:T=>W("tab:"+d+" > "+V+" > "+G,String(G),T),title:"名前変更"},"✏",8,cn)],42,sn)),H.value[d+">"+V+">"+G]?(e.openBlock(),e.createElementBlock("div",un,[E.elements.length>0?(e.openBlock(),e.createElementBlock("div",mn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(E.elements,T=>(e.openBlock(),e.createElementBlock("div",{key:T.id,class:e.normalizeClass(["di-element-item",{"di-element-item-active":e.unref(a).hoveredSelector===T.id,"di-dragging":J.value===T.id}]),draggable:"true",onDragstart:qe=>L(qe,T.id),onDragend:X,onClick:qe=>e.unref(a).startEditing(T.id),onMouseenter:qe=>se(T.id),onMouseleave:i},[e.createElementVNode("span",{class:e.normalizeClass(["di-element-type-badge","di-element-type-"+(T.type||"other")])},e.toDisplayString(T.type==="datasource"?"DB":T.type==="action"?"Act":T.type==="form"?"Form":"-"),3),e.createElementVNode("div",vn,[e.createElementVNode("div",fn,e.toDisplayString(T.desc),1)])],42,pn))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),Ce.value.length>0||J.value&&((B=Y.value)!=null&&B.startsWith("modal:")||Y.value==="__modal_unnamed__")?(e.openBlock(),e.createElementBlock("div",Vn,[e.createElementVNode("button",{class:"di-tree-group-header",onClick:o[16]||(o[16]=n=>C.value=!C.value)},[e.createElementVNode("span",En,e.toDisplayString(C.value?"▼":"▶"),1),o[82]||(o[82]=e.createElementVNode("span",null,"モーダル",-1)),e.createElementVNode("span",kn,e.toDisplayString(Ce.value.length),1)]),C.value?(e.openBlock(),e.createElementBlock("div",hn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,(n,d)=>(e.openBlock(),e.createElementBlock("div",{key:"m1-"+d,class:"di-tree-subgroup"},[Le.value==="modal:"+d?(e.openBlock(),e.createElementBlock("div",yn,[o[83]||(o[83]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-modal"},"M",-1)),e.withDirectives(e.createElementVNode("input",{class:"di-rename-input","onUpdate:modelValue":o[17]||(o[17]=c=>ne.value=c),onKeydown:c=>We(c,"modal:"+d),onBlur:c=>Ne("modal:"+d),autofocus:""},null,40,gn),[[e.vModelText,ne.value]])])):(e.openBlock(),e.createElementBlock("button",{key:1,class:e.normalizeClass(["di-tree-group-header di-tree-subgroup-header",{"di-drop-target":Y.value==="modal:"+d}]),onClick:c=>$.value[String(d)]=!$.value[String(d)],onDragover:c=>Ve(c,"modal:"+d),onDragleave:c=>Ee(c,"modal:"+d),onDrop:c=>Se(c,"modal:"+d)},[e.createElementVNode("span",Nn,e.toDisplayString($.value[String(d)]?"▼":"▶"),1),o[84]||(o[84]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-modal"},"M",-1)),e.createElementVNode("span",null,e.toDisplayString(d),1),e.createElementVNode("span",Bn,e.toDisplayString(g(n)),1),e.createElementVNode("span",{class:"di-rename-btn",onClick:c=>W("modal:"+d,String(d),c),title:"名前変更"},"✏",8,xn)],42,bn)),$.value[String(d)]?(e.openBlock(),e.createElementBlock("div",Cn,[n.elements.length>0?(e.openBlock(),e.createElementBlock("div",wn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.elements,c=>(e.openBlock(),e.createElementBlock("div",{key:c.id,class:e.normalizeClass(["di-element-item",{"di-element-item-active":e.unref(a).hoveredSelector===c.id,"di-dragging":J.value===c.id}]),draggable:"true",onDragstart:V=>L(V,c.id),onDragend:X,onClick:V=>e.unref(a).startEditing(c.id),onMouseenter:V=>se(c.id),onMouseleave:i},[e.createElementVNode("span",{class:e.normalizeClass(["di-element-type-badge","di-element-type-"+(c.type||"other")])},e.toDisplayString(c.type==="datasource"?"DB":c.type==="action"?"Act":c.type==="form"?"Form":"-"),3),e.createElementVNode("div",$n,[e.createElementVNode("div",_n,e.toDisplayString(c.desc),1)])],42,Dn))),128))])):e.createCommentVNode("",!0),Object.keys(n.children).length>0?(e.openBlock(),e.createElementBlock("div",Sn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.children,(c,V)=>(e.openBlock(),e.createElementBlock("div",{key:"m2-"+V,class:"di-tree-subgroup"},[Le.value==="modal:"+d+" > "+V?(e.openBlock(),e.createElementBlock("div",Tn,[o[85]||(o[85]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-modal"},"M",-1)),e.withDirectives(e.createElementVNode("input",{class:"di-rename-input","onUpdate:modelValue":o[18]||(o[18]=E=>ne.value=E),onKeydown:E=>We(E,"modal:"+d+" > "+V),onBlur:E=>Ne("modal:"+d+" > "+V),autofocus:""},null,40,Mn),[[e.vModelText,ne.value]])])):(e.openBlock(),e.createElementBlock("button",{key:1,class:e.normalizeClass(["di-tree-group-header di-tree-subgroup-header",{"di-drop-target":Y.value==="modal:"+d+" > "+V}]),onClick:E=>$.value[d+">"+V]=!$.value[d+">"+V],onDragover:E=>Ve(E,"modal:"+d+" > "+V),onDragleave:E=>Ee(E,"modal:"+d+" > "+V),onDrop:E=>Se(E,"modal:"+d+" > "+V)},[e.createElementVNode("span",Un,e.toDisplayString($.value[d+">"+V]?"▼":"▶"),1),o[86]||(o[86]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-modal"},"M",-1)),e.createElementVNode("span",null,e.toDisplayString(V),1),e.createElementVNode("span",Fn,e.toDisplayString(g(c)),1),e.createElementVNode("span",{class:"di-rename-btn",onClick:E=>W("modal:"+d+" > "+V,String(V),E),title:"名前変更"},"✏",8,Ln)],42,In)),$.value[d+">"+V]?(e.openBlock(),e.createElementBlock("div",Pn,[c.elements.length>0?(e.openBlock(),e.createElementBlock("div",An,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.elements,E=>(e.openBlock(),e.createElementBlock("div",{key:E.id,class:e.normalizeClass(["di-element-item",{"di-element-item-active":e.unref(a).hoveredSelector===E.id,"di-dragging":J.value===E.id}]),draggable:"true",onDragstart:G=>L(G,E.id),onDragend:X,onClick:G=>e.unref(a).startEditing(E.id),onMouseenter:G=>se(E.id),onMouseleave:i},[e.createElementVNode("span",{class:e.normalizeClass(["di-element-type-badge","di-element-type-"+(E.type||"other")])},e.toDisplayString(E.type==="datasource"?"DB":E.type==="action"?"Act":E.type==="form"?"Form":"-"),3),e.createElementVNode("div",On,[e.createElementVNode("div",jn,e.toDisplayString(E.desc),1)])],42,zn))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]))),128)),u.value.length>0||Y.value==="__modal_unnamed__"?(e.openBlock(),e.createElementBlock("div",qn,[e.createElementVNode("button",{class:e.normalizeClass(["di-tree-group-header di-tree-subgroup-header",{"di-drop-target":Y.value==="__modal_unnamed__"}]),onClick:o[19]||(o[19]=n=>$.value.__unnamed=!$.value.__unnamed),onDragover:o[20]||(o[20]=n=>Ve(n,"__modal_unnamed__")),onDragleave:o[21]||(o[21]=n=>Ee(n,"__modal_unnamed__")),onDrop:o[22]||(o[22]=n=>Se(n,"__modal_unnamed__"))},[e.createElementVNode("span",Hn,e.toDisplayString($.value.__unnamed?"▼":"▶"),1),o[87]||(o[87]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-modal"},"M",-1)),o[88]||(o[88]=e.createElementVNode("span",null,"未分類",-1)),e.createElementVNode("span",Rn,e.toDisplayString(u.value.length),1)],34),$.value.__unnamed?(e.openBlock(),e.createElementBlock("div",Kn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,n=>(e.openBlock(),e.createElementBlock("div",{key:n.id,class:e.normalizeClass(["di-element-item",{"di-element-item-active":e.unref(a).hoveredSelector===n.id,"di-dragging":J.value===n.id}]),draggable:"true",onDragstart:d=>L(d,n.id),onDragend:X,onClick:d=>e.unref(a).startEditing(n.id),onMouseenter:d=>se(n.id),onMouseleave:i},[e.createElementVNode("span",{class:e.normalizeClass(["di-element-type-badge","di-element-type-"+(n.type||"other")])},e.toDisplayString(n.type==="datasource"?"DB":n.type==="action"?"Act":n.type==="form"?"Form":"-"),3),e.createElementVNode("div",Yn,[e.createElementVNode("div",Xn,e.toDisplayString(n.desc),1)])],42,Gn))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:at,class:e.normalizeClass(["di-unannotated-btn",{active:e.unref(a).showUnannotatedDetection}])},[e.createVNode(e.unref(jo),{style:{width:"14px",height:"14px"}}),e.createElementVNode("span",null,e.toDisplayString(e.unref(a).showUnannotatedDetection?"未登録検出 ON":"未登録要素を検出"),1),e.unref(a).unannotatedElements.length>0?(e.openBlock(),e.createElementBlock("span",Wn,e.toDisplayString(e.unref(a).unannotatedElements.length),1)):e.createCommentVNode("",!0)],2),e.unref(a).showUnannotatedDetection&&e.unref(a).unannotatedElements.length>0?(e.openBlock(),e.createElementBlock("div",Zn,[e.createElementVNode("div",Jn,[e.createTextVNode(e.toDisplayString(e.unref(a).unannotatedElements.length)+"件検出: ",1),je.value.binding>0?(e.openBlock(),e.createElementBlock("span",Qn,"バインディング "+e.toDisplayString(je.value.binding),1)):e.createCommentVNode("",!0),je.value.form>0?(e.openBlock(),e.createElementBlock("span",ea," / フォーム "+e.toDisplayString(je.value.form),1)):e.createCommentVNode("",!0),je.value.action>0?(e.openBlock(),e.createElementBlock("span",ta," / アクション "+e.toDisplayString(je.value.action),1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",oa,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a).unannotatedElements,n=>(e.openBlock(),e.createElementBlock("div",{key:n.selector,class:e.normalizeClass(["di-unannotated-item",{"di-unannotated-item-active":e.unref(a).hoveredUnannotatedSelector===n.selector,["di-unannotated-item-"+n.category]:e.unref(a).hoveredUnannotatedSelector===n.selector}]),onMouseenter:d=>Qe(n.selector),onMouseleave:ot},[e.createElementVNode("span",{class:e.normalizeClass(["di-unannotated-category","di-unannotated-cat-"+n.category])},e.toDisplayString(n.category==="binding"?"DB":n.category==="form"?"Form":"Act"),3),e.createElementVNode("span",na,e.toDisplayString(n.text||n.tagName),1),e.createElementVNode("button",{onClick:d=>e.unref(a).quickAnnotate(n.selector,n.suggestedType),class:"di-unannotated-register"}," 登録 ",8,aa),e.createElementVNode("button",{onClick:d=>it(n.selector),class:"di-unannotated-dismiss"},[e.createVNode(e.unref(lt),{style:{width:"10px",height:"10px"}})],8,ia)],42,la))),128))])])):e.createCommentVNode("",!0),e.unref(a).showUnannotatedDetection&&e.unref(a).unannotatedElements.length===0?(e.openBlock(),e.createElementBlock("div",sa," 未登録の要素はありません ")):e.createCommentVNode("",!0),Ie.value>0?(e.openBlock(),e.createElementBlock("div",da,[e.createElementVNode("div",ra,[e.createVNode(e.unref(Po),{style:{width:"14px",height:"14px",color:"#f59e0b"}}),e.createElementVNode("span",null,e.toDisplayString(Ie.value)+"件のメモが見つかりません",1)]),o[91]||(o[91]=e.createElementVNode("div",{class:"di-broken-desc"},"コード変更によりセレクタが壊れた可能性があります",-1)),e.createElementVNode("div",ca,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a).brokenAnnotations,n=>{var d,c;return e.openBlock(),e.createElementBlock("div",{key:n,class:"di-broken-item"},[e.createElementVNode("div",ua,[e.createElementVNode("div",ma,e.toDisplayString(((c=(d=e.unref(a).elementConfigs[n])==null?void 0:d.note)==null?void 0:c.text)||"(メモなし)"),1),e.createElementVNode("div",pa,e.toDisplayString(n),1)]),e.createElementVNode("div",va,[e.createElementVNode("button",{onClick:V=>e.unref(a).startRemap(n),class:"di-broken-remap-btn",title:"新しい要素に再設定"},[e.createVNode(e.unref(Rt),{style:{width:"12px",height:"12px"}}),o[89]||(o[89]=e.createTextVNode(" 再設定 ",-1))],8,fa),e.createElementVNode("button",{onClick:V=>{e.unref(a).deleteElementConfig(n),e.unref(a).detectBrokenAnnotations()},class:"di-broken-item-delete",title:"削除"},[e.createVNode(e.unref(ft),{style:{width:"12px",height:"12px"}})],8,Va)])])}),128))]),e.createElementVNode("div",Ea,[e.createElementVNode("button",{onClick:Ae,class:"di-broken-delete-btn"},[e.createVNode(e.unref(ft),{style:{width:"12px",height:"12px"}}),o[90]||(o[90]=e.createTextVNode(" まとめて削除 ",-1))])])])):e.createCommentVNode("",!0),e.createCommentVNode("",!0)],512),[[e.vShow,h.value==="elements"]]),e.createElementVNode("div",ka,[e.withDirectives(e.createElementVNode("div",null,[j.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("div",ha,[e.createElementVNode("div",ya,[e.createElementVNode("h2",ga,e.toDisplayString(j.value.name),1),e.createElementVNode("button",{onClick:o[25]||(o[25]=n=>e.unref(a).editingScreen=!0),class:"di-screen-edit-btn",title:"画面情報を編集"},[e.createVNode(e.unref(Gt),{style:{width:"14px",height:"14px"}})])]),j.value.description?(e.openBlock(),e.createElementBlock("p",ba,e.toDisplayString(j.value.description),1)):e.createCommentVNode("",!0),j.value.auth?(e.openBlock(),e.createElementBlock("div",Na,[j.value.auth.required?(e.openBlock(),e.createElementBlock("span",Ba,[e.createVNode(e.unref(Xo),{style:{width:"11px",height:"11px"}}),o[101]||(o[101]=e.createTextVNode(" ログイン必須 ",-1))])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(j.value.auth.roles||[],n=>(e.openBlock(),e.createElementBlock("span",{key:n,class:"di-auth-badge di-auth-role"},[e.createVNode(e.unref(tl),{style:{width:"11px",height:"11px"}}),e.createTextVNode(" "+e.toDisplayString(n),1)]))),128)),j.value.auth.description?(e.openBlock(),e.createElementBlock("span",xa,e.toDisplayString(j.value.auth.description),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),j.value.componentPath?(e.openBlock(),e.createElementBlock("div",Ca,[e.createElementVNode("div",wa,[e.createVNode(e.unref(qt),{style:{width:"16px",height:"16px"}}),o[102]||(o[102]=e.createElementVNode("span",null,"Component Path",-1))]),e.createElementVNode("code",Da,e.toDisplayString(j.value.componentPath),1)])):e.createCommentVNode("",!0),j.value.figmaUrl?(e.openBlock(),e.createElementBlock("div",$a,[e.createElementVNode("div",_a,[e.createVNode(e.unref(qo),{style:{width:"16px",height:"16px"}}),o[103]||(o[103]=e.createElementVNode("span",null,"Figma Design",-1))]),e.createElementVNode("a",{href:j.value.figmaUrl,target:"_blank",class:"di-link-purple"},e.toDisplayString(j.value.figmaUrl),9,Sa)])):e.createCommentVNode("",!0),j.value.apis.length?(e.openBlock(),e.createElementBlock("div",Ta,[e.createElementVNode("div",Ma,[e.createVNode(e.unref(el),{style:{width:"16px",height:"16px"}}),o[104]||(o[104]=e.createElementVNode("span",null,"API Endpoints",-1))]),e.createElementVNode("div",Ia,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(j.value.apis,(n,d)=>(e.openBlock(),e.createElementBlock("div",{key:d,class:"di-api-item"},[e.createElementVNode("span",{class:"di-method-badge",style:e.normalizeStyle({backgroundColor:ie[n.method]+"20",color:ie[n.method]})},e.toDisplayString(n.method),5),e.createElementVNode("div",Ua,[e.createElementVNode("code",Fa,e.toDisplayString(n.endpoint),1),n.description?(e.openBlock(),e.createElementBlock("p",La,e.toDisplayString(n.description),1)):e.createCommentVNode("",!0)]),n.loadTiming?(e.openBlock(),e.createElementBlock("span",Pa,e.toDisplayString(n.loadTiming==="onMount"?"読込時":n.loadTiming==="action"?"アクション":"条件付き"),1)):e.createCommentVNode("",!0)]))),128))])])):e.createCommentVNode("",!0),j.value.notes?(e.openBlock(),e.createElementBlock("div",Aa,[e.createElementVNode("div",za,[e.createVNode(e.unref(Lo),{style:{width:"16px",height:"16px"}}),o[105]||(o[105]=e.createElementVNode("span",null,"Notes",-1))]),e.createElementVNode("p",Oa,e.toDisplayString(j.value.notes),1)])):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock("div",ja,[e.createVNode(e.unref(ht),{style:{width:"48px",height:"48px",color:"#334155"}}),o[107]||(o[107]=e.createElementVNode("p",null,[e.createTextVNode("この画面の仕様情報は"),e.createElementVNode("br"),e.createTextVNode("まだ登録されていません")],-1)),e.createElementVNode("button",{onClick:o[26]||(o[26]=n=>e.unref(a).editingScreen=!0),class:"di-screen-register-btn"},[e.createVNode(e.unref(Gt),{style:{width:"14px",height:"14px"}}),o[106]||(o[106]=e.createTextVNode(" 画面情報を登録 ",-1))])])),e.createElementVNode("div",qa,[e.createElementVNode("div",Ha,[e.createVNode(e.unref(Qo),{style:{width:"14px",height:"14px",color:"#94a3b8"}}),o[108]||(o[108]=e.createElementVNode("span",null,"横断検索",-1))]),o[109]||(o[109]=e.createElementVNode("div",{class:"di-cross-search-desc"},"全画面のメモを横断検索。カラム名・APIエンドポイント・メモ内テキストで絞り込めます。",-1)),e.createElementVNode("div",Ra,[e.createElementVNode("div",Ka,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(tt,n=>e.createElementVNode("button",{key:n.value,onClick:d=>e.unref(a).crossSearchMode=n.value,class:e.normalizeClass(["di-filter-btn",{active:e.unref(a).crossSearchMode===n.value}])},e.toDisplayString(n.label),11,Ga)),64))]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[27]||(o[27]=n=>e.unref(a).crossSearchQuery=n),type:"text",class:"di-cross-search-input",placeholder:_e.value},null,8,Ya),[[e.vModelText,e.unref(a).crossSearchQuery]]),e.unref(a).crossSearchQuery.trim()?(e.openBlock(),e.createElementBlock("div",Xa,e.toDisplayString(e.unref(a).crossSearchResults.length)+"件 ("+e.toDisplayString(dt.value)+"画面) ",1)):e.createCommentVNode("",!0),ce.value.length>0?(e.openBlock(),e.createElementBlock("div",Wa,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(ce.value,n=>(e.openBlock(),e.createElementBlock("div",{key:n.pagePath,class:"di-cross-search-group"},[e.createElementVNode("div",Za,[e.createTextVNode(e.toDisplayString(n.pagePath)+" ",1),n.pageName!==n.pagePath?(e.openBlock(),e.createElementBlock("span",Ja,"("+e.toDisplayString(n.pageName)+")",1)):e.createCommentVNode("",!0)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.items,(d,c)=>(e.openBlock(),e.createElementBlock("div",{key:c,class:e.normalizeClass(["di-cross-search-item",d.elementType?"di-cross-item-"+d.elementType:""]),onClick:V=>d.selector&&e.unref(a).startEditing(d.selector)},[e.createElementVNode("span",ei,e.toDisplayString(d.matchedField),1),d.matchContext?(e.openBlock(),e.createElementBlock("span",ti,e.toDisplayString(d.matchContext),1)):e.createCommentVNode("",!0)],10,Qa))),128))]))),128))])):e.createCommentVNode("",!0)])]),e.createElementVNode("div",oi,[e.createElementVNode("button",{onClick:o[28]||(o[28]=n=>e.unref(a).showScreenFlow=!e.unref(a).showScreenFlow),class:e.normalizeClass(["di-screen-flow-toggle",{active:e.unref(a).showScreenFlow}])},[e.createVNode(e.unref(Yo),{style:{width:"14px",height:"14px"}}),o[110]||(o[110]=e.createElementVNode("span",null,"画面フロー",-1)),e.unref(a).screenFlowData.edges.length>0?(e.openBlock(),e.createElementBlock("span",li,e.toDisplayString(e.unref(a).screenFlowData.nodes.length)+"画面 / "+e.toDisplayString(e.unref(a).screenFlowData.edges.length)+"遷移 ",1)):e.createCommentVNode("",!0)],2),e.unref(a).showScreenFlow?(e.openBlock(),e.createElementBlock("div",ni,[e.unref(a).screenFlowData.edges.length===0?(e.openBlock(),e.createElementBlock("div",ai," navigate型のアクションが登録されていません ")):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Be.value,n=>(e.openBlock(),e.createElementBlock("div",{key:n.node.path,class:"di-flow-group"},[e.createElementVNode("div",{class:e.normalizeClass(["di-flow-node",{"di-flow-node-current":n.node.path===x.value}])},[e.createElementVNode("span",ii,e.toDisplayString(n.node.path),1),n.node.name!==n.node.path?(e.openBlock(),e.createElementBlock("span",si,"("+e.toDisplayString(n.node.name)+")",1)):e.createCommentVNode("",!0)],2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.edges,d=>(e.openBlock(),e.createElementBlock("div",{key:d.from+d.to,class:"di-flow-edge",onClick:c=>ue(d.selector)},[o[111]||(o[111]=e.createElementVNode("span",{class:"di-flow-arrow"},"→",-1)),e.createElementVNode("span",ri,e.toDisplayString(d.to),1),d.label?(e.openBlock(),e.createElementBlock("span",ci,"["+e.toDisplayString(d.label)+"]",1)):e.createCommentVNode("",!0)],8,di))),128))]))),128)),e.unref(a).screenFlowData.orphanPages.length>0?(e.openBlock(),e.createElementBlock("div",ui,[o[112]||(o[112]=e.createElementVNode("div",{class:"di-flow-orphans-header"},"遷移なしのページ",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a).screenFlowData.orphanPages,n=>(e.openBlock(),e.createElementBlock("span",{key:n.path,class:"di-flow-orphan-item"},e.toDisplayString(n.path),1))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])],512),[[e.vShow,h.value==="elements"]]),e.withDirectives(e.createElementVNode("div",null,[e.createElementVNode("div",mi,[e.createElementVNode("div",pi,[e.createVNode(e.unref(rt),{style:{width:"16px",height:"16px",color:"#a78bfa"}}),o[113]||(o[113]=e.createElementVNode("span",null,"マスタ定義",-1)),he.value>0?(e.openBlock(),e.createElementBlock("span",vi,e.toDisplayString(he.value),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:o[29]||(o[29]=n=>Ue()),class:"di-btn-icon",style:{"margin-left":"auto"},title:"新規追加"},[e.createVNode(e.unref(pt),{style:{width:"14px",height:"14px"}})])]),he.value>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(Re.value,(n,d)=>(e.openBlock(),e.createElementBlock("div",{key:d,class:"di-master-table-group"},[e.createElementVNode("div",fi,e.toDisplayString(d),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n,c=>(e.openBlock(),e.createElementBlock("div",{key:c.id,class:"di-master-item",onClick:V=>Ue(c.id)},[e.createElementVNode("div",Ei,[e.createElementVNode("span",ki,"."+e.toDisplayString(c.column),1),c.columnType?(e.openBlock(),e.createElementBlock("span",hi,e.toDisplayString(c.columnType),1)):e.createCommentVNode("",!0),e.createElementVNode("span",yi,e.toDisplayString(c.name),1)]),e.createElementVNode("div",gi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.entries.slice(0,5),(V,E)=>(e.openBlock(),e.createElementBlock("span",{key:E,class:"di-master-entry-chip",style:e.normalizeStyle(V.color?{borderColor:V.color,color:V.color}:{})},e.toDisplayString(V.value)+"="+e.toDisplayString(V.label),5))),128)),c.entries.length>5?(e.openBlock(),e.createElementBlock("span",bi,"+"+e.toDisplayString(c.entries.length-5),1)):e.createCommentVNode("",!0)])],8,Vi))),128))]))),128)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"di-master-empty",onClick:o[30]||(o[30]=n=>Ue())},[...o[114]||(o[114]=[e.createElementVNode("span",null,"テーブル.カラムのマスタ値を定義",-1)])]))]),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[$e.value?(e.openBlock(),e.createElementBlock("div",{key:0,"data-dev-inspector":"",class:"di-modal-overlay",onClick:o[39]||(o[39]=e.withModifiers(n=>$e.value=!1,["self"]))},[e.createElementVNode("div",Ni,[e.createElementVNode("div",Bi,[e.createElementVNode("h3",null,e.toDisplayString(we.value?"マスタ定義を編集":"新規マスタ定義"),1),e.createElementVNode("button",{onClick:o[31]||(o[31]=n=>$e.value=!1),class:"di-close-btn"},[e.createVNode(e.unref(lt),{style:{width:"16px",height:"16px"}})])]),e.createElementVNode("div",xi,[e.createElementVNode("div",Ci,[e.createElementVNode("div",wi,[o[115]||(o[115]=e.createElementVNode("label",null,"テーブル",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[32]||(o[32]=n=>A.value.table=n),placeholder:"orders",disabled:!!we.value},null,8,Di),[[e.vModelText,A.value.table]])]),e.createElementVNode("div",$i,[o[116]||(o[116]=e.createElementVNode("label",null,"カラム",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[33]||(o[33]=n=>A.value.column=n),placeholder:"status",disabled:!!we.value},null,8,_i),[[e.vModelText,A.value.column]])])]),e.createElementVNode("div",Si,[e.createElementVNode("div",Ti,[o[117]||(o[117]=e.createElementVNode("label",null,"表示名",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[34]||(o[34]=n=>A.value.name=n),placeholder:"ステータス"},null,512),[[e.vModelText,A.value.name]])]),e.createElementVNode("div",Mi,[o[118]||(o[118]=e.createElementVNode("label",null,"型",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[35]||(o[35]=n=>A.value.columnType=n),placeholder:"integer"},null,512),[[e.vModelText,A.value.columnType]])])]),e.createElementVNode("div",Ii,[o[119]||(o[119]=e.createElementVNode("label",null,"説明",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[36]||(o[36]=n=>A.value.description=n),placeholder:"注文のステータスを管理"},null,512),[[e.vModelText,A.value.description]])]),e.createElementVNode("div",Ui,[o[120]||(o[120]=e.createElementVNode("label",null,"マスタ値",-1)),e.createElementVNode("button",{onClick:Ge,class:"di-btn-icon",title:"追加"},[e.createVNode(e.unref(pt),{style:{width:"14px",height:"14px"}})])]),e.createElementVNode("div",Fi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(A.value.entries,(n,d)=>(e.openBlock(),e.createElementBlock("div",{key:d,class:"di-master-entry-row"},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>n.value=c,placeholder:"値",class:"di-master-entry-value"},null,8,Li),[[e.vModelText,n.value]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>n.label=c,placeholder:"ラベル",class:"di-master-entry-label"},null,8,Pi),[[e.vModelText,n.label]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>n.color=c,placeholder:"#色",class:"di-master-entry-color"},null,8,Ai),[[e.vModelText,n.color]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>n.description=c,placeholder:"説明",class:"di-master-entry-desc"},null,8,zi),[[e.vModelText,n.description]]),e.createElementVNode("button",{onClick:c=>Ye(d),class:"di-btn-icon di-btn-icon-danger"},[e.createVNode(e.unref(lt),{style:{width:"12px",height:"12px"}})],8,Oi)]))),128))]),e.createElementVNode("div",ji,[o[121]||(o[121]=e.createElementVNode("label",null,"状態遷移",-1)),e.createElementVNode("button",{onClick:ae,class:"di-btn-icon",title:"遷移を追加"},[e.createVNode(e.unref(pt),{style:{width:"14px",height:"14px"}})])]),A.value.transitions.length>0?(e.openBlock(),e.createElementBlock("div",qi,[o[125]||(o[125]=e.createElementVNode("div",{class:"di-transition-header"},[e.createElementVNode("span",{class:"di-transition-col-from"},"遷移元"),e.createElementVNode("span",{class:"di-transition-col-arrow"},"→"),e.createElementVNode("span",{class:"di-transition-col-to"},"遷移先"),e.createElementVNode("span",{class:"di-transition-col-trigger"},"トリガー"),e.createElementVNode("span",{class:"di-transition-col-condition"},"条件"),e.createElementVNode("span",{class:"di-transition-col-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(A.value.transitions,(n,d)=>(e.openBlock(),e.createElementBlock("div",{key:d,class:"di-transition-row"},[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":c=>n.from=c,class:"di-transition-select di-transition-col-from"},[o[122]||(o[122]=e.createElementVNode("option",{value:""},"-",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(A.value.entries.filter(c=>c.value),c=>(e.openBlock(),e.createElementBlock("option",{key:c.value,value:c.value},e.toDisplayString(c.label||c.value),9,Ri))),128))],8,Hi),[[e.vModelSelect,n.from]]),o[124]||(o[124]=e.createElementVNode("span",{class:"di-transition-col-arrow"},"→",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":c=>n.to=c,class:"di-transition-select di-transition-col-to"},[o[123]||(o[123]=e.createElementVNode("option",{value:""},"-",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(A.value.entries.filter(c=>c.value),c=>(e.openBlock(),e.createElementBlock("option",{key:c.value,value:c.value},e.toDisplayString(c.label||c.value),9,Gi))),128))],8,Ki),[[e.vModelSelect,n.to]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>n.trigger=c,placeholder:"トリガー",class:"di-transition-input di-transition-col-trigger"},null,8,Yi),[[e.vModelText,n.trigger]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>n.condition=c,placeholder:"条件",class:"di-transition-input di-transition-col-condition"},null,8,Xi),[[e.vModelText,n.condition]]),e.createElementVNode("button",{onClick:c=>ye(d),class:"di-btn-icon di-btn-icon-danger"},[e.createVNode(e.unref(lt),{style:{width:"12px",height:"12px"}})],8,Wi)]))),128))])):(e.openBlock(),e.createElementBlock("div",Zi," 状態遷移を定義（任意） "))]),e.createElementVNode("div",Ji,[we.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:o[37]||(o[37]=n=>{ve(we.value),$e.value=!1}),class:"di-btn-small di-btn-danger"},"削除")):e.createCommentVNode("",!0),o[126]||(o[126]=e.createElementVNode("div",{style:{flex:"1"}},null,-1)),e.createElementVNode("button",{onClick:o[38]||(o[38]=n=>$e.value=!1),class:"di-btn-small"},"キャンセル"),e.createElementVNode("button",{onClick:Ke,class:"di-btn-small di-btn-primary",disabled:!A.value.table||!A.value.column},"保存",8,Qi)])])])):e.createCommentVNode("",!0)]))],512),[[e.vShow,h.value==="masters"]]),e.withDirectives(e.createElementVNode("div",null,[e.createElementVNode("div",es,[e.createElementVNode("div",ts,[e.createVNode(e.unref(jt),{style:{width:"16px",height:"16px",color:"#f59e0b"}}),o[127]||(o[127]=e.createElementVNode("span",null,"バッチ処理",-1)),Ze.value>0?(e.openBlock(),e.createElementBlock("span",os,e.toDisplayString(Ze.value),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:o[40]||(o[40]=n=>ge()),class:"di-btn-icon",style:{"margin-left":"auto"},title:"新規追加"},[e.createVNode(e.unref(pt),{style:{width:"14px",height:"14px"}})])]),Ze.value>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(Fe.value,n=>(e.openBlock(),e.createElementBlock("div",{key:n.id,class:"di-batch-item",onClick:d=>ge(n.id)},[e.createElementVNode("div",ns,[e.createElementVNode("div",as,e.toDisplayString(n.name),1),n.schedule?(e.openBlock(),e.createElementBlock("div",is,e.toDisplayString(n.schedule),1)):e.createCommentVNode("",!0)])],8,ls))),128)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"di-batch-empty",onClick:o[41]||(o[41]=n=>ge())},[...o[128]||(o[128]=[e.createElementVNode("span",null,"バッチ処理を定義",-1)])]))]),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[De.value?(e.openBlock(),e.createElementBlock("div",{key:0,"data-dev-inspector":"",class:"di-modal-overlay",onClick:o[57]||(o[57]=e.withModifiers(n=>De.value=!1,["self"]))},[e.createElementVNode("div",ss,[e.createElementVNode("div",ds,[e.createElementVNode("h3",null,e.toDisplayString(ze.value?"バッチ処理を編集":"新規バッチ処理"),1),e.createElementVNode("button",{onClick:o[42]||(o[42]=n=>De.value=!1),class:"di-close-btn"},[e.createVNode(e.unref(lt),{style:{width:"16px",height:"16px"}})])]),e.createElementVNode("div",rs,[e.createElementVNode("div",cs,[e.createElementVNode("div",us,[o[129]||(o[129]=e.createElementVNode("label",null,"バッチ名 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[43]||(o[43]=n=>M.value.name=n),placeholder:"月次レポート生成"},null,512),[[e.vModelText,M.value.name]])]),e.createElementVNode("div",ms,[o[130]||(o[130]=e.createElementVNode("label",null,"スケジュール",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[44]||(o[44]=n=>M.value.schedule=n),placeholder:"毎月1日 AM2:00"},null,512),[[e.vModelText,M.value.schedule]])])]),e.createElementVNode("div",ps,[e.createElementVNode("div",vs,[o[131]||(o[131]=e.createElementVNode("label",null,"手動トリガー",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[45]||(o[45]=n=>M.value.trigger=n),placeholder:"管理画面から実行"},null,512),[[e.vModelText,M.value.trigger]])])]),e.createElementVNode("div",fs,[o[132]||(o[132]=e.createElementVNode("label",null,"説明",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[46]||(o[46]=n=>M.value.description=n),rows:"2",placeholder:"バッチ処理の概要..."},null,512),[[e.vModelText,M.value.description]])]),o[142]||(o[142]=e.createElementVNode("div",{class:"di-batch-section-label"},"入出力テーブル",-1)),e.createElementVNode("div",Vs,[e.createElementVNode("div",Es,[o[133]||(o[133]=e.createElementVNode("label",null,"入力テーブル",-1)),e.createElementVNode("div",ks,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(M.value.inputTables,(n,d)=>(e.openBlock(),e.createElementBlock("span",{key:d,class:"di-batch-tag"},[e.createTextVNode(e.toDisplayString(n)+" ",1),e.createElementVNode("button",{onClick:c=>be(d),class:"di-batch-tag-remove"},"×",8,hs)]))),128)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[47]||(o[47]=n=>Oe.value=n),onKeydown:o[48]||(o[48]=e.withKeys(e.withModifiers(n=>le(),["prevent"]),["enter"])),type:"text",placeholder:"テーブル名",class:"di-batch-tag-input"},null,544),[[e.vModelText,Oe.value]])])]),e.createElementVNode("div",ys,[o[134]||(o[134]=e.createElementVNode("label",null,"出力テーブル",-1)),e.createElementVNode("div",gs,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(M.value.outputTables,(n,d)=>(e.openBlock(),e.createElementBlock("span",{key:d,class:"di-batch-tag"},[e.createTextVNode(e.toDisplayString(n)+" ",1),e.createElementVNode("button",{onClick:c=>Je(d),class:"di-batch-tag-remove"},"×",8,bs)]))),128)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[49]||(o[49]=n=>nt.value=n),onKeydown:o[50]||(o[50]=e.withKeys(e.withModifiers(n=>Xe(),["prevent"]),["enter"])),type:"text",placeholder:"テーブル名",class:"di-batch-tag-input"},null,544),[[e.vModelText,nt.value]])])])]),e.createElementVNode("div",Ns,[o[135]||(o[135]=e.createTextVNode(" 処理ステップ ",-1)),e.createElementVNode("button",{onClick:st,class:"di-btn-icon",style:{"margin-left":"auto"},title:"ステップ追加"},[e.createVNode(e.unref(pt),{style:{width:"14px",height:"14px"}})])]),M.value.steps.length>0?(e.openBlock(),e.createElementBlock("div",Bs,[o[137]||(o[137]=e.createElementVNode("div",{class:"di-batch-steps-header"},[e.createElementVNode("span",{class:"di-batch-step-no"},"No"),e.createElementVNode("span",{class:"di-batch-step-desc"},"処理内容"),e.createElementVNode("span",{class:"di-batch-step-target"},"対象"),e.createElementVNode("span",{class:"di-batch-step-type"},"種別"),e.createElementVNode("span",{class:"di-batch-step-error"},"エラー処理"),e.createElementVNode("span",{class:"di-batch-step-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(M.value.steps,(n,d)=>(e.openBlock(),e.createElementBlock("div",{key:d,class:"di-batch-step-row"},[e.createElementVNode("span",xs,e.toDisplayString(d+1),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>n.description=c,placeholder:"処理内容",class:"di-batch-step-input di-batch-step-desc"},null,8,Cs),[[e.vModelText,n.description]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>n.target=c,placeholder:"対象テーブル",class:"di-batch-step-input di-batch-step-target"},null,8,ws),[[e.vModelText,n.target]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":c=>n.type=c,class:"di-batch-step-select di-batch-step-type"},[...o[136]||(o[136]=[e.createElementVNode("option",{value:""},"-",-1),e.createElementVNode("option",{value:"query"},"query",-1),e.createElementVNode("option",{value:"api"},"api",-1),e.createElementVNode("option",{value:"file"},"file",-1),e.createElementVNode("option",{value:"mail"},"mail",-1),e.createElementVNode("option",{value:"other"},"other",-1)])],8,Ds),[[e.vModelSelect,n.type]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>n.errorHandling=c,placeholder:"エラー時",class:"di-batch-step-input di-batch-step-error"},null,8,$s),[[e.vModelText,n.errorHandling]]),e.createElementVNode("button",{onClick:c=>F(d),class:"di-btn-icon di-btn-icon-danger"},[e.createVNode(e.unref(lt),{style:{width:"12px",height:"12px"}})],8,_s)]))),128))])):e.createCommentVNode("",!0),o[143]||(o[143]=e.createElementVNode("div",{class:"di-batch-section-label"},"運用設定",-1)),e.createElementVNode("div",Ss,[e.createElementVNode("div",Ts,[o[138]||(o[138]=e.createElementVNode("label",null,"タイムアウト",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[51]||(o[51]=n=>M.value.timeout=n),placeholder:"30分"},null,512),[[e.vModelText,M.value.timeout]])]),e.createElementVNode("div",Ms,[o[139]||(o[139]=e.createElementVNode("label",null,"リトライ",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[52]||(o[52]=n=>M.value.retryPolicy=n),placeholder:"3回まで、5分間隔"},null,512),[[e.vModelText,M.value.retryPolicy]])])]),e.createElementVNode("div",Is,[e.createElementVNode("div",Us,[o[140]||(o[140]=e.createElementVNode("label",null,"エラー通知先",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[53]||(o[53]=n=>M.value.notifyOnError=n),placeholder:"admin@example.com"},null,512),[[e.vModelText,M.value.notifyOnError]])]),e.createElementVNode("div",Fs,[o[141]||(o[141]=e.createElementVNode("label",null,"完了通知先",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[54]||(o[54]=n=>M.value.notifyOnComplete=n),placeholder:"manager@example.com"},null,512),[[e.vModelText,M.value.notifyOnComplete]])])])]),e.createElementVNode("div",Ls,[ze.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:o[55]||(o[55]=n=>{fe(ze.value),De.value=!1}),class:"di-btn-small di-btn-danger"},"削除")):e.createCommentVNode("",!0),o[144]||(o[144]=e.createElementVNode("div",{style:{flex:"1"}},null,-1)),e.createElementVNode("button",{onClick:o[56]||(o[56]=n=>De.value=!1),class:"di-btn-small"},"キャンセル"),e.createElementVNode("button",{onClick:Pe,class:"di-btn-small di-btn-primary",disabled:!M.value.name},"保存",8,Ps)])])])):e.createCommentVNode("",!0)]))],512),[[e.vShow,h.value==="batches"]]),e.withDirectives(e.createElementVNode("div",null,[e.createElementVNode("div",As,[e.createElementVNode("button",{onClick:f,class:"di-btn-green"},[e.createVNode(e.unref(Go),{style:{width:"16px",height:"16px"}}),o[145]||(o[145]=e.createTextVNode(" Git管理用に保存 ",-1))]),e.createElementVNode("button",{onClick:y,class:"di-btn-blue"},[e.createVNode(e.unref(Xt),{style:{width:"16px",height:"16px"}}),o[146]||(o[146]=e.createTextVNode(" 画面仕様書 (xlsx) 出力 ",-1))]),e.createElementVNode("button",{onClick:o[58]||(o[58]=n=>e.unref(a).downloadSddSpec()),class:"di-btn-green-outline"},[e.createVNode(e.unref(ht),{style:{width:"16px",height:"16px"}}),o[147]||(o[147]=e.createTextVNode(" SDD仕様書 (md) ",-1))]),e.createElementVNode("button",{onClick:o[59]||(o[59]=n=>e.unref(a).downloadClientSpec()),class:"di-btn-blue-outline"},[e.createVNode(e.unref(ht),{style:{width:"16px",height:"16px"}}),o[148]||(o[148]=e.createTextVNode(" 納品用仕様書 (md) ",-1))])]),o[156]||(o[156]=e.createElementVNode("p",{class:"di-export-hint"},[e.createTextVNode(" JSON: "),e.createElementVNode("code",null,"dev-annotations.json"),e.createTextVNode(" に配置してcommit ")],-1)),e.createElementVNode("div",zs,[e.createElementVNode("button",{onClick:o[60]||(o[60]=n=>b.value=!0),class:"di-btn-small"},[e.createVNode(e.unref(Bt),{style:{width:"14px",height:"14px"}}),o[149]||(o[149]=e.createTextVNode(" エクスポート ",-1))]),e.createElementVNode("button",{onClick:o[61]||(o[61]=n=>O.value=!0),class:"di-btn-small"},[e.createVNode(e.unref(ll),{style:{width:"14px",height:"14px"}}),o[150]||(o[150]=e.createTextVNode(" インポート ",-1))]),Q.value>0?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:Me,class:"di-btn-small di-btn-danger"},[e.createVNode(e.unref(ft),{style:{width:"14px",height:"14px"}}),o[151]||(o[151]=e.createTextVNode(" 全削除 ",-1))])):e.createCommentVNode("",!0)]),Q.value>0||he.value>0||Ze.value>0?(e.openBlock(),e.createElementBlock("div",Os,[o[155]||(o[155]=e.createElementVNode("div",{class:"di-export-summary-title"},"登録状況",-1)),e.createElementVNode("div",js,[o[152]||(o[152]=e.createElementVNode("span",null,"要素設定",-1)),e.createElementVNode("span",qs,e.toDisplayString(Q.value)+"件",1)]),e.createElementVNode("div",Hs,[o[153]||(o[153]=e.createElementVNode("span",null,"マスタ定義",-1)),e.createElementVNode("span",Rs,e.toDisplayString(he.value)+"件",1)]),e.createElementVNode("div",Ks,[o[154]||(o[154]=e.createElementVNode("span",null,"バッチ処理",-1)),e.createElementVNode("span",Gs,e.toDisplayString(Ze.value)+"件",1)])])):e.createCommentVNode("",!0)],512),[[e.vShow,h.value==="export"]])]),o[157]||(o[157]=e.createElementVNode("div",{class:"di-footer"},[e.createElementVNode("kbd",null,"Ctrl"),e.createElementVNode("span",null,"+"),e.createElementVNode("kbd",null,"Shift"),e.createElementVNode("span",null,"+"),e.createElementVNode("kbd",null,"D"),e.createElementVNode("span",{class:"di-footer-text"},"で開発者モード切替")],-1))])):e.createCommentVNode("",!0)])),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.unref(a).isEnabled?(e.openBlock(),e.createElementBlock("div",Ys,[...o[158]||(o[158]=[e.createElementVNode("span",{class:"di-indicator-dot"},null,-1),e.createTextVNode(" Developer Mode ",-1)])])):e.createCommentVNode("",!0)])),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[b.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"di-modal-overlay",onClick:o[63]||(o[63]=e.withModifiers(n=>b.value=!1,["self"])),"data-dev-inspector":""},[e.createElementVNode("div",Xs,[o[160]||(o[160]=e.createElementVNode("h3",{class:"di-modal-title"},"設定をエクスポート",-1)),e.createElementVNode("textarea",{readonly:"",value:e.unref(a).exportConfigs(),class:"di-modal-textarea"},null,8,Ws),e.createElementVNode("div",Zs,[e.createElementVNode("button",{onClick:o[62]||(o[62]=n=>b.value=!1),class:"di-btn-small"},"閉じる"),e.createElementVNode("button",{onClick:N,class:"di-btn-small di-btn-gray"},[e.createVNode(e.unref(Bt),{style:{width:"14px",height:"14px"}}),o[159]||(o[159]=e.createTextVNode(" ファイル保存 ",-1))]),e.createElementVNode("button",{onClick:z,class:"di-btn-small di-btn-primary"},"コピー")])])])):e.createCommentVNode("",!0)])),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[O.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"di-modal-overlay",onClick:o[66]||(o[66]=e.withModifiers(n=>O.value=!1,["self"])),"data-dev-inspector":""},[e.createElementVNode("div",Js,[o[162]||(o[162]=e.createElementVNode("h3",{class:"di-modal-title"},"設定をインポート",-1)),e.createElementVNode("label",Qs,[e.createElementVNode("input",{type:"file",accept:".json",onChange:P},null,32),o[161]||(o[161]=e.createElementVNode("span",null,"JSONファイルをドラッグまたはクリック",-1))]),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[64]||(o[64]=n=>q.value=n),placeholder:"またはJSONを直接貼り付け...",class:"di-modal-textarea di-modal-textarea-input"},null,512),[[e.vModelText,q.value]]),K.value?(e.openBlock(),e.createElementBlock("p",ed,e.toDisplayString(K.value),1)):e.createCommentVNode("",!0),e.createElementVNode("div",td,[e.createElementVNode("button",{onClick:o[65]||(o[65]=n=>{O.value=!1,q.value="",K.value=""}),class:"di-btn-small"}," キャンセル "),e.createElementVNode("button",{onClick:re,disabled:!q.value,class:"di-btn-small di-btn-primary"}," インポート ",8,od)])])])):e.createCommentVNode("",!0)]))],64)}}}),gt=(U,a)=>{const h=U.__vccOpts||U;for(const[b,O]of a)h[b]=O;return h},Zt=gt(ld,[["__scopeId","data-v-c37f314f"]]),nd={class:"di-editor-header"},ad={class:"di-header-actions"},id={key:0,class:"di-source-badge-row"},sd={key:0,class:"di-source-detail"},dd={class:"di-context-row"},rd={class:"di-context-field"},cd={id:"di-tab-names"},ud=["value"],md={class:"di-context-field"},pd={id:"di-modal-names"},vd=["value"],fd={class:"di-editor-tabs"},Vd={class:"di-editor-content"},Ed={class:"di-form-group"},kd={class:"di-display-type-grid"},hd=["onClick"],yd={class:"di-display-type-desc"},gd={key:0,class:"di-field-tags"},bd={class:"di-field-tags-list"},Nd={class:"di-field-tag-name"},Bd={key:0,class:"di-field-tag-type"},xd=["onClick"],Cd={key:1,class:"di-binding-selector"},wd={class:"di-form-group"},Dd={class:"di-form-label"},$d={class:"di-binding-search-wrapper"},_d={key:0,class:"di-binding-list"},Sd=["onClick"],Td={class:"di-binding-item-main"},Md={class:"di-binding-name"},Id={class:"di-binding-type"},Ud={key:0,class:"di-binding-component"},Fd={key:1,class:"di-binding-empty"},Ld={key:2,class:"di-form-divider"},Pd={class:"di-form-row"},Ad={class:"di-form-group di-suggest-wrapper"},zd={key:0,class:"di-suggest-list"},Od=["onMousedown"],jd={class:"di-form-group di-suggest-wrapper"},qd={key:0,class:"di-suggest-list"},Hd=["onMousedown"],Rd={class:"di-form-group"},Kd=["value"],Gd=["disabled"],Yd={key:3,class:"di-master-inline"},Xd={key:0,class:"di-condition-badge",style:{background:"#a78bfa"}},Wd={key:0,class:"di-master-inline-section"},Zd={key:0,class:"di-master-entries-table"},Jd=["onUpdate:modelValue"],Qd=["onUpdate:modelValue"],er=["onUpdate:modelValue"],tr=["onClick"],or={key:4,class:"di-form-group"},lr={class:"di-stored-calc-toggle"},nr={key:0,class:"di-condition-badge"},ar={key:5,class:"di-stored-calc-section"},ir={class:"di-form-group"},sr={class:"di-form-group di-suggest-wrapper"},dr={class:"di-stored-calc-tags"},rr=["onClick"],cr={key:0,class:"di-suggest-list"},ur=["onMousedown"],mr={class:"di-form-group"},pr={key:1,class:"di-form-group di-suggest-wrapper"},vr={key:0,class:"di-calc-tag"},fr=["onClick"],Vr={key:1,class:"di-calc-text"},Er=["placeholder"],kr={key:0,class:"di-suggest-list"},hr=["onMousedown"],yr={key:2,class:"di-form-group"},gr={class:"di-condition-toggle"},br={key:0,class:"di-condition-badge"},Nr={key:0,class:"di-condition-section"},Br={class:"di-form-group"},xr={class:"di-form-group di-suggest-wrapper"},Cr={class:"di-form-row"},wr={class:"di-form-group"},Dr={key:0,class:"di-form-group"},$r={class:"di-form-row"},_r={class:"di-form-group"},Sr={class:"di-form-group",style:{flex:"0 0 80px"}},Tr={class:"di-form-row"},Mr={class:"di-form-group"},Ir={class:"di-form-group"},Ur={class:"di-form-group"},Fr={class:"di-form-group"},Lr={class:"di-form-group"},Pr={class:"di-form-group"},Ar=["placeholder"],zr={key:0,class:"di-form-group"},Or={class:"di-form-group"},jr={class:"di-form-divider"},qr={class:"di-csv-file-settings"},Hr={class:"di-form-row"},Rr={class:"di-form-group"},Kr={class:"di-form-group"},Gr={class:"di-form-row",style:{"align-items":"center"}},Yr={class:"di-csv-checkbox-label"},Xr={class:"di-form-group"},Wr={class:"di-csv-columns-section"},Zr={key:0,class:"di-csv-columns-table"},Jr={class:"di-csv-col-no"},Qr=["onUpdate:modelValue"],ec=["onUpdate:modelValue"],tc=["onUpdate:modelValue"],oc=["onUpdate:modelValue"],lc={class:"di-csv-col-req di-csv-checkbox-center"},nc=["onUpdate:modelValue"],ac=["onUpdate:modelValue"],ic={class:"di-csv-col-act"},sc=["onClick","disabled"],dc=["onClick","disabled"],rc=["onClick"],cc={class:"di-form-group"},uc={class:"di-form-group"},mc={class:"di-form-group"},pc={class:"di-form-group"},vc={class:"di-form-group"},fc={class:"di-form-group"},Vc={class:"di-csv-error-section"},Ec={key:0,class:"di-csv-columns-table"},kc=["onUpdate:modelValue"],hc=["value"],yc=["onUpdate:modelValue"],gc=["onUpdate:modelValue"],bc=["onUpdate:modelValue"],Nc=["onClick"],Bc={class:"di-form-divider"},xc={class:"di-form-row"},Cc={class:"di-form-group"},wc={class:"di-form-group"},Dc={class:"di-form-row"},$c={class:"di-form-group"},_c={class:"di-form-group"},Sc={class:"di-form-group"},Tc={class:"di-form-group"},Mc={class:"di-form-group"},Ic={class:"di-form-group"},Uc={class:"di-email-variables-input"},Fc=["onClick"],Lc={class:"di-form-group"},Pc={class:"di-form-group"},Ac={class:"di-form-group"},zc={class:"di-form-divider"},Oc={class:"di-form-group"},jc={class:"di-form-label",style:{display:"flex","align-items":"center",gap:"8px"}},qc={class:"di-form-row"},Hc={class:"di-form-group"},Rc={class:"di-form-group"},Kc={class:"di-form-group"},Gc={class:"di-form-group"},Yc={class:"di-form-label",style:{display:"flex","align-items":"center",gap:"8px"}},Xc={class:"di-form-group"},Wc={class:"di-form-group"},Zc={class:"di-form-group"},Jc={class:"di-form-group"},Qc={key:0,class:"di-field-tags"},eu={class:"di-field-tags-list"},tu={class:"di-field-tag-name"},ou={key:0,class:"di-field-tag-type"},lu=["onClick"],nu={key:1,class:"di-binding-selector"},au={class:"di-form-group"},iu={class:"di-form-label"},su={class:"di-binding-search-wrapper"},du={key:0,class:"di-binding-list"},ru=["onClick"],cu={class:"di-binding-item-main"},uu={class:"di-binding-name"},mu={class:"di-binding-type"},pu={key:0,class:"di-binding-component"},vu={key:2,class:"di-master-inline"},fu={key:0,class:"di-condition-badge",style:{background:"#a78bfa"}},Vu={key:0,class:"di-master-inline-section"},Eu={key:0,class:"di-master-entries-table"},ku=["onUpdate:modelValue"],hu=["onUpdate:modelValue"],yu=["onUpdate:modelValue"],gu=["onClick"],bu={class:"di-condition-toggle"},Nu={key:0,class:"di-condition-badge"},Bu={class:"di-form-group di-suggest-wrapper"},xu={class:"di-calc-tags-input"},Cu=["onClick"],wu=["placeholder"],Du={class:"di-form-group"},$u={class:"di-form-group"},_u={class:"di-form-group"},Su={class:"di-form-group"},Tu={class:"di-form-group"},Mu={class:"di-form-group"},Iu={class:"di-form-row"},Uu={class:"di-form-group di-form-half"},Fu={class:"di-form-group di-form-half"},Lu={class:"di-csv-columns-section"},Pu={key:0,class:"di-csv-columns-table"},Au=["onUpdate:modelValue"],zu=["onUpdate:modelValue"],Ou=["onUpdate:modelValue"],ju={class:"di-csv-col-act"},qu=["onClick","disabled"],Hu=["onClick","disabled"],Ru=["onClick"],Ku={class:"di-form-group"},Gu={class:"di-form-group"},Yu={class:"di-form-group"},Xu={class:"di-form-group"},Wu={class:"di-editor-footer"},Zu={class:"di-editor-actions"},Ju=e.defineComponent({__name:"DevElementEditor",setup(U){const a=mt.useDevInspectorStore(),h=e.ref("datasource"),b=e.ref(""),O=e.ref(""),q=e.ref(""),K=e.ref(""),ie=e.ref(""),de=e.ref(!1),S=e.ref([]),j=e.ref(""),Q=e.ref(""),me=e.ref(""),ee=e.ref(""),Z=e.ref([]),g=e.ref("UTF-8"),ke=e.ref(","),He=e.ref(!0),pe=e.ref(""),Te=e.ref(""),te=e.ref(""),H=e.ref(void 0),Ce=e.ref(""),D=e.ref(""),k=e.ref(""),u=e.ref([]),C=e.ref(""),$=e.ref(""),R=e.ref(""),_=e.ref(""),z=e.ref(""),N=e.ref(""),f=e.ref(""),y=e.ref([]),re=e.ref(""),P=e.ref(""),Me=e.ref(""),oe=e.ref(""),Ie=e.ref(!0),Ae=e.ref(""),$e=e.ref(""),we=e.ref(""),A=e.ref(!1),he=e.ref(""),Re=e.ref(""),Ue=e.ref(""),Ke=e.ref(""),Ge=e.ref(""),Ye=e.ref(""),ae=e.ref([]),ye=e.ref(""),ve=e.ref(""),De=e.ref(""),ze=e.ref(""),M=e.ref(""),Oe=e.ref(""),nt=e.computed(()=>{const p=new Set;for(const t of Object.values(a.elementConfigs))t.tabContext&&p.add(t.tabContext);return[...p].sort()}),Ze=e.computed(()=>{const p=new Set;for(const t of Object.values(a.elementConfigs))t.modalName&&p.add(t.modalName);return[...p].sort()}),Fe=e.ref(!1),ge=e.ref([]),Pe=e.computed(()=>{if(fe.value.length>0){const p=fe.value[0];if(p.table&&p.column)return`${p.table}.${p.column}`}return""}),st=e.computed(()=>Pe.value&&a.getMasterDefinition(Pe.value)||null),F=e.ref("db_direct"),fe=e.ref([]),le=e.ref(""),be=e.ref(""),Xe=e.ref(""),Je=e.ref(""),tt=e.ref(""),_e=e.ref([]),ce=e.ref(""),dt=e.ref(!1),je=e.ref(""),at=e.ref(""),it=e.ref(""),Qe=e.ref(""),ot=e.ref(""),se=e.ref(!1),i=e.ref(""),J=e.ref([]),Y=e.ref(""),L=e.ref(!1),X=e.ref(""),Ve=e.ref(""),Ee=e.ref(""),Se=e.ref(""),Le=e.ref(""),ne=e.ref(!1),W=e.ref(""),Ne=e.ref(""),et=e.ref(""),We=e.ref(!1),x=e.computed(()=>Ne.value?{data:"data","v-model":"v-model",prop:"prop",static:"static",computed:"computed",store:"store",api:"data"}[Ne.value]||Ne.value:""),Be=e.computed(()=>a.editingElementId!==null),ue=e.computed(()=>a.editingElementId),s=e.computed(()=>b.value==="csv_export"||b.value==="csv_import"),o=e.computed(()=>b.value==="email"),m=e.computed(()=>s.value||o.value),B=[{value:"db_direct",label:"DBカラム (そのまま)",icon:rt,color:"#3b82f6",description:"DBの値をそのまま表示"},{value:"db_formatted",label:"DBカラム (整形)",icon:yt,color:"#8b5cf6",description:"DBの値を整形して表示"},{value:"calculated",label:"計算値",icon:zt,color:"#f59e0b",description:"複数カラムから計算"},{value:"static",label:"固定文言",icon:ol,color:"#10b981",description:"コード内の固定テキスト"},{value:"other",label:"その他メモ",icon:Zo,color:"#94a3b8",description:"自由メモ"}];e.watch(ue,p=>{var t;if(p){const l=a.getElementConfig(p);try{const r=document.querySelector(p);if(r){l!=null&&l.elementType?h.value=l.elementType:h.value=a.detectElementType(r);const w=r.querySelector("[data-di-binding]")||(r.hasAttribute("data-di-binding")?r:null)||r.closest("[data-di-binding]");if(w){const xe=w.getAttribute("data-di-binding"),ct=w.getAttribute("data-di-db"),Nt=w.getAttribute("data-di-db-type"),ut=w.getAttribute("data-di-db-comment");if(xe&&(et.value=xe,Ne.value="data",We.value=!1),ct){const[Pt,At]=ct.split(".");Pt&&At&&(fe.value.push({table:Pt,column:At,type:Nt||void 0,description:ut||void 0}),F.value||(F.value="db_direct"))}}}}catch(r){console.warn("[DevInspector] Failed to read element:",r)}l!=null&&l.fieldInfoList&&l.fieldInfoList.length>0?fe.value=l.fieldInfoList.map(r=>({...r})):l!=null&&l.fieldInfo&&(fe.value=[{...l.fieldInfo}]),le.value="",be.value="",Xe.value="",Je.value="",l!=null&&l.note&&(W.value=l.note.text||W.value,F.value=l.note.displayType||F.value,tt.value=l.note.formatDescription||"",je.value=l.note.sampleValue||"",at.value=l.note.decimalHandling||"",it.value=l.note.unit||"",Qe.value=l.note.nullDisplay||"",ot.value=l.note.displayFormat||"",Eo(l.note.calcDescription||"",l.note.calcSources||[]),se.value=l.note.storedCalc||!1,i.value=l.note.storedCalcLogic||"",J.value=l.note.storedCalcSources?[...l.note.storedCalcSources]:[],X.value=l.note.storedCalcTiming||"",Ve.value=l.note.condition||"",Ee.value=l.note.conditionColumn||"",Se.value=l.note.hiddenBehavior||"",Le.value=l.note.hiddenNote||"",ne.value=!!(l.note.condition||l.note.conditionColumn)),l!=null&&l.sourceBinding&&(Ne.value=l.sourceBinding.type||Ne.value,et.value=l.sourceBinding.source||et.value,We.value=l.sourceBinding.isStatic||!1),M.value=(l==null?void 0:l.tabContext)||a.detectTabContext(p)||"";const v=a.detectModalName(p);if(Oe.value=(l==null?void 0:l.modalName)||v||"",l!=null&&l.actionInfo){if(b.value=l.actionInfo.type||"",O.value=l.actionInfo.target||"",q.value=l.actionInfo.method||"",K.value=l.actionInfo.description||"",l.actionInfo.csvSpec){const r=l.actionInfo.csvSpec;Z.value=r.columns.map(w=>({...w})),g.value=r.encoding||"UTF-8",ke.value=r.delimiter||",",He.value=r.hasHeaderRow!==!1,pe.value=r.filenamePattern||"",Te.value=r.sortOrder||"",te.value=r.filterCondition||"",H.value=r.maxRows,Ce.value=r.errorHandling||"",D.value=r.duplicateHandling||"",k.value=r.preValidation||"",u.value=r.errorDefs?r.errorDefs.map(w=>({...w})):[]}if(l.actionInfo.emailSpec){const r=l.actionInfo.emailSpec;C.value=r.trigger||"",$.value=r.to||"",R.value=r.cc||"",_.value=r.bcc||"",z.value=r.subject||"",N.value=r.bodyTemplate||"",f.value=r.templatePath||"",y.value=r.variables?[...r.variables]:[],P.value=r.attachments||"",Me.value=r.conditions||"",oe.value=r.errorHandling||""}}if(l!=null&&l.formInfo&&(ie.value=l.formInfo.inputType||"",de.value=l.formInfo.required||!1,S.value=l.formInfo.validation?[...l.formInfo.validation]:[],Q.value=l.formInfo.placeholder||"",me.value=l.formInfo.defaultValue||"",ee.value=l.formInfo.description||""),(t=l==null?void 0:l.actionInfo)!=null&&t.sortSpec){const r=l.actionInfo.sortSpec;Ie.value=r.sortable!==!1,Ae.value=r.sortType||"",$e.value=r.sortKey||"",we.value=r.defaultDirection||"",A.value=r.isDefaultSort||!1,he.value=r.unsortedOrder||"",Re.value=r.description||""}if(l!=null&&l.chartSpec){const r=l.chartSpec;Ue.value=r.chartType||"",Ke.value=r.title||"",Ge.value=r.xAxis||"",Ye.value=r.yAxis||"",ae.value=r.series?r.series.map(w=>({...w})):[],ye.value=r.dataSource||"",ve.value=r.aggregation||"",De.value=r.filters||"",ze.value=r.description||""}}else n()});function n(){h.value="datasource",F.value="db_direct",fe.value=[],le.value="",be.value="",Xe.value="",Je.value="",tt.value="",je.value="",at.value="",it.value="",Qe.value="",ot.value="",_e.value=[],ce.value="",se.value=!1,i.value="",J.value=[],Y.value="",X.value="",Ve.value="",Ee.value="",Se.value="",Le.value="",ne.value=!1,W.value="",Ne.value="",et.value="",We.value=!1,b.value="",O.value="",q.value="",K.value="",Z.value=[],g.value="UTF-8",ke.value=",",He.value=!0,pe.value="",Te.value="",te.value="",H.value=void 0,Ce.value="",D.value="",k.value="",u.value=[],ie.value="",de.value=!1,S.value=[],j.value="",Q.value="",me.value="",ee.value="",C.value="",$.value="",R.value="",_.value="",z.value="",N.value="",f.value="",y.value=[],re.value="",P.value="",Me.value="",oe.value="",Ie.value=!0,Ae.value="",$e.value="",we.value="",A.value=!1,he.value="",Re.value="",Ue.value="",Ke.value="",Ge.value="",Ye.value="",ae.value=[],ye.value="",ve.value="",De.value="",ze.value="",M.value="",Oe.value="",Fe.value=!1,ge.value=[]}function d(){a.stopEditing(),n()}function c(){if(ue.value)try{const p=document.querySelector(ue.value);if(!p)return;const t=a.autoDetectElementInfo(p,ue.value);t.sourceBinding&&(Ne.value=t.sourceBinding.type||"",et.value=t.sourceBinding.source||"",We.value=t.sourceBinding.isStatic||!1,t.sourceBinding.isStatic&&!F.value&&(F.value="static",W.value=W.value||"固定文言")),t.fieldInfo&&(fe.value.push({table:t.fieldInfo.table||"",column:t.fieldInfo.column||"",type:t.fieldInfo.type||void 0,description:t.fieldInfo.description||void 0}),F.value||(F.value="db_direct")),t.note&&!W.value&&(W.value=t.note.text||"")}catch(p){console.error("[DevInspector] Auto-detect failed:",p)}}function V(){if(!ue.value)return;const p=[...fe.value];(F.value==="db_direct"||F.value==="db_formatted")&&le.value&&be.value&&p.push({table:le.value,column:be.value,type:Xe.value||void 0,description:Je.value||void 0});const t=p.length>0?p:void 0,l=p.length>0?p[0]:void 0,v=F.value==="db_direct"||F.value==="db_formatted",r=F.value||W.value?{text:W.value||"",displayType:F.value,formatDescription:F.value==="db_formatted"&&tt.value||void 0,calcDescription:F.value==="calculated"&&Vo()||void 0,calcSources:F.value==="calculated"&&Tt().length>0?Tt():void 0,storedCalc:v&&se.value?!0:void 0,storedCalcLogic:v&&se.value&&i.value||void 0,storedCalcSources:v&&se.value&&J.value.length>0?J.value:void 0,storedCalcTiming:v&&se.value&&X.value||void 0,sampleValue:je.value||void 0,decimalHandling:at.value||void 0,unit:it.value||void 0,nullDisplay:Qe.value||void 0,displayFormat:ot.value||void 0,condition:Ve.value||void 0,conditionColumn:Ee.value||void 0,hiddenBehavior:Se.value||void 0,hiddenNote:Le.value||void 0}:void 0,w=Ne.value?{type:Ne.value,source:et.value||void 0,isStatic:We.value}:void 0,xe=h.value==="action"&&b.value?{type:b.value,target:O.value||void 0,method:q.value?q.value:void 0,description:K.value||void 0,csvSpec:Do(),emailSpec:$o(),sortSpec:Mo()}:void 0,ct=h.value==="form"?{inputType:ie.value||void 0,required:de.value||void 0,validation:S.value.length>0?S.value:void 0,placeholder:Q.value||void 0,defaultValue:me.value||void 0,description:ee.value||void 0}:void 0,Nt=h.value==="chart"&&Ue.value?{chartType:Ue.value,title:Ke.value||void 0,xAxis:Ge.value||void 0,yAxis:Ye.value||void 0,series:ae.value.filter(ut=>ut.label||ut.field).length>0?ae.value.filter(ut=>ut.label||ut.field):void 0,dataSource:ye.value||void 0,aggregation:ve.value||void 0,filters:De.value||void 0,description:ze.value||void 0}:void 0;a.setElementConfig(ue.value,{elementType:h.value,fieldInfo:l,fieldInfoList:t,actionInfo:xe,formInfo:ct,chartSpec:Nt,note:r,sourceBinding:w,tabContext:M.value||void 0,modalName:Oe.value||void 0,isConditional:Oe.value?!0:void 0}),Fe.value&&Pe.value&&Io(),d()}function E(){ue.value&&(a.deleteElementConfig(ue.value),d())}const G=["string","text","integer","bigint","float","decimal","boolean","date","datetime","time","timestamp","binary","json","jsonb","VARCHAR","TEXT","INT","BIGINT","BOOLEAN","DATE","DATETIME","TIMESTAMP","JSON"],T=e.ref(""),qe=e.ref(!1),vt=e.computed(()=>a.searchSchemaColumns(T.value).slice(0,30));function Ct(p){fe.value.push({table:p.table,column:p.column,type:p.type||void 0,description:p.comment||void 0}),qe.value=!1,T.value=""}function lo(){!le.value||!be.value||(fe.value.push({table:le.value,column:be.value,type:Xe.value||void 0,description:Je.value||void 0}),le.value="",be.value="",Xe.value="",Je.value="")}function wt(p){fe.value.splice(p,1)}const bt=e.computed(()=>a.getSchemaColumns().length>0),Vt=e.ref(!1),Et=e.ref(!1),Dt=e.computed(()=>{var v;const p=new Set;for(const r of Object.values(a.elementConfigs))if(r.fieldInfoList)for(const w of r.fieldInfoList)w.table&&p.add(w.table);else(v=r.fieldInfo)!=null&&v.table&&p.add(r.fieldInfo.table);for(const r of a.getSchemaColumns())p.add(r.table);const t=[...p].sort();if(!le.value)return t;const l=le.value.toLowerCase();return t.filter(r=>r.toLowerCase().includes(l))}),$t=e.computed(()=>{var v;const p=new Set;for(const r of Object.values(a.elementConfigs))if(r.fieldInfoList)for(const w of r.fieldInfoList)w.column&&(!le.value||w.table===le.value)&&p.add(w.column);else(v=r.fieldInfo)!=null&&v.column&&(!le.value||r.fieldInfo.table===le.value)&&p.add(r.fieldInfo.column);for(const r of a.getSchemaColumns())(!le.value||r.table===le.value)&&p.add(r.column);const t=[...p].sort();if(!be.value)return t;const l=be.value.toLowerCase();return t.filter(r=>r.toLowerCase().includes(l))});function no(){setTimeout(()=>{Vt.value=!1},150)}function ao(){setTimeout(()=>{Et.value=!1},150)}function io(p){if(le.value=p,Vt.value=!1,be.value){const t=a.getSchemaColumns().find(l=>l.table===p&&l.column===be.value);t&&(Xe.value=t.type||"",Je.value=t.comment||"")}}function so(p){if(be.value=p,Et.value=!1,le.value){const t=a.getSchemaColumns().find(l=>l.table===le.value&&l.column===p);t&&(Xe.value=t.type||"",Je.value=t.comment||"")}}const _t=e.computed(()=>{var v,r;const p=new Set;for(const w of Object.values(a.elementConfigs))if(w.fieldInfoList)for(const xe of w.fieldInfoList)xe.table&&xe.column&&p.add(`${xe.table}.${xe.column}`);else(v=w.fieldInfo)!=null&&v.table&&((r=w.fieldInfo)!=null&&r.column)&&p.add(`${w.fieldInfo.table}.${w.fieldInfo.column}`);for(const w of a.getSchemaColumns())p.add(w.fullName);const t=[...p].sort();if(!ce.value)return t;const l=ce.value.trim().toLowerCase();if(/^[a-z0-9_.]+$/i.test(l)){const w=t.filter(xe=>xe.toLowerCase().includes(l));if(w.length>0)return w}return t});function ro(p){ce.value.trim()&&_e.value.push({type:"text",value:ce.value}),_e.value.push({type:"tag",value:p}),ce.value=""}function co(p){_e.value.splice(p,1)}function uo(p){if(p.key==="Backspace"&&!ce.value&&_e.value.length>0){const t=_e.value.pop();t.type==="text"&&(ce.value=t.value)}}function mo(){setTimeout(()=>{dt.value=!1},150)}const St=e.computed(()=>{var v,r;const p=new Set;for(const w of a.getSchemaColumns())p.add(w.fullName);for(const w of Object.values(a.elementConfigs))if(w.fieldInfoList)for(const xe of w.fieldInfoList)xe.table&&xe.column&&p.add(`${xe.table}.${xe.column}`);else(v=w.fieldInfo)!=null&&v.table&&((r=w.fieldInfo)!=null&&r.column)&&p.add(`${w.fieldInfo.table}.${w.fieldInfo.column}`);const t=[...p].sort();if(!Y.value)return t;const l=Y.value.trim().toLowerCase();return t.filter(w=>w.toLowerCase().includes(l))});function po(){setTimeout(()=>{L.value=!1},150)}function vo(){const p=Y.value.trim();p&&!J.value.includes(p)&&J.value.push(p),Y.value=""}function fo(p){J.value.includes(p)||J.value.push(p),Y.value=""}function Vo(){const p=_e.value.map(t=>t.value);return ce.value.trim()&&p.push(ce.value.trim()),p.join(" ").replace(/\s+/g," ").trim()}function Tt(){return _e.value.filter(p=>p.type==="tag").map(p=>p.value)}function Eo(p,t){if(!p&&t.length===0){_e.value=[],ce.value="";return}if(t.length===0){_e.value=[],ce.value=p;return}const l=[];let v=p;for(const w of t){const xe=v.indexOf(w);if(xe>=0){const ct=v.substring(0,xe).trim();ct&&l.push({type:"text",value:ct}),l.push({type:"tag",value:w}),v=v.substring(xe+w.length)}}const r=v.trim();r&&l.push({type:"text",value:r}),l.length===0?ce.value=p:(_e.value=l,ce.value="")}function ko(){const p=j.value.trim();p&&!S.value.includes(p)&&S.value.push(p),j.value=""}function ho(p){S.value.splice(p,1)}function yo(p){p.key==="Backspace"&&!j.value&&S.value.length>0&&S.value.pop()}function go(){Z.value.push({name:"",dbMapping:"",type:"string",required:!1,description:""})}function bo(p){Z.value.splice(p,1)}function Mt(p,t){const l=p+t;if(l<0||l>=Z.value.length)return;const v=Z.value[p];Z.value[p]=Z.value[l],Z.value[l]=v,Z.value=[...Z.value]}function No(){ae.value.push({label:"",field:"",color:"#3b82f6"})}function Bo(p){ae.value.splice(p,1)}function It(p,t){const l=p+t;if(l<0||l>=ae.value.length)return;const v=ae.value[p];ae.value[p]=ae.value[l],ae.value[l]=v,ae.value=[...ae.value]}function xo(){u.value.push({condition:"",message:"",column:"",severity:"error"})}function Co(p){u.value.splice(p,1)}const wo=e.computed(()=>Z.value.filter(p=>p.name).map(p=>p.name));function Do(){if(b.value!=="csv_export"&&b.value!=="csv_import")return;const p=u.value.filter(t=>t.condition||t.message);return{columns:Z.value.filter(t=>t.name),encoding:g.value||void 0,delimiter:ke.value||void 0,hasHeaderRow:He.value,filenamePattern:pe.value||void 0,sortOrder:Te.value||void 0,filterCondition:te.value||void 0,maxRows:H.value||void 0,errorHandling:Ce.value||void 0,duplicateHandling:D.value||void 0,preValidation:k.value||void 0,errorDefs:p.length>0?p:void 0}}function $o(){if(b.value==="email")return{trigger:C.value||"",to:$.value||"",cc:R.value||void 0,bcc:_.value||void 0,subject:z.value||"",bodyTemplate:N.value||void 0,templatePath:f.value||void 0,variables:y.value.length>0?y.value:void 0,attachments:P.value||void 0,conditions:Me.value||void 0,errorHandling:oe.value||void 0}}function _o(){const p=re.value.trim();p&&!y.value.includes(p)&&y.value.push(p),re.value=""}function So(p){y.value.splice(p,1)}function To(p){p.key==="Backspace"&&!re.value&&y.value.length>0&&y.value.pop()}function Mo(){if(b.value==="sort")return{sortable:Ie.value,sortType:Ae.value?Ae.value:void 0,sortKey:$e.value||void 0,defaultDirection:we.value?we.value:void 0,isDefaultSort:A.value||void 0,unsortedOrder:he.value||void 0,description:Re.value||void 0}}e.watch(Pe,p=>{if(p){const t=a.getMasterDefinition(p);t?(ge.value=t.entries.map(l=>({...l})),Fe.value=!0):(ge.value=[],Fe.value=!1)}else ge.value=[],Fe.value=!1});function Ut(){Fe.value=!Fe.value,Fe.value&&ge.value.length===0&&ge.value.push({value:"",label:""})}function Ft(){ge.value.push({value:"",label:""})}function Lt(p){ge.value.splice(p,1)}function Io(){var r;if(!Pe.value)return;const[p,t]=Pe.value.split(".");if(!p||!t)return;const l=ge.value.filter(w=>w.value||w.label);if(l.length===0){a.deleteMasterDefinition(Pe.value);return}const v=a.getMasterDefinition(Pe.value);a.setMasterDefinition({id:Pe.value,table:p,column:t,name:(v==null?void 0:v.name)||t,columnType:(v==null?void 0:v.columnType)||((r=fe.value[0])==null?void 0:r.type),description:v==null?void 0:v.description,entries:l,updatedAt:new Date().toISOString()})}return(p,t)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[Be.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"di-editor-overlay",onClick:e.withModifiers(d,["self"]),"data-dev-inspector":""},[e.createElementVNode("div",{class:e.normalizeClass(["di-editor-modal",{"di-editor-modal-wide":m.value}])},[e.createElementVNode("div",nd,[t[92]||(t[92]=e.createElementVNode("h3",null,"要素情報を編集",-1)),e.createElementVNode("div",ad,[e.createElementVNode("button",{onClick:c,class:"di-btn-auto",title:"自動検出"},[e.createVNode(e.unref(yt),{style:{width:"16px",height:"16px"}})]),e.createElementVNode("button",{onClick:d,class:"di-editor-close"},[e.createVNode(e.unref(lt),{style:{width:"20px",height:"20px"}})])])]),x.value?(e.openBlock(),e.createElementBlock("div",id,[e.createElementVNode("span",{class:e.normalizeClass(["di-source-badge","di-source-"+Ne.value])},e.toDisplayString(x.value),3),et.value?(e.openBlock(),e.createElementBlock("span",sd,e.toDisplayString(et.value),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",dd,[e.createElementVNode("div",rd,[t[93]||(t[93]=e.createElementVNode("label",{class:"di-context-label di-context-label-tab"},"タブ:",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>M.value=l),type:"text",list:"di-tab-names",class:"di-context-input",placeholder:"例: 予習, 受講者一覧"},null,512),[[e.vModelText,M.value]]),e.createElementVNode("datalist",cd,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(nt.value,l=>(e.openBlock(),e.createElementBlock("option",{key:l,value:l},null,8,ud))),128))])]),e.createElementVNode("div",md,[t[94]||(t[94]=e.createElementVNode("label",{class:"di-context-label di-context-label-modal"},"モーダル:",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>Oe.value=l),type:"text",list:"di-modal-names",class:"di-context-input",placeholder:"例: 確認ダイアログ"},null,512),[[e.vModelText,Oe.value]]),e.createElementVNode("datalist",pd,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Ze.value,l=>(e.openBlock(),e.createElementBlock("option",{key:l,value:l},null,8,vd))),128))])])]),e.createElementVNode("div",fd,[e.createElementVNode("button",{onClick:t[2]||(t[2]=l=>h.value="datasource"),class:e.normalizeClass(["di-editor-tab",{"di-editor-tab-active":h.value==="datasource"}])},[e.createVNode(e.unref(rt),{style:{width:"14px",height:"14px"}}),t[95]||(t[95]=e.createTextVNode(" データソース ",-1))],2),e.createElementVNode("button",{onClick:t[3]||(t[3]=l=>h.value="action"),class:e.normalizeClass(["di-editor-tab",{"di-editor-tab-active":h.value==="action"}])},[e.createVNode(e.unref(nl),{style:{width:"14px",height:"14px"}}),t[96]||(t[96]=e.createTextVNode(" アクション ",-1))],2),e.createElementVNode("button",{onClick:t[4]||(t[4]=l=>h.value="form"),class:e.normalizeClass(["di-editor-tab",{"di-editor-tab-active":h.value==="form"}])},[e.createVNode(e.unref(Ko),{style:{width:"14px",height:"14px"}}),t[97]||(t[97]=e.createTextVNode(" フォーム ",-1))],2),e.createElementVNode("button",{onClick:t[5]||(t[5]=l=>h.value="chart"),class:e.normalizeClass(["di-editor-tab",{"di-editor-tab-active":h.value==="chart"}])},[e.createVNode(e.unref(zo),{style:{width:"14px",height:"14px"}}),t[98]||(t[98]=e.createTextVNode(" チャート ",-1))],2)]),e.createElementVNode("div",Vd,[h.value==="datasource"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("div",Ed,[t[99]||(t[99]=e.createElementVNode("label",{class:"di-form-label"},"表示タイプ",-1)),e.createElementVNode("div",kd,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(B,l=>e.createElementVNode("button",{key:l.value,onClick:v=>F.value=l.value,class:e.normalizeClass(["di-display-type-card",{"di-display-type-active":F.value===l.value}]),style:e.normalizeStyle(F.value===l.value?{borderColor:l.color,background:l.color+"18"}:{})},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.icon),{style:e.normalizeStyle([{width:"20px",height:"20px"},{color:F.value===l.value?l.color:"#64748b"}])},null,8,["style"])),e.createElementVNode("span",{class:"di-display-type-label",style:e.normalizeStyle({color:F.value===l.value?l.color:"#94a3b8"})},e.toDisplayString(l.label),5),e.createElementVNode("span",yd,e.toDisplayString(l.description),1)],14,hd)),64))])]),F.value==="db_direct"||F.value==="db_formatted"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[fe.value.length>0?(e.openBlock(),e.createElementBlock("div",gd,[t[100]||(t[100]=e.createElementVNode("label",{class:"di-form-label"},"登録済みカラム",-1)),e.createElementVNode("div",bd,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(fe.value,(l,v)=>(e.openBlock(),e.createElementBlock("div",{key:v,class:"di-field-tag"},[e.createElementVNode("span",Nd,e.toDisplayString(l.table)+"."+e.toDisplayString(l.column),1),l.type?(e.openBlock(),e.createElementBlock("span",Bd,e.toDisplayString(l.type),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:r=>wt(v),class:"di-field-tag-remove"},"×",8,xd)]))),128))])])):e.createCommentVNode("",!0),bt.value?(e.openBlock(),e.createElementBlock("div",Cd,[e.createElementVNode("div",wd,[e.createElementVNode("label",Dd,[e.createVNode(e.unref(rt),{style:{width:"12px",height:"12px",display:"inline","vertical-align":"middle"}}),t[101]||(t[101]=e.createTextVNode(" schema.rb から選択 ",-1))]),e.createElementVNode("div",$d,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>T.value=l),onFocus:t[7]||(t[7]=l=>qe.value=!0),type:"text",placeholder:"テーブル.カラムを検索... (例: users, email)",class:"di-input di-binding-search"},null,544),[[e.vModelText,T.value]]),T.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:t[8]||(t[8]=l=>{T.value="",qe.value=!1}),class:"di-binding-clear"},[e.createVNode(e.unref(lt),{style:{width:"14px",height:"14px"}})])):e.createCommentVNode("",!0)]),qe.value&&vt.value.length>0?(e.openBlock(),e.createElementBlock("div",_d,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(vt.value,l=>(e.openBlock(),e.createElementBlock("button",{key:l.fullName,onClick:v=>Ct(l),class:"di-binding-item has-db"},[e.createElementVNode("div",Td,[e.createElementVNode("span",Md,e.toDisplayString(l.fullName),1),e.createElementVNode("span",Id,e.toDisplayString(l.type),1)]),l.comment?(e.openBlock(),e.createElementBlock("span",Ud,e.toDisplayString(l.comment),1)):e.createCommentVNode("",!0)],8,Sd))),128))])):qe.value&&T.value&&vt.value.length===0?(e.openBlock(),e.createElementBlock("div",Fd," 該当するカラムが見つかりません ")):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0),bt.value?(e.openBlock(),e.createElementBlock("div",Ld,[...t[102]||(t[102]=[e.createElementVNode("span",null,"または手動入力",-1)])])):e.createCommentVNode("",!0),e.createElementVNode("div",Pd,[e.createElementVNode("div",Ad,[t[103]||(t[103]=e.createElementVNode("label",{class:"di-form-label"},"テーブル名 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>le.value=l),onFocus:t[10]||(t[10]=l=>Vt.value=!0),onBlur:t[11]||(t[11]=l=>no()),type:"text",placeholder:"users",class:"di-input",autocomplete:"off"},null,544),[[e.vModelText,le.value]]),Vt.value&&Dt.value.length>0?(e.openBlock(),e.createElementBlock("div",zd,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Dt.value.slice(0,10),l=>(e.openBlock(),e.createElementBlock("button",{key:l,onMousedown:e.withModifiers(v=>io(l),["prevent"]),class:"di-suggest-item"},e.toDisplayString(l),41,Od))),128))])):e.createCommentVNode("",!0)]),e.createElementVNode("div",jd,[t[104]||(t[104]=e.createElementVNode("label",{class:"di-form-label"},"カラム名 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[12]||(t[12]=l=>be.value=l),onFocus:t[13]||(t[13]=l=>Et.value=!0),onBlur:t[14]||(t[14]=l=>ao()),type:"text",placeholder:"name",class:"di-input",autocomplete:"off"},null,544),[[e.vModelText,be.value]]),Et.value&&$t.value.length>0?(e.openBlock(),e.createElementBlock("div",qd,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList($t.value.slice(0,10),l=>(e.openBlock(),e.createElementBlock("button",{key:l,onMousedown:e.withModifiers(v=>so(l),["prevent"]),class:"di-suggest-item"},e.toDisplayString(l),41,Hd))),128))])):e.createCommentVNode("",!0)])]),e.createElementVNode("div",Rd,[t[106]||(t[106]=e.createElementVNode("label",{class:"di-form-label"},"データ型",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[15]||(t[15]=l=>Xe.value=l),class:"di-select"},[t[105]||(t[105]=e.createElementVNode("option",{value:""},"選択してください",-1)),(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(G,l=>e.createElementVNode("option",{key:l,value:l},e.toDisplayString(l),9,Kd)),64))],512),[[e.vModelSelect,Xe.value]])]),e.createElementVNode("button",{onClick:lo,class:"di-btn-add-field",disabled:!le.value||!be.value}," + カラムを追加 ",8,Gd),Pe.value?(e.openBlock(),e.createElementBlock("div",Yd,[e.createElementVNode("button",{onClick:Ut,class:e.normalizeClass(["di-btn-condition-toggle",{"di-condition-active":Fe.value}])},[e.createVNode(e.unref(Ht),{style:{width:"14px",height:"14px"}}),t[107]||(t[107]=e.createTextVNode(" マスタ値を定義 ",-1)),st.value?(e.openBlock(),e.createElementBlock("span",Xd,e.toDisplayString(st.value.entries.length)+"件",1)):e.createCommentVNode("",!0)],2),Fe.value?(e.openBlock(),e.createElementBlock("div",Wd,[ge.value.length>0?(e.openBlock(),e.createElementBlock("div",Zd,[t[108]||(t[108]=e.createElementVNode("div",{class:"di-master-entries-header"},[e.createElementVNode("span",{class:"di-master-col-val"},"値"),e.createElementVNode("span",{class:"di-master-col-lbl"},"ラベル"),e.createElementVNode("span",{class:"di-master-col-color"},"色"),e.createElementVNode("span",{class:"di-master-col-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(ge.value,(l,v)=>(e.openBlock(),e.createElementBlock("div",{key:v,class:"di-master-entry-row"},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r=>l.value=r,placeholder:"1",class:"di-master-input di-master-col-val"},null,8,Jd),[[e.vModelText,l.value]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r=>l.label=r,placeholder:"受付",class:"di-master-input di-master-col-lbl"},null,8,Qd),[[e.vModelText,l.label]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r=>l.color=r,type:"color",class:"di-master-color-input"},null,8,er),[[e.vModelText,l.color]]),e.createElementVNode("button",{onClick:r=>Lt(v),class:"di-master-entry-remove"},"×",8,tr)]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:Ft,class:"di-btn-add-field",style:{"margin-top":"4px"}}," + 値を追加 ")])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),F.value==="db_formatted"?(e.openBlock(),e.createElementBlock("div",or,[t[109]||(t[109]=e.createElementVNode("label",{class:"di-form-label"},"整形方法",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[16]||(t[16]=l=>tt.value=l),rows:"2",placeholder:"YYYY年MM月DD日 に整形、姓 + 名 で結合 など",class:"di-textarea"},null,512),[[e.vModelText,tt.value]])])):e.createCommentVNode("",!0),e.createElementVNode("div",lr,[e.createElementVNode("button",{onClick:t[17]||(t[17]=l=>se.value=!se.value),class:e.normalizeClass(["di-btn-condition-toggle",{"di-condition-active":se.value}])},[e.createVNode(e.unref(zt),{style:{width:"14px",height:"14px"}}),t[110]||(t[110]=e.createTextVNode(" このカラムは計算値を保存している ",-1)),se.value?(e.openBlock(),e.createElementBlock("span",nr,"設定あり")):e.createCommentVNode("",!0)],2)]),se.value?(e.openBlock(),e.createElementBlock("div",ar,[e.createElementVNode("div",ir,[t[111]||(t[111]=e.createElementVNode("label",{class:"di-form-label"},"計算ロジック",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[18]||(t[18]=l=>i.value=l),rows:"2",placeholder:"SUM(order_items.price * quantity)、unit_price × quantity など",class:"di-textarea di-textarea-mono"},null,512),[[e.vModelText,i.value]])]),e.createElementVNode("div",sr,[t[112]||(t[112]=e.createElementVNode("label",{class:"di-form-label"},"元データ（テーブル.カラム）",-1)),e.createElementVNode("div",dr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(J.value,(l,v)=>(e.openBlock(),e.createElementBlock("span",{key:v,class:"di-calc-tag"},[e.createTextVNode(e.toDisplayString(l)+" ",1),e.createElementVNode("button",{onClick:e.withModifiers(r=>J.value.splice(v,1),["stop"]),class:"di-calc-tag-remove"},"×",8,rr)]))),128)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[19]||(t[19]=l=>Y.value=l),onFocus:t[20]||(t[20]=l=>L.value=!0),onBlur:po,onKeydown:t[21]||(t[21]=e.withKeys(e.withModifiers(l=>vo(),["prevent"]),["enter"])),type:"text",placeholder:"order_items.price",class:"di-calc-tags-field",autocomplete:"off"},null,544),[[e.vModelText,Y.value]])]),L.value&&St.value.length>0?(e.openBlock(),e.createElementBlock("div",cr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(St.value.slice(0,12),l=>(e.openBlock(),e.createElementBlock("button",{key:l,onMousedown:e.withModifiers(v=>fo(l),["prevent"]),class:"di-suggest-item"},[e.createVNode(e.unref(rt),{style:{width:"10px",height:"10px",opacity:"0.5","flex-shrink":"0"}}),e.createTextVNode(" "+e.toDisplayString(l),1)],40,ur))),128))])):e.createCommentVNode("",!0),t[113]||(t[113]=e.createElementVNode("span",{class:"di-form-hint"},"Enter で追加、またはドロップダウンから選択",-1))]),e.createElementVNode("div",mr,[t[115]||(t[115]=e.createElementVNode("label",{class:"di-form-label"},"計算タイミング",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[22]||(t[22]=l=>X.value=l),class:"di-select"},[...t[114]||(t[114]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"on_save"},"保存時（アプリ側で計算）",-1),e.createElementVNode("option",{value:"trigger"},"DBトリガー",-1),e.createElementVNode("option",{value:"batch"},"バッチ（定期実行）",-1),e.createElementVNode("option",{value:"realtime"},"リアルタイム（ビュー/マテビュー）",-1)])],512),[[e.vModelSelect,X.value]])])])):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),F.value==="calculated"?(e.openBlock(),e.createElementBlock("div",pr,[t[116]||(t[116]=e.createElementVNode("label",{class:"di-form-label"},"計算ロジック",-1)),e.createElementVNode("div",{class:"di-calc-tags-input",onClick:t[26]||(t[26]=l=>{var v;return(v=p.$refs.calcInputEl)==null?void 0:v.focus()})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_e.value,(l,v)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:v},[l.type==="tag"?(e.openBlock(),e.createElementBlock("span",vr,[e.createTextVNode(e.toDisplayString(l.value)+" ",1),e.createElementVNode("button",{onClick:e.withModifiers(r=>co(v),["stop"]),class:"di-calc-tag-remove"},"×",8,fr)])):(e.openBlock(),e.createElementBlock("span",Vr,e.toDisplayString(l.value),1))],64))),128)),e.withDirectives(e.createElementVNode("input",{ref:"calcInputEl","onUpdate:modelValue":t[23]||(t[23]=l=>ce.value=l),onFocus:t[24]||(t[24]=l=>dt.value=!0),onBlur:t[25]||(t[25]=l=>mo()),onKeydown:uo,type:"text",placeholder:_e.value.length===0?"カラムを選択 or 自由入力 (例: × 2)":"",class:"di-calc-tags-field",autocomplete:"off"},null,40,Er),[[e.vModelText,ce.value]])]),dt.value&&_t.value.length>0?(e.openBlock(),e.createElementBlock("div",kr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_t.value.slice(0,12),l=>(e.openBlock(),e.createElementBlock("button",{key:l,onMousedown:e.withModifiers(v=>ro(l),["prevent"]),class:"di-suggest-item"},[e.createVNode(e.unref(rt),{style:{width:"10px",height:"10px",opacity:"0.5","flex-shrink":"0"}}),e.createTextVNode(" "+e.toDisplayString(l),1)],40,hr))),128))])):e.createCommentVNode("",!0),t[117]||(t[117]=e.createElementVNode("span",{class:"di-form-hint"},"DBカラムはドロップダウンから挿入、演算子や数値はそのまま入力",-1))])):e.createCommentVNode("",!0),F.value==="static"||F.value==="other"?(e.openBlock(),e.createElementBlock("div",yr,[t[118]||(t[118]=e.createElementVNode("label",{class:"di-form-label"},"メモ",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[27]||(t[27]=l=>W.value=l),rows:"4",placeholder:"この要素についてのメモ...",class:"di-textarea"},null,512),[[e.vModelText,W.value]])])):e.createCommentVNode("",!0),F.value&&F.value!=="other"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[e.createElementVNode("div",gr,[e.createElementVNode("button",{onClick:t[28]||(t[28]=l=>ne.value=!ne.value),class:e.normalizeClass(["di-btn-condition-toggle",{"di-condition-active":ne.value||Ve.value}])},[e.createVNode(e.unref(Yt),{style:{width:"14px",height:"14px"}}),t[119]||(t[119]=e.createTextVNode(" 条件付き表示 ",-1)),Ve.value?(e.openBlock(),e.createElementBlock("span",br,"設定あり")):e.createCommentVNode("",!0)],2)]),ne.value?(e.openBlock(),e.createElementBlock("div",Nr,[e.createElementVNode("div",Br,[t[120]||(t[120]=e.createElementVNode("label",{class:"di-form-label"},"表示条件",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[29]||(t[29]=l=>Ve.value=l),type:"text",placeholder:"管理者ロール時のみ / ステータスがactiveの時",class:"di-input"},null,512),[[e.vModelText,Ve.value]])]),e.createElementVNode("div",xr,[t[121]||(t[121]=e.createElementVNode("label",{class:"di-form-label"},"判定カラム",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[30]||(t[30]=l=>Ee.value=l),type:"text",placeholder:"users.role / orders.status",class:"di-input di-input-mono"},null,512),[[e.vModelText,Ee.value]])]),e.createElementVNode("div",Cr,[e.createElementVNode("div",wr,[t[123]||(t[123]=e.createElementVNode("label",{class:"di-form-label"},"条件不一致時の挙動",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[31]||(t[31]=l=>Se.value=l),class:"di-select"},[...t[122]||(t[122]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"hidden"},"非表示",-1),e.createElementVNode("option",{value:"disabled"},"無効化 (グレーアウト)",-1),e.createElementVNode("option",{value:"different_value"},"別の値を表示",-1),e.createElementVNode("option",{value:"empty"},"空欄",-1)])],512),[[e.vModelSelect,Se.value]])])]),Se.value==="different_value"?(e.openBlock(),e.createElementBlock("div",Dr,[t[124]||(t[124]=e.createElementVNode("label",{class:"di-form-label"},"代わりに表示する値",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[32]||(t[32]=l=>Le.value=l),type:"text",placeholder:"「権限がありません」/ 「***」",class:"di-input"},null,512),[[e.vModelText,Le.value]])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),F.value==="db_direct"||F.value==="db_formatted"||F.value==="calculated"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:4},[t[132]||(t[132]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"表示の詳細")],-1)),e.createElementVNode("div",$r,[e.createElementVNode("div",_r,[t[125]||(t[125]=e.createElementVNode("label",{class:"di-form-label"},"サンプル値",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[33]||(t[33]=l=>je.value=l),type:"text",placeholder:"12,500 / 田中太郎",class:"di-input di-input-mono"},null,512),[[e.vModelText,je.value]])]),e.createElementVNode("div",Sr,[t[126]||(t[126]=e.createElementVNode("label",{class:"di-form-label"},"単位",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[34]||(t[34]=l=>it.value=l),type:"text",placeholder:"円 / %",class:"di-input"},null,512),[[e.vModelText,it.value]])])]),e.createElementVNode("div",Tr,[e.createElementVNode("div",Mr,[t[128]||(t[128]=e.createElementVNode("label",{class:"di-form-label"},"小数点の扱い",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[35]||(t[35]=l=>at.value=l),class:"di-select"},[...t[127]||(t[127]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"round"},"四捨五入",-1),e.createElementVNode("option",{value:"floor"},"切り捨て",-1),e.createElementVNode("option",{value:"ceil"},"切り上げ",-1),e.createElementVNode("option",{value:"decimal_1"},"小数第1位まで",-1),e.createElementVNode("option",{value:"decimal_2"},"小数第2位まで",-1),e.createElementVNode("option",{value:"integer"},"整数のみ",-1)])],512),[[e.vModelSelect,at.value]])]),e.createElementVNode("div",Ir,[t[129]||(t[129]=e.createElementVNode("label",{class:"di-form-label"},"NULL/ゼロ時",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[36]||(t[36]=l=>Qe.value=l),type:"text",placeholder:"- / 0 / 非表示 / N/A",class:"di-input"},null,512),[[e.vModelText,Qe.value]])])]),e.createElementVNode("div",Ur,[t[130]||(t[130]=e.createElementVNode("label",{class:"di-form-label"},"表示フォーマット",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[37]||(t[37]=l=>ot.value=l),type:"text",placeholder:"カンマ区切り / ¥記号付き / YYYY/MM/DD",class:"di-input"},null,512),[[e.vModelText,ot.value]])]),e.createElementVNode("div",Fr,[t[131]||(t[131]=e.createElementVNode("label",{class:"di-form-label"},"補足メモ（任意）",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[38]||(t[38]=l=>W.value=l),rows:"2",placeholder:"補足情報があれば...",class:"di-textarea"},null,512),[[e.vModelText,W.value]])])],64)):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),h.value==="action"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("div",Lr,[t[134]||(t[134]=e.createElementVNode("label",{class:"di-form-label"},"アクションタイプ",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[39]||(t[39]=l=>b.value=l),class:"di-select"},[...t[133]||(t[133]=[e.createElementVNode("option",{value:""},"選択してください",-1),e.createElementVNode("option",{value:"navigate"},"画面遷移",-1),e.createElementVNode("option",{value:"api"},"API呼び出し",-1),e.createElementVNode("option",{value:"modal"},"モーダル表示",-1),e.createElementVNode("option",{value:"emit"},"イベント発火",-1),e.createElementVNode("option",{value:"function"},"関数実行",-1),e.createElementVNode("option",{value:"csv_export"},"CSV出力",-1),e.createElementVNode("option",{value:"csv_import"},"CSV取込",-1),e.createElementVNode("option",{value:"email"},"メール送信",-1),e.createElementVNode("option",{value:"sort"},"ソート",-1)])],512),[[e.vModelSelect,b.value]])]),e.createElementVNode("div",Pr,[t[135]||(t[135]=e.createElementVNode("label",{class:"di-form-label"},"ターゲット",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[40]||(t[40]=l=>O.value=l),type:"text",placeholder:b.value==="navigate"?"/tasks":b.value==="api"?"/api/users":b.value==="modal"?"confirm-dialog":b.value==="csv_export"?"/api/export/users":b.value==="csv_import"?"/api/import/users":"",class:"di-input di-input-mono"},null,8,Ar),[[e.vModelText,O.value]])]),b.value==="api"?(e.openBlock(),e.createElementBlock("div",zr,[t[137]||(t[137]=e.createElementVNode("label",{class:"di-form-label"},"HTTPメソッド",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[41]||(t[41]=l=>q.value=l),class:"di-select"},[...t[136]||(t[136]=[e.createElementVNode("option",{value:""},"選択してください",-1),e.createElementVNode("option",{value:"GET"},"GET",-1),e.createElementVNode("option",{value:"POST"},"POST",-1),e.createElementVNode("option",{value:"PUT"},"PUT",-1),e.createElementVNode("option",{value:"DELETE"},"DELETE",-1),e.createElementVNode("option",{value:"PATCH"},"PATCH",-1)])],512),[[e.vModelSelect,q.value]])])):e.createCommentVNode("",!0),e.createElementVNode("div",Or,[t[138]||(t[138]=e.createElementVNode("label",{class:"di-form-label"},"説明",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[42]||(t[42]=l=>K.value=l),rows:"3",placeholder:"このアクションの説明...",class:"di-textarea"},null,512),[[e.vModelText,K.value]])]),b.value==="csv_export"||b.value==="csv_import"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("div",jr,[e.createElementVNode("span",null,[e.createVNode(e.unref(Xt),{style:{width:"12px",height:"12px",display:"inline","vertical-align":"middle"}}),t[139]||(t[139]=e.createTextVNode(" CSV仕様",-1))])]),e.createElementVNode("div",qr,[t[146]||(t[146]=e.createElementVNode("label",{class:"di-form-label"},"ファイル設定",-1)),e.createElementVNode("div",Hr,[e.createElementVNode("div",Rr,[t[141]||(t[141]=e.createElementVNode("label",{class:"di-form-label"},"エンコーディング",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[43]||(t[43]=l=>g.value=l),class:"di-select"},[...t[140]||(t[140]=[e.createElementVNode("option",{value:"UTF-8"},"UTF-8",-1),e.createElementVNode("option",{value:"Shift_JIS"},"Shift_JIS",-1),e.createElementVNode("option",{value:"EUC-JP"},"EUC-JP",-1),e.createElementVNode("option",{value:"UTF-8 BOM"},"UTF-8 BOM",-1)])],512),[[e.vModelSelect,g.value]])]),e.createElementVNode("div",Kr,[t[143]||(t[143]=e.createElementVNode("label",{class:"di-form-label"},"区切り文字",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[44]||(t[44]=l=>ke.value=l),class:"di-select"},[...t[142]||(t[142]=[e.createElementVNode("option",{value:","},"カンマ (,)",-1),e.createElementVNode("option",{value:"	"},"タブ",-1),e.createElementVNode("option",{value:"|"},"パイプ (|)",-1)])],512),[[e.vModelSelect,ke.value]])])]),e.createElementVNode("div",Gr,[e.createElementVNode("label",Yr,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":t[45]||(t[45]=l=>He.value=l),class:"di-checkbox"},null,512),[[e.vModelCheckbox,He.value]]),t[144]||(t[144]=e.createTextVNode(" ヘッダー行あり ",-1))])]),e.createElementVNode("div",Xr,[t[145]||(t[145]=e.createElementVNode("label",{class:"di-form-label"},"ファイル名パターン",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[46]||(t[46]=l=>pe.value=l),type:"text",placeholder:"users_{YYYYMMDD}.csv",class:"di-input di-input-mono"},null,512),[[e.vModelText,pe.value]])])]),e.createElementVNode("div",Wr,[t[149]||(t[149]=e.createElementVNode("label",{class:"di-form-label"},"CSV列定義",-1)),Z.value.length>0?(e.openBlock(),e.createElementBlock("div",Zr,[t[148]||(t[148]=e.createElementVNode("div",{class:"di-csv-columns-header"},[e.createElementVNode("span",{class:"di-csv-col-no"},"No"),e.createElementVNode("span",{class:"di-csv-col-name"},"項目名"),e.createElementVNode("span",{class:"di-csv-col-db"},"DBマッピング"),e.createElementVNode("span",{class:"di-csv-col-proc"},"加工"),e.createElementVNode("span",{class:"di-csv-col-type"},"型"),e.createElementVNode("span",{class:"di-csv-col-req"},"必須"),e.createElementVNode("span",{class:"di-csv-col-desc"},"説明"),e.createElementVNode("span",{class:"di-csv-col-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Z.value,(l,v)=>(e.openBlock(),e.createElementBlock("div",{key:v,class:"di-csv-column-row"},[e.createElementVNode("span",Jr,e.toDisplayString(v+1),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r=>l.name=r,placeholder:"項目名",class:"di-csv-input di-csv-col-name"},null,8,Qr),[[e.vModelText,l.name]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r=>l.dbMapping=r,placeholder:"table.col",class:"di-csv-input di-csv-col-db"},null,8,ec),[[e.vModelText,l.dbMapping]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r=>l.processing=r,placeholder:"姓+名, IF...",class:"di-csv-input di-csv-col-proc"},null,8,tc),[[e.vModelText,l.processing]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":r=>l.type=r,class:"di-csv-select di-csv-col-type"},[...t[147]||(t[147]=[e.createElementVNode("option",{value:""},"-",-1),e.createElementVNode("option",{value:"string"},"string",-1),e.createElementVNode("option",{value:"integer"},"integer",-1),e.createElementVNode("option",{value:"decimal"},"decimal",-1),e.createElementVNode("option",{value:"date"},"date",-1),e.createElementVNode("option",{value:"datetime"},"datetime",-1),e.createElementVNode("option",{value:"boolean"},"boolean",-1)])],8,oc),[[e.vModelSelect,l.type]]),e.createElementVNode("label",lc,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":r=>l.required=r,class:"di-checkbox"},null,8,nc),[[e.vModelCheckbox,l.required]])]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r=>l.description=r,placeholder:"備考",class:"di-csv-input di-csv-col-desc"},null,8,ac),[[e.vModelText,l.description]]),e.createElementVNode("div",ic,[e.createElementVNode("button",{onClick:r=>Mt(v,-1),disabled:v===0,class:"di-csv-move-btn",title:"上へ"},[e.createVNode(e.unref(Ot),{style:{width:"12px",height:"12px"}})],8,sc),e.createElementVNode("button",{onClick:r=>Mt(v,1),disabled:v===Z.value.length-1,class:"di-csv-move-btn",title:"下へ"},[e.createVNode(e.unref(xt),{style:{width:"12px",height:"12px"}})],8,dc),e.createElementVNode("button",{onClick:r=>bo(v),class:"di-csv-remove-btn",title:"削除"},"×",8,rc)])]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:go,class:"di-btn-add-field"}," + 列を追加 ")]),b.value==="csv_export"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[t[153]||(t[153]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"出力オプション")],-1)),e.createElementVNode("div",cc,[t[150]||(t[150]=e.createElementVNode("label",{class:"di-form-label"},"ソート順",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[47]||(t[47]=l=>Te.value=l),type:"text",placeholder:"created_at DESC",class:"di-input di-input-mono"},null,512),[[e.vModelText,Te.value]])]),e.createElementVNode("div",uc,[t[151]||(t[151]=e.createElementVNode("label",{class:"di-form-label"},"抽出条件",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[48]||(t[48]=l=>te.value=l),type:"text",placeholder:"status = 'active'",class:"di-input di-input-mono"},null,512),[[e.vModelText,te.value]])]),e.createElementVNode("div",mc,[t[152]||(t[152]=e.createElementVNode("label",{class:"di-form-label"},"最大行数",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[49]||(t[49]=l=>H.value=l),type:"number",placeholder:"10000",class:"di-input"},null,512),[[e.vModelText,H.value,void 0,{number:!0}]])])],64)):e.createCommentVNode("",!0),b.value==="csv_import"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[t[159]||(t[159]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"取込オプション")],-1)),e.createElementVNode("div",pc,[t[155]||(t[155]=e.createElementVNode("label",{class:"di-form-label"},"エラー処理",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[50]||(t[50]=l=>Ce.value=l),class:"di-select"},[...t[154]||(t[154]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"stop_on_first"},"最初のエラーで停止",-1),e.createElementVNode("option",{value:"skip_and_continue"},"スキップして続行",-1),e.createElementVNode("option",{value:"collect_all"},"全エラー収集",-1)])],512),[[e.vModelSelect,Ce.value]])]),e.createElementVNode("div",vc,[t[157]||(t[157]=e.createElementVNode("label",{class:"di-form-label"},"重複処理",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[51]||(t[51]=l=>D.value=l),class:"di-select"},[...t[156]||(t[156]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"skip"},"スキップ",-1),e.createElementVNode("option",{value:"overwrite"},"上書き",-1),e.createElementVNode("option",{value:"error"},"エラー",-1)])],512),[[e.vModelSelect,D.value]])]),e.createElementVNode("div",fc,[t[158]||(t[158]=e.createElementVNode("label",{class:"di-form-label"},"事前バリデーション",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[52]||(t[52]=l=>k.value=l),rows:"2",placeholder:"取込前のチェック内容...",class:"di-textarea"},null,512),[[e.vModelText,k.value]])])],64)):e.createCommentVNode("",!0),t[163]||(t[163]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"エラー定義")],-1)),e.createElementVNode("div",Vc,[u.value.length>0?(e.openBlock(),e.createElementBlock("div",Ec,[t[162]||(t[162]=e.createElementVNode("div",{class:"di-csv-columns-header"},[e.createElementVNode("span",{class:"di-csv-err-col"},"対象列"),e.createElementVNode("span",{class:"di-csv-err-cond"},"エラー条件"),e.createElementVNode("span",{class:"di-csv-err-msg"},"エラーメッセージ"),e.createElementVNode("span",{class:"di-csv-err-sev"},"種別"),e.createElementVNode("span",{class:"di-csv-err-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,(l,v)=>(e.openBlock(),e.createElementBlock("div",{key:v,class:"di-csv-column-row"},[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":r=>l.column=r,class:"di-csv-select di-csv-err-col"},[t[160]||(t[160]=e.createElementVNode("option",{value:""},"（全体）",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(wo.value,r=>(e.openBlock(),e.createElementBlock("option",{key:r,value:r},e.toDisplayString(r),9,hc))),128))],8,kc),[[e.vModelSelect,l.column]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r=>l.condition=r,placeholder:"必須項目が空",class:"di-csv-input di-csv-err-cond"},null,8,yc),[[e.vModelText,l.condition]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r=>l.message=r,placeholder:"○○は必須です",class:"di-csv-input di-csv-err-msg"},null,8,gc),[[e.vModelText,l.message]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":r=>l.severity=r,class:"di-csv-select di-csv-err-sev"},[...t[161]||(t[161]=[e.createElementVNode("option",{value:"error"},"エラー",-1),e.createElementVNode("option",{value:"warning"},"警告",-1)])],8,bc),[[e.vModelSelect,l.severity]]),e.createElementVNode("button",{onClick:r=>Co(v),class:"di-csv-remove-btn",title:"削除"},"×",8,Nc)]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:xo,class:"di-btn-add-field"}," + エラー定義を追加 ")])],64)):e.createCommentVNode("",!0),b.value==="email"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createElementVNode("div",Bc,[e.createElementVNode("span",null,[e.createVNode(e.unref(Wo),{style:{width:"12px",height:"12px",display:"inline","vertical-align":"middle"}}),t[164]||(t[164]=e.createTextVNode(" メール基本設定",-1))])]),e.createElementVNode("div",xc,[e.createElementVNode("div",Cc,[t[165]||(t[165]=e.createElementVNode("label",{class:"di-form-label"},"トリガー *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[53]||(t[53]=l=>C.value=l),type:"text",placeholder:"注文確定時、ボタンクリック",class:"di-input"},null,512),[[e.vModelText,C.value]])]),e.createElementVNode("div",wc,[t[166]||(t[166]=e.createElementVNode("label",{class:"di-form-label"},"宛先 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[54]||(t[54]=l=>$.value=l),type:"text",placeholder:"ユーザーメール、管理者固定",class:"di-input"},null,512),[[e.vModelText,$.value]])])]),e.createElementVNode("div",Dc,[e.createElementVNode("div",$c,[t[167]||(t[167]=e.createElementVNode("label",{class:"di-form-label"},"CC",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[55]||(t[55]=l=>R.value=l),type:"text",placeholder:"CC宛先",class:"di-input"},null,512),[[e.vModelText,R.value]])]),e.createElementVNode("div",_c,[t[168]||(t[168]=e.createElementVNode("label",{class:"di-form-label"},"BCC",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[56]||(t[56]=l=>_.value=l),type:"text",placeholder:"BCC宛先",class:"di-input"},null,512),[[e.vModelText,_.value]])])]),e.createElementVNode("div",Sc,[t[169]||(t[169]=e.createElementVNode("label",{class:"di-form-label"},"件名テンプレート *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[57]||(t[57]=l=>z.value=l),type:"text",placeholder:"【注文確認】ご注文番号 {orderNumber}",class:"di-input"},null,512),[[e.vModelText,z.value]])]),e.createElementVNode("div",Tc,[t[170]||(t[170]=e.createElementVNode("label",{class:"di-form-label"},"本文テンプレート概要",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[58]||(t[58]=l=>N.value=l),rows:"3",placeholder:"本文の概要を記述...",class:"di-textarea"},null,512),[[e.vModelText,N.value]])]),e.createElementVNode("div",Mc,[t[171]||(t[171]=e.createElementVNode("label",{class:"di-form-label"},"テンプレートファイルパス",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[59]||(t[59]=l=>f.value=l),type:"text",placeholder:"resources/mail/order_confirm.blade.php",class:"di-input di-input-mono"},null,512),[[e.vModelText,f.value]])]),t[176]||(t[176]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"差し込み変数")],-1)),e.createElementVNode("div",Ic,[e.createElementVNode("div",Uc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,(l,v)=>(e.openBlock(),e.createElementBlock("span",{key:v,class:"di-calc-tag"},[e.createTextVNode(e.toDisplayString(l)+" ",1),e.createElementVNode("button",{onClick:e.withModifiers(r=>So(v),["stop"]),class:"di-calc-tag-remove"},"×",8,Fc)]))),128)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[60]||(t[60]=l=>re.value=l),onKeydown:[t[61]||(t[61]=e.withKeys(e.withModifiers(l=>_o(),["prevent"]),["enter"])),To],type:"text",placeholder:"変数名を入力してEnter (例: userName)",class:"di-calc-tags-field",autocomplete:"off"},null,544),[[e.vModelText,re.value]])]),t[172]||(t[172]=e.createElementVNode("span",{class:"di-form-hint"},"Enter で追加",-1))]),t[177]||(t[177]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"オプション")],-1)),e.createElementVNode("div",Lc,[t[173]||(t[173]=e.createElementVNode("label",{class:"di-form-label"},"添付ファイル",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[62]||(t[62]=l=>P.value=l),type:"text",placeholder:"添付ファイルの説明",class:"di-input"},null,512),[[e.vModelText,P.value]])]),e.createElementVNode("div",Pc,[t[174]||(t[174]=e.createElementVNode("label",{class:"di-form-label"},"送信条件",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[63]||(t[63]=l=>Me.value=l),type:"text",placeholder:"メール送信設定がONの場合",class:"di-input"},null,512),[[e.vModelText,Me.value]])]),e.createElementVNode("div",Ac,[t[175]||(t[175]=e.createElementVNode("label",{class:"di-form-label"},"エラー処理",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[64]||(t[64]=l=>oe.value=l),type:"text",placeholder:"キューに入れてリトライ",class:"di-input"},null,512),[[e.vModelText,oe.value]])])],64)):e.createCommentVNode("",!0),b.value==="sort"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[e.createElementVNode("div",zc,[e.createElementVNode("span",null,[e.createVNode(e.unref(Ao),{style:{width:"12px",height:"12px",display:"inline","vertical-align":"middle"}}),t[178]||(t[178]=e.createTextVNode(" ソート設定",-1))])]),e.createElementVNode("div",Oc,[e.createElementVNode("label",jc,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":t[65]||(t[65]=l=>Ie.value=l),class:"di-checkbox"},null,512),[[e.vModelCheckbox,Ie.value]]),t[179]||(t[179]=e.createTextVNode(" このカラムはソート可能 ",-1))])]),Ie.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("div",qc,[e.createElementVNode("div",Hc,[t[181]||(t[181]=e.createElementVNode("label",{class:"di-form-label"},"データ型",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[66]||(t[66]=l=>Ae.value=l),class:"di-select"},[...t[180]||(t[180]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"string"},"文字列",-1),e.createElementVNode("option",{value:"number"},"数値",-1),e.createElementVNode("option",{value:"date"},"日付",-1),e.createElementVNode("option",{value:"custom"},"カスタム",-1)])],512),[[e.vModelSelect,Ae.value]])]),e.createElementVNode("div",Rc,[t[183]||(t[183]=e.createElementVNode("label",{class:"di-form-label"},"デフォルト方向",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[67]||(t[67]=l=>we.value=l),class:"di-select"},[...t[182]||(t[182]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"asc"},"昇順 (A→Z, 1→9)",-1),e.createElementVNode("option",{value:"desc"},"降順 (Z→A, 9→1)",-1)])],512),[[e.vModelSelect,we.value]])])]),e.createElementVNode("div",Kc,[t[184]||(t[184]=e.createElementVNode("label",{class:"di-form-label"},"ソートキー (DBカラム/APIフィールド)",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[68]||(t[68]=l=>$e.value=l),type:"text",placeholder:"users.name / created_at",class:"di-input di-input-mono"},null,512),[[e.vModelText,$e.value]])]),e.createElementVNode("div",Gc,[e.createElementVNode("label",Yc,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":t[69]||(t[69]=l=>A.value=l),class:"di-checkbox"},null,512),[[e.vModelCheckbox,A.value]]),t[185]||(t[185]=e.createTextVNode(" 初期表示時のデフォルトソート ",-1))])])],64)):e.createCommentVNode("",!0),e.createElementVNode("div",Xc,[t[186]||(t[186]=e.createElementVNode("label",{class:"di-form-label"},"未ソート時の並び順",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[70]||(t[70]=l=>he.value=l),type:"text",placeholder:"ID昇順 / 登録日降順 / APIレスポンス順",class:"di-input"},null,512),[[e.vModelText,he.value]])]),e.createElementVNode("div",Wc,[t[187]||(t[187]=e.createElementVNode("label",{class:"di-form-label"},"補足",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[71]||(t[71]=l=>Re.value=l),type:"text",placeholder:"サーバーサイドソート / ページネーション時はリセット",class:"di-input"},null,512),[[e.vModelText,Re.value]])])],64)):e.createCommentVNode("",!0),e.createElementVNode("div",Zc,[t[188]||(t[188]=e.createElementVNode("label",{class:"di-form-label"},"補足メモ（任意）",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[72]||(t[72]=l=>W.value=l),rows:"2",placeholder:"補足情報があれば...",class:"di-textarea"},null,512),[[e.vModelText,W.value]])])],64)):e.createCommentVNode("",!0),h.value==="form"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createElementVNode("div",Jc,[t[190]||(t[190]=e.createElementVNode("label",{class:"di-form-label"},"入力タイプ",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[73]||(t[73]=l=>ie.value=l),class:"di-select"},[...t[189]||(t[189]=[e.createElementVNode("option",{value:""},"選択してください",-1),e.createElementVNode("option",{value:"text"},"テキスト (text)",-1),e.createElementVNode("option",{value:"number"},"数値 (number)",-1),e.createElementVNode("option",{value:"email"},"メール (email)",-1),e.createElementVNode("option",{value:"password"},"パスワード (password)",-1),e.createElementVNode("option",{value:"tel"},"電話番号 (tel)",-1),e.createElementVNode("option",{value:"url"},"URL (url)",-1),e.createElementVNode("option",{value:"date"},"日付 (date)",-1),e.createElementVNode("option",{value:"datetime-local"},"日時 (datetime-local)",-1),e.createElementVNode("option",{value:"select"},"セレクト (select)",-1),e.createElementVNode("option",{value:"textarea"},"テキストエリア (textarea)",-1),e.createElementVNode("option",{value:"checkbox"},"チェックボックス (checkbox)",-1),e.createElementVNode("option",{value:"radio"},"ラジオボタン (radio)",-1),e.createElementVNode("option",{value:"file"},"ファイル (file)",-1)])],512),[[e.vModelSelect,ie.value]])]),fe.value.length>0?(e.openBlock(),e.createElementBlock("div",Qc,[t[191]||(t[191]=e.createElementVNode("label",{class:"di-form-label"},"対応カラム",-1)),e.createElementVNode("div",eu,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(fe.value,(l,v)=>(e.openBlock(),e.createElementBlock("div",{key:v,class:"di-field-tag"},[e.createElementVNode("span",tu,e.toDisplayString(l.table)+"."+e.toDisplayString(l.column),1),l.type?(e.openBlock(),e.createElementBlock("span",ou,e.toDisplayString(l.type),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:r=>wt(v),class:"di-field-tag-remove"},"×",8,lu)]))),128))])])):e.createCommentVNode("",!0),bt.value?(e.openBlock(),e.createElementBlock("div",nu,[e.createElementVNode("div",au,[e.createElementVNode("label",iu,[e.createVNode(e.unref(rt),{style:{width:"12px",height:"12px",display:"inline","vertical-align":"middle"}}),t[192]||(t[192]=e.createTextVNode(" 対応するDBカラム ",-1))]),e.createElementVNode("div",su,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[74]||(t[74]=l=>T.value=l),onFocus:t[75]||(t[75]=l=>qe.value=!0),type:"text",placeholder:"テーブル.カラムを検索...",class:"di-input di-binding-search"},null,544),[[e.vModelText,T.value]]),T.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:t[76]||(t[76]=l=>{T.value="",qe.value=!1}),class:"di-binding-clear"},[e.createVNode(e.unref(lt),{style:{width:"14px",height:"14px"}})])):e.createCommentVNode("",!0)]),qe.value&&vt.value.length>0?(e.openBlock(),e.createElementBlock("div",du,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(vt.value,l=>(e.openBlock(),e.createElementBlock("button",{key:l.fullName,onClick:v=>Ct(l),class:"di-binding-item has-db"},[e.createElementVNode("div",cu,[e.createElementVNode("span",uu,e.toDisplayString(l.fullName),1),e.createElementVNode("span",mu,e.toDisplayString(l.type),1)]),l.comment?(e.openBlock(),e.createElementBlock("span",pu,e.toDisplayString(l.comment),1)):e.createCommentVNode("",!0)],8,ru))),128))])):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0),Pe.value&&(ie.value==="select"||ie.value==="radio"||ie.value==="checkbox")?(e.openBlock(),e.createElementBlock("div",vu,[e.createElementVNode("button",{onClick:Ut,class:e.normalizeClass(["di-btn-condition-toggle",{"di-condition-active":Fe.value}])},[e.createVNode(e.unref(Ht),{style:{width:"14px",height:"14px"}}),t[193]||(t[193]=e.createTextVNode(" 選択肢を定義 ",-1)),st.value?(e.openBlock(),e.createElementBlock("span",fu,e.toDisplayString(st.value.entries.length)+"件",1)):e.createCommentVNode("",!0)],2),Fe.value?(e.openBlock(),e.createElementBlock("div",Vu,[ge.value.length>0?(e.openBlock(),e.createElementBlock("div",Eu,[t[194]||(t[194]=e.createElementVNode("div",{class:"di-master-entries-header"},[e.createElementVNode("span",{class:"di-master-col-val"},"値"),e.createElementVNode("span",{class:"di-master-col-lbl"},"ラベル"),e.createElementVNode("span",{class:"di-master-col-color"},"色"),e.createElementVNode("span",{class:"di-master-col-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(ge.value,(l,v)=>(e.openBlock(),e.createElementBlock("div",{key:v,class:"di-master-entry-row"},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r=>l.value=r,placeholder:"1",class:"di-master-input di-master-col-val"},null,8,ku),[[e.vModelText,l.value]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r=>l.label=r,placeholder:"受付",class:"di-master-input di-master-col-lbl"},null,8,hu),[[e.vModelText,l.label]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r=>l.color=r,type:"color",class:"di-master-color-input"},null,8,yu),[[e.vModelText,l.color]]),e.createElementVNode("button",{onClick:r=>Lt(v),class:"di-master-entry-remove"},"×",8,gu)]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:Ft,class:"di-btn-add-field",style:{"margin-top":"4px"}}," + 値を追加 ")])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",bu,[e.createElementVNode("button",{onClick:t[77]||(t[77]=l=>de.value=!de.value),class:e.normalizeClass(["di-btn-condition-toggle",{"di-condition-active":de.value}])},[e.createVNode(e.unref(Yt),{style:{width:"14px",height:"14px"}}),t[195]||(t[195]=e.createTextVNode(" 必須入力 ",-1)),de.value?(e.openBlock(),e.createElementBlock("span",Nu,"必須")):e.createCommentVNode("",!0)],2)]),e.createElementVNode("div",Bu,[t[196]||(t[196]=e.createElementVNode("label",{class:"di-form-label"},"バリデーションルール",-1)),e.createElementVNode("div",xu,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(S.value,(l,v)=>(e.openBlock(),e.createElementBlock("span",{key:v,class:"di-calc-tag",style:{background:"#ec4899"}},[e.createTextVNode(e.toDisplayString(l)+" ",1),e.createElementVNode("button",{onClick:e.withModifiers(r=>ho(v),["stop"]),class:"di-calc-tag-remove"},"×",8,Cu)]))),128)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[78]||(t[78]=l=>j.value=l),onKeydown:[t[79]||(t[79]=e.withKeys(e.withModifiers(l=>ko(),["prevent"]),["enter"])),yo],type:"text",placeholder:S.value.length===0?"max:255, email, 必須 など (Enter で追加)":"",class:"di-calc-tags-field",autocomplete:"off"},null,40,wu),[[e.vModelText,j.value]])]),t[197]||(t[197]=e.createElementVNode("span",{class:"di-form-hint"},"Enter で追加、Backspace で削除",-1))]),e.createElementVNode("div",Du,[t[198]||(t[198]=e.createElementVNode("label",{class:"di-form-label"},"プレースホルダー",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[80]||(t[80]=l=>Q.value=l),type:"text",placeholder:"例: user@example.com",class:"di-input"},null,512),[[e.vModelText,Q.value]])]),e.createElementVNode("div",$u,[t[199]||(t[199]=e.createElementVNode("label",{class:"di-form-label"},"デフォルト値",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[81]||(t[81]=l=>me.value=l),type:"text",placeholder:"初期値",class:"di-input di-input-mono"},null,512),[[e.vModelText,me.value]])]),e.createElementVNode("div",_u,[t[200]||(t[200]=e.createElementVNode("label",{class:"di-form-label"},"説明",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[82]||(t[82]=l=>ee.value=l),rows:"3",placeholder:"このフォーム要素の説明...",class:"di-textarea"},null,512),[[e.vModelText,ee.value]])]),e.createElementVNode("div",Su,[t[201]||(t[201]=e.createElementVNode("label",{class:"di-form-label"},"補足メモ（任意）",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[83]||(t[83]=l=>W.value=l),rows:"2",placeholder:"補足情報があれば...",class:"di-textarea"},null,512),[[e.vModelText,W.value]])])],64)):e.createCommentVNode("",!0),h.value==="chart"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[e.createElementVNode("div",Tu,[t[203]||(t[203]=e.createElementVNode("label",{class:"di-form-label"},"チャート種別",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[84]||(t[84]=l=>Ue.value=l),class:"di-select"},[...t[202]||(t[202]=[e.createElementVNode("option",{value:""},"選択してください",-1),e.createElementVNode("option",{value:"bar"},"棒グラフ (bar)",-1),e.createElementVNode("option",{value:"line"},"折れ線グラフ (line)",-1),e.createElementVNode("option",{value:"pie"},"円グラフ (pie)",-1),e.createElementVNode("option",{value:"area"},"エリアチャート (area)",-1),e.createElementVNode("option",{value:"scatter"},"散布図 (scatter)",-1),e.createElementVNode("option",{value:"doughnut"},"ドーナツ (doughnut)",-1),e.createElementVNode("option",{value:"radar"},"レーダー (radar)",-1),e.createElementVNode("option",{value:"other"},"その他 (other)",-1)])],512),[[e.vModelSelect,Ue.value]])]),e.createElementVNode("div",Mu,[t[204]||(t[204]=e.createElementVNode("label",{class:"di-form-label"},"タイトル",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[85]||(t[85]=l=>Ke.value=l),type:"text",placeholder:"例: 月別受講者数",class:"di-input"},null,512),[[e.vModelText,Ke.value]])]),e.createElementVNode("div",Iu,[e.createElementVNode("div",Uu,[t[205]||(t[205]=e.createElementVNode("label",{class:"di-form-label"},"X軸",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[86]||(t[86]=l=>Ge.value=l),type:"text",placeholder:"例: 月, 日付",class:"di-input"},null,512),[[e.vModelText,Ge.value]])]),e.createElementVNode("div",Fu,[t[206]||(t[206]=e.createElementVNode("label",{class:"di-form-label"},"Y軸",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[87]||(t[87]=l=>Ye.value=l),type:"text",placeholder:"例: 件数, 金額",class:"di-input"},null,512),[[e.vModelText,Ye.value]])])]),e.createElementVNode("div",Lu,[t[208]||(t[208]=e.createElementVNode("label",{class:"di-form-label"},"系列定義",-1)),ae.value.length>0?(e.openBlock(),e.createElementBlock("div",Pu,[t[207]||(t[207]=e.createElementVNode("div",{class:"di-csv-columns-header"},[e.createElementVNode("span",{class:"di-chart-col-label"},"系列名"),e.createElementVNode("span",{class:"di-chart-col-field"},"フィールド"),e.createElementVNode("span",{class:"di-chart-col-color"},"色"),e.createElementVNode("span",{class:"di-csv-col-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(ae.value,(l,v)=>(e.openBlock(),e.createElementBlock("div",{key:v,class:"di-csv-column-row"},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r=>l.label=r,placeholder:"予習",class:"di-csv-input di-chart-col-label"},null,8,Au),[[e.vModelText,l.label]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r=>l.field=r,placeholder:"preview_count",class:"di-csv-input di-chart-col-field"},null,8,zu),[[e.vModelText,l.field]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":r=>l.color=r,type:"color",class:"di-master-color-input"},null,8,Ou),[[e.vModelText,l.color]]),e.createElementVNode("div",ju,[e.createElementVNode("button",{onClick:r=>It(v,-1),disabled:v===0,class:"di-csv-move-btn",title:"上へ"},[e.createVNode(e.unref(Ot),{style:{width:"12px",height:"12px"}})],8,qu),e.createElementVNode("button",{onClick:r=>It(v,1),disabled:v===ae.value.length-1,class:"di-csv-move-btn",title:"下へ"},[e.createVNode(e.unref(xt),{style:{width:"12px",height:"12px"}})],8,Hu),e.createElementVNode("button",{onClick:r=>Bo(v),class:"di-csv-remove-btn",title:"削除"},"×",8,Ru)])]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:No,class:"di-btn-add-field"}," + 系列を追加 ")]),e.createElementVNode("div",Ku,[t[209]||(t[209]=e.createElementVNode("label",{class:"di-form-label"},"データ取得元",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[88]||(t[88]=l=>ye.value=l),type:"text",placeholder:"例: GET /api/stats/monthly",class:"di-input di-input-mono"},null,512),[[e.vModelText,ye.value]])]),e.createElementVNode("div",Gu,[t[210]||(t[210]=e.createElementVNode("label",{class:"di-form-label"},"集計方法",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[89]||(t[89]=l=>ve.value=l),type:"text",placeholder:"例: 月別集計, GROUP BY month",class:"di-input"},null,512),[[e.vModelText,ve.value]])]),e.createElementVNode("div",Yu,[t[211]||(t[211]=e.createElementVNode("label",{class:"di-form-label"},"フィルタ条件",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[90]||(t[90]=l=>De.value=l),type:"text",placeholder:"例: 直近12ヶ月, status=active",class:"di-input"},null,512),[[e.vModelText,De.value]])]),e.createElementVNode("div",Xu,[t[212]||(t[212]=e.createElementVNode("label",{class:"di-form-label"},"説明",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[91]||(t[91]=l=>ze.value=l),rows:"3",placeholder:"このチャートの説明...",class:"di-textarea"},null,512),[[e.vModelText,ze.value]])])],64)):e.createCommentVNode("",!0)]),e.createElementVNode("div",Wu,[e.createElementVNode("button",{onClick:E,class:"di-btn-delete"},[e.createVNode(e.unref(ft),{style:{width:"14px",height:"14px"}}),t[213]||(t[213]=e.createTextVNode(" 削除 ",-1))]),e.createElementVNode("div",Zu,[e.createElementVNode("button",{onClick:d,class:"di-btn-cancel"},"キャンセル"),e.createElementVNode("button",{onClick:V,class:"di-btn-save"},[e.createVNode(e.unref(Wt),{style:{width:"14px",height:"14px"}}),t[214]||(t[214]=e.createTextVNode(" 保存 ",-1))])])])],2)])):e.createCommentVNode("",!0)]))}}),Jt=gt(Ju,[["__scopeId","data-v-175ed067"]]),Qu={key:0,"data-dev-inspector":"",class:"di-loading-overlay"},em={class:"di-highlight-label"},tm=["onClick"],om={key:0,class:"di-note-label-row"},lm=["onClick"],nm={"data-dev-inspector":"",class:"di-scan-banner"},am=["onClick"],im={class:"di-analysis-type"},sm={key:0,class:"di-analysis-tags"},dm={key:1,class:"di-analysis-db"},rm={key:2,class:"di-analysis-api-source"},cm={key:3,class:"di-analysis-conditional"},um=["onClick"],mm={key:0,class:"di-analysis-text"},pm={"data-dev-inspector":"",class:"di-analysis-banner"},vm=["onClick"],fm={key:0,class:"di-unannotated-label-text"},Vm=e.defineComponent({__name:"DevPickOverlay",setup(U){const a=mt.useDevInspectorStore(),h=e.ref(null),b=e.ref(null),O=e.ref(0),q=e.ref(0),K=e.ref(0),ie={db_direct:"#3b82f6",db_formatted:"#8b5cf6",calculated:"#f59e0b",static:"#10b981",other:"#94a3b8"},de={action:"#a78bfa",form:"#ec4899"};function S(D){return{db:"DB",form:"フォーム",button:"ボタン",link:"リンク",modal:"モーダル",conditional:"条件",computed:"計算",api:"API",other:"その他"}[D]||D}function j(D){var u,C;const k=a.getElementConfig(D);if(k!=null&&k.elementType&&de[k.elementType])return de[k.elementType];if((u=k==null?void 0:k.note)!=null&&u.displayType)return ie[k.note.displayType]||"#60a5fa";if(!(k!=null&&k.sourceBinding)){const $=((C=k==null?void 0:k.note)==null?void 0:C.type)||"info";return{info:"#60a5fa",warning:"#fbbf24",todo:"#10b981",question:"#a78bfa"}[$]||"#60a5fa"}return k.sourceBinding.isStatic?"#10b981":k.sourceBinding.type==="v-model"?"#8b5cf6":k.sourceBinding.type==="api"?"#f59e0b":"#60a5fa"}function Q(D){var _,z,N,f,y;const k=a.noteHighlightFilter;if(k==="all")return!0;const u=a.getElementConfig(D);if(!u)return!1;const C=(_=u.note)==null?void 0:_.displayType,$=!!((z=u.note)!=null&&z.condition||(N=u.note)!=null&&N.conditionColumn),R=!!((f=u.note)!=null&&f.storedCalc);switch(k){case"db":return C==="db_direct"||C==="db_formatted";case"calculated":return C==="calculated";case"storedCalc":return R;case"static":return C==="static";case"conditional":return $;case"action":return u.elementType==="action";case"form":return u.elementType==="form";case"other":return C==="other"||!C&&!u.elementType&&!!((y=u.note)!=null&&y.text);default:return!0}}function me(){var $,R;const D=document.querySelector("dialog[open]");if(D)return D;const k=document.querySelectorAll('[role="dialog"], [role="alertdialog"]');for(const _ of k){const z=_.getBoundingClientRect();if(z.width>0&&z.height>0)return _}const u='.v-overlay--active .v-overlay__content, .el-dialog__wrapper:not([style*="display: none"]) .el-dialog, .modal.show .modal-dialog, .modal-overlay[style*="display: block"], .v-dialog--active';try{const _=document.querySelector(u);if(_){const z=_.getBoundingClientRect();if(z.width>0&&z.height>0)return _}}catch{}const C=document.querySelectorAll(".fixed.inset-0, .fixed.inset-x-0.inset-y-0, [data-modal], [data-overlay]");for(const _ of C){if((($=_.dataset)==null?void 0:$.devInspector)!==void 0)continue;const z=getComputedStyle(_),N=parseInt(z.zIndex,10);if(isNaN(N)||N<40)continue;const f=_.getBoundingClientRect();if(f.width>=window.innerWidth*.9&&f.height>=window.innerHeight*.9)return _}for(const _ of document.body.children){if(((R=_.dataset)==null?void 0:R.devInspector)!==void 0)continue;const z=getComputedStyle(_);if(z.position!=="fixed")continue;const N=parseInt(z.zIndex,10);if(isNaN(N)||N<40)continue;const f=_.getBoundingClientRect();if(f.width>=window.innerWidth*.9&&f.height>=window.innerHeight*.9)return _}return null}function ee(D,k){return k.contains(D)}const Z=e.computed(()=>{var R,_,z,N,f,y,re,P,Me,oe,Ie,Ae,$e,we,A,he,Re,Ue,Ke,Ge,Ye,ae,ye,ve,De,ze,M,Oe,nt,Ze,Fe,ge,Pe,st,F,fe,le,be,Xe,Je,tt,_e,ce,dt,je,at,it;const D=O.value,k=q.value;K.value;const u=[];if(!a.isEnabled)return u;const C=me(),$=a.getConfiguredSelectors();for(const Qe of $)try{const ot=document.querySelector(Qe);if(ot){if(C&&!ee(ot,C))continue;const se=ot.getBoundingClientRect(),i=a.getElementConfig(Qe),J=((R=i==null?void 0:i.sourceBinding)==null?void 0:R.isStatic)||!1,Y=((_=i==null?void 0:i.sourceBinding)==null?void 0:_.type)||"";let L="",X="";const Ve=(z=i==null?void 0:i.note)==null?void 0:z.displayType,Ee=[];if((N=i==null?void 0:i.note)!=null&&N.sampleValue?Ee.push(`例: ${i.note.sampleValue}${i.note.unit?i.note.unit:""}`):(f=i==null?void 0:i.note)!=null&&f.unit&&Ee.push(`単位: ${i.note.unit}`),(y=i==null?void 0:i.note)!=null&&y.decimalHandling){const x={round:"四捨五入",floor:"切り捨て",ceil:"切り上げ",decimal_1:"小数第1位",decimal_2:"小数第2位",integer:"整数"};Ee.push(x[i.note.decimalHandling]||i.note.decimalHandling)}(re=i==null?void 0:i.note)!=null&&re.nullDisplay&&Ee.push(`NULL時: ${i.note.nullDisplay}`),(P=i==null?void 0:i.note)!=null&&P.displayFormat&&Ee.push(i.note.displayFormat);const Se=Ee.length>0?`
${Ee.join(" / ")}`:"",Le=!!((Me=i==null?void 0:i.note)!=null&&Me.condition||(oe=i==null?void 0:i.note)!=null&&oe.conditionColumn);let ne="";if(Le){const x={hidden:"非表示",disabled:"無効化",different_value:"別の値",empty:"空欄"},Be=[];(Ie=i==null?void 0:i.note)!=null&&Ie.condition&&Be.push(i.note.condition),(Ae=i==null?void 0:i.note)!=null&&Ae.conditionColumn&&Be.push(`判定: ${i.note.conditionColumn}`),($e=i==null?void 0:i.note)!=null&&$e.hiddenBehavior&&Be.push(`不一致時: ${x[i.note.hiddenBehavior]||i.note.hiddenBehavior}`),(we=i==null?void 0:i.note)!=null&&we.hiddenNote&&Be.push(`→ ${i.note.hiddenNote}`),ne=`
条件: ${Be.join(" / ")}`}const W=Le?" ⚡":"";if((i==null?void 0:i.elementType)==="action"&&(i!=null&&i.actionInfo)){const x=i.actionInfo;x.type==="navigate"?L=`遷移: ${x.target||"?"}`:x.type==="api"?L=`API: ${x.method||"GET"} ${x.target||"?"}`:x.type==="modal"?L=`モーダル: ${x.target||"?"}`:x.type==="emit"?L=`イベント: ${x.target||"?"}`:x.type==="function"?L=`関数: ${x.target||"?"}`:L="アクション",X=(x.description||L)+((A=i==null?void 0:i.note)!=null&&A.text?`
${i.note.text}`:"")}else if((i==null?void 0:i.elementType)==="form"&&(i!=null&&i.formInfo)){const x=i.formInfo,Be=(he=i==null?void 0:i.fieldInfoList)!=null&&he.length?i.fieldInfoList:i!=null&&i.fieldInfo?[i.fieldInfo]:[],ue=Be.length>0?Be.map(B=>`${B.table}.${B.column}`).join(", "):"",s=Be.length>0?`${Be[0].table}.${Be[0].column}`:"",o=s?a.getMasterDefinition(s):null;x.inputType==="select"?L=`選択: ${ue||x.description||"?"}${o?` (${o.entries.length}件)`:""}`:x.inputType==="textarea"?L=`テキスト: ${ue||x.description||"?"}`:x.inputType==="checkbox"?L=`チェック: ${ue||x.description||"?"}`:x.inputType==="radio"?L=`ラジオ: ${ue||x.description||"?"}`:L=`入力: ${ue||x.description||x.inputType||"?"}`,x.required&&(L+=" (必須)");const m=[];x.description&&m.push(x.description),(Re=x.validation)!=null&&Re.length&&m.push(`検証: ${x.validation.join(", ")}`),x.placeholder&&m.push(`placeholder: ${x.placeholder}`),x.defaultValue&&m.push(`初期値: ${x.defaultValue}`),X=m.join(`
`)+((Ue=i==null?void 0:i.note)!=null&&Ue.text?`
${i.note.text}`:"")}else if((i==null?void 0:i.elementType)==="action")L="アクション",X=((Ke=i==null?void 0:i.note)==null?void 0:Ke.text)||"";else if((i==null?void 0:i.elementType)==="form")L="フォーム",X=((Ge=i==null?void 0:i.note)==null?void 0:Ge.text)||"";else if(Ve==="db_direct"){const x=(Ye=i==null?void 0:i.fieldInfoList)!=null&&Ye.length?i.fieldInfoList:i!=null&&i.fieldInfo?[i.fieldInfo]:[];if(x.length>0){const Be=x.map(m=>`${m.table}.${m.column}`).join(", "),ue=`${x[0].table}.${x[0].column}`,s=a.getMasterDefinition(ue),o=s?` (${s.entries.length}値)`:"";L=`DB: ${Be}${o}${W}`,X=x.map(m=>`${m.table}.${m.column}${m.type?` (${m.type})`:""}`).join(`
`)+Se+ne+((ae=i==null?void 0:i.note)!=null&&ae.text?`
${i.note.text}`:"")}}else if(Ve==="db_formatted"){const x=(ye=i==null?void 0:i.fieldInfoList)!=null&&ye.length?i.fieldInfoList:i!=null&&i.fieldInfo?[i.fieldInfo]:[];if(x.length>0){const Be=x.map(m=>`${m.table}.${m.column}`).join(", "),ue=`${x[0].table}.${x[0].column}`,s=a.getMasterDefinition(ue),o=s?` (${s.entries.length}値)`:"";L=`DB: ${Be} (整形)${o}${W}`,X=x.map(m=>`${m.table}.${m.column}`).join(`
`)+((ve=i==null?void 0:i.note)!=null&&ve.formatDescription?`
整形: ${i.note.formatDescription}`:"")+Se+ne+((De=i==null?void 0:i.note)!=null&&De.text?`
${i.note.text}`:"")}}else Ve==="calculated"?(L="計算値"+((ze=i==null?void 0:i.note)!=null&&ze.unit?` (${i.note.unit})`:"")+W,X=(((M=i==null?void 0:i.note)==null?void 0:M.calcDescription)||"計算値")+((nt=(Oe=i==null?void 0:i.note)==null?void 0:Oe.calcSources)!=null&&nt.length?`
参照: ${i.note.calcSources.join(", ")}`:"")+Se+ne+((Ze=i==null?void 0:i.note)!=null&&Ze.text?`
${i.note.text}`:"")):Ve==="static"?(L="固定"+W,X=(((Fe=i==null?void 0:i.note)==null?void 0:Fe.text)||"固定文言")+ne):Ve==="other"?(L="メモ",X=((ge=i==null?void 0:i.note)==null?void 0:ge.text)||""):(Pe=i==null?void 0:i.fieldInfoList)!=null&&Pe.length||(st=i==null?void 0:i.fieldInfo)!=null&&st.table&&((F=i==null?void 0:i.fieldInfo)!=null&&F.column)?(L=`DB: ${((fe=i==null?void 0:i.fieldInfoList)!=null&&fe.length?i.fieldInfoList:i!=null&&i.fieldInfo?[i.fieldInfo]:[]).map(ue=>`${ue.table}.${ue.column}`).join(", ")}`,X=((le=i==null?void 0:i.note)==null?void 0:le.text)||""):J?(L="固定",X=((be=i==null?void 0:i.note)==null?void 0:be.text)||"固定文言"):Y==="v-model"?(L="フォーム",X=((Xe=i==null?void 0:i.note)==null?void 0:Xe.text)||""):Y==="api"?(L="データ",X=((Je=i==null?void 0:i.note)==null?void 0:Je.text)||""):(tt=i==null?void 0:i.note)!=null&&tt.type?(L={info:"情報",warning:"注意",todo:"TODO",question:"質問"}[i.note.type]||"メモ",X=((_e=i==null?void 0:i.note)==null?void 0:_e.text)||""):(L="メモ",X=((ce=i==null?void 0:i.note)==null?void 0:ce.text)||"");const Ne=X||((dt=i==null?void 0:i.note)==null?void 0:dt.text)||"",et=((je=i==null?void 0:i.note)==null?void 0:je.type)||"info",We=!!((at=i==null?void 0:i.note)!=null&&at.text||(it=i==null?void 0:i.note)!=null&&it.displayType);u.push({selector:Qe,top:`${se.top+D}px`,left:`${se.left+k}px`,width:`${se.width}px`,height:`${se.height}px`,color:j(Qe),isStatic:J,label:L,noteText:Ne,noteType:et,hasNote:We})}}catch{}return u}),g=e.computed(()=>{var $;const D=O.value,k=q.value;K.value;const u=[];if(!a.isEnabled||a.scanResults.length===0)return u;const C=me();for(const R of a.scanResults)try{const _=document.querySelector(R.selector);if(_){if(C&&!ee(_,C))continue;const z=_.getBoundingClientRect();u.push({selector:R.selector,top:`${z.top+D}px`,left:`${z.left+k}px`,width:`${z.width}px`,height:`${z.height}px`,isStatic:(($=R.detected.sourceBinding)==null?void 0:$.isStatic)||!1})}}catch{}return u}),ke=e.computed(()=>{var R,_;const D=O.value,k=q.value;K.value;const u=[],C=a.analysisFilter;if(C==="none"||!a.isEnabled||a.analysisResults.length===0)return u;const $=me();for(const z of a.analysisResults){if(!z.matched)continue;const N=z.element;try{const f=document.querySelector(z.selector);if(!f||$&&!ee(f,$))continue;const y=f.getBoundingClientRect();if(y.width>window.innerWidth*.8||y.height>window.innerHeight*.5)continue;const re=f.querySelector("[data-di-binding]")||(f.hasAttribute("data-di-binding")?f:null);let P="",Me=N.binding||"";const oe=[...N.tags||[]];if(re){const ve=re.getAttribute("data-di-db"),De=re.getAttribute("data-di-binding");ve&&(P=ve,oe.includes("db")||oe.push("db")),De&&(Me=De)}!P&&N.db&&(P=`${N.db.table}.${N.db.column}`,oe.includes("db")||oe.push("db"));let Ie="";N.api&&(Ie=`${N.api.method} ${N.api.endpoint}`,oe.includes("api")||oe.push("api"));let Ae="";if(Me){const ve=a.getApiSourceForBinding(Me);ve&&ve.endpoint?Ae=`${ve.method||"GET"} ${ve.endpoint}`:ve&&ve.composable&&(Ae=ve.composable)}const $e=(R=N.conditional)==null?void 0:R.expression,we=(_=N.modal)==null?void 0:_.target,A=!!P||oe.includes("db"),he=!!Ie||oe.includes("api"),Re=oe.includes("form"),Ue=oe.includes("button"),Ke=oe.includes("link"),Ge=oe.includes("modal"),Ye=oe.includes("conditional"),ae=oe.includes("computed");if(C==="db-api"){if(!A&&!he)continue}else if(C==="form"){if(!Re)continue}else if(C==="button"){if(!Ue)continue}else if(C==="link"){if(!Ke)continue}else if(C==="modal"){if(!Ge)continue}else if(C==="conditional"){if(!Ye)continue}else if(C==="computed"){if(!ae)continue}else if(C==="other"&&(A||he||Re||Ue||Ke||Ge||Ye||ae))continue;let ye="other";A?ye="db":he?ye="api":Re?ye="form":Ue?ye="button":Ke?ye="link":Ge?ye="modal":Ye?ye="conditional":ae&&(ye="computed"),u.push({selector:z.selector,top:`${y.top+D}px`,left:`${y.left+k}px`,width:`${y.width}px`,height:`${y.height}px`,tags:oe,primaryTag:ye,text:N.text||Me||"",dbInfo:P,apiInfo:Ie,apiSource:Ae,conditionalExpr:$e,modalTarget:we})}catch{}}return u}),He=e.computed(()=>{const D=O.value,k=q.value;K.value;const u=[];if(!a.isEnabled||!a.showUnannotatedDetection||a.unannotatedElements.length===0)return u;const C=me();for(const $ of a.unannotatedElements)try{const R=document.querySelector($.selector);if(!R||C&&!ee(R,C))continue;const _=R.getBoundingClientRect();u.push({selector:$.selector,top:`${_.top+D}px`,left:`${_.left+k}px`,width:`${_.width}px`,height:`${_.height}px`,category:$.category,text:$.text})}catch{}return u});function pe(D){if(!a.isPickMode)return;if(D.target.closest("[data-dev-inspector]")){h.value=null,b.value=null,a.setHoveredSelector(null);return}const u=document.elementFromPoint(D.clientX,D.clientY);if(!u||u===document.body||u===document.documentElement){h.value=null,b.value=null,a.setHoveredSelector(null);return}if(u.closest("[data-dev-inspector]"))return;b.value=u;const C=u.getBoundingClientRect();h.value={top:`${C.top+window.scrollY}px`,left:`${C.left+window.scrollX}px`,width:`${C.width}px`,height:`${C.height}px`};const $=a.generateSelector(u);a.setHoveredSelector($)}function Te(D){if(!(!a.isPickMode||D.target.closest("[data-dev-inspector]"))&&(D.preventDefault(),D.stopPropagation(),b.value)){const u=a.generateSelector(b.value);if(a.remapTargetId){a.remapAnnotation(a.remapTargetId,u),a.remapTargetId=null,a.togglePickMode(),a.openPanel();return}a.startEditing(u),a.togglePickMode()}}function te(D){D.key==="Escape"&&a.isPickMode&&(a.remapTargetId=null,a.togglePickMode())}function H(){O.value=window.scrollY,q.value=window.scrollX,K.value++}let Ce=null;return e.onMounted(()=>{window.addEventListener("mousemove",pe,!0),window.addEventListener("click",Te,!0),window.addEventListener("keydown",te),window.addEventListener("scroll",H),window.addEventListener("resize",H);let D=null;Ce=new MutationObserver(()=>{D&&clearTimeout(D),D=setTimeout(()=>{K.value++},100)}),Ce.observe(document.body,{childList:!0,subtree:!0})}),e.onUnmounted(()=>{window.removeEventListener("mousemove",pe,!0),window.removeEventListener("click",Te,!0),window.removeEventListener("keydown",te),window.removeEventListener("scroll",H),window.removeEventListener("resize",H),Ce==null||Ce.disconnect()}),e.watch(()=>a.isPickMode,D=>{D||(h.value=null,b.value=null)}),(D,k)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.unref(a).isInitializing?(e.openBlock(),e.createElementBlock("div",Qu,[...k[1]||(k[1]=[e.createElementVNode("div",{class:"di-loading-content"},[e.createElementVNode("div",{class:"di-loading-spinner"}),e.createElementVNode("span",{class:"di-loading-text"},"Developer Mode 起動中...")],-1)])])):e.createCommentVNode("",!0),e.unref(a).isPickMode&&h.value?(e.openBlock(),e.createElementBlock("div",{key:1,"data-dev-inspector":"",class:"di-highlight",style:e.normalizeStyle({top:h.value.top,left:h.value.left,width:h.value.width,height:h.value.height})},[e.createElementVNode("div",em,e.toDisplayString(e.unref(a).hoveredSelector),1)],4)):e.createCommentVNode("",!0),e.unref(a).isPickMode?(e.openBlock(),e.createElementBlock("div",{key:2,"data-dev-inspector":"",class:"di-pick-banner",style:e.normalizeStyle(e.unref(a).remapTargetId?{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)"}:{})},[e.createElementVNode("span",null,e.toDisplayString(e.unref(a).remapTargetId?"新しい要素をクリックして再設定":"要素をクリックしてメモを追加"),1),k[2]||(k[2]=e.createElementVNode("kbd",null,"ESC",-1)),k[3]||(k[3]=e.createElementVNode("span",{class:"di-pick-hint"},"でキャンセル",-1))],4)):e.createCommentVNode("",!0),e.unref(a).isEnabled&&!e.unref(a).isPickMode&&!e.unref(a).editingElementId?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:3},e.renderList(Z.value,u=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{key:u.selector,"data-dev-inspector":"",class:e.normalizeClass([u.hasNote?"di-note-highlight":"di-annotation-box",{"di-element-hovered-pulse":e.unref(a).hoveredSelector===u.selector}]),style:e.normalizeStyle({top:u.top,left:u.left,width:u.width,height:u.height,borderColor:(u.hasNote,u.color),backgroundColor:e.unref(a).hoveredSelector===u.selector?u.color+"30":u.color+(u.hasNote?"18":"15")}),onClick:C=>e.unref(a).startEditing(u.selector)},[u.hasNote?(e.openBlock(),e.createElementBlock("div",om,[e.createElementVNode("span",{class:"di-note-indicator",style:e.normalizeStyle({backgroundColor:u.color})},null,4),e.createElementVNode("div",{class:"di-annotation-label",style:e.normalizeStyle({backgroundColor:u.color})},e.toDisplayString(u.label),5)])):(e.openBlock(),e.createElementBlock("div",{key:1,class:"di-annotation-label",style:e.normalizeStyle({backgroundColor:u.color})},e.toDisplayString(u.label),5))],14,tm)),[[e.vShow,!u.hasNote||e.unref(a).showNoteHighlights&&Q(u.selector)]])),128)):e.createCommentVNode("",!0),e.unref(a).isEnabled&&!e.unref(a).editingElementId&&g.value.length>0&&e.unref(a).analysisResults.length===0?(e.openBlock(),e.createElementBlock(e.Fragment,{key:4},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.value,u=>(e.openBlock(),e.createElementBlock("div",{key:"scan-"+u.selector,"data-dev-inspector":"",class:e.normalizeClass(["di-scan-highlight",{"di-scan-static":u.isStatic}]),style:e.normalizeStyle({top:u.top,left:u.left,width:u.width,height:u.height}),onClick:C=>e.unref(a).startEditing(u.selector)},[e.createElementVNode("div",{class:e.normalizeClass(["di-scan-label",{"di-scan-label-static":u.isStatic}])},e.toDisplayString(u.isStatic?"固定文言":"動的データ"),3)],14,lm))),128)),e.createElementVNode("div",nm,[e.createElementVNode("span",null,e.toDisplayString(g.value.length)+"件の要素を検出",1),e.createElementVNode("button",{onClick:k[0]||(k[0]=u=>e.unref(a).clearScanResults()),class:"di-scan-banner-close"},"✕ 閉じる")])],64)):e.createCommentVNode("",!0),e.unref(a).isEnabled&&!e.unref(a).editingElementId&&ke.value.length>0?(e.openBlock(),e.createElementBlock(e.Fragment,{key:5},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(ke.value,u=>(e.openBlock(),e.createElementBlock("div",{key:"analysis-"+u.selector,"data-dev-inspector":"",class:e.normalizeClass(["di-analysis-highlight","di-analysis-"+u.primaryTag]),style:e.normalizeStyle({top:u.top,left:u.left,width:u.width,height:u.height}),onClick:C=>e.unref(a).startEditing(u.selector)},[e.createElementVNode("div",{class:e.normalizeClass(["di-analysis-label","di-analysis-label-"+u.primaryTag])},[e.createElementVNode("span",im,e.toDisplayString(S(u.primaryTag)),1),u.tags.length>1?(e.openBlock(),e.createElementBlock("span",sm,"+"+e.toDisplayString(u.tags.length-1),1)):e.createCommentVNode("",!0),u.dbInfo?(e.openBlock(),e.createElementBlock("span",dm,e.toDisplayString(u.dbInfo),1)):e.createCommentVNode("",!0),u.apiSource?(e.openBlock(),e.createElementBlock("span",rm,"← "+e.toDisplayString(u.apiSource),1)):e.createCommentVNode("",!0),u.conditionalExpr?(e.openBlock(),e.createElementBlock("span",cm,e.toDisplayString(u.conditionalExpr),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"di-analysis-delete",onClick:e.withModifiers(C=>e.unref(a).removeAnalysisResult(u.selector),["stop"]),title:"この要素を非表示"},"×",8,um)],2),u.text&&u.text.length<30?(e.openBlock(),e.createElementBlock("div",mm,e.toDisplayString(u.text),1)):e.createCommentVNode("",!0)],14,am))),128)),e.createElementVNode("div",pm,[e.createElementVNode("span",null,"📊 分析データ: "+e.toDisplayString(ke.value.length)+"件の要素",1)])],64)):e.createCommentVNode("",!0),e.unref(a).isEnabled&&!e.unref(a).isPickMode&&!e.unref(a).editingElementId&&He.value.length>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:6},e.renderList(He.value,u=>(e.openBlock(),e.createElementBlock("div",{key:"unannotated-"+u.selector,"data-dev-inspector":"",class:e.normalizeClass(["di-unannotated-highlight",{"di-unannotated-hovered":e.unref(a).hoveredUnannotatedSelector===u.selector,["di-unannotated-hovered-"+u.category]:e.unref(a).hoveredUnannotatedSelector===u.selector}]),style:e.normalizeStyle({top:u.top,left:u.left,width:u.width,height:u.height}),onClick:C=>e.unref(a).quickAnnotate(u.selector,u.category==="form"?"form":u.category==="action"?"action":"datasource")},[e.createElementVNode("div",{class:e.normalizeClass(["di-unannotated-label",{["di-unannotated-label-"+u.category]:e.unref(a).hoveredUnannotatedSelector===u.selector}])},[e.createElementVNode("span",null,e.toDisplayString(u.category==="binding"?"DB":u.category==="form"?"Form":"Act"),1),u.text?(e.openBlock(),e.createElementBlock("span",fm,e.toDisplayString(u.text),1)):e.createCommentVNode("",!0)],2)],14,vm))),128)):e.createCommentVNode("",!0)]))}}),Qt=gt(Vm,[["__scopeId","data-v-ea64398c"]]),Em={class:"di-editor-modal"},km={class:"di-editor-header"},hm={class:"di-header-actions"},ym={class:"di-path-badge"},gm={class:"di-editor-content"},bm={class:"di-form-group"},Nm={class:"di-form-group"},Bm={class:"di-form-section"},xm={class:"di-form-section-header"},Cm={class:"di-api-header-actions"},wm={class:"di-dropdown-wrapper"},Dm={key:1,class:"di-suggestion-dropdown"},$m={key:0,class:"di-suggestion-actions"},_m=["onMousedown","disabled"],Sm={class:"di-suggestion-endpoint"},Tm={key:0,class:"di-suggestion-timing"},Mm={key:1,class:"di-suggestion-empty"},Im={key:0,class:"di-suggestion-banner"},Um={key:1,class:"di-suggestion-banner di-suggestion-banner-empty"},Fm={key:2,class:"di-empty-hint"},Lm={class:"di-api-entry-row"},Pm=["onUpdate:modelValue"],Am=["value"],zm=["onUpdate:modelValue"],Om=["onClick"],jm={class:"di-api-entry-row2"},qm=["onUpdate:modelValue"],Hm=["onUpdate:modelValue"],Rm=["value"],Km={class:"di-form-section"},Gm={class:"di-auth-row"},Ym={key:0,class:"di-auth-details"},Xm={class:"di-form-group"},Wm={class:"di-form-group"},Zm={class:"di-form-group"},Jm={class:"di-form-group"},Qm={class:"di-editor-footer"},ep={class:"di-editor-actions"},tp=["disabled"],op=e.defineComponent({__name:"DevScreenEditor",setup(U){const a=mt.useDevInspectorStore(),h=e.ref(""),b=e.ref(""),O=e.ref([]),q=e.ref(!1),K=e.ref(""),ie=e.ref(""),de=e.ref(""),S=e.ref(""),j=e.ref(!1),Q=e.ref([]),me=e.ref(!1),ee=e.computed(()=>typeof window<"u"?window.location.pathname:"/");e.watch(()=>a.editingScreen,N=>{N&&Z()});function Z(){var f,y,re,P;const N=a.getScreenConfig();N?(h.value=N.name,b.value=N.description||"",O.value=N.apis.map(Me=>({...Me})),q.value=((f=N.auth)==null?void 0:f.required)||!1,K.value=((re=(y=N.auth)==null?void 0:y.roles)==null?void 0:re.join(", "))||"",ie.value=((P=N.auth)==null?void 0:P.description)||"",de.value=N.figmaUrl||"",S.value=N.notes||""):g()}function g(){h.value="",b.value="",O.value=[],q.value=!1,K.value="",ie.value="",de.value="",S.value=""}function ke(){a.editingScreen=!1,g()}function He(){O.value.push({method:"GET",endpoint:"",description:"",loadTiming:"onMount"})}function pe(N){O.value.splice(N,1)}function Te(){if(!h.value.trim())return;const N={path:ee.value,name:h.value.trim(),description:b.value.trim()||void 0,apis:O.value.filter(f=>f.endpoint.trim()),auth:q.value||K.value.trim()?{required:q.value,roles:K.value.trim()?K.value.split(",").map(f=>f.trim()).filter(Boolean):void 0,description:ie.value.trim()||void 0}:void 0,figmaUrl:de.value.trim()||void 0,notes:S.value.trim()||void 0,updatedAt:new Date().toISOString()};a.setScreenConfig(N),ke()}function te(){a.deleteScreenConfig(ee.value),ke()}const H={GET:"#10b981",POST:"#3b82f6",PUT:"#f59e0b",DELETE:"#ef4444",PATCH:"#8b5cf6"},Ce={onMount:"読込時",action:"アクション",conditional:"条件付き"};function D(){Q.value=a.suggestScreenApis(),j.value=!0}function k(N){return O.value.some(f=>f.method===N.method&&f.endpoint===N.endpoint)}const u=e.computed(()=>Q.value.filter(N=>!k(N)));function C(N){k(N)||O.value.push({...N})}function $(){for(const N of u.value)O.value.push({...N})}function R(){setTimeout(()=>{me.value=!1},150)}const _=["GET","POST","PUT","DELETE","PATCH"],z=[{value:"onMount",label:"画面読込時"},{value:"action",label:"アクション時"},{value:"conditional",label:"条件付き"}];return(N,f)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.unref(a).editingScreen?(e.openBlock(),e.createElementBlock("div",{key:0,class:"di-editor-overlay",onClick:e.withModifiers(ke,["self"]),"data-dev-inspector":""},[e.createElementVNode("div",Em,[e.createElementVNode("div",km,[f[9]||(f[9]=e.createElementVNode("h3",null,"画面情報を編集",-1)),e.createElementVNode("div",hm,[e.createElementVNode("span",ym,e.toDisplayString(ee.value),1),e.createElementVNode("button",{onClick:ke,class:"di-editor-close"},[e.createVNode(e.unref(lt),{style:{width:"20px",height:"20px"}})])])]),e.createElementVNode("div",gm,[e.createElementVNode("div",bm,[f[10]||(f[10]=e.createElementVNode("label",{class:"di-form-label"},"画面名 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":f[0]||(f[0]=y=>h.value=y),type:"text",placeholder:"ユーザー詳細",class:"di-input"},null,512),[[e.vModelText,h.value]])]),e.createElementVNode("div",Nm,[f[11]||(f[11]=e.createElementVNode("label",{class:"di-form-label"},"画面の説明",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":f[1]||(f[1]=y=>b.value=y),rows:"2",placeholder:"この画面の概要...",class:"di-textarea"},null,512),[[e.vModelText,b.value]])]),e.createElementVNode("div",Bm,[e.createElementVNode("div",xm,[f[15]||(f[15]=e.createElementVNode("label",{class:"di-form-label"},"API一覧",-1)),e.createElementVNode("div",Cm,[e.createElementVNode("button",{onClick:D,class:"di-btn-suggest",title:"要素情報からAPI推定"},[e.createVNode(e.unref(yt),{style:{width:"13px",height:"13px"}}),f[12]||(f[12]=e.createTextVNode(" 自動推定 ",-1))]),e.createElementVNode("div",wm,[Q.value.length>0?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:f[2]||(f[2]=y=>me.value=!me.value),onBlur:f[3]||(f[3]=y=>R()),class:"di-btn-dropdown",title:"推定結果から選択"},[e.createVNode(e.unref(xt),{style:{width:"13px",height:"13px"}}),f[13]||(f[13]=e.createTextVNode(" 候補から選択 ",-1))],32)):e.createCommentVNode("",!0),me.value&&Q.value.length>0?(e.openBlock(),e.createElementBlock("div",Dm,[u.value.length>0?(e.openBlock(),e.createElementBlock("div",$m,[e.createElementVNode("button",{onMousedown:e.withModifiers($,["prevent"]),class:"di-suggestion-add-all"}," すべて追加 ("+e.toDisplayString(u.value.length)+") ",33)])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Q.value,(y,re)=>(e.openBlock(),e.createElementBlock("button",{key:re,onMousedown:e.withModifiers(P=>C(y),["prevent"]),class:e.normalizeClass(["di-suggestion-item",{"di-suggestion-added":k(y)}]),disabled:k(y)},[e.createElementVNode("span",{class:"di-suggestion-method",style:e.normalizeStyle({backgroundColor:H[y.method]+"20",color:H[y.method]})},e.toDisplayString(y.method),5),e.createElementVNode("code",Sm,e.toDisplayString(y.endpoint),1),y.loadTiming?(e.openBlock(),e.createElementBlock("span",Tm,e.toDisplayString(Ce[y.loadTiming]||y.loadTiming),1)):e.createCommentVNode("",!0),k(y)?(e.openBlock(),e.createBlock(e.unref(Oo),{key:1,style:{width:"12px",height:"12px",color:"#10b981","flex-shrink":"0"}})):e.createCommentVNode("",!0)],42,_m))),128)),Q.value.length===0?(e.openBlock(),e.createElementBlock("div",Mm," 推定結果がありません ")):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),e.createElementVNode("button",{onClick:He,class:"di-btn-add"},[e.createVNode(e.unref(pt),{style:{width:"14px",height:"14px"}}),f[14]||(f[14]=e.createTextVNode(" 手動追加 ",-1))])])]),j.value&&Q.value.length>0&&u.value.length>0?(e.openBlock(),e.createElementBlock("div",Im,[e.createVNode(e.unref(yt),{style:{width:"13px",height:"13px",color:"#f59e0b","flex-shrink":"0"}}),e.createElementVNode("span",null,e.toDisplayString(Q.value.length)+"件のAPIを推定しました",1),e.createElementVNode("button",{onMousedown:e.withModifiers($,["prevent"]),class:"di-suggestion-banner-btn"},"すべて追加",32)])):j.value&&Q.value.length===0?(e.openBlock(),e.createElementBlock("div",Um,[...f[16]||(f[16]=[e.createElementVNode("span",null,"要素のDB情報からAPIを推定できませんでした。要素にDB情報を登録してください。",-1)])])):e.createCommentVNode("",!0),O.value.length===0&&!j.value?(e.openBlock(),e.createElementBlock("div",Fm," APIが未登録です。「自動推定」で要素情報からAPIを推定できます。 ")):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(O.value,(y,re)=>(e.openBlock(),e.createElementBlock("div",{key:re,class:"di-api-entry"},[e.createElementVNode("div",Lm,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":P=>y.method=P,class:"di-select di-select-method"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(_,P=>e.createElementVNode("option",{key:P,value:P},e.toDisplayString(P),9,Am)),64))],8,Pm),[[e.vModelSelect,y.method]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":P=>y.endpoint=P,type:"text",placeholder:"/api/users/:id",class:"di-input di-input-endpoint"},null,8,zm),[[e.vModelText,y.endpoint]]),e.createElementVNode("button",{onClick:P=>pe(re),class:"di-btn-remove"},[e.createVNode(e.unref(Jo),{style:{width:"14px",height:"14px"}})],8,Om)]),e.createElementVNode("div",jm,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":P=>y.description=P,type:"text",placeholder:"説明（任意）",class:"di-input di-input-desc"},null,8,qm),[[e.vModelText,y.description]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":P=>y.loadTiming=P,class:"di-select di-select-timing"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(z,P=>e.createElementVNode("option",{key:P.value,value:P.value},e.toDisplayString(P.label),9,Rm)),64))],8,Hm),[[e.vModelSelect,y.loadTiming]])])]))),128))]),e.createElementVNode("div",Km,[f[20]||(f[20]=e.createElementVNode("label",{class:"di-form-label"},"認証設定",-1)),e.createElementVNode("div",Gm,[e.createElementVNode("button",{onClick:f[4]||(f[4]=y=>q.value=!q.value),class:e.normalizeClass(["di-toggle-btn",{active:q.value}])},[e.createElementVNode("span",{class:e.normalizeClass(["di-toggle-knob",{active:q.value}])},null,2)],2),f[17]||(f[17]=e.createElementVNode("span",{class:"di-auth-label"},"ログイン必須",-1))]),q.value?(e.openBlock(),e.createElementBlock("div",Ym,[e.createElementVNode("div",Xm,[f[18]||(f[18]=e.createElementVNode("label",{class:"di-form-label"},"必要ロール（カンマ区切り）",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":f[5]||(f[5]=y=>K.value=y),type:"text",placeholder:"admin, manager",class:"di-input"},null,512),[[e.vModelText,K.value]])]),e.createElementVNode("div",Wm,[f[19]||(f[19]=e.createElementVNode("label",{class:"di-form-label"},"認証メモ",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":f[6]||(f[6]=y=>ie.value=y),type:"text",placeholder:"自分のデータのみ閲覧可",class:"di-input"},null,512),[[e.vModelText,ie.value]])])])):e.createCommentVNode("",!0)]),e.createElementVNode("div",Zm,[f[21]||(f[21]=e.createElementVNode("label",{class:"di-form-label"},"Figma URL",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":f[7]||(f[7]=y=>de.value=y),type:"text",placeholder:"https://www.figma.com/design/...",class:"di-input"},null,512),[[e.vModelText,de.value]])]),e.createElementVNode("div",Jm,[f[22]||(f[22]=e.createElementVNode("label",{class:"di-form-label"},"メモ",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":f[8]||(f[8]=y=>S.value=y),rows:"3",placeholder:"この画面に関するメモ...",class:"di-textarea"},null,512),[[e.vModelText,S.value]])])]),e.createElementVNode("div",Qm,[e.createElementVNode("button",{onClick:te,class:"di-btn-delete"},[e.createVNode(e.unref(ft),{style:{width:"14px",height:"14px"}}),f[23]||(f[23]=e.createTextVNode(" 削除 ",-1))]),e.createElementVNode("div",ep,[e.createElementVNode("button",{onClick:ke,class:"di-btn-cancel"},"キャンセル"),e.createElementVNode("button",{onClick:Te,class:"di-btn-save",disabled:!h.value.trim()},[e.createVNode(e.unref(Wt),{style:{width:"14px",height:"14px"}}),f[24]||(f[24]=e.createTextVNode(" 保存 ",-1))],8,tp)])])])])):e.createCommentVNode("",!0)]))}}),eo=gt(op,[["__scopeId","data-v-a3b58e7a"]]),lp={key:0,"data-dev-inspector":""},to=e.defineComponent({__name:"DevInspector",props:{storageKey:{default:"devInspector:elementConfigs"},enabledInProduction:{type:Boolean,default:!1},initialAnnotations:{},analysisData:{},analysisDataUrl:{},autoLoadAnalysis:{type:Boolean},autoApplyAnalysis:{type:Boolean}},setup(U){const a=U,h=mt.useDevInspectorStore();return e.onMounted(()=>{h.init({storageKey:a.storageKey,enabledInProduction:a.enabledInProduction,initialAnnotations:a.initialAnnotations})}),(b,O)=>e.unref(h).isAvailable?(e.openBlock(),e.createElementBlock("div",lp,[e.createVNode(Zt),e.createVNode(Jt),e.createVNode(eo),e.createVNode(Qt)])):e.createCommentVNode("",!0)}}),oo={install(U,a={}){const{autoRegister:h=!0,...b}=a;h&&U.component("DevInspector",to),U.provide("devInspectorOptions",b)}};exports.useDevInspector=mt.useDevInspector;exports.useDevInspectorStore=mt.useDevInspectorStore;exports.vitePluginDevInspector=Uo.default;exports.DevElementEditor=Jt;exports.DevInspector=to;exports.DevPanel=Zt;exports.DevPickOverlay=Qt;exports.DevScreenEditor=eo;exports.VueDevInspector=oo;exports.default=oo;
