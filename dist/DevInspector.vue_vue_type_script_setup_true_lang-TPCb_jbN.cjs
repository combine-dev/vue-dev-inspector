"use strict";const e=require("vue"),Ut=require("./useDevInspector-DvcI3OAa.cjs");/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var At={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=A=>A.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),U=(A,m)=>({size:s,strokeWidth:b=2,absoluteStrokeWidth:_,color:G,class:j,...W},{attrs:te,slots:S})=>e.h("svg",{...At,width:s||At.width,height:s||At.height,stroke:G||At.stroke,"stroke-width":_?Number(b)*24/Number(s):b,...te,class:["lucide",`lucide-${qo(A)}`],...W},[...m.map(Q=>e.h(...Q)),...S.default?[S.default()]:[]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=U("AlertCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=U("AlertTriangleIcon",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=U("ArrowUpDownIcon",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=U("BarChart3Icon",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=U("CalculatorIcon",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=U("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=U("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=U("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=U("ClipboardListIcon",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=U("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=U("CodeIcon",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=U("DatabaseIcon",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=U("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=U("ExternalLinkIcon",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=U("EyeOffIcon",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=U("EyeIcon",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=U("FileSpreadsheetIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=U("FileTextIcon",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=U("FormInputIcon",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M17 12h.01",key:"1m0b6t"}],["path",{d:"M7 12h.01",key:"eqddd0"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=U("GitBranchIcon",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=U("GitMergeIcon",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=U("ListIcon",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=U("LockIcon",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=U("MailIcon",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=U("MessageSquareIcon",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=U("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=U("MousePointer2Icon",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=U("PenLineIcon",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=U("PenSquareIcon",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=U("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=U("SaveIcon",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=U("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=U("ServerIcon",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=U("ShieldQuestionIcon",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=U("ShieldIcon",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=U("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=U("TypeIcon",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=U("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=U("Wand2Icon",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=U("XIcon",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=U("ZapIcon",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);async function ul(A,m,s={}){var he;const b=await Promise.resolve().then(()=>require("./xlsx-qn1xoUuv.cjs")),{systemName:_="System",author:G=""}=s,j=new Date,W=`${j.getFullYear()}/${j.getMonth()+1}/${j.getDate()}`,te=b.utils.book_new(),S=[];S.push(["画面機能仕様書","","","","","","","","","","","システム名","","","","",_,"","","","","","画面ID/画面名","","","","",(A==null?void 0:A.name)||"","","","","","","作成者","","","","",G,"","作成日","","","","",W]),S.push([]),S.push(["URL","","","","","","","","","","","画面英語名","","","","","","","","","","","View Component","","","","",(A==null?void 0:A.componentPath)||"","","","","","","Figma URL","","","","",(A==null?void 0:A.figmaUrl)||""]),S.push([]),S.push(["機能概要"]),S.push([(A==null?void 0:A.description)||""]),S.push([]),S.push(["画面レイアウト　figmaURL"]),S.push([(A==null?void 0:A.figmaUrl)||""]),S.push([]),A!=null&&A.apis&&A.apis.length>0&&(S.push(["API一覧"]),S.push(["","メソッド","","エンドポイント","","","","","","","","説明"]),A.apis.forEach(y=>{S.push(["",y.method,"",y.endpoint,"","","","","","","",y.description])}),S.push([])),S.push(["画面項目　ヘッダーフッターは省く"]),S.push(["","No.","","項目名","","","","","","","","","","","","説明","","","","","","","","","","","","","","","","表示条件","","","","","","","","","","","","","","","備考"]),Object.values(m).forEach((y,we)=>{var Ne,Be,re;const ye=y.id;let ve="",Oe="",F="";if((Ne=y.note)!=null&&Ne.text&&(ve=y.note.text),y.fieldInfo&&(ve+=ve?`
`:"",ve+=`DB: ${y.fieldInfo.table}.${y.fieldInfo.column}`,y.fieldInfo.type&&(ve+=` (${y.fieldInfo.type})`),y.fieldInfo.description&&(ve+=`
${y.fieldInfo.description}`)),y.actionInfo&&(F=`[${{navigate:"画面遷移",api:"API呼び出し",modal:"モーダル表示",emit:"イベント発火",function:"関数実行",csv_export:"CSV出力",csv_import:"CSV取込",email:"メール送信",sort:"ソート"}[y.actionInfo.type]||y.actionInfo.type}]`,y.actionInfo.target&&(F+=` ${y.actionInfo.method||""} ${y.actionInfo.target}`),y.actionInfo.description&&(F+=`
${y.actionInfo.description}`)),y.links){const X=[];y.links.testPath&&X.push(`テスト: ${y.links.testPath}`),y.links.figmaUrl&&X.push(`Figma: ${y.links.figmaUrl}`),y.links.githubIssue&&X.push(`Issue: ${y.links.githubIssue}`),y.links.githubPr&&X.push(`PR: ${y.links.githubPr}`),X.length>0&&(F+=F?`

`:"",F+=X.join(`
`))}if(y.devMeta){const X=[];(Be=y.devMeta.usedStores)!=null&&Be.length&&X.push(`Store: ${y.devMeta.usedStores.join(", ")}`),(re=y.devMeta.usedComponents)!=null&&re.length&&X.push(`Components: ${y.devMeta.usedComponents.join(", ")}`),y.devMeta.accessibility&&X.push(`A11y: ${y.devMeta.accessibility}`),y.devMeta.responsive&&X.push(`Responsive: ${y.devMeta.responsive}`),X.length>0&&(F+=F?`

`:"",F+=`[開発情報]
`+X.join(`
`))}S.push(["",we+1,"",ye,"","","","","","","","","","","",ve,"","","","","","","","","","","","","","","",Oe,"","","","","","","","","","","","","","",F])});const Ee=b.utils.aoa_to_sheet(S);Ee["!cols"]=[{wch:3},{wch:5},{wch:3},{wch:20},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:30},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:20},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:5},{wch:30}],b.utils.book_append_sheet(te,Ee,"画面設計書");const de=`画面仕様書_${((he=A==null?void 0:A.name)==null?void 0:he.replace(/[/\\?%*:|"<>]/g,"-"))||"screen"}_${W.replace(/\//g,"")}.xlsx`;return b.writeFile(te,de),de}const ml={key:0,class:"di-panel","data-dev-inspector":""},pl={class:"di-header"},vl={class:"di-header-title"},fl={class:"di-tab-bar"},kl={key:0,class:"di-tab-badge"},Vl={key:0,class:"di-tab-badge"},El={key:0,class:"di-tab-badge"},hl={key:0,class:"di-tab-badge"},yl={class:"di-edit-section"},gl={class:"di-note-toggle-badge"},bl={key:1,class:"di-note-filter"},Nl={class:"di-filter-buttons"},Bl=["onClick"],Cl={key:2,class:"di-note-filter"},wl={class:"di-filter-buttons"},xl=["onClick"],Dl={key:3,class:"di-element-list-section"},_l={class:"di-element-list-header"},$l={class:"di-count-badge"},Tl={key:0},Sl={class:"di-element-tree"},Ml={key:0,class:"di-tree-group"},Il={class:"di-tree-icon"},Ul={class:"di-count-badge"},Fl={key:0,class:"di-element-list"},Ll=["onDragstart","onClick","onMouseenter"],Pl={class:"di-element-item-body"},Al={class:"di-element-item-label"},zl=["onClick"],Ol={key:1,class:"di-tree-group"},jl={class:"di-tree-icon"},ql={class:"di-count-badge"},Hl={key:0,class:"di-tree-children"},Rl={key:0,class:"di-rename-row"},Kl=["onKeydown","onBlur"],Yl=["onClick","onDragover","onDragleave","onDrop"],Gl={class:"di-tree-icon"},Xl={class:"di-count-badge"},Wl=["onClick"],Zl={key:2},Jl={key:0,class:"di-element-list"},Ql=["onDragstart","onClick","onMouseenter"],en={class:"di-element-item-body"},tn={class:"di-element-item-label"},on=["onClick"],ln={key:1,class:"di-tree-children"},nn={key:0,class:"di-rename-row"},an=["onKeydown","onBlur"],sn=["onClick","onDragover","onDragleave","onDrop"],dn={class:"di-tree-icon"},rn={class:"di-count-badge"},cn=["onClick"],un={key:2},mn={key:0,class:"di-element-list"},pn=["onDragstart","onClick","onMouseenter"],vn={class:"di-element-item-body"},fn={class:"di-element-item-label"},kn=["onClick"],Vn={key:1,class:"di-tree-children"},En={key:0,class:"di-rename-row"},hn=["onKeydown","onBlur"],yn=["onClick","onDragover","onDragleave","onDrop"],gn={class:"di-tree-icon"},bn={class:"di-count-badge"},Nn=["onClick"],Bn={key:2},Cn={key:0,class:"di-element-list"},wn=["onDragstart","onClick","onMouseenter"],xn={class:"di-element-item-body"},Dn={class:"di-element-item-label"},_n=["onClick"],$n={key:2,class:"di-tree-group"},Tn={class:"di-tree-icon"},Sn={class:"di-count-badge"},Mn={key:0,class:"di-tree-children"},In={key:0,class:"di-rename-row"},Un=["onKeydown","onBlur"],Fn=["onClick","onDragover","onDragleave","onDrop"],Ln={class:"di-tree-icon"},Pn={class:"di-count-badge"},An=["onClick"],zn={key:2},On={key:0,class:"di-element-list"},jn=["onDragstart","onClick","onMouseenter"],qn={class:"di-element-item-body"},Hn={class:"di-element-item-label"},Rn=["onClick"],Kn={key:1,class:"di-tree-children"},Yn={key:0,class:"di-rename-row"},Gn=["onKeydown","onBlur"],Xn=["onClick","onDragover","onDragleave","onDrop"],Wn={class:"di-tree-icon"},Zn={class:"di-count-badge"},Jn=["onClick"],Qn={key:2},ea={key:0,class:"di-element-list"},ta=["onDragstart","onClick","onMouseenter"],oa={class:"di-element-item-body"},la={class:"di-element-item-label"},na=["onClick"],aa={key:0,class:"di-tree-subgroup"},ia={key:0,class:"di-rename-row"},sa={class:"di-tree-icon"},da={class:"di-count-badge"},ra={key:2,class:"di-element-list"},ca=["onDragstart","onClick","onMouseenter"],ua={class:"di-element-item-body"},ma={class:"di-element-item-label"},pa=["onClick"],va={key:0,class:"di-unannotated-badge"},fa={key:4,class:"di-unannotated-results"},ka={class:"di-unannotated-summary"},Va={key:0},Ea={key:1},ha={key:2},ya={class:"di-unannotated-list"},ga=["onMouseenter"],ba={class:"di-unannotated-text"},Na=["onClick"],Ba=["onClick"],Ca={key:5,class:"di-unannotated-empty"},wa={key:6,class:"di-broken-warning"},xa={class:"di-broken-header"},Da={class:"di-broken-list"},_a={class:"di-broken-item-info"},$a={class:"di-broken-item-note"},Ta={class:"di-broken-item-selector"},Sa={class:"di-broken-item-actions"},Ma=["onClick"],Ia=["onClick"],Ua={class:"di-broken-actions"},Fa={class:"di-content"},La={class:"di-section"},Pa={class:"di-screen-header"},Aa={class:"di-screen-name"},za={key:0,class:"di-screen-desc"},Oa={key:1,class:"di-auth-badges"},ja={key:0,class:"di-auth-badge di-auth-required"},qa={key:1,class:"di-auth-note"},Ha={key:0,class:"di-card"},Ra={class:"di-card-label"},Ka={class:"di-code-blue"},Ya={key:1,class:"di-card"},Ga={class:"di-card-label"},Xa=["href"],Wa={key:2,class:"di-card"},Za={class:"di-card-label"},Ja={class:"di-api-list"},Qa={class:"di-api-info"},ei={class:"di-api-endpoint"},ti={key:0,class:"di-api-desc"},oi={key:0,class:"di-api-timing-badge"},li={key:3,class:"di-card"},ni={class:"di-card-label"},ai={class:"di-screen-notes"},ii={key:1,class:"di-no-spec"},si={class:"di-card di-cross-search-section"},di={class:"di-cross-search-header"},ri={class:"di-cross-search-body"},ci={class:"di-filter-buttons",style:{"margin-bottom":"8px"}},ui=["onClick"],mi=["placeholder"],pi={key:0,class:"di-cross-search-count"},vi={key:1,class:"di-cross-search-results"},fi={class:"di-cross-search-page-header"},ki={key:0,class:"di-cross-search-page-name"},Vi=["onClick"],Ei={class:"di-cross-search-field"},hi={key:0,class:"di-cross-search-context"},yi={class:"di-card di-screen-flow-section"},gi={key:0,class:"di-screen-flow-badge"},bi={key:0,class:"di-screen-flow-body"},Ni={key:0,class:"di-screen-flow-empty"},Bi={class:"di-flow-node-path"},Ci={key:0,class:"di-flow-node-name"},wi=["onClick"],xi={class:"di-flow-target"},Di={key:0,class:"di-flow-edge-label"},_i={key:1,class:"di-flow-orphans"},$i={class:"di-section"},Ti={class:"di-section-header",style:{"margin-bottom":"8px"}},Si={key:0,class:"di-section-badge"},Mi={class:"di-master-table-name"},Ii=["onClick"],Ui={class:"di-master-item-header"},Fi={class:"di-master-col-name"},Li={key:0,class:"di-master-col-type"},Pi={class:"di-master-item-name"},Ai={class:"di-master-entries-preview"},zi={key:0,class:"di-master-entry-more"},Oi={class:"di-master-editor"},ji={class:"di-master-editor-header"},qi={class:"di-master-editor-body"},Hi={class:"di-master-row"},Ri={class:"di-master-field"},Ki=["disabled"],Yi={class:"di-master-field"},Gi=["disabled"],Xi={class:"di-master-row"},Wi={class:"di-master-field"},Zi={class:"di-master-field"},Ji={class:"di-master-field",style:{"margin-bottom":"12px"}},Qi={class:"di-master-entries-header"},es={class:"di-master-entries-list"},ts=["onUpdate:modelValue"],os=["onUpdate:modelValue"],ls=["onUpdate:modelValue"],ns=["onUpdate:modelValue"],as=["onClick"],is={class:"di-master-entries-header",style:{"margin-top":"16px"}},ss={key:0,class:"di-master-entries-list"},ds=["onUpdate:modelValue"],rs=["value"],cs=["onUpdate:modelValue"],us=["value"],ms=["onUpdate:modelValue"],ps=["onUpdate:modelValue"],vs=["onClick"],fs={key:1,class:"di-master-empty",style:{"margin-top":"4px","font-size":"11px"}},ks={class:"di-master-editor-footer"},Vs=["disabled"],Es={class:"di-section"},hs={class:"di-section-header",style:{"margin-bottom":"8px"}},ys={key:0,class:"di-section-badge"},gs=["onClick"],bs={class:"di-batch-item-info"},Ns={class:"di-batch-item-name"},Bs={key:0,class:"di-batch-item-schedule"},Cs={class:"di-batch-editor"},ws={class:"di-batch-editor-header"},xs={class:"di-batch-editor-body"},Ds={class:"di-batch-row"},_s={class:"di-batch-field"},$s={class:"di-batch-field"},Ts={class:"di-batch-row"},Ss={class:"di-batch-field"},Ms={class:"di-batch-field",style:{"margin-bottom":"12px"}},Is={class:"di-batch-row"},Us={class:"di-batch-field"},Fs={class:"di-batch-tags-input"},Ls=["onClick"],Ps={class:"di-batch-field"},As={class:"di-batch-tags-input"},zs=["onClick"],Os={class:"di-batch-section-label"},js={key:0},qs={class:"di-batch-step-no"},Hs=["onUpdate:modelValue"],Rs=["onUpdate:modelValue"],Ks=["onUpdate:modelValue"],Ys=["onUpdate:modelValue"],Gs=["onClick"],Xs={class:"di-batch-row"},Ws={class:"di-batch-field"},Zs={class:"di-batch-field"},Js={class:"di-batch-row"},Qs={class:"di-batch-field"},ed={class:"di-batch-field"},td={class:"di-batch-editor-footer"},od=["disabled"],ld={class:"di-er-controls"},nd=["onClick"],ad={class:"di-er-grid"},id=["onClick"],sd={class:"di-er-card-header"},dd=["onClick"],rd={class:"di-er-card-columns"},cd={key:0,class:"di-er-col-type"},ud=["onClick"],md={key:0,class:"di-er-empty"},pd=["onKeyup"],vd=["onKeyup"],fd=["onClick","disabled"],kd=["onClick"],Vd={key:0,class:"di-er-card-relations"},Ed={class:"di-er-rel-type"},hd=["onClick"],yd={class:"di-er-add-section"},gd={style:{display:"flex",gap:"6px","flex-wrap":"wrap"}},bd={key:0,class:"di-er-add-form"},Nd=["disabled"],Bd={key:1,class:"di-er-add-form"},Cd=["value"],wd=["value"],xd=["disabled"],Dd={class:"di-export-buttons"},_d={class:"di-action-buttons"},$d={key:0,class:"di-export-summary"},Td={class:"di-export-summary-row"},Sd={class:"di-export-summary-count"},Md={class:"di-export-summary-row"},Id={class:"di-export-summary-count"},Ud={class:"di-export-summary-row"},Fd={class:"di-export-summary-count"},Ld={key:0,class:"di-indicator","data-dev-inspector":""},Pd={class:"di-modal"},Ad=["value"],zd={class:"di-modal-actions"},Od={class:"di-modal"},jd={class:"di-file-drop"},qd={key:0,class:"di-error"},Hd={class:"di-modal-actions"},Rd=["disabled"],Kd=e.defineComponent({__name:"DevPanel",setup(A){const m=e.inject("teleportTarget","body"),s=Ut.useDevInspectorStore(),b=e.ref("elements"),_=e.ref(!1),G=e.ref(!1),j=e.ref(""),W=e.ref(""),te=e.ref(!1),S=e.ref(""),Q=e.ref(""),Ee=e.ref("has_many"),se=e.ref(!1),de=e.ref(""),he=e.ref(null),y=e.ref(""),we=e.ref(""),ye={GET:"#10b981",POST:"#3b82f6",PUT:"#f59e0b",DELETE:"#ef4444",PATCH:"#8b5cf6"},ve=e.computed(()=>s.currentScreenSpec),Oe=e.computed(()=>s.getScreenConfig()),F=e.computed(()=>{var v;const a=Oe.value,t=ve.value;return!a&&!t?null:{name:(a==null?void 0:a.name)||(t==null?void 0:t.name)||"",description:(a==null?void 0:a.description)||(t==null?void 0:t.description)||"",componentPath:(a==null?void 0:a.componentPath)||(t==null?void 0:t.componentPath)||"",figmaUrl:(a==null?void 0:a.figmaUrl)||(t==null?void 0:t.figmaUrl)||"",apis:(a==null?void 0:a.apis)||((v=t==null?void 0:t.apis)==null?void 0:v.map(C=>({...C,loadTiming:void 0})))||[],auth:(a==null?void 0:a.auth)||null,notes:(a==null?void 0:a.notes)||(t!=null&&t.notes?t.notes.join(`
`):"")}}),Ne=e.computed(()=>Object.keys(s.elementConfigs).length),Be=e.computed(()=>{const a=typeof window<"u"?window.location.pathname:"/";return Object.entries(s.elementConfigs).filter(([,t])=>!t.pagePath||t.pagePath===a).map(([t,v])=>{var n,r,d;let C="";return(n=v.note)!=null&&n.text?C=v.note.text:v.fieldInfo?C=`${v.fieldInfo.table}.${v.fieldInfo.column}`:(r=v.actionInfo)!=null&&r.description?C=v.actionInfo.description:(d=v.actionInfo)!=null&&d.type?(C={navigate:"画面遷移",api:"API",modal:"モーダル",emit:"イベント",function:"関数",csv_export:"CSV出力",csv_import:"CSV取込",email:"メール送信"}[v.actionInfo.type]||v.actionInfo.type,v.actionInfo.target&&(C+=` → ${v.actionInfo.target}`)):v.formInfo&&(C=v.formInfo.label||v.formInfo.inputType||"フォーム"),C||(C=t),{id:t,desc:C,type:v.elementType,isConditional:!!v.isConditional,tabContext:v.tabContext||"",modalName:v.modalName||"",config:v}})}),re=e.computed(()=>{const a=s.noteHighlightFilter,t=s.noteTableFilter;let v=Be.value;return t!=="all"&&(v=v.filter(C=>{var d;const n=C.config;return((d=n.fieldInfoList)!=null&&d.length?n.fieldInfoList:n.fieldInfo?[n.fieldInfo]:[]).some(V=>V.table===t||V.table.startsWith(t+"."))})),a==="all"?v:v.filter(C=>{var E,Y,H,at,Pt;const n=C.config,r=(E=n.note)==null?void 0:E.displayType,d=!!((Y=n.note)!=null&&Y.condition||(H=n.note)!=null&&H.conditionColumn),V=!!((at=n.note)!=null&&at.storedCalc);switch(a){case"db":return r==="db_direct"||r==="db_formatted";case"calculated":return r==="calculated";case"storedCalc":return V;case"static":return r==="static";case"conditional":return d;case"action":return n.elementType==="action";case"form":return n.elementType==="form";case"other":return r==="other"||!r&&!n.elementType&&!!((Pt=n.note)!=null&&Pt.text);default:return!0}})}),X=e.computed(()=>re.value.filter(a=>!a.isConditional&&!a.tabContext));function D(a){let t=a.elements.length;for(const v of Object.values(a.children))t+=D(v);return t}function g(a,t){const v={};return a.forEach(C=>{const n=C[t];if(!n)return;const r=n.split(">").map(V=>V.trim()).filter(Boolean);let d=v;for(let V=0;V<r.length;V++){const E=r[V];d[E]||(d[E]={elements:[],children:{}}),V===r.length-1&&d[E].elements.push(C),d=d[E].children}}),v}const p=e.computed(()=>g(re.value.filter(a=>a.tabContext&&!a.isConditional),"tabContext")),w=e.computed(()=>re.value.filter(a=>a.tabContext&&!a.isConditional)),L=e.ref(!0),z=e.ref(!1),N=e.ref({}),B=e.computed(()=>re.value.filter(a=>a.isConditional)),f=e.computed(()=>re.value.filter(a=>a.isConditional&&a.modalName)),h=e.computed(()=>g(f.value,"modalName")),R=e.computed(()=>re.value.filter(a=>a.isConditional&&!a.modalName)),I=e.ref(!1),O=e.ref({}),fe=e.computed(()=>Object.values(s.elementConfigs).filter(a=>{var t,v;return!!((t=a.note)!=null&&t.text||(v=a.note)!=null&&v.displayType)}).length),ee=e.computed(()=>{const a=s.noteHighlightFilter;return a==="all"?fe.value:Object.values(s.elementConfigs).filter(t=>{var r,d,V,E,Y,H,at;if(!((r=t.note)!=null&&r.text||(d=t.note)!=null&&d.displayType||t.elementType))return!1;const v=(V=t.note)==null?void 0:V.displayType,C=!!((E=t.note)!=null&&E.condition||(Y=t.note)!=null&&Y.conditionColumn),n=!!((H=t.note)!=null&&H.storedCalc);switch(a){case"db":return v==="db_direct"||v==="db_formatted";case"calculated":return v==="calculated";case"storedCalc":return n;case"static":return v==="static";case"conditional":return C;case"action":return t.elementType==="action";case"form":return t.elementType==="form";case"other":return v==="other"||!v&&!t.elementType&&!!((at=t.note)!=null&&at.text);default:return!0}}).length}),Ce=e.computed(()=>{var v;const a=new Set,t=typeof window<"u"?window.location.pathname:"/";for(const C of Object.values(s.elementConfigs)){if(C.pagePath&&C.pagePath!==t)continue;const n=(v=C.fieldInfoList)!=null&&v.length?C.fieldInfoList:C.fieldInfo?[C.fieldInfo]:[];for(const r of n)r.table&&(a.add(r.table),r.table.includes(".")&&a.add(r.table.split(".")[0]))}return Array.from(a).sort()});function je(){const a=s.exportConfigs();navigator.clipboard.writeText(a),_.value=!1}function Ge(){const a=s.exportConfigs(),t=new Blob([a],{type:"application/json"}),v=URL.createObjectURL(t),C=document.createElement("a");C.href=v,C.download="dev-mode-configs.json",C.click(),URL.revokeObjectURL(v),_.value=!1}function et(){s.downloadAnnotations()}async function qe(){try{await ul(s.currentScreenSpec,s.elementConfigs,{systemName:"System"})}catch(a){console.error("Failed to export xlsx:",a),alert("xlsx export failed. Make sure xlsx package is installed.")}}function He(){try{s.importConfigs(j.value),j.value="",W.value="",G.value=!1}catch{W.value="JSONの形式が正しくありません"}}function Le(a){var n;const v=(n=a.target.files)==null?void 0:n[0];if(!v)return;const C=new FileReader;C.onload=r=>{var d;j.value=(d=r.target)==null?void 0:d.result},C.readAsText(v)}function Re(){confirm("すべての要素設定を削除しますか？")&&s.clearAllConfigs()}const Ke=e.computed(()=>{if(!s.erFocusTable)return s.erTables;const a=s.erRelations.filter(t=>t.fromTable===s.erFocusTable||t.toTable===s.erFocusTable).flatMap(t=>[t.fromTable,t.toTable]);return s.erTables.filter(t=>t===s.erFocusTable||a.includes(t))});function Pe(a){return s.erRelations.filter(t=>t.fromTable===a||t.toTable===a)}function ie(){!S.value||!Q.value||(s.addTableRelation({fromTable:S.value,toTable:Q.value,type:Ee.value}),S.value="",Q.value="",te.value=!1)}function Ye(a){return s.manualTables.some(t=>t.name===a)}function ge(a,t){const v=s.manualTables.find(C=>C.name===a);return!!(v!=null&&v.columns.some(C=>C.column===t))}function pe(){const a=de.value.trim();a&&(s.addManualTable(a),de.value="",se.value=!1)}function Xe(a){s.removeManualTable(a)}function tt(a){he.value=a,y.value="",we.value=""}function Ae(a){const t=y.value.trim();t&&(s.addManualColumn(a,t,we.value.trim()||void 0),y.value="",we.value="")}e.ref("/dev-inspector-analysis.json"),e.ref(!1),e.ref(""),e.ref(0),e.ref(!1);const vt=[{value:"all",label:"すべて"},{value:"db",label:"DB"},{value:"calculated",label:"計算値"},{value:"storedCalc",label:"保存計算値"},{value:"static",label:"固定"},{value:"conditional",label:"条件付き"},{value:"action",label:"アクション"},{value:"form",label:"フォーム"},{value:"other",label:"その他"}];e.computed(()=>s.getCurrentPageApis());const it=e.computed(()=>s.brokenAnnotations.length);e.watch(()=>s.isPanelOpen,a=>{a&&s.detectBrokenAnnotations()});function Ct(){confirm(`${it.value}件の壊れたメモを削除しますか？`)&&s.deleteBrokenAnnotations()}const We=e.ref(!1),Ze=e.ref(null),J=e.ref({table:"",column:"",name:"",columnType:"",description:"",entries:[],transitions:[]}),ot=e.computed(()=>Object.keys(s.masterDefinitions).length),Tt=e.computed(()=>{const a=Object.values(s.masterDefinitions),t={};for(const v of a)t[v.table]||(t[v.table]=[]),t[v.table].push(v);return t});function gt(a){if(a){const t=s.getMasterDefinition(a);t&&(Ze.value=a,J.value={table:t.table,column:t.column,name:t.name,columnType:t.columnType||"",description:t.description||"",entries:[...t.entries.map(v=>({...v}))],transitions:t.transitions?t.transitions.map(v=>({...v})):[]})}else Ze.value=null,J.value={table:"",column:"",name:"",columnType:"",description:"",entries:[{value:"",label:""}],transitions:[]};We.value=!0}function St(){const a=J.value;if(!a.table||!a.column)return;const t=`${a.table}.${a.column}`,v=a.transitions.filter(n=>n.from||n.to||n.trigger),C={id:t,table:a.table,column:a.column,name:a.name||a.column,columnType:a.columnType||void 0,description:a.description||void 0,entries:a.entries.filter(n=>n.value||n.label),transitions:v.length>0?v:void 0,updatedAt:new Date().toISOString()};s.setMasterDefinition(C),We.value=!1}function $e(){J.value.entries.push({value:"",label:""})}function xe(a){J.value.entries.splice(a,1)}function Te(){J.value.transitions.push({from:"",to:"",trigger:""})}function ft(a){J.value.transitions.splice(a,1)}function P(a){confirm(`マスタ定義「${a}」を削除しますか？`)&&s.deleteMasterDefinition(a)}const oe=e.ref(!1),Z=e.ref(null),$=e.ref({name:"",schedule:"",trigger:"",description:"",inputTables:[],outputTables:[],steps:[],timeout:"",retryPolicy:"",notifyOnError:"",notifyOnComplete:""}),De=e.ref(""),Se=e.ref(""),_e=e.computed(()=>Object.keys(s.batchDefinitions).length),me=e.computed(()=>Object.values(s.batchDefinitions));function le(a){if(a){const t=s.getBatchDefinition(a);t&&(Z.value=a,$.value={name:t.name,schedule:t.schedule||"",trigger:t.trigger||"",description:t.description||"",inputTables:t.inputTables?[...t.inputTables]:[],outputTables:t.outputTables?[...t.outputTables]:[],steps:t.steps.map(v=>({...v})),timeout:t.timeout||"",retryPolicy:t.retryPolicy||"",notifyOnError:t.notifyOnError||"",notifyOnComplete:t.notifyOnComplete||""})}else Z.value=null,$.value={name:"",schedule:"",trigger:"",description:"",inputTables:[],outputTables:[],steps:[{order:1,description:""}],timeout:"",retryPolicy:"",notifyOnError:"",notifyOnComplete:""};De.value="",Se.value="",oe.value=!0}function i(){const a=$.value;if(!a.name)return;const v={id:Z.value||`batch_${a.name.replace(/\s+/g,"_").toLowerCase()}_${Date.now()}`,name:a.name,schedule:a.schedule||void 0,trigger:a.trigger||void 0,description:a.description||void 0,inputTables:a.inputTables.length>0?a.inputTables:void 0,outputTables:a.outputTables.length>0?a.outputTables:void 0,steps:a.steps.filter(C=>C.description).map((C,n)=>({...C,order:n+1})),timeout:a.timeout||void 0,retryPolicy:a.retryPolicy||void 0,notifyOnError:a.notifyOnError||void 0,notifyOnComplete:a.notifyOnComplete||void 0,updatedAt:new Date().toISOString()};s.setBatchDefinition(v),oe.value=!1}function ct(){const a=$.value.steps.length+1;$.value.steps.push({order:a,description:""})}function ut(a){$.value.steps.splice(a,1)}function q(a){var t;confirm(`バッチ定義「${((t=s.getBatchDefinition(a))==null?void 0:t.name)||a}」を削除しますか？`)&&s.deleteBatchDefinition(a)}function ce(){const a=De.value.trim();a&&!$.value.inputTables.includes(a)&&$.value.inputTables.push(a),De.value=""}function Je(a){$.value.inputTables.splice(a,1)}function ke(){const a=Se.value.trim();a&&!$.value.outputTables.includes(a)&&$.value.outputTables.push(a),Se.value=""}function st(a){$.value.outputTables.splice(a,1)}const Me=[{value:"column",label:"カラム",placeholder:"users.email, orders..."},{value:"api",label:"API",placeholder:"GET /api/users..."},{value:"text",label:"テキスト",placeholder:"メモ、説明文で検索..."}],Ie=e.computed(()=>{var a;return((a=Me.find(t=>t.value===s.crossSearchMode))==null?void 0:a.placeholder)||"検索..."}),lt=e.computed(()=>{const a={};for(const t of s.crossSearchResults)a[t.pagePath]||(a[t.pagePath]={pagePath:t.pagePath,pageName:t.pageName,items:[]}),a[t.pagePath].items.push(t);return Object.values(a)}),kt=e.computed(()=>lt.value.length),Ue=e.computed(()=>{const a=s.unannotatedElements;return{binding:a.filter(t=>t.category==="binding").length,form:a.filter(t=>t.category==="form").length,action:a.filter(t=>t.category==="action").length}});function Vt(){s.showUnannotatedDetection?(s.showUnannotatedDetection=!1,s.unannotatedElements=[],s.hoveredUnannotatedSelector=null):(s.showUnannotatedDetection=!0,s.detectUnannotatedElements())}function x(a){s.unannotatedElements=s.unannotatedElements.filter(t=>t.selector!==a)}function ue(a){s.hoveredUnannotatedSelector=a;try{const t=document.querySelector(a);if(!t)return;const v=t.getBoundingClientRect();(v.bottom<0||v.top>window.innerHeight)&&t.scrollIntoView({behavior:"smooth",block:"center"})}catch{}}function Ve(){s.hoveredUnannotatedSelector=null}function K(a){s.hoveredSelector=a;try{const t=document.querySelector(a);if(!t)return;const v=t.getBoundingClientRect();(v.bottom<0||v.top>window.innerHeight)&&t.scrollIntoView({behavior:"smooth",block:"center"})}catch{}}function ae(){s.hoveredSelector=null}const M=e.ref(null),ne=e.ref(null);function mt(a,t){M.value=t,a.dataTransfer&&(a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("text/plain",t))}function Et(){M.value=null,ne.value=null}function Fe(a,t){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),ne.value=t}function ht(a,t){const v=a.relatedTarget,C=a.currentTarget;C&&v&&C.contains(v)||ne.value===t&&(ne.value=null)}function yt(a,t){a.preventDefault(),ne.value=null;const v=M.value;if(M.value=null,!(!v||!s.elementConfigs[v])){if(t==="__page__")s.setElementConfig(v,{tabContext:void 0,modalName:void 0,isConditional:!1});else if(t.startsWith("tab:")){const n=t.slice(4);s.setElementConfig(v,{tabContext:n,modalName:void 0,isConditional:!1})}else if(t==="__modal_unnamed__")s.setElementConfig(v,{isConditional:!0,modalName:void 0,tabContext:void 0});else if(t.startsWith("modal:")){const n=t.slice(6);s.setElementConfig(v,{isConditional:!0,modalName:n,tabContext:void 0})}}}const pt=e.ref(null),ze=e.ref("");function bt(a,t,v){v.stopPropagation(),pt.value=a,ze.value=t}function nt(a){const t=ze.value.trim();if(pt.value=null,!!t){if(a.startsWith("tab:")){const v=a.slice(4),C=v.split(" > ");C[C.length-1]=t;const n=C.join(" > ");if(v===n)return;for(const[V,E]of Object.entries(s.elementConfigs))E.tabContext&&(E.tabContext===v?s.setElementConfig(V,{tabContext:n}):E.tabContext.startsWith(v+" > ")&&s.setElementConfig(V,{tabContext:n+E.tabContext.slice(v.length)}));const r=v.replace(/ > /g,">"),d=n.replace(/ > /g,">");N.value[r]!==void 0&&(N.value[d]=N.value[r],delete N.value[r])}else if(a.startsWith("modal:")){const v=a.slice(6),C=v.split(" > ");C[C.length-1]=t;const n=C.join(" > ");if(v===n)return;for(const[V,E]of Object.entries(s.elementConfigs))E.modalName&&(E.modalName===v?s.setElementConfig(V,{modalName:n}):E.modalName.startsWith(v+" > ")&&s.setElementConfig(V,{modalName:n+E.modalName.slice(v.length)}));const r=v.replace(/ > /g,">"),d=n.replace(/ > /g,">");O.value[r]!==void 0&&(O.value[d]=O.value[r],delete O.value[r])}}}function qt(){pt.value=null,ze.value=""}function wt(a,t){a.key==="Enter"?nt(t):a.key==="Escape"&&qt()}const Mt=e.ref(null),xt=e.ref("");function Qe(a,t){Mt.value=a,xt.value=""}function dt(){const a=xt.value.trim();if(Mt.value=null,!!a)for(const t of R.value)s.setElementConfig(t.id,{modalName:a,isConditional:!0})}function Dt(){Mt.value=null,xt.value=""}const Ft=e.computed(()=>typeof window<"u"?window.location.pathname:"/"),Ht=e.computed(()=>{const a=s.screenFlowData,t={};for(const v of a.edges){if(!t[v.from]){const C=a.nodes.find(n=>n.path===v.from)||{path:v.from,name:v.from,annotationCount:0};t[v.from]={node:C,edges:[]}}t[v.from].edges.push(v)}return Object.values(t)});function Lt(a){a&&s.startEditing(a)}return(a,t)=>{var v,C;return e.openBlock(),e.createElementBlock(e.Fragment,null,[(e.openBlock(),e.createBlock(e.Teleport,{to:e.unref(m)},[e.unref(s).isEnabled&&!e.unref(s).isPanelOpen?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:t[0]||(t[0]=(...n)=>e.unref(s).openPanel&&e.unref(s).openPanel(...n)),class:"di-fab",title:"画面仕様を表示","data-dev-inspector":""},[e.createVNode(e.unref(zt),{style:{width:"20px",height:"20px"}})])):e.createCommentVNode("",!0)],8,["to"])),(e.openBlock(),e.createBlock(e.Teleport,{to:e.unref(m)},[e.unref(s).isEnabled&&e.unref(s).isPanelOpen?(e.openBlock(),e.createElementBlock("div",ml,[e.createElementVNode("div",pl,[e.createElementVNode("div",vl,[e.createVNode(e.unref(io),{style:{width:"20px",height:"20px",color:"#60a5fa"}}),t[81]||(t[81]=e.createElementVNode("span",null,"Developer Mode",-1))]),e.createElementVNode("button",{onClick:t[1]||(t[1]=(...n)=>e.unref(s).closePanel&&e.unref(s).closePanel(...n)),class:"di-close-btn"},[e.createVNode(e.unref(rt),{style:{width:"20px",height:"20px"}})])]),e.createElementVNode("div",fl,[e.createElementVNode("button",{onClick:t[2]||(t[2]=n=>b.value="elements"),class:e.normalizeClass(["di-tab-btn",{active:b.value==="elements"}])},[e.createVNode(e.unref(uo),{style:{width:"14px",height:"14px"}}),t[82]||(t[82]=e.createElementVNode("span",null,"要素設定",-1)),Ne.value>0?(e.openBlock(),e.createElementBlock("span",kl,e.toDisplayString(Ne.value),1)):e.createCommentVNode("",!0)],2),e.createElementVNode("button",{onClick:t[3]||(t[3]=n=>b.value="masters"),class:e.normalizeClass(["di-tab-btn",{active:b.value==="masters"}])},[e.createVNode(e.unref(Bt),{style:{width:"14px",height:"14px"}}),t[83]||(t[83]=e.createElementVNode("span",null,"マスタ",-1)),ot.value>0?(e.openBlock(),e.createElementBlock("span",Vl,e.toDisplayString(ot.value),1)):e.createCommentVNode("",!0)],2),e.createElementVNode("button",{onClick:t[4]||(t[4]=n=>b.value="batches"),class:e.normalizeClass(["di-tab-btn",{active:b.value==="batches"}])},[e.createVNode(e.unref(ao),{style:{width:"14px",height:"14px"}}),t[84]||(t[84]=e.createElementVNode("span",null,"バッチ",-1)),_e.value>0?(e.openBlock(),e.createElementBlock("span",El,e.toDisplayString(_e.value),1)):e.createCommentVNode("",!0)],2),e.createElementVNode("button",{onClick:t[5]||(t[5]=n=>b.value="tables"),class:e.normalizeClass(["di-tab-btn",{active:b.value==="tables"}])},[e.createVNode(e.unref(so),{style:{width:"14px",height:"14px"}}),t[85]||(t[85]=e.createElementVNode("span",null,"テーブル",-1)),e.unref(s).erTables.length>0?(e.openBlock(),e.createElementBlock("span",hl,e.toDisplayString(e.unref(s).erTables.length),1)):e.createCommentVNode("",!0)],2),e.createElementVNode("button",{onClick:t[6]||(t[6]=n=>b.value="export"),class:e.normalizeClass(["di-tab-btn",{active:b.value==="export"}])},[e.createVNode(e.unref(Kt),{style:{width:"14px",height:"14px"}}),t[86]||(t[86]=e.createElementVNode("span",null,"出力",-1))],2)]),e.withDirectives(e.createElementVNode("div",yl,[e.createElementVNode("button",{onClick:t[7]||(t[7]=(...n)=>e.unref(s).togglePickMode&&e.unref(s).togglePickMode(...n)),class:e.normalizeClass(["di-pick-btn",{active:e.unref(s).isPickMode}])},[e.createVNode(e.unref(co),{style:{width:"16px",height:"16px"}}),e.createElementVNode("span",null,e.toDisplayString(e.unref(s).isPickMode?"要素選択中...":"任意の要素にメモを追加"),1)],2),fe.value>0?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:t[8]||(t[8]=(...n)=>e.unref(s).toggleNoteHighlights&&e.unref(s).toggleNoteHighlights(...n)),class:e.normalizeClass(["di-note-toggle-btn",{active:e.unref(s).showNoteHighlights}])},[e.unref(s).showNoteHighlights?(e.openBlock(),e.createBlock(e.unref(Jo),{key:0,style:{width:"14px",height:"14px"}})):(e.openBlock(),e.createBlock(e.unref(Zo),{key:1,style:{width:"14px",height:"14px"}})),t[87]||(t[87]=e.createElementVNode("span",null,"メモハイライト",-1)),e.createElementVNode("span",gl,e.toDisplayString(e.unref(s).noteHighlightFilter==="all"?fe.value:`${ee.value}/${fe.value}`),1)],2)):e.createCommentVNode("",!0),fe.value>0&&e.unref(s).showNoteHighlights?(e.openBlock(),e.createElementBlock("div",bl,[e.createElementVNode("div",Nl,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(vt,n=>e.createElementVNode("button",{key:n.value,onClick:r=>e.unref(s).noteHighlightFilter=n.value,class:e.normalizeClass(["di-filter-btn",{active:e.unref(s).noteHighlightFilter===n.value}])},e.toDisplayString(n.label),11,Bl)),64))])])):e.createCommentVNode("",!0),fe.value>0&&e.unref(s).showNoteHighlights&&Ce.value.length>0?(e.openBlock(),e.createElementBlock("div",Cl,[t[88]||(t[88]=e.createElementVNode("span",{class:"di-filter-label"},"テーブル:",-1)),e.createElementVNode("div",wl,[e.createElementVNode("button",{onClick:t[9]||(t[9]=n=>e.unref(s).noteTableFilter="all"),class:e.normalizeClass(["di-filter-btn",{active:e.unref(s).noteTableFilter==="all"}])}," すべて ",2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Ce.value,n=>(e.openBlock(),e.createElementBlock("button",{key:n,onClick:r=>e.unref(s).noteTableFilter=n,class:e.normalizeClass(["di-filter-btn",{active:e.unref(s).noteTableFilter===n}])},e.toDisplayString(n),11,xl))),128))])])):e.createCommentVNode("",!0),Be.value.length>0?(e.openBlock(),e.createElementBlock("div",Dl,[e.createElementVNode("div",_l,[e.createVNode(e.unref(uo),{style:{width:"14px",height:"14px",color:"#94a3b8"}}),t[89]||(t[89]=e.createElementVNode("span",null,"登録済み要素",-1)),e.createElementVNode("span",$l,[e.createTextVNode(e.toDisplayString(re.value.length),1),re.value.length!==Be.value.length?(e.openBlock(),e.createElementBlock("span",Tl," / "+e.toDisplayString(Be.value.length),1)):e.createCommentVNode("",!0)])]),e.createElementVNode("div",Sl,[X.value.length>0||ne.value==="__page__"?(e.openBlock(),e.createElementBlock("div",Ml,[e.createElementVNode("button",{class:e.normalizeClass(["di-tree-group-header",{"di-drop-target":ne.value==="__page__"}]),onClick:t[10]||(t[10]=n=>L.value=!L.value),onDragover:t[11]||(t[11]=n=>Fe(n,"__page__")),onDragleave:t[12]||(t[12]=n=>ht(n,"__page__")),onDrop:t[13]||(t[13]=n=>yt(n,"__page__"))},[e.createElementVNode("span",Il,e.toDisplayString(L.value?"▼":"▶"),1),t[90]||(t[90]=e.createElementVNode("span",null,"タブ外",-1)),e.createElementVNode("span",Ul,e.toDisplayString(X.value.length),1)],34),L.value?(e.openBlock(),e.createElementBlock("div",Fl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(X.value,n=>(e.openBlock(),e.createElementBlock("div",{key:n.id,class:e.normalizeClass(["di-element-item",{"di-element-item-active":e.unref(s).hoveredSelector===n.id,"di-dragging":M.value===n.id}]),draggable:"true",onDragstart:r=>mt(r,n.id),onDragend:Et,onClick:r=>e.unref(s).startEditing(n.id),onMouseenter:r=>K(n.id),onMouseleave:ae},[e.createElementVNode("span",{class:e.normalizeClass(["di-element-type-badge","di-element-type-"+(n.type||"other")])},e.toDisplayString(n.type==="datasource"?"DB":n.type==="action"?"Act":n.type==="form"?"Form":n.type==="chart"?"Chart":"-"),3),e.createElementVNode("div",Pl,[e.createElementVNode("div",Al,e.toDisplayString(n.desc),1)]),e.createElementVNode("button",{class:"di-element-delete-btn",onClick:e.withModifiers(r=>e.unref(s).deleteElementConfig(n.id),["stop"]),title:"削除"},"×",8,zl)],42,Ll))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),w.value.length>0||M.value&&!((v=ne.value)!=null&&v.startsWith("modal:"))&&ne.value!=="__modal_unnamed__"?(e.openBlock(),e.createElementBlock("div",Ol,[e.createElementVNode("button",{class:"di-tree-group-header",onClick:t[14]||(t[14]=n=>z.value=!z.value)},[e.createElementVNode("span",jl,e.toDisplayString(z.value?"▼":"▶"),1),t[91]||(t[91]=e.createElementVNode("span",null,"タブ内",-1)),e.createElementVNode("span",ql,e.toDisplayString(w.value.length),1)]),z.value?(e.openBlock(),e.createElementBlock("div",Hl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,(n,r)=>(e.openBlock(),e.createElementBlock("div",{key:"t1-"+r,class:"di-tree-subgroup"},[pt.value==="tab:"+r?(e.openBlock(),e.createElementBlock("div",Rl,[t[92]||(t[92]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-tab"},"T",-1)),e.withDirectives(e.createElementVNode("input",{class:"di-rename-input","onUpdate:modelValue":t[15]||(t[15]=d=>ze.value=d),onKeydown:d=>wt(d,"tab:"+r),onBlur:d=>nt("tab:"+r),ref_for:!0,ref:"renameInputRef",autofocus:""},null,40,Kl),[[e.vModelText,ze.value]])])):(e.openBlock(),e.createElementBlock("button",{key:1,class:e.normalizeClass(["di-tree-group-header di-tree-subgroup-header",{"di-drop-target":ne.value==="tab:"+r}]),onClick:d=>N.value[r]=!N.value[r],onDragover:d=>Fe(d,"tab:"+r),onDragleave:d=>ht(d,"tab:"+r),onDrop:d=>yt(d,"tab:"+r)},[e.createElementVNode("span",Gl,e.toDisplayString(N.value[r]?"▼":"▶"),1),t[93]||(t[93]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-tab"},"T",-1)),e.createElementVNode("span",null,e.toDisplayString(r),1),e.createElementVNode("span",Xl,e.toDisplayString(D(n)),1),e.createElementVNode("span",{class:"di-rename-btn",onClick:d=>bt("tab:"+r,String(r),d),title:"名前変更"},"✏",8,Wl)],42,Yl)),N.value[r]?(e.openBlock(),e.createElementBlock("div",Zl,[n.elements.length>0?(e.openBlock(),e.createElementBlock("div",Jl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.elements,d=>(e.openBlock(),e.createElementBlock("div",{key:d.id,class:e.normalizeClass(["di-element-item",{"di-element-item-active":e.unref(s).hoveredSelector===d.id,"di-dragging":M.value===d.id}]),draggable:"true",onDragstart:V=>mt(V,d.id),onDragend:Et,onClick:V=>e.unref(s).startEditing(d.id),onMouseenter:V=>K(d.id),onMouseleave:ae},[e.createElementVNode("span",{class:e.normalizeClass(["di-element-type-badge","di-element-type-"+(d.type||"other")])},e.toDisplayString(d.type==="datasource"?"DB":d.type==="action"?"Act":d.type==="form"?"Form":d.type==="chart"?"Chart":"-"),3),e.createElementVNode("div",en,[e.createElementVNode("div",tn,e.toDisplayString(d.desc),1)]),e.createElementVNode("button",{class:"di-element-delete-btn",onClick:e.withModifiers(V=>e.unref(s).deleteElementConfig(d.id),["stop"]),title:"削除"},"×",8,on)],42,Ql))),128))])):e.createCommentVNode("",!0),Object.keys(n.children).length>0?(e.openBlock(),e.createElementBlock("div",ln,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.children,(d,V)=>(e.openBlock(),e.createElementBlock("div",{key:"t2-"+V,class:"di-tree-subgroup"},[pt.value==="tab:"+r+" > "+V?(e.openBlock(),e.createElementBlock("div",nn,[t[94]||(t[94]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-tab"},"T",-1)),e.withDirectives(e.createElementVNode("input",{class:"di-rename-input","onUpdate:modelValue":t[16]||(t[16]=E=>ze.value=E),onKeydown:E=>wt(E,"tab:"+r+" > "+V),onBlur:E=>nt("tab:"+r+" > "+V),autofocus:""},null,40,an),[[e.vModelText,ze.value]])])):(e.openBlock(),e.createElementBlock("button",{key:1,class:e.normalizeClass(["di-tree-group-header di-tree-subgroup-header",{"di-drop-target":ne.value==="tab:"+r+" > "+V}]),onClick:E=>N.value[r+">"+V]=!N.value[r+">"+V],onDragover:E=>Fe(E,"tab:"+r+" > "+V),onDragleave:E=>ht(E,"tab:"+r+" > "+V),onDrop:E=>yt(E,"tab:"+r+" > "+V)},[e.createElementVNode("span",dn,e.toDisplayString(N.value[r+">"+V]?"▼":"▶"),1),t[95]||(t[95]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-tab"},"T",-1)),e.createElementVNode("span",null,e.toDisplayString(V),1),e.createElementVNode("span",rn,e.toDisplayString(D(d)),1),e.createElementVNode("span",{class:"di-rename-btn",onClick:E=>bt("tab:"+r+" > "+V,String(V),E),title:"名前変更"},"✏",8,cn)],42,sn)),N.value[r+">"+V]?(e.openBlock(),e.createElementBlock("div",un,[d.elements.length>0?(e.openBlock(),e.createElementBlock("div",mn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.elements,E=>(e.openBlock(),e.createElementBlock("div",{key:E.id,class:e.normalizeClass(["di-element-item",{"di-element-item-active":e.unref(s).hoveredSelector===E.id,"di-dragging":M.value===E.id}]),draggable:"true",onDragstart:Y=>mt(Y,E.id),onDragend:Et,onClick:Y=>e.unref(s).startEditing(E.id),onMouseenter:Y=>K(E.id),onMouseleave:ae},[e.createElementVNode("span",{class:e.normalizeClass(["di-element-type-badge","di-element-type-"+(E.type||"other")])},e.toDisplayString(E.type==="datasource"?"DB":E.type==="action"?"Act":E.type==="form"?"Form":E.type==="chart"?"Chart":"-"),3),e.createElementVNode("div",vn,[e.createElementVNode("div",fn,e.toDisplayString(E.desc),1)]),e.createElementVNode("button",{class:"di-element-delete-btn",onClick:e.withModifiers(Y=>e.unref(s).deleteElementConfig(E.id),["stop"]),title:"削除"},"×",8,kn)],42,pn))),128))])):e.createCommentVNode("",!0),Object.keys(d.children).length>0?(e.openBlock(),e.createElementBlock("div",Vn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.children,(E,Y)=>(e.openBlock(),e.createElementBlock("div",{key:"t3-"+Y,class:"di-tree-subgroup"},[pt.value==="tab:"+r+" > "+V+" > "+Y?(e.openBlock(),e.createElementBlock("div",En,[t[96]||(t[96]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-tab"},"T",-1)),e.withDirectives(e.createElementVNode("input",{class:"di-rename-input","onUpdate:modelValue":t[17]||(t[17]=H=>ze.value=H),onKeydown:H=>wt(H,"tab:"+r+" > "+V+" > "+Y),onBlur:H=>nt("tab:"+r+" > "+V+" > "+Y),autofocus:""},null,40,hn),[[e.vModelText,ze.value]])])):(e.openBlock(),e.createElementBlock("button",{key:1,class:e.normalizeClass(["di-tree-group-header di-tree-subgroup-header",{"di-drop-target":ne.value==="tab:"+r+" > "+V+" > "+Y}]),onClick:H=>N.value[r+">"+V+">"+Y]=!N.value[r+">"+V+">"+Y],onDragover:H=>Fe(H,"tab:"+r+" > "+V+" > "+Y),onDragleave:H=>ht(H,"tab:"+r+" > "+V+" > "+Y),onDrop:H=>yt(H,"tab:"+r+" > "+V+" > "+Y)},[e.createElementVNode("span",gn,e.toDisplayString(N.value[r+">"+V+">"+Y]?"▼":"▶"),1),t[97]||(t[97]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-tab"},"T",-1)),e.createElementVNode("span",null,e.toDisplayString(Y),1),e.createElementVNode("span",bn,e.toDisplayString(D(E)),1),e.createElementVNode("span",{class:"di-rename-btn",onClick:H=>bt("tab:"+r+" > "+V+" > "+Y,String(Y),H),title:"名前変更"},"✏",8,Nn)],42,yn)),N.value[r+">"+V+">"+Y]?(e.openBlock(),e.createElementBlock("div",Bn,[E.elements.length>0?(e.openBlock(),e.createElementBlock("div",Cn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(E.elements,H=>(e.openBlock(),e.createElementBlock("div",{key:H.id,class:e.normalizeClass(["di-element-item",{"di-element-item-active":e.unref(s).hoveredSelector===H.id,"di-dragging":M.value===H.id}]),draggable:"true",onDragstart:at=>mt(at,H.id),onDragend:Et,onClick:at=>e.unref(s).startEditing(H.id),onMouseenter:at=>K(H.id),onMouseleave:ae},[e.createElementVNode("span",{class:e.normalizeClass(["di-element-type-badge","di-element-type-"+(H.type||"other")])},e.toDisplayString(H.type==="datasource"?"DB":H.type==="action"?"Act":H.type==="form"?"Form":H.type==="chart"?"Chart":"-"),3),e.createElementVNode("div",xn,[e.createElementVNode("div",Dn,e.toDisplayString(H.desc),1)]),e.createElementVNode("button",{class:"di-element-delete-btn",onClick:e.withModifiers(at=>e.unref(s).deleteElementConfig(H.id),["stop"]),title:"削除"},"×",8,_n)],42,wn))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),B.value.length>0||M.value&&((C=ne.value)!=null&&C.startsWith("modal:")||ne.value==="__modal_unnamed__")?(e.openBlock(),e.createElementBlock("div",$n,[e.createElementVNode("button",{class:"di-tree-group-header",onClick:t[18]||(t[18]=n=>I.value=!I.value)},[e.createElementVNode("span",Tn,e.toDisplayString(I.value?"▼":"▶"),1),t[98]||(t[98]=e.createElementVNode("span",null,"モーダル",-1)),e.createElementVNode("span",Sn,e.toDisplayString(B.value.length),1)]),I.value?(e.openBlock(),e.createElementBlock("div",Mn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,(n,r)=>(e.openBlock(),e.createElementBlock("div",{key:"m1-"+r,class:"di-tree-subgroup"},[pt.value==="modal:"+r?(e.openBlock(),e.createElementBlock("div",In,[t[99]||(t[99]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-modal"},"M",-1)),e.withDirectives(e.createElementVNode("input",{class:"di-rename-input","onUpdate:modelValue":t[19]||(t[19]=d=>ze.value=d),onKeydown:d=>wt(d,"modal:"+r),onBlur:d=>nt("modal:"+r),autofocus:""},null,40,Un),[[e.vModelText,ze.value]])])):(e.openBlock(),e.createElementBlock("button",{key:1,class:e.normalizeClass(["di-tree-group-header di-tree-subgroup-header",{"di-drop-target":ne.value==="modal:"+r}]),onClick:d=>O.value[String(r)]=!O.value[String(r)],onDragover:d=>Fe(d,"modal:"+r),onDragleave:d=>ht(d,"modal:"+r),onDrop:d=>yt(d,"modal:"+r)},[e.createElementVNode("span",Ln,e.toDisplayString(O.value[String(r)]?"▼":"▶"),1),t[100]||(t[100]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-modal"},"M",-1)),e.createElementVNode("span",null,e.toDisplayString(r),1),e.createElementVNode("span",Pn,e.toDisplayString(D(n)),1),e.createElementVNode("span",{class:"di-rename-btn",onClick:d=>bt("modal:"+r,String(r),d),title:"名前変更"},"✏",8,An)],42,Fn)),O.value[String(r)]?(e.openBlock(),e.createElementBlock("div",zn,[n.elements.length>0?(e.openBlock(),e.createElementBlock("div",On,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.elements,d=>(e.openBlock(),e.createElementBlock("div",{key:d.id,class:e.normalizeClass(["di-element-item",{"di-element-item-active":e.unref(s).hoveredSelector===d.id,"di-dragging":M.value===d.id}]),draggable:"true",onDragstart:V=>mt(V,d.id),onDragend:Et,onClick:V=>e.unref(s).startEditing(d.id),onMouseenter:V=>K(d.id),onMouseleave:ae},[e.createElementVNode("span",{class:e.normalizeClass(["di-element-type-badge","di-element-type-"+(d.type||"other")])},e.toDisplayString(d.type==="datasource"?"DB":d.type==="action"?"Act":d.type==="form"?"Form":d.type==="chart"?"Chart":"-"),3),e.createElementVNode("div",qn,[e.createElementVNode("div",Hn,e.toDisplayString(d.desc),1)]),e.createElementVNode("button",{class:"di-element-delete-btn",onClick:e.withModifiers(V=>e.unref(s).deleteElementConfig(d.id),["stop"]),title:"削除"},"×",8,Rn)],42,jn))),128))])):e.createCommentVNode("",!0),Object.keys(n.children).length>0?(e.openBlock(),e.createElementBlock("div",Kn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.children,(d,V)=>(e.openBlock(),e.createElementBlock("div",{key:"m2-"+V,class:"di-tree-subgroup"},[pt.value==="modal:"+r+" > "+V?(e.openBlock(),e.createElementBlock("div",Yn,[t[101]||(t[101]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-modal"},"M",-1)),e.withDirectives(e.createElementVNode("input",{class:"di-rename-input","onUpdate:modelValue":t[20]||(t[20]=E=>ze.value=E),onKeydown:E=>wt(E,"modal:"+r+" > "+V),onBlur:E=>nt("modal:"+r+" > "+V),autofocus:""},null,40,Gn),[[e.vModelText,ze.value]])])):(e.openBlock(),e.createElementBlock("button",{key:1,class:e.normalizeClass(["di-tree-group-header di-tree-subgroup-header",{"di-drop-target":ne.value==="modal:"+r+" > "+V}]),onClick:E=>O.value[r+">"+V]=!O.value[r+">"+V],onDragover:E=>Fe(E,"modal:"+r+" > "+V),onDragleave:E=>ht(E,"modal:"+r+" > "+V),onDrop:E=>yt(E,"modal:"+r+" > "+V)},[e.createElementVNode("span",Wn,e.toDisplayString(O.value[r+">"+V]?"▼":"▶"),1),t[102]||(t[102]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-modal"},"M",-1)),e.createElementVNode("span",null,e.toDisplayString(V),1),e.createElementVNode("span",Zn,e.toDisplayString(D(d)),1),e.createElementVNode("span",{class:"di-rename-btn",onClick:E=>bt("modal:"+r+" > "+V,String(V),E),title:"名前変更"},"✏",8,Jn)],42,Xn)),O.value[r+">"+V]?(e.openBlock(),e.createElementBlock("div",Qn,[d.elements.length>0?(e.openBlock(),e.createElementBlock("div",ea,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.elements,E=>(e.openBlock(),e.createElementBlock("div",{key:E.id,class:e.normalizeClass(["di-element-item",{"di-element-item-active":e.unref(s).hoveredSelector===E.id,"di-dragging":M.value===E.id}]),draggable:"true",onDragstart:Y=>mt(Y,E.id),onDragend:Et,onClick:Y=>e.unref(s).startEditing(E.id),onMouseenter:Y=>K(E.id),onMouseleave:ae},[e.createElementVNode("span",{class:e.normalizeClass(["di-element-type-badge","di-element-type-"+(E.type||"other")])},e.toDisplayString(E.type==="datasource"?"DB":E.type==="action"?"Act":E.type==="form"?"Form":E.type==="chart"?"Chart":"-"),3),e.createElementVNode("div",oa,[e.createElementVNode("div",la,e.toDisplayString(E.desc),1)]),e.createElementVNode("button",{class:"di-element-delete-btn",onClick:e.withModifiers(Y=>e.unref(s).deleteElementConfig(E.id),["stop"]),title:"削除"},"×",8,na)],42,ta))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]))),128)),R.value.length>0||ne.value==="__modal_unnamed__"?(e.openBlock(),e.createElementBlock("div",aa,[Mt.value==="__unnamed__"?(e.openBlock(),e.createElementBlock("div",ia,[t[103]||(t[103]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-modal"},"M",-1)),e.withDirectives(e.createElementVNode("input",{class:"di-rename-input","onUpdate:modelValue":t[21]||(t[21]=n=>xt.value=n),onKeydown:[e.withKeys(dt,["enter"]),e.withKeys(Dt,["escape"])],onBlur:dt,autofocus:""},null,544),[[e.vModelText,xt.value]])])):(e.openBlock(),e.createElementBlock("button",{key:1,class:e.normalizeClass(["di-tree-group-header di-tree-subgroup-header",{"di-drop-target":ne.value==="__modal_unnamed__"}]),onClick:t[23]||(t[23]=n=>O.value.__unnamed=!O.value.__unnamed),onDragover:t[24]||(t[24]=n=>Fe(n,"__modal_unnamed__")),onDragleave:t[25]||(t[25]=n=>ht(n,"__modal_unnamed__")),onDrop:t[26]||(t[26]=n=>yt(n,"__modal_unnamed__"))},[e.createElementVNode("span",sa,e.toDisplayString(O.value.__unnamed?"▼":"▶"),1),t[104]||(t[104]=e.createElementVNode("span",{class:"di-tree-badge di-tree-badge-modal"},"M",-1)),t[105]||(t[105]=e.createElementVNode("span",null,"未分類",-1)),e.createElementVNode("span",da,e.toDisplayString(R.value.length),1),e.createElementVNode("span",{class:"di-rename-btn",onClick:t[22]||(t[22]=e.withModifiers(n=>Qe("__unnamed__"),["stop"])),title:"モーダル名を設定"},"✏")],34)),O.value.__unnamed?(e.openBlock(),e.createElementBlock("div",ra,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(R.value,n=>(e.openBlock(),e.createElementBlock("div",{key:n.id,class:e.normalizeClass(["di-element-item",{"di-element-item-active":e.unref(s).hoveredSelector===n.id,"di-dragging":M.value===n.id}]),draggable:"true",onDragstart:r=>mt(r,n.id),onDragend:Et,onClick:r=>e.unref(s).startEditing(n.id),onMouseenter:r=>K(n.id),onMouseleave:ae},[e.createElementVNode("span",{class:e.normalizeClass(["di-element-type-badge","di-element-type-"+(n.type||"other")])},e.toDisplayString(n.type==="datasource"?"DB":n.type==="action"?"Act":n.type==="form"?"Form":n.type==="chart"?"Chart":"-"),3),e.createElementVNode("div",ua,[e.createElementVNode("div",ma,e.toDisplayString(n.desc),1)]),e.createElementVNode("button",{class:"di-element-delete-btn",onClick:e.withModifiers(r=>e.unref(s).deleteElementConfig(n.id),["stop"]),title:"削除"},"×",8,pa)],42,ca))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:Vt,class:e.normalizeClass(["di-unannotated-btn",{active:e.unref(s).showUnannotatedDetection}])},[e.createVNode(e.unref(Xo),{style:{width:"14px",height:"14px"}}),e.createElementVNode("span",null,e.toDisplayString(e.unref(s).showUnannotatedDetection?"未登録検出 ON":"未登録要素を検出"),1),e.unref(s).unannotatedElements.length>0?(e.openBlock(),e.createElementBlock("span",va,e.toDisplayString(e.unref(s).unannotatedElements.length),1)):e.createCommentVNode("",!0)],2),e.unref(s).showUnannotatedDetection&&e.unref(s).unannotatedElements.length>0?(e.openBlock(),e.createElementBlock("div",fa,[e.createElementVNode("div",ka,[e.createTextVNode(e.toDisplayString(e.unref(s).unannotatedElements.length)+"件検出: ",1),Ue.value.binding>0?(e.openBlock(),e.createElementBlock("span",Va,"バインディング "+e.toDisplayString(Ue.value.binding),1)):e.createCommentVNode("",!0),Ue.value.form>0?(e.openBlock(),e.createElementBlock("span",Ea," / フォーム "+e.toDisplayString(Ue.value.form),1)):e.createCommentVNode("",!0),Ue.value.action>0?(e.openBlock(),e.createElementBlock("span",ha," / アクション "+e.toDisplayString(Ue.value.action),1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",ya,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s).unannotatedElements,n=>(e.openBlock(),e.createElementBlock("div",{key:n.selector,class:e.normalizeClass(["di-unannotated-item",{"di-unannotated-item-active":e.unref(s).hoveredUnannotatedSelector===n.selector,["di-unannotated-item-"+n.category]:e.unref(s).hoveredUnannotatedSelector===n.selector}]),onMouseenter:r=>ue(n.selector),onMouseleave:Ve},[e.createElementVNode("span",{class:e.normalizeClass(["di-unannotated-category","di-unannotated-cat-"+n.category])},e.toDisplayString(n.category==="binding"?"DB":n.category==="form"?"Form":"Act"),3),e.createElementVNode("span",ba,e.toDisplayString(n.text||n.tagName),1),e.createElementVNode("button",{onClick:r=>e.unref(s).quickAnnotate(n.selector,n.suggestedType),class:"di-unannotated-register"}," 登録 ",8,Na),e.createElementVNode("button",{onClick:r=>x(n.selector),class:"di-unannotated-dismiss"},[e.createVNode(e.unref(rt),{style:{width:"10px",height:"10px"}})],8,Ba)],42,ga))),128))])])):e.createCommentVNode("",!0),e.unref(s).showUnannotatedDetection&&e.unref(s).unannotatedElements.length===0?(e.openBlock(),e.createElementBlock("div",Ca," 未登録の要素はありません ")):e.createCommentVNode("",!0),it.value>0?(e.openBlock(),e.createElementBlock("div",wa,[e.createElementVNode("div",xa,[e.createVNode(e.unref(Ro),{style:{width:"14px",height:"14px",color:"#f59e0b"}}),e.createElementVNode("span",null,e.toDisplayString(it.value)+"件のメモが見つかりません",1)]),t[108]||(t[108]=e.createElementVNode("div",{class:"di-broken-desc"},"コード変更によりセレクタが壊れた可能性があります",-1)),e.createElementVNode("div",Da,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s).brokenAnnotations,n=>{var r,d;return e.openBlock(),e.createElementBlock("div",{key:n,class:"di-broken-item"},[e.createElementVNode("div",_a,[e.createElementVNode("div",$a,e.toDisplayString(((d=(r=e.unref(s).elementConfigs[n])==null?void 0:r.note)==null?void 0:d.text)||"(メモなし)"),1),e.createElementVNode("div",Ta,e.toDisplayString(n),1)]),e.createElementVNode("div",Sa,[e.createElementVNode("button",{onClick:V=>e.unref(s).startRemap(n),class:"di-broken-remap-btn",title:"新しい要素に再設定"},[e.createVNode(e.unref(co),{style:{width:"12px",height:"12px"}}),t[106]||(t[106]=e.createTextVNode(" 再設定 ",-1))],8,Ma),e.createElementVNode("button",{onClick:V=>{e.unref(s).deleteElementConfig(n),e.unref(s).detectBrokenAnnotations()},class:"di-broken-item-delete",title:"削除"},[e.createVNode(e.unref(It),{style:{width:"12px",height:"12px"}})],8,Ia)])])}),128))]),e.createElementVNode("div",Ua,[e.createElementVNode("button",{onClick:Ct,class:"di-broken-delete-btn"},[e.createVNode(e.unref(It),{style:{width:"12px",height:"12px"}}),t[107]||(t[107]=e.createTextVNode(" まとめて削除 ",-1))])])])):e.createCommentVNode("",!0),e.createCommentVNode("",!0)],512),[[e.vShow,b.value==="elements"]]),e.createElementVNode("div",Fa,[e.withDirectives(e.createElementVNode("div",null,[F.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("div",La,[e.createElementVNode("div",Pa,[e.createElementVNode("h2",Aa,e.toDisplayString(F.value.name),1),e.createElementVNode("button",{onClick:t[29]||(t[29]=n=>e.unref(s).editingScreen=!0),class:"di-screen-edit-btn",title:"画面情報を編集"},[e.createVNode(e.unref(mo),{style:{width:"14px",height:"14px"}})])]),F.value.description?(e.openBlock(),e.createElementBlock("p",za,e.toDisplayString(F.value.description),1)):e.createCommentVNode("",!0),F.value.auth?(e.openBlock(),e.createElementBlock("div",Oa,[F.value.auth.required?(e.openBlock(),e.createElementBlock("span",ja,[e.createVNode(e.unref(tl),{style:{width:"11px",height:"11px"}}),t[118]||(t[118]=e.createTextVNode(" ログイン必須 ",-1))])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(F.value.auth.roles||[],n=>(e.openBlock(),e.createElementBlock("span",{key:n,class:"di-auth-badge di-auth-role"},[e.createVNode(e.unref(sl),{style:{width:"11px",height:"11px"}}),e.createTextVNode(" "+e.toDisplayString(n),1)]))),128)),F.value.auth.description?(e.openBlock(),e.createElementBlock("span",qa,e.toDisplayString(F.value.auth.description),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),F.value.componentPath?(e.openBlock(),e.createElementBlock("div",Ha,[e.createElementVNode("div",Ra,[e.createVNode(e.unref(io),{style:{width:"16px",height:"16px"}}),t[119]||(t[119]=e.createElementVNode("span",null,"Component Path",-1))]),e.createElementVNode("code",Ka,e.toDisplayString(F.value.componentPath),1)])):e.createCommentVNode("",!0),F.value.figmaUrl?(e.openBlock(),e.createElementBlock("div",Ya,[e.createElementVNode("div",Ga,[e.createVNode(e.unref(Wo),{style:{width:"16px",height:"16px"}}),t[120]||(t[120]=e.createElementVNode("span",null,"Figma Design",-1))]),e.createElementVNode("a",{href:F.value.figmaUrl,target:"_blank",class:"di-link-purple"},e.toDisplayString(F.value.figmaUrl),9,Xa)])):e.createCommentVNode("",!0),F.value.apis.length?(e.openBlock(),e.createElementBlock("div",Wa,[e.createElementVNode("div",Za,[e.createVNode(e.unref(il),{style:{width:"16px",height:"16px"}}),t[121]||(t[121]=e.createElementVNode("span",null,"API Endpoints",-1))]),e.createElementVNode("div",Ja,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(F.value.apis,(n,r)=>(e.openBlock(),e.createElementBlock("div",{key:r,class:"di-api-item"},[e.createElementVNode("span",{class:"di-method-badge",style:e.normalizeStyle({backgroundColor:ye[n.method]+"20",color:ye[n.method]})},e.toDisplayString(n.method),5),e.createElementVNode("div",Qa,[e.createElementVNode("code",ei,e.toDisplayString(n.endpoint),1),n.description?(e.openBlock(),e.createElementBlock("p",ti,e.toDisplayString(n.description),1)):e.createCommentVNode("",!0)]),n.loadTiming?(e.openBlock(),e.createElementBlock("span",oi,e.toDisplayString(n.loadTiming==="onMount"?"読込時":n.loadTiming==="action"?"アクション":"条件付き"),1)):e.createCommentVNode("",!0)]))),128))])])):e.createCommentVNode("",!0),F.value.notes?(e.openBlock(),e.createElementBlock("div",li,[e.createElementVNode("div",ni,[e.createVNode(e.unref(Ho),{style:{width:"16px",height:"16px"}}),t[122]||(t[122]=e.createElementVNode("span",null,"Notes",-1))]),e.createElementVNode("p",ai,e.toDisplayString(F.value.notes),1)])):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock("div",ii,[e.createVNode(e.unref(zt),{style:{width:"48px",height:"48px",color:"#334155"}}),t[124]||(t[124]=e.createElementVNode("p",null,[e.createTextVNode("この画面の仕様情報は"),e.createElementVNode("br"),e.createTextVNode("まだ登録されていません")],-1)),e.createElementVNode("button",{onClick:t[30]||(t[30]=n=>e.unref(s).editingScreen=!0),class:"di-screen-register-btn"},[e.createVNode(e.unref(mo),{style:{width:"14px",height:"14px"}}),t[123]||(t[123]=e.createTextVNode(" 画面情報を登録 ",-1))])])),e.createElementVNode("div",si,[e.createElementVNode("div",di,[e.createVNode(e.unref(al),{style:{width:"14px",height:"14px",color:"#94a3b8"}}),t[125]||(t[125]=e.createElementVNode("span",null,"横断検索",-1))]),t[126]||(t[126]=e.createElementVNode("div",{class:"di-cross-search-desc"},"全画面のメモを横断検索。カラム名・APIエンドポイント・メモ内テキストで絞り込めます。",-1)),e.createElementVNode("div",ri,[e.createElementVNode("div",ci,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(Me,n=>e.createElementVNode("button",{key:n.value,onClick:r=>e.unref(s).crossSearchMode=n.value,class:e.normalizeClass(["di-filter-btn",{active:e.unref(s).crossSearchMode===n.value}])},e.toDisplayString(n.label),11,ui)),64))]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[31]||(t[31]=n=>e.unref(s).crossSearchQuery=n),type:"text",class:"di-cross-search-input",placeholder:Ie.value},null,8,mi),[[e.vModelText,e.unref(s).crossSearchQuery]]),e.unref(s).crossSearchQuery.trim()?(e.openBlock(),e.createElementBlock("div",pi,e.toDisplayString(e.unref(s).crossSearchResults.length)+"件 ("+e.toDisplayString(kt.value)+"画面) ",1)):e.createCommentVNode("",!0),lt.value.length>0?(e.openBlock(),e.createElementBlock("div",vi,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(lt.value,n=>(e.openBlock(),e.createElementBlock("div",{key:n.pagePath,class:"di-cross-search-group"},[e.createElementVNode("div",fi,[e.createTextVNode(e.toDisplayString(n.pagePath)+" ",1),n.pageName!==n.pagePath?(e.openBlock(),e.createElementBlock("span",ki,"("+e.toDisplayString(n.pageName)+")",1)):e.createCommentVNode("",!0)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.items,(r,d)=>(e.openBlock(),e.createElementBlock("div",{key:d,class:e.normalizeClass(["di-cross-search-item",r.elementType?"di-cross-item-"+r.elementType:""]),onClick:V=>r.selector&&e.unref(s).startEditing(r.selector)},[e.createElementVNode("span",Ei,e.toDisplayString(r.matchedField),1),r.matchContext?(e.openBlock(),e.createElementBlock("span",hi,e.toDisplayString(r.matchContext),1)):e.createCommentVNode("",!0)],10,Vi))),128))]))),128))])):e.createCommentVNode("",!0)])]),e.createElementVNode("div",yi,[e.createElementVNode("button",{onClick:t[32]||(t[32]=n=>e.unref(s).showScreenFlow=!e.unref(s).showScreenFlow),class:e.normalizeClass(["di-screen-flow-toggle",{active:e.unref(s).showScreenFlow}])},[e.createVNode(e.unref(so),{style:{width:"14px",height:"14px"}}),t[127]||(t[127]=e.createElementVNode("span",null,"画面フロー",-1)),e.unref(s).screenFlowData.edges.length>0?(e.openBlock(),e.createElementBlock("span",gi,e.toDisplayString(e.unref(s).screenFlowData.nodes.length)+"画面 / "+e.toDisplayString(e.unref(s).screenFlowData.edges.length)+"遷移 ",1)):e.createCommentVNode("",!0)],2),e.unref(s).showScreenFlow?(e.openBlock(),e.createElementBlock("div",bi,[e.unref(s).screenFlowData.edges.length===0?(e.openBlock(),e.createElementBlock("div",Ni," navigate型のアクションが登録されていません ")):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Ht.value,n=>(e.openBlock(),e.createElementBlock("div",{key:n.node.path,class:"di-flow-group"},[e.createElementVNode("div",{class:e.normalizeClass(["di-flow-node",{"di-flow-node-current":n.node.path===Ft.value}])},[e.createElementVNode("span",Bi,e.toDisplayString(n.node.path),1),n.node.name!==n.node.path?(e.openBlock(),e.createElementBlock("span",Ci,"("+e.toDisplayString(n.node.name)+")",1)):e.createCommentVNode("",!0)],2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.edges,r=>(e.openBlock(),e.createElementBlock("div",{key:r.from+r.to,class:"di-flow-edge",onClick:d=>Lt(r.selector)},[t[128]||(t[128]=e.createElementVNode("span",{class:"di-flow-arrow"},"→",-1)),e.createElementVNode("span",xi,e.toDisplayString(r.to),1),r.label?(e.openBlock(),e.createElementBlock("span",Di,"["+e.toDisplayString(r.label)+"]",1)):e.createCommentVNode("",!0)],8,wi))),128))]))),128)),e.unref(s).screenFlowData.orphanPages.length>0?(e.openBlock(),e.createElementBlock("div",_i,[t[129]||(t[129]=e.createElementVNode("div",{class:"di-flow-orphans-header"},"遷移なしのページ",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s).screenFlowData.orphanPages,n=>(e.openBlock(),e.createElementBlock("span",{key:n.path,class:"di-flow-orphan-item"},e.toDisplayString(n.path),1))),128))])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])],512),[[e.vShow,b.value==="elements"]]),e.withDirectives(e.createElementVNode("div",null,[e.createElementVNode("div",$i,[e.createElementVNode("div",Ti,[e.createVNode(e.unref(Bt),{style:{width:"16px",height:"16px",color:"#a78bfa"}}),t[130]||(t[130]=e.createElementVNode("span",null,"マスタ定義",-1)),ot.value>0?(e.openBlock(),e.createElementBlock("span",Si,e.toDisplayString(ot.value),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:t[33]||(t[33]=n=>gt()),class:"di-btn-icon",style:{"margin-left":"auto"},title:"新規追加"},[e.createVNode(e.unref(Nt),{style:{width:"14px",height:"14px"}})])]),ot.value>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(Tt.value,(n,r)=>(e.openBlock(),e.createElementBlock("div",{key:r,class:"di-master-table-group"},[e.createElementVNode("div",Mi,e.toDisplayString(r),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n,d=>(e.openBlock(),e.createElementBlock("div",{key:d.id,class:"di-master-item",onClick:V=>gt(d.id)},[e.createElementVNode("div",Ui,[e.createElementVNode("span",Fi,"."+e.toDisplayString(d.column),1),d.columnType?(e.openBlock(),e.createElementBlock("span",Li,e.toDisplayString(d.columnType),1)):e.createCommentVNode("",!0),e.createElementVNode("span",Pi,e.toDisplayString(d.name),1)]),e.createElementVNode("div",Ai,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(d.entries.slice(0,5),(V,E)=>(e.openBlock(),e.createElementBlock("span",{key:E,class:"di-master-entry-chip",style:e.normalizeStyle(V.color?{borderColor:V.color,color:V.color}:{})},e.toDisplayString(V.value)+"="+e.toDisplayString(V.label),5))),128)),d.entries.length>5?(e.openBlock(),e.createElementBlock("span",zi,"+"+e.toDisplayString(d.entries.length-5),1)):e.createCommentVNode("",!0)])],8,Ii))),128))]))),128)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"di-master-empty",onClick:t[34]||(t[34]=n=>gt())},[...t[131]||(t[131]=[e.createElementVNode("span",null,"テーブル.カラムのマスタ値を定義",-1)])]))]),(e.openBlock(),e.createBlock(e.Teleport,{to:e.unref(m)},[We.value?(e.openBlock(),e.createElementBlock("div",{key:0,"data-dev-inspector":"",class:"di-modal-overlay",onClick:t[43]||(t[43]=e.withModifiers(n=>We.value=!1,["self"]))},[e.createElementVNode("div",Oi,[e.createElementVNode("div",ji,[e.createElementVNode("h3",null,e.toDisplayString(Ze.value?"マスタ定義を編集":"新規マスタ定義"),1),e.createElementVNode("button",{onClick:t[35]||(t[35]=n=>We.value=!1),class:"di-close-btn"},[e.createVNode(e.unref(rt),{style:{width:"16px",height:"16px"}})])]),e.createElementVNode("div",qi,[e.createElementVNode("div",Hi,[e.createElementVNode("div",Ri,[t[132]||(t[132]=e.createElementVNode("label",null,"テーブル",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[36]||(t[36]=n=>J.value.table=n),placeholder:"orders",disabled:!!Ze.value},null,8,Ki),[[e.vModelText,J.value.table]])]),e.createElementVNode("div",Yi,[t[133]||(t[133]=e.createElementVNode("label",null,"カラム",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[37]||(t[37]=n=>J.value.column=n),placeholder:"status",disabled:!!Ze.value},null,8,Gi),[[e.vModelText,J.value.column]])])]),e.createElementVNode("div",Xi,[e.createElementVNode("div",Wi,[t[134]||(t[134]=e.createElementVNode("label",null,"表示名",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[38]||(t[38]=n=>J.value.name=n),placeholder:"ステータス"},null,512),[[e.vModelText,J.value.name]])]),e.createElementVNode("div",Zi,[t[135]||(t[135]=e.createElementVNode("label",null,"型",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[39]||(t[39]=n=>J.value.columnType=n),placeholder:"integer"},null,512),[[e.vModelText,J.value.columnType]])])]),e.createElementVNode("div",Ji,[t[136]||(t[136]=e.createElementVNode("label",null,"説明",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[40]||(t[40]=n=>J.value.description=n),placeholder:"注文のステータスを管理"},null,512),[[e.vModelText,J.value.description]])]),e.createElementVNode("div",Qi,[t[137]||(t[137]=e.createElementVNode("label",null,"マスタ値",-1)),e.createElementVNode("button",{onClick:$e,class:"di-btn-icon",title:"追加"},[e.createVNode(e.unref(Nt),{style:{width:"14px",height:"14px"}})])]),e.createElementVNode("div",es,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(J.value.entries,(n,r)=>(e.openBlock(),e.createElementBlock("div",{key:r,class:"di-master-entry-row"},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":d=>n.value=d,placeholder:"値",class:"di-master-entry-value"},null,8,ts),[[e.vModelText,n.value]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":d=>n.label=d,placeholder:"ラベル",class:"di-master-entry-label"},null,8,os),[[e.vModelText,n.label]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":d=>n.color=d,placeholder:"#色",class:"di-master-entry-color"},null,8,ls),[[e.vModelText,n.color]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":d=>n.description=d,placeholder:"説明",class:"di-master-entry-desc"},null,8,ns),[[e.vModelText,n.description]]),e.createElementVNode("button",{onClick:d=>xe(r),class:"di-btn-icon di-btn-icon-danger"},[e.createVNode(e.unref(rt),{style:{width:"12px",height:"12px"}})],8,as)]))),128))]),e.createElementVNode("div",is,[t[138]||(t[138]=e.createElementVNode("label",null,"状態遷移",-1)),e.createElementVNode("button",{onClick:Te,class:"di-btn-icon",title:"遷移を追加"},[e.createVNode(e.unref(Nt),{style:{width:"14px",height:"14px"}})])]),J.value.transitions.length>0?(e.openBlock(),e.createElementBlock("div",ss,[t[142]||(t[142]=e.createElementVNode("div",{class:"di-transition-header"},[e.createElementVNode("span",{class:"di-transition-col-from"},"遷移元"),e.createElementVNode("span",{class:"di-transition-col-arrow"},"→"),e.createElementVNode("span",{class:"di-transition-col-to"},"遷移先"),e.createElementVNode("span",{class:"di-transition-col-trigger"},"トリガー"),e.createElementVNode("span",{class:"di-transition-col-condition"},"条件"),e.createElementVNode("span",{class:"di-transition-col-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(J.value.transitions,(n,r)=>(e.openBlock(),e.createElementBlock("div",{key:r,class:"di-transition-row"},[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":d=>n.from=d,class:"di-transition-select di-transition-col-from"},[t[139]||(t[139]=e.createElementVNode("option",{value:""},"-",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(J.value.entries.filter(d=>d.value),d=>(e.openBlock(),e.createElementBlock("option",{key:d.value,value:d.value},e.toDisplayString(d.label||d.value),9,rs))),128))],8,ds),[[e.vModelSelect,n.from]]),t[141]||(t[141]=e.createElementVNode("span",{class:"di-transition-col-arrow"},"→",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":d=>n.to=d,class:"di-transition-select di-transition-col-to"},[t[140]||(t[140]=e.createElementVNode("option",{value:""},"-",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(J.value.entries.filter(d=>d.value),d=>(e.openBlock(),e.createElementBlock("option",{key:d.value,value:d.value},e.toDisplayString(d.label||d.value),9,us))),128))],8,cs),[[e.vModelSelect,n.to]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":d=>n.trigger=d,placeholder:"トリガー",class:"di-transition-input di-transition-col-trigger"},null,8,ms),[[e.vModelText,n.trigger]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":d=>n.condition=d,placeholder:"条件",class:"di-transition-input di-transition-col-condition"},null,8,ps),[[e.vModelText,n.condition]]),e.createElementVNode("button",{onClick:d=>ft(r),class:"di-btn-icon di-btn-icon-danger"},[e.createVNode(e.unref(rt),{style:{width:"12px",height:"12px"}})],8,vs)]))),128))])):(e.openBlock(),e.createElementBlock("div",fs," 状態遷移を定義（任意） "))]),e.createElementVNode("div",ks,[Ze.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:t[41]||(t[41]=n=>{P(Ze.value),We.value=!1}),class:"di-btn-small di-btn-danger"},"削除")):e.createCommentVNode("",!0),t[143]||(t[143]=e.createElementVNode("div",{style:{flex:"1"}},null,-1)),e.createElementVNode("button",{onClick:t[42]||(t[42]=n=>We.value=!1),class:"di-btn-small"},"キャンセル"),e.createElementVNode("button",{onClick:St,class:"di-btn-small di-btn-primary",disabled:!J.value.table||!J.value.column},"保存",8,Vs)])])])):e.createCommentVNode("",!0)],8,["to"]))],512),[[e.vShow,b.value==="masters"]]),e.withDirectives(e.createElementVNode("div",null,[e.createElementVNode("div",Es,[e.createElementVNode("div",hs,[e.createVNode(e.unref(ao),{style:{width:"16px",height:"16px",color:"#f59e0b"}}),t[144]||(t[144]=e.createElementVNode("span",null,"バッチ処理",-1)),_e.value>0?(e.openBlock(),e.createElementBlock("span",ys,e.toDisplayString(_e.value),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:t[44]||(t[44]=n=>le()),class:"di-btn-icon",style:{"margin-left":"auto"},title:"新規追加"},[e.createVNode(e.unref(Nt),{style:{width:"14px",height:"14px"}})])]),_e.value>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(me.value,n=>(e.openBlock(),e.createElementBlock("div",{key:n.id,class:"di-batch-item",onClick:r=>le(n.id)},[e.createElementVNode("div",bs,[e.createElementVNode("div",Ns,e.toDisplayString(n.name),1),n.schedule?(e.openBlock(),e.createElementBlock("div",Bs,e.toDisplayString(n.schedule),1)):e.createCommentVNode("",!0)])],8,gs))),128)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"di-batch-empty",onClick:t[45]||(t[45]=n=>le())},[...t[145]||(t[145]=[e.createElementVNode("span",null,"バッチ処理を定義",-1)])]))]),(e.openBlock(),e.createBlock(e.Teleport,{to:e.unref(m)},[oe.value?(e.openBlock(),e.createElementBlock("div",{key:0,"data-dev-inspector":"",class:"di-modal-overlay",onClick:t[61]||(t[61]=e.withModifiers(n=>oe.value=!1,["self"]))},[e.createElementVNode("div",Cs,[e.createElementVNode("div",ws,[e.createElementVNode("h3",null,e.toDisplayString(Z.value?"バッチ処理を編集":"新規バッチ処理"),1),e.createElementVNode("button",{onClick:t[46]||(t[46]=n=>oe.value=!1),class:"di-close-btn"},[e.createVNode(e.unref(rt),{style:{width:"16px",height:"16px"}})])]),e.createElementVNode("div",xs,[e.createElementVNode("div",Ds,[e.createElementVNode("div",_s,[t[146]||(t[146]=e.createElementVNode("label",null,"バッチ名 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[47]||(t[47]=n=>$.value.name=n),placeholder:"月次レポート生成"},null,512),[[e.vModelText,$.value.name]])]),e.createElementVNode("div",$s,[t[147]||(t[147]=e.createElementVNode("label",null,"スケジュール",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[48]||(t[48]=n=>$.value.schedule=n),placeholder:"毎月1日 AM2:00"},null,512),[[e.vModelText,$.value.schedule]])])]),e.createElementVNode("div",Ts,[e.createElementVNode("div",Ss,[t[148]||(t[148]=e.createElementVNode("label",null,"手動トリガー",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[49]||(t[49]=n=>$.value.trigger=n),placeholder:"管理画面から実行"},null,512),[[e.vModelText,$.value.trigger]])])]),e.createElementVNode("div",Ms,[t[149]||(t[149]=e.createElementVNode("label",null,"説明",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[50]||(t[50]=n=>$.value.description=n),rows:"2",placeholder:"バッチ処理の概要..."},null,512),[[e.vModelText,$.value.description]])]),t[159]||(t[159]=e.createElementVNode("div",{class:"di-batch-section-label"},"入出力テーブル",-1)),e.createElementVNode("div",Is,[e.createElementVNode("div",Us,[t[150]||(t[150]=e.createElementVNode("label",null,"入力テーブル",-1)),e.createElementVNode("div",Fs,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList($.value.inputTables,(n,r)=>(e.openBlock(),e.createElementBlock("span",{key:r,class:"di-batch-tag"},[e.createTextVNode(e.toDisplayString(n)+" ",1),e.createElementVNode("button",{onClick:d=>Je(r),class:"di-batch-tag-remove"},"×",8,Ls)]))),128)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[51]||(t[51]=n=>De.value=n),onKeydown:t[52]||(t[52]=e.withKeys(e.withModifiers(n=>ce(),["prevent"]),["enter"])),type:"text",placeholder:"テーブル名",class:"di-batch-tag-input"},null,544),[[e.vModelText,De.value]])])]),e.createElementVNode("div",Ps,[t[151]||(t[151]=e.createElementVNode("label",null,"出力テーブル",-1)),e.createElementVNode("div",As,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList($.value.outputTables,(n,r)=>(e.openBlock(),e.createElementBlock("span",{key:r,class:"di-batch-tag"},[e.createTextVNode(e.toDisplayString(n)+" ",1),e.createElementVNode("button",{onClick:d=>st(r),class:"di-batch-tag-remove"},"×",8,zs)]))),128)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[53]||(t[53]=n=>Se.value=n),onKeydown:t[54]||(t[54]=e.withKeys(e.withModifiers(n=>ke(),["prevent"]),["enter"])),type:"text",placeholder:"テーブル名",class:"di-batch-tag-input"},null,544),[[e.vModelText,Se.value]])])])]),e.createElementVNode("div",Os,[t[152]||(t[152]=e.createTextVNode(" 処理ステップ ",-1)),e.createElementVNode("button",{onClick:ct,class:"di-btn-icon",style:{"margin-left":"auto"},title:"ステップ追加"},[e.createVNode(e.unref(Nt),{style:{width:"14px",height:"14px"}})])]),$.value.steps.length>0?(e.openBlock(),e.createElementBlock("div",js,[t[154]||(t[154]=e.createElementVNode("div",{class:"di-batch-steps-header"},[e.createElementVNode("span",{class:"di-batch-step-no"},"No"),e.createElementVNode("span",{class:"di-batch-step-desc"},"処理内容"),e.createElementVNode("span",{class:"di-batch-step-target"},"対象"),e.createElementVNode("span",{class:"di-batch-step-type"},"種別"),e.createElementVNode("span",{class:"di-batch-step-error"},"エラー処理"),e.createElementVNode("span",{class:"di-batch-step-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList($.value.steps,(n,r)=>(e.openBlock(),e.createElementBlock("div",{key:r,class:"di-batch-step-row"},[e.createElementVNode("span",qs,e.toDisplayString(r+1),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":d=>n.description=d,placeholder:"処理内容",class:"di-batch-step-input di-batch-step-desc"},null,8,Hs),[[e.vModelText,n.description]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":d=>n.target=d,placeholder:"対象テーブル",class:"di-batch-step-input di-batch-step-target"},null,8,Rs),[[e.vModelText,n.target]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":d=>n.type=d,class:"di-batch-step-select di-batch-step-type"},[...t[153]||(t[153]=[e.createElementVNode("option",{value:""},"-",-1),e.createElementVNode("option",{value:"query"},"query",-1),e.createElementVNode("option",{value:"api"},"api",-1),e.createElementVNode("option",{value:"file"},"file",-1),e.createElementVNode("option",{value:"mail"},"mail",-1),e.createElementVNode("option",{value:"other"},"other",-1)])],8,Ks),[[e.vModelSelect,n.type]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":d=>n.errorHandling=d,placeholder:"エラー時",class:"di-batch-step-input di-batch-step-error"},null,8,Ys),[[e.vModelText,n.errorHandling]]),e.createElementVNode("button",{onClick:d=>ut(r),class:"di-btn-icon di-btn-icon-danger"},[e.createVNode(e.unref(rt),{style:{width:"12px",height:"12px"}})],8,Gs)]))),128))])):e.createCommentVNode("",!0),t[160]||(t[160]=e.createElementVNode("div",{class:"di-batch-section-label"},"運用設定",-1)),e.createElementVNode("div",Xs,[e.createElementVNode("div",Ws,[t[155]||(t[155]=e.createElementVNode("label",null,"タイムアウト",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[55]||(t[55]=n=>$.value.timeout=n),placeholder:"30分"},null,512),[[e.vModelText,$.value.timeout]])]),e.createElementVNode("div",Zs,[t[156]||(t[156]=e.createElementVNode("label",null,"リトライ",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[56]||(t[56]=n=>$.value.retryPolicy=n),placeholder:"3回まで、5分間隔"},null,512),[[e.vModelText,$.value.retryPolicy]])])]),e.createElementVNode("div",Js,[e.createElementVNode("div",Qs,[t[157]||(t[157]=e.createElementVNode("label",null,"エラー通知先",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[57]||(t[57]=n=>$.value.notifyOnError=n),placeholder:"admin@example.com"},null,512),[[e.vModelText,$.value.notifyOnError]])]),e.createElementVNode("div",ed,[t[158]||(t[158]=e.createElementVNode("label",null,"完了通知先",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[58]||(t[58]=n=>$.value.notifyOnComplete=n),placeholder:"manager@example.com"},null,512),[[e.vModelText,$.value.notifyOnComplete]])])])]),e.createElementVNode("div",td,[Z.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:t[59]||(t[59]=n=>{q(Z.value),oe.value=!1}),class:"di-btn-small di-btn-danger"},"削除")):e.createCommentVNode("",!0),t[161]||(t[161]=e.createElementVNode("div",{style:{flex:"1"}},null,-1)),e.createElementVNode("button",{onClick:t[60]||(t[60]=n=>oe.value=!1),class:"di-btn-small"},"キャンセル"),e.createElementVNode("button",{onClick:i,class:"di-btn-small di-btn-primary",disabled:!$.value.name},"保存",8,od)])])])):e.createCommentVNode("",!0)],8,["to"]))],512),[[e.vShow,b.value==="batches"]]),e.withDirectives(e.createElementVNode("div",null,[e.createElementVNode("div",ld,[e.createElementVNode("button",{onClick:t[62]||(t[62]=n=>e.unref(s).erFocusTable=null),class:e.normalizeClass(["di-filter-chip",{active:!e.unref(s).erFocusTable}])},"全テーブル",2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s).erTables,n=>(e.openBlock(),e.createElementBlock("button",{key:n,onClick:r=>e.unref(s).erFocusTable=e.unref(s).erFocusTable===n?null:n,class:e.normalizeClass(["di-filter-chip",{active:e.unref(s).erFocusTable===n}])},e.toDisplayString(n),11,nd))),128))]),e.createElementVNode("div",ad,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Ke.value,n=>{var r;return e.openBlock(),e.createElementBlock("div",{key:n,class:e.normalizeClass(["di-er-card",{"di-er-card-focused":e.unref(s).erFocusTable===n}]),onClick:d=>e.unref(s).erFocusTable=e.unref(s).erFocusTable===n?null:n},[e.createElementVNode("div",sd,[e.createElementVNode("span",null,e.toDisplayString(n),1),Ye(n)?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:e.withModifiers(d=>Xe(n),["stop"]),class:"di-er-rel-delete"},"×",8,dd)):e.createCommentVNode("",!0)]),e.createElementVNode("div",rd,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s).erTableColumns[n]||[],d=>(e.openBlock(),e.createElementBlock("div",{key:d.column,class:"di-er-col"},[e.createElementVNode("span",null,e.toDisplayString(d.column),1),d.type?(e.openBlock(),e.createElementBlock("span",cd,e.toDisplayString(d.type),1)):e.createCommentVNode("",!0),ge(n,d.column)?(e.openBlock(),e.createElementBlock("button",{key:1,onClick:e.withModifiers(V=>e.unref(s).removeManualColumn(n,d.column),["stop"]),class:"di-er-rel-delete"},"×",8,ud)):e.createCommentVNode("",!0)]))),128)),(r=e.unref(s).erTableColumns[n])!=null&&r.length?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",md,"カラム未定義")),he.value===n?(e.openBlock(),e.createElementBlock("div",{key:1,class:"di-er-add-col-form",onClick:t[65]||(t[65]=e.withModifiers(()=>{},["stop"]))},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[63]||(t[63]=d=>y.value=d),placeholder:"カラム名",onKeyup:e.withKeys(d=>Ae(n),["enter"])},null,40,pd),[[e.vModelText,y.value]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[64]||(t[64]=d=>we.value=d),placeholder:"型",onKeyup:e.withKeys(d=>Ae(n),["enter"])},null,40,vd),[[e.vModelText,we.value]]),e.createElementVNode("button",{onClick:d=>Ae(n),disabled:!y.value.trim(),class:"di-er-add-col-btn"},"+",8,fd)])):(e.openBlock(),e.createElementBlock("button",{key:2,onClick:e.withModifiers(d=>tt(n),["stop"]),class:"di-er-add-col-trigger"},"+ カラム",8,kd))]),Pe(n).length?(e.openBlock(),e.createElementBlock("div",Vd,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Pe(n),d=>(e.openBlock(),e.createElementBlock("div",{key:d.id,class:"di-er-relation"},[e.createElementVNode("span",Ed,e.toDisplayString(d.type),1),e.createElementVNode("span",null,"→ "+e.toDisplayString(d.fromTable===n?d.toTable:d.fromTable),1),d.inferred?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("button",{key:0,onClick:e.withModifiers(V=>e.unref(s).removeTableRelation(d.id),["stop"]),class:"di-er-rel-delete"},"×",8,hd))]))),128))])):e.createCommentVNode("",!0)],10,id)}),128))]),e.createElementVNode("div",yd,[e.createElementVNode("div",gd,[e.createElementVNode("button",{onClick:t[66]||(t[66]=n=>{se.value=!se.value,te.value=!1}),class:"di-btn-small"},[e.createVNode(e.unref(Nt),{style:{width:"12px",height:"12px"}}),t[162]||(t[162]=e.createTextVNode(" テーブル追加 ",-1))]),e.createElementVNode("button",{onClick:t[67]||(t[67]=n=>{te.value=!te.value,se.value=!1}),class:"di-btn-small"},[e.createVNode(e.unref(Nt),{style:{width:"12px",height:"12px"}}),t[163]||(t[163]=e.createTextVNode(" リレーション追加 ",-1))])]),se.value?(e.openBlock(),e.createElementBlock("div",bd,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[68]||(t[68]=n=>de.value=n),placeholder:"テーブル名",onKeyup:e.withKeys(pe,["enter"]),style:{background:"#1e1e1e",border:"1px solid #333",color:"#ccc","border-radius":"4px",padding:"4px 6px","font-size":"11px",outline:"none"}},null,544),[[e.vModelText,de.value]]),e.createElementVNode("button",{onClick:pe,disabled:!de.value.trim(),class:"di-btn-small di-btn-primary"},"追加",8,Nd)])):e.createCommentVNode("",!0),te.value?(e.openBlock(),e.createElementBlock("div",Bd,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[69]||(t[69]=n=>S.value=n)},[t[164]||(t[164]=e.createElementVNode("option",{value:""},"From テーブル",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s).erTables,n=>(e.openBlock(),e.createElementBlock("option",{key:n,value:n},e.toDisplayString(n),9,Cd))),128))],512),[[e.vModelSelect,S.value]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[70]||(t[70]=n=>Ee.value=n)},[...t[165]||(t[165]=[e.createElementVNode("option",{value:"has_many"},"has_many",-1),e.createElementVNode("option",{value:"belongs_to"},"belongs_to",-1),e.createElementVNode("option",{value:"has_one"},"has_one",-1),e.createElementVNode("option",{value:"many_to_many"},"many_to_many",-1)])],512),[[e.vModelSelect,Ee.value]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":t[71]||(t[71]=n=>Q.value=n)},[t[166]||(t[166]=e.createElementVNode("option",{value:""},"To テーブル",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s).erTables,n=>(e.openBlock(),e.createElementBlock("option",{key:n,value:n},e.toDisplayString(n),9,wd))),128))],512),[[e.vModelSelect,Q.value]]),e.createElementVNode("button",{onClick:ie,disabled:!S.value||!Q.value,class:"di-btn-small di-btn-primary"},"追加",8,xd)])):e.createCommentVNode("",!0)])],512),[[e.vShow,b.value==="tables"]]),e.withDirectives(e.createElementVNode("div",null,[e.createElementVNode("div",Dd,[e.createElementVNode("button",{onClick:et,class:"di-btn-green"},[e.createVNode(e.unref(el),{style:{width:"16px",height:"16px"}}),t[167]||(t[167]=e.createTextVNode(" Git管理用に保存 ",-1))]),e.createElementVNode("button",{onClick:qe,class:"di-btn-blue"},[e.createVNode(e.unref(vo),{style:{width:"16px",height:"16px"}}),t[168]||(t[168]=e.createTextVNode(" 画面仕様書 (xlsx) 出力 ",-1))]),e.createElementVNode("button",{onClick:t[72]||(t[72]=n=>e.unref(s).downloadSddSpec()),class:"di-btn-green-outline"},[e.createVNode(e.unref(zt),{style:{width:"16px",height:"16px"}}),t[169]||(t[169]=e.createTextVNode(" SDD仕様書 (md) ",-1))]),e.createElementVNode("button",{onClick:t[73]||(t[73]=n=>e.unref(s).downloadClientSpec()),class:"di-btn-blue-outline"},[e.createVNode(e.unref(zt),{style:{width:"16px",height:"16px"}}),t[170]||(t[170]=e.createTextVNode(" 納品用仕様書 (md) ",-1))])]),t[178]||(t[178]=e.createElementVNode("p",{class:"di-export-hint"},[e.createTextVNode(" JSON: "),e.createElementVNode("code",null,"dev-annotations.json"),e.createTextVNode(" に配置してcommit ")],-1)),e.createElementVNode("div",_d,[e.createElementVNode("button",{onClick:t[74]||(t[74]=n=>_.value=!0),class:"di-btn-small"},[e.createVNode(e.unref(Kt),{style:{width:"14px",height:"14px"}}),t[171]||(t[171]=e.createTextVNode(" エクスポート ",-1))]),e.createElementVNode("button",{onClick:t[75]||(t[75]=n=>G.value=!0),class:"di-btn-small"},[e.createVNode(e.unref(rl),{style:{width:"14px",height:"14px"}}),t[172]||(t[172]=e.createTextVNode(" インポート ",-1))]),Ne.value>0?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:Re,class:"di-btn-small di-btn-danger"},[e.createVNode(e.unref(It),{style:{width:"14px",height:"14px"}}),t[173]||(t[173]=e.createTextVNode(" 全削除 ",-1))])):e.createCommentVNode("",!0)]),Ne.value>0||ot.value>0||_e.value>0?(e.openBlock(),e.createElementBlock("div",$d,[t[177]||(t[177]=e.createElementVNode("div",{class:"di-export-summary-title"},"登録状況",-1)),e.createElementVNode("div",Td,[t[174]||(t[174]=e.createElementVNode("span",null,"要素設定",-1)),e.createElementVNode("span",Sd,e.toDisplayString(Ne.value)+"件",1)]),e.createElementVNode("div",Md,[t[175]||(t[175]=e.createElementVNode("span",null,"マスタ定義",-1)),e.createElementVNode("span",Id,e.toDisplayString(ot.value)+"件",1)]),e.createElementVNode("div",Ud,[t[176]||(t[176]=e.createElementVNode("span",null,"バッチ処理",-1)),e.createElementVNode("span",Fd,e.toDisplayString(_e.value)+"件",1)])])):e.createCommentVNode("",!0)],512),[[e.vShow,b.value==="export"]])]),t[179]||(t[179]=e.createElementVNode("div",{class:"di-footer"},[e.createElementVNode("kbd",null,"Ctrl"),e.createElementVNode("span",null,"+"),e.createElementVNode("kbd",null,"Shift"),e.createElementVNode("span",null,"+"),e.createElementVNode("kbd",null,"D"),e.createElementVNode("span",{class:"di-footer-text"},"で開発者モード切替")],-1))])):e.createCommentVNode("",!0)],8,["to"])),(e.openBlock(),e.createBlock(e.Teleport,{to:e.unref(m)},[e.unref(s).isEnabled?(e.openBlock(),e.createElementBlock("div",Ld,[...t[180]||(t[180]=[e.createElementVNode("span",{class:"di-indicator-dot"},null,-1),e.createTextVNode(" Developer Mode ",-1)])])):e.createCommentVNode("",!0)],8,["to"])),(e.openBlock(),e.createBlock(e.Teleport,{to:e.unref(m)},[_.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"di-modal-overlay",onClick:t[77]||(t[77]=e.withModifiers(n=>_.value=!1,["self"])),"data-dev-inspector":""},[e.createElementVNode("div",Pd,[t[182]||(t[182]=e.createElementVNode("h3",{class:"di-modal-title"},"設定をエクスポート",-1)),e.createElementVNode("textarea",{readonly:"",value:e.unref(s).exportConfigs(),class:"di-modal-textarea"},null,8,Ad),e.createElementVNode("div",zd,[e.createElementVNode("button",{onClick:t[76]||(t[76]=n=>_.value=!1),class:"di-btn-small"},"閉じる"),e.createElementVNode("button",{onClick:Ge,class:"di-btn-small di-btn-gray"},[e.createVNode(e.unref(Kt),{style:{width:"14px",height:"14px"}}),t[181]||(t[181]=e.createTextVNode(" ファイル保存 ",-1))]),e.createElementVNode("button",{onClick:je,class:"di-btn-small di-btn-primary"},"コピー")])])])):e.createCommentVNode("",!0)],8,["to"])),(e.openBlock(),e.createBlock(e.Teleport,{to:e.unref(m)},[G.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"di-modal-overlay",onClick:t[80]||(t[80]=e.withModifiers(n=>G.value=!1,["self"])),"data-dev-inspector":""},[e.createElementVNode("div",Od,[t[184]||(t[184]=e.createElementVNode("h3",{class:"di-modal-title"},"設定をインポート",-1)),e.createElementVNode("label",jd,[e.createElementVNode("input",{type:"file",accept:".json",onChange:Le},null,32),t[183]||(t[183]=e.createElementVNode("span",null,"JSONファイルをドラッグまたはクリック",-1))]),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":t[78]||(t[78]=n=>j.value=n),placeholder:"またはJSONを直接貼り付け...",class:"di-modal-textarea di-modal-textarea-input"},null,512),[[e.vModelText,j.value]]),W.value?(e.openBlock(),e.createElementBlock("p",qd,e.toDisplayString(W.value),1)):e.createCommentVNode("",!0),e.createElementVNode("div",Hd,[e.createElementVNode("button",{onClick:t[79]||(t[79]=n=>{G.value=!1,j.value="",W.value=""}),class:"di-btn-small"}," キャンセル "),e.createElementVNode("button",{onClick:He,disabled:!j.value,class:"di-btn-small di-btn-primary"}," インポート ",8,Rd)])])])):e.createCommentVNode("",!0)],8,["to"]))],64)}}}),jt=(A,m)=>{const s=A.__vccOpts||A;for(const[b,_]of m)s[b]=_;return s},ko=jt(Kd,[["__scopeId","data-v-f586c7b8"]]),Yd={class:"di-editor-header"},Gd={class:"di-header-actions"},Xd={key:0,class:"di-source-badge-row"},Wd={key:0,class:"di-source-detail"},Zd={class:"di-context-row"},Jd={class:"di-context-field di-context-field-dropdown"},Qd={class:"di-dropdown-wrapper"},er={key:0,class:"di-dropdown-list"},tr=["onMousedown"],or={class:"di-context-field di-context-field-dropdown"},lr={class:"di-dropdown-wrapper"},nr={key:0,class:"di-dropdown-list"},ar=["onMousedown"],ir={class:"di-editor-tabs"},sr={class:"di-editor-content"},dr={class:"di-form-group"},rr={class:"di-display-type-grid"},cr=["onClick"],ur={class:"di-display-type-desc"},mr={key:0,class:"di-field-tags"},pr={class:"di-field-tags-list"},vr={class:"di-field-tag-name"},fr={key:0,class:"di-field-tag-type"},kr=["onClick"],Vr={key:1,class:"di-binding-selector"},Er={class:"di-form-group"},hr={class:"di-form-label"},yr={class:"di-binding-search-wrapper"},gr={key:0,class:"di-binding-list"},br=["onClick"],Nr={class:"di-binding-item-main"},Br={class:"di-binding-name"},Cr={class:"di-binding-type"},wr={key:0,class:"di-binding-component"},xr={key:1,class:"di-binding-empty"},Dr={key:2,class:"di-form-divider"},_r={class:"di-form-row"},$r={class:"di-form-group di-suggest-wrapper"},Tr={key:0,class:"di-suggest-list"},Sr=["onMousedown"],Mr={class:"di-form-group di-suggest-wrapper"},Ir={key:0,class:"di-suggest-list"},Ur=["onMousedown"],Fr={class:"di-form-group"},Lr=["value"],Pr=["disabled"],Ar={key:3,class:"di-master-inline"},zr={key:0,class:"di-condition-badge",style:{background:"#a78bfa"}},Or={key:0,class:"di-master-inline-section"},jr={key:0,class:"di-master-entries-table"},qr=["onUpdate:modelValue"],Hr=["onUpdate:modelValue"],Rr=["onUpdate:modelValue"],Kr=["onClick"],Yr={key:4,class:"di-form-group"},Gr={class:"di-stored-calc-toggle"},Xr={key:0,class:"di-condition-badge"},Wr={key:5,class:"di-stored-calc-section"},Zr={class:"di-form-group"},Jr={class:"di-form-group di-suggest-wrapper"},Qr={class:"di-stored-calc-tags"},ec=["onClick"],tc={key:0,class:"di-suggest-list"},oc=["onMousedown"],lc={class:"di-form-group"},nc={key:1,class:"di-form-group di-suggest-wrapper"},ac={key:0,class:"di-calc-tag"},ic=["onClick"],sc={key:1,class:"di-calc-text"},dc=["placeholder"],rc={key:0,class:"di-suggest-list"},cc=["onMousedown"],uc={key:2,class:"di-form-group"},mc={class:"di-condition-toggle"},pc={key:0,class:"di-condition-badge"},vc={key:0,class:"di-condition-section"},fc={class:"di-form-group"},kc={class:"di-form-group di-suggest-wrapper"},Vc={class:"di-form-row"},Ec={class:"di-form-group"},hc={key:0,class:"di-form-group"},yc={class:"di-form-row"},gc={class:"di-form-group"},bc={class:"di-form-group",style:{flex:"0 0 80px"}},Nc={class:"di-form-row"},Bc={class:"di-form-group"},Cc={class:"di-form-group"},wc={class:"di-form-group"},xc={class:"di-form-group"},Dc={class:"di-form-group"},_c={class:"di-form-group"},$c=["placeholder"],Tc={key:0,class:"di-form-group"},Sc={class:"di-form-group"},Mc={class:"di-form-divider"},Ic={class:"di-csv-file-settings"},Uc={class:"di-form-row"},Fc={class:"di-form-group"},Lc={class:"di-form-group"},Pc={class:"di-form-row",style:{"align-items":"center"}},Ac={class:"di-csv-checkbox-label"},zc={class:"di-form-group"},Oc={class:"di-csv-columns-section"},jc={key:0,class:"di-csv-columns-table"},qc={class:"di-csv-col-no"},Hc=["onUpdate:modelValue"],Rc=["onUpdate:modelValue"],Kc=["onUpdate:modelValue"],Yc=["onUpdate:modelValue"],Gc={class:"di-csv-col-req di-csv-checkbox-center"},Xc=["onUpdate:modelValue"],Wc=["onUpdate:modelValue"],Zc={class:"di-csv-col-act"},Jc=["onClick","disabled"],Qc=["onClick","disabled"],eu=["onClick"],tu={class:"di-form-group"},ou={class:"di-form-group"},lu={class:"di-form-group"},nu={class:"di-form-group"},au={class:"di-form-group"},iu={class:"di-form-group"},su={class:"di-csv-error-section"},du={key:0,class:"di-csv-columns-table"},ru=["onUpdate:modelValue"],cu=["value"],uu=["onUpdate:modelValue"],mu=["onUpdate:modelValue"],pu=["onUpdate:modelValue"],vu=["onClick"],fu={class:"di-form-divider"},ku={class:"di-form-row"},Vu={class:"di-form-group"},Eu={class:"di-form-group"},hu={class:"di-form-row"},yu={class:"di-form-group"},gu={class:"di-form-group"},bu={class:"di-form-group"},Nu={class:"di-form-group"},Bu={class:"di-form-group"},Cu={class:"di-form-group"},wu={class:"di-email-variables-input"},xu=["onClick"],Du={class:"di-form-group"},_u={class:"di-form-group"},$u={class:"di-form-group"},Tu={class:"di-form-divider"},Su={class:"di-form-group"},Mu={class:"di-form-label",style:{display:"flex","align-items":"center",gap:"8px"}},Iu={class:"di-form-row"},Uu={class:"di-form-group"},Fu={class:"di-form-group"},Lu={class:"di-form-group"},Pu={class:"di-form-group"},Au={class:"di-form-label",style:{display:"flex","align-items":"center",gap:"8px"}},zu={class:"di-form-group"},Ou={class:"di-form-group"},ju={class:"di-form-group"},qu={class:"di-form-group"},Hu={key:0,class:"di-field-tags"},Ru={class:"di-field-tags-list"},Ku={class:"di-field-tag-name"},Yu={key:0,class:"di-field-tag-type"},Gu=["onClick"],Xu={key:1,class:"di-binding-selector"},Wu={class:"di-form-group"},Zu={class:"di-form-label"},Ju={class:"di-binding-search-wrapper"},Qu={key:0,class:"di-binding-list"},em=["onClick"],tm={class:"di-binding-item-main"},om={class:"di-binding-name"},lm={class:"di-binding-type"},nm={key:0,class:"di-binding-component"},am={key:2,class:"di-master-inline"},im={key:0,class:"di-condition-badge",style:{background:"#a78bfa"}},sm={key:0,class:"di-master-inline-section"},dm={key:0,class:"di-master-entries-table"},rm=["onUpdate:modelValue"],cm=["onUpdate:modelValue"],um=["onUpdate:modelValue"],mm=["onClick"],pm={class:"di-condition-toggle"},vm={key:0,class:"di-condition-badge"},fm={class:"di-form-group di-suggest-wrapper"},km={class:"di-calc-tags-input"},Vm=["onClick"],Em=["placeholder"],hm={class:"di-form-group"},ym={class:"di-form-group"},gm={class:"di-form-group"},bm={class:"di-form-group"},Nm={class:"di-form-group"},Bm={class:"di-form-group"},Cm={class:"di-form-row"},wm={class:"di-form-group di-form-half"},xm={class:"di-form-group di-form-half"},Dm={class:"di-csv-columns-section"},_m={key:0,class:"di-csv-columns-table"},$m=["onUpdate:modelValue"],Tm=["onUpdate:modelValue"],Sm=["onUpdate:modelValue"],Mm={class:"di-csv-col-act"},Im=["onClick","disabled"],Um=["onClick","disabled"],Fm=["onClick"],Lm={class:"di-form-group"},Pm={class:"di-form-group"},Am={class:"di-form-group"},zm={class:"di-form-group"},Om={class:"di-editor-footer"},jm={class:"di-editor-actions"},qm=e.defineComponent({__name:"DevElementEditor",setup(A){const m=Ut.useDevInspectorStore(),s=e.inject("teleportTarget","body"),b=e.ref("datasource"),_=e.ref(""),G=e.ref(""),j=e.ref(""),W=e.ref(""),te=e.ref(""),S=e.ref(!1),Q=e.ref([]),Ee=e.ref(""),se=e.ref(""),de=e.ref(""),he=e.ref(""),y=e.ref([]),we=e.ref("UTF-8"),ye=e.ref(","),ve=e.ref(!0),Oe=e.ref(""),F=e.ref(""),Ne=e.ref(""),Be=e.ref(void 0),re=e.ref(""),X=e.ref(""),D=e.ref(""),g=e.ref([]),p=e.ref(""),w=e.ref(""),L=e.ref(""),z=e.ref(""),N=e.ref(""),B=e.ref(""),f=e.ref(""),h=e.ref([]),R=e.ref(""),I=e.ref(""),O=e.ref(""),fe=e.ref(""),ee=e.ref(!0),Ce=e.ref(""),je=e.ref(""),Ge=e.ref(""),et=e.ref(!1),qe=e.ref(""),He=e.ref(""),Le=e.ref(""),Re=e.ref(""),Ke=e.ref(""),Pe=e.ref(""),ie=e.ref([]),Ye=e.ref(""),ge=e.ref(""),pe=e.ref(""),Xe=e.ref(""),tt=e.ref(""),Ae=e.ref(""),vt=e.ref(!1),it=e.ref(!1),Ct=e.computed(()=>{const u=new Set;for(const o of Object.values(m.elementConfigs))o.tabContext&&u.add(o.tabContext);return[...u].sort()}),We=e.computed(()=>{const u=new Set;for(const o of Object.values(m.elementConfigs))o.modalName&&u.add(o.modalName);return[...u].sort()}),Ze=e.computed(()=>{const u=tt.value.toLowerCase();return u?Ct.value.filter(o=>o.toLowerCase().includes(u)):Ct.value}),J=e.computed(()=>{const u=Ae.value.toLowerCase();return u?We.value.filter(o=>o.toLowerCase().includes(u)):We.value});function ot(u){tt.value=u,vt.value=!1}function Tt(u){Ae.value=u,it.value=!1}function gt(){setTimeout(()=>{vt.value=!1},150)}function St(){setTimeout(()=>{it.value=!1},150)}const $e=e.ref(!1),xe=e.ref([]),Te=e.computed(()=>{if(oe.value.length>0){const u=oe.value[0];if(u.table&&u.column)return`${u.table}.${u.column}`}return""}),ft=e.computed(()=>Te.value&&m.getMasterDefinition(Te.value)||null),P=e.ref("db_direct"),oe=e.ref([]),Z=e.ref(""),$=e.ref(""),De=e.ref(""),Se=e.ref(""),_e=e.ref(""),me=e.ref([]),le=e.ref(""),i=e.ref(!1),ct=e.ref(""),ut=e.ref(""),q=e.ref(""),ce=e.ref(""),Je=e.ref(""),ke=e.ref(!1),st=e.ref(""),Me=e.ref([]),Ie=e.ref(""),lt=e.ref(!1),kt=e.ref(""),Ue=e.ref(""),Vt=e.ref(""),x=e.ref(""),ue=e.ref(""),Ve=e.ref(!1),K=e.ref(""),ae=e.ref(""),M=e.ref(""),ne=e.ref(!1),mt=e.computed(()=>ae.value?{data:"data","v-model":"v-model",prop:"prop",static:"static",computed:"computed",store:"store",api:"data"}[ae.value]||ae.value:""),Et=e.computed(()=>m.editingElementId!==null),Fe=e.computed(()=>m.editingElementId),ht=e.computed(()=>_.value==="csv_export"||_.value==="csv_import"),yt=e.computed(()=>_.value==="email"),pt=e.computed(()=>ht.value||yt.value),ze=[{value:"db_direct",label:"DBカラム (そのまま)",icon:Bt,color:"#3b82f6",description:"DBの値をそのまま表示"},{value:"db_formatted",label:"DBカラム (整形)",icon:Ot,color:"#8b5cf6",description:"DBの値を整形して表示"},{value:"calculated",label:"計算値",icon:lo,color:"#f59e0b",description:"複数カラムから計算"},{value:"static",label:"固定文言",icon:dl,color:"#10b981",description:"コード内の固定テキスト"},{value:"other",label:"その他メモ",icon:ll,color:"#94a3b8",description:"自由メモ"}];e.watch(Fe,u=>{var o;if(u){const l=m.getElementConfig(u);try{const c=document.querySelector(u);if(c){l!=null&&l.elementType?b.value=l.elementType:b.value=m.detectElementType(c);const T=c.querySelector("[data-di-binding]")||(c.hasAttribute("data-di-binding")?c:null)||c.closest("[data-di-binding]");if(T){const be=T.getAttribute("data-di-binding"),_t=T.getAttribute("data-di-db"),Rt=T.getAttribute("data-di-db-type"),$t=T.getAttribute("data-di-db-comment");if(be&&(M.value=be,ae.value="data",ne.value=!1),_t){const[to,oo]=_t.split(".");to&&oo&&(oe.value.push({table:to,column:oo,type:Rt||void 0,description:$t||void 0}),P.value||(P.value="db_direct"))}}}}catch(c){console.warn("[DevInspector] Failed to read element:",c)}l!=null&&l.fieldInfoList&&l.fieldInfoList.length>0?oe.value=l.fieldInfoList.map(c=>({...c})):l!=null&&l.fieldInfo&&(oe.value=[{...l.fieldInfo}]),Z.value="",$.value="",De.value="",Se.value="",l!=null&&l.note&&(K.value=l.note.text||K.value,P.value=l.note.displayType||P.value,_e.value=l.note.formatDescription||"",ct.value=l.note.sampleValue||"",ut.value=l.note.decimalHandling||"",q.value=l.note.unit||"",ce.value=l.note.nullDisplay||"",Je.value=l.note.displayFormat||"",Co(l.note.calcDescription||"",l.note.calcSources||[]),ke.value=l.note.storedCalc||!1,st.value=l.note.storedCalcLogic||"",Me.value=l.note.storedCalcSources?[...l.note.storedCalcSources]:[],kt.value=l.note.storedCalcTiming||"",Ue.value=l.note.condition||"",Vt.value=l.note.conditionColumn||"",x.value=l.note.hiddenBehavior||"",ue.value=l.note.hiddenNote||"",Ve.value=!!(l.note.condition||l.note.conditionColumn)),l!=null&&l.sourceBinding&&(ae.value=l.sourceBinding.type||ae.value,M.value=l.sourceBinding.source||M.value,ne.value=l.sourceBinding.isStatic||!1),tt.value=(l==null?void 0:l.tabContext)||m.detectTabContext(u)||"";const k=m.detectModalName(u);if(Ae.value=(l==null?void 0:l.modalName)||k||"",l!=null&&l.actionInfo){if(_.value=l.actionInfo.type||"",G.value=l.actionInfo.target||"",j.value=l.actionInfo.method||"",W.value=l.actionInfo.description||"",l.actionInfo.csvSpec){const c=l.actionInfo.csvSpec;y.value=c.columns.map(T=>({...T})),we.value=c.encoding||"UTF-8",ye.value=c.delimiter||",",ve.value=c.hasHeaderRow!==!1,Oe.value=c.filenamePattern||"",F.value=c.sortOrder||"",Ne.value=c.filterCondition||"",Be.value=c.maxRows,re.value=c.errorHandling||"",X.value=c.duplicateHandling||"",D.value=c.preValidation||"",g.value=c.errorDefs?c.errorDefs.map(T=>({...T})):[]}if(l.actionInfo.emailSpec){const c=l.actionInfo.emailSpec;p.value=c.trigger||"",w.value=c.to||"",L.value=c.cc||"",z.value=c.bcc||"",N.value=c.subject||"",B.value=c.bodyTemplate||"",f.value=c.templatePath||"",h.value=c.variables?[...c.variables]:[],I.value=c.attachments||"",O.value=c.conditions||"",fe.value=c.errorHandling||""}}if(l!=null&&l.formInfo&&(te.value=l.formInfo.inputType||"",S.value=l.formInfo.required||!1,Q.value=l.formInfo.validation?[...l.formInfo.validation]:[],se.value=l.formInfo.placeholder||"",de.value=l.formInfo.defaultValue||"",he.value=l.formInfo.description||""),(o=l==null?void 0:l.actionInfo)!=null&&o.sortSpec){const c=l.actionInfo.sortSpec;ee.value=c.sortable!==!1,Ce.value=c.sortType||"",je.value=c.sortKey||"",Ge.value=c.defaultDirection||"",et.value=c.isDefaultSort||!1,qe.value=c.unsortedOrder||"",He.value=c.description||""}if(l!=null&&l.chartSpec){const c=l.chartSpec;Le.value=c.chartType||"",Re.value=c.title||"",Ke.value=c.xAxis||"",Pe.value=c.yAxis||"",ie.value=c.series?c.series.map(T=>({...T})):[],Ye.value=c.dataSource||"",ge.value=c.aggregation||"",pe.value=c.filters||"",Xe.value=c.description||""}}else bt()});function bt(){b.value="datasource",P.value="db_direct",oe.value=[],Z.value="",$.value="",De.value="",Se.value="",_e.value="",ct.value="",ut.value="",q.value="",ce.value="",Je.value="",me.value=[],le.value="",ke.value=!1,st.value="",Me.value=[],Ie.value="",kt.value="",Ue.value="",Vt.value="",x.value="",ue.value="",Ve.value=!1,K.value="",ae.value="",M.value="",ne.value=!1,_.value="",G.value="",j.value="",W.value="",y.value=[],we.value="UTF-8",ye.value=",",ve.value=!0,Oe.value="",F.value="",Ne.value="",Be.value=void 0,re.value="",X.value="",D.value="",g.value=[],te.value="",S.value=!1,Q.value=[],Ee.value="",se.value="",de.value="",he.value="",p.value="",w.value="",L.value="",z.value="",N.value="",B.value="",f.value="",h.value=[],R.value="",I.value="",O.value="",fe.value="",ee.value=!0,Ce.value="",je.value="",Ge.value="",et.value=!1,qe.value="",He.value="",Le.value="",Re.value="",Ke.value="",Pe.value="",ie.value=[],Ye.value="",ge.value="",pe.value="",Xe.value="",tt.value="",Ae.value="",$e.value=!1,xe.value=[]}function nt(){m.stopEditing(),bt()}function qt(){if(Fe.value)try{const u=document.querySelector(Fe.value);if(!u)return;const o=m.autoDetectElementInfo(u,Fe.value);o.sourceBinding&&(ae.value=o.sourceBinding.type||"",M.value=o.sourceBinding.source||"",ne.value=o.sourceBinding.isStatic||!1,o.sourceBinding.isStatic&&!P.value&&(P.value="static",K.value=K.value||"固定文言")),o.fieldInfo&&(oe.value.push({table:o.fieldInfo.table||"",column:o.fieldInfo.column||"",type:o.fieldInfo.type||void 0,description:o.fieldInfo.description||void 0}),P.value||(P.value="db_direct")),o.note&&!K.value&&(K.value=o.note.text||"")}catch(u){console.error("[DevInspector] Auto-detect failed:",u)}}function wt(){if(!Fe.value)return;const u=[...oe.value];(P.value==="db_direct"||P.value==="db_formatted")&&Z.value&&$.value&&u.push({table:Z.value,column:$.value,type:De.value||void 0,description:Se.value||void 0});const o=u.length>0?u:void 0,l=u.length>0?u[0]:void 0,k=P.value==="db_direct"||P.value==="db_formatted",c=P.value||K.value?{text:K.value||"",displayType:P.value,formatDescription:P.value==="db_formatted"&&_e.value||void 0,calcDescription:P.value==="calculated"&&Bo()||void 0,calcSources:P.value==="calculated"&&Xt().length>0?Xt():void 0,storedCalc:k&&ke.value?!0:void 0,storedCalcLogic:k&&ke.value&&st.value||void 0,storedCalcSources:k&&ke.value&&Me.value.length>0?Me.value:void 0,storedCalcTiming:k&&ke.value&&kt.value||void 0,sampleValue:ct.value||void 0,decimalHandling:ut.value||void 0,unit:q.value||void 0,nullDisplay:ce.value||void 0,displayFormat:Je.value||void 0,condition:Ue.value||void 0,conditionColumn:Vt.value||void 0,hiddenBehavior:x.value||void 0,hiddenNote:ue.value||void 0}:void 0,T=ae.value?{type:ae.value,source:M.value||void 0,isStatic:ne.value}:void 0,be=b.value==="action"&&_.value?{type:_.value,target:G.value||void 0,method:j.value?j.value:void 0,description:W.value||void 0,csvSpec:Fo(),emailSpec:Lo(),sortSpec:Oo()}:void 0,_t=b.value==="form"?{inputType:te.value||void 0,required:S.value||void 0,validation:Q.value.length>0?Q.value:void 0,placeholder:se.value||void 0,defaultValue:de.value||void 0,description:he.value||void 0}:void 0,Rt=b.value==="chart"&&Le.value?{chartType:Le.value,title:Re.value||void 0,xAxis:Ke.value||void 0,yAxis:Pe.value||void 0,series:ie.value.filter($t=>$t.label||$t.field).length>0?ie.value.filter($t=>$t.label||$t.field):void 0,dataSource:Ye.value||void 0,aggregation:ge.value||void 0,filters:pe.value||void 0,description:Xe.value||void 0}:void 0;m.setElementConfig(Fe.value,{elementType:b.value,fieldInfo:l,fieldInfoList:o,actionInfo:be,formInfo:_t,chartSpec:Rt,note:c,sourceBinding:T,tabContext:tt.value||void 0,modalName:Ae.value||void 0,isConditional:Ae.value?!0:void 0}),$e.value&&Te.value&&jo(),nt()}function Mt(){Fe.value&&(m.deleteElementConfig(Fe.value),nt())}const xt=["string","text","integer","bigint","float","decimal","boolean","date","datetime","time","timestamp","binary","json","jsonb","VARCHAR","TEXT","INT","BIGINT","BOOLEAN","DATE","DATETIME","TIMESTAMP","JSON"],Qe=e.ref(""),dt=e.ref(!1),Dt=e.computed(()=>m.searchSchemaColumns(Qe.value).slice(0,30));function Ft(u){oe.value.push({table:u.table,column:u.column,type:u.type||void 0,description:u.comment||void 0}),dt.value=!1,Qe.value=""}function Ht(){!Z.value||!$.value||(oe.value.push({table:Z.value,column:$.value,type:De.value||void 0,description:Se.value||void 0}),Z.value="",$.value="",De.value="",Se.value="")}function Lt(u){oe.value.splice(u,1)}const a=e.computed(()=>m.getSchemaColumns().length>0),t=e.ref(!1),v=e.ref(!1),C=e.computed(()=>{var k;const u=new Set;for(const c of Object.values(m.elementConfigs))if(c.fieldInfoList)for(const T of c.fieldInfoList)T.table&&u.add(T.table);else(k=c.fieldInfo)!=null&&k.table&&u.add(c.fieldInfo.table);for(const c of m.getSchemaColumns())u.add(c.table);const o=[...u].sort();if(!Z.value)return o;const l=Z.value.toLowerCase();return o.filter(c=>c.toLowerCase().includes(l))}),n=e.computed(()=>{var k;const u=new Set;for(const c of Object.values(m.elementConfigs))if(c.fieldInfoList)for(const T of c.fieldInfoList)T.column&&(!Z.value||T.table===Z.value)&&u.add(T.column);else(k=c.fieldInfo)!=null&&k.column&&(!Z.value||c.fieldInfo.table===Z.value)&&u.add(c.fieldInfo.column);for(const c of m.getSchemaColumns())(!Z.value||c.table===Z.value)&&u.add(c.column);const o=[...u].sort();if(!$.value)return o;const l=$.value.toLowerCase();return o.filter(c=>c.toLowerCase().includes(l))});function r(){setTimeout(()=>{t.value=!1},150)}function d(){setTimeout(()=>{v.value=!1},150)}function V(u){if(Z.value=u,t.value=!1,$.value){const o=m.getSchemaColumns().find(l=>l.table===u&&l.column===$.value);o&&(De.value=o.type||"",Se.value=o.comment||"")}}function E(u){if($.value=u,v.value=!1,Z.value){const o=m.getSchemaColumns().find(l=>l.table===Z.value&&l.column===u);o&&(De.value=o.type||"",Se.value=o.comment||"")}}const Y=e.computed(()=>{var k,c;const u=new Set;for(const T of Object.values(m.elementConfigs))if(T.fieldInfoList)for(const be of T.fieldInfoList)be.table&&be.column&&u.add(`${be.table}.${be.column}`);else(k=T.fieldInfo)!=null&&k.table&&((c=T.fieldInfo)!=null&&c.column)&&u.add(`${T.fieldInfo.table}.${T.fieldInfo.column}`);for(const T of m.getSchemaColumns())u.add(T.fullName);const o=[...u].sort();if(!le.value)return o;const l=le.value.trim().toLowerCase();if(/^[a-z0-9_.]+$/i.test(l)){const T=o.filter(be=>be.toLowerCase().includes(l));if(T.length>0)return T}return o});function H(u){le.value.trim()&&me.value.push({type:"text",value:le.value}),me.value.push({type:"tag",value:u}),le.value=""}function at(u){me.value.splice(u,1)}function Pt(u){if(u.key==="Backspace"&&!le.value&&me.value.length>0){const o=me.value.pop();o.type==="text"&&(le.value=o.value)}}function yo(){setTimeout(()=>{i.value=!1},150)}const Gt=e.computed(()=>{var k,c;const u=new Set;for(const T of m.getSchemaColumns())u.add(T.fullName);for(const T of Object.values(m.elementConfigs))if(T.fieldInfoList)for(const be of T.fieldInfoList)be.table&&be.column&&u.add(`${be.table}.${be.column}`);else(k=T.fieldInfo)!=null&&k.table&&((c=T.fieldInfo)!=null&&c.column)&&u.add(`${T.fieldInfo.table}.${T.fieldInfo.column}`);const o=[...u].sort();if(!Ie.value)return o;const l=Ie.value.trim().toLowerCase();return o.filter(T=>T.toLowerCase().includes(l))});function go(){setTimeout(()=>{lt.value=!1},150)}function bo(){const u=Ie.value.trim();u&&!Me.value.includes(u)&&Me.value.push(u),Ie.value=""}function No(u){Me.value.includes(u)||Me.value.push(u),Ie.value=""}function Bo(){const u=me.value.map(o=>o.value);return le.value.trim()&&u.push(le.value.trim()),u.join(" ").replace(/\s+/g," ").trim()}function Xt(){return me.value.filter(u=>u.type==="tag").map(u=>u.value)}function Co(u,o){if(!u&&o.length===0){me.value=[],le.value="";return}if(o.length===0){me.value=[],le.value=u;return}const l=[];let k=u;for(const T of o){const be=k.indexOf(T);if(be>=0){const _t=k.substring(0,be).trim();_t&&l.push({type:"text",value:_t}),l.push({type:"tag",value:T}),k=k.substring(be+T.length)}}const c=k.trim();c&&l.push({type:"text",value:c}),l.length===0?le.value=u:(me.value=l,le.value="")}function wo(){const u=Ee.value.trim();u&&!Q.value.includes(u)&&Q.value.push(u),Ee.value=""}function xo(u){Q.value.splice(u,1)}function Do(u){u.key==="Backspace"&&!Ee.value&&Q.value.length>0&&Q.value.pop()}function _o(){y.value.push({name:"",dbMapping:"",type:"string",required:!1,description:""})}function $o(u){y.value.splice(u,1)}function Wt(u,o){const l=u+o;if(l<0||l>=y.value.length)return;const k=y.value[u];y.value[u]=y.value[l],y.value[l]=k,y.value=[...y.value]}function To(){ie.value.push({label:"",field:"",color:"#3b82f6"})}function So(u){ie.value.splice(u,1)}function Zt(u,o){const l=u+o;if(l<0||l>=ie.value.length)return;const k=ie.value[u];ie.value[u]=ie.value[l],ie.value[l]=k,ie.value=[...ie.value]}function Mo(){g.value.push({condition:"",message:"",column:"",severity:"error"})}function Io(u){g.value.splice(u,1)}const Uo=e.computed(()=>y.value.filter(u=>u.name).map(u=>u.name));function Fo(){if(_.value!=="csv_export"&&_.value!=="csv_import")return;const u=g.value.filter(o=>o.condition||o.message);return{columns:y.value.filter(o=>o.name),encoding:we.value||void 0,delimiter:ye.value||void 0,hasHeaderRow:ve.value,filenamePattern:Oe.value||void 0,sortOrder:F.value||void 0,filterCondition:Ne.value||void 0,maxRows:Be.value||void 0,errorHandling:re.value||void 0,duplicateHandling:X.value||void 0,preValidation:D.value||void 0,errorDefs:u.length>0?u:void 0}}function Lo(){if(_.value==="email")return{trigger:p.value||"",to:w.value||"",cc:L.value||void 0,bcc:z.value||void 0,subject:N.value||"",bodyTemplate:B.value||void 0,templatePath:f.value||void 0,variables:h.value.length>0?h.value:void 0,attachments:I.value||void 0,conditions:O.value||void 0,errorHandling:fe.value||void 0}}function Po(){const u=R.value.trim();u&&!h.value.includes(u)&&h.value.push(u),R.value=""}function Ao(u){h.value.splice(u,1)}function zo(u){u.key==="Backspace"&&!R.value&&h.value.length>0&&h.value.pop()}function Oo(){if(_.value==="sort")return{sortable:ee.value,sortType:Ce.value?Ce.value:void 0,sortKey:je.value||void 0,defaultDirection:Ge.value?Ge.value:void 0,isDefaultSort:et.value||void 0,unsortedOrder:qe.value||void 0,description:He.value||void 0}}e.watch(Te,u=>{if(u){const o=m.getMasterDefinition(u);o?(xe.value=o.entries.map(l=>({...l})),$e.value=!0):(xe.value=[],$e.value=!1)}else xe.value=[],$e.value=!1});function Jt(){$e.value=!$e.value,$e.value&&xe.value.length===0&&xe.value.push({value:"",label:""})}function Qt(){xe.value.push({value:"",label:""})}function eo(u){xe.value.splice(u,1)}function jo(){var c;if(!Te.value)return;const[u,o]=Te.value.split(".");if(!u||!o)return;const l=xe.value.filter(T=>T.value||T.label);if(l.length===0){m.deleteMasterDefinition(Te.value);return}const k=m.getMasterDefinition(Te.value);m.setMasterDefinition({id:Te.value,table:u,column:o,name:(k==null?void 0:k.name)||o,columnType:(k==null?void 0:k.columnType)||((c=oe.value[0])==null?void 0:c.type),description:k==null?void 0:k.description,entries:l,updatedAt:new Date().toISOString()})}return(u,o)=>(e.openBlock(),e.createBlock(e.Teleport,{to:e.unref(s)},[Et.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:"di-editor-overlay",onClick:e.withModifiers(nt,["self"]),"data-dev-inspector":""},[e.createElementVNode("div",{class:e.normalizeClass(["di-editor-modal",{"di-editor-modal-wide":pt.value}])},[e.createElementVNode("div",Yd,[o[94]||(o[94]=e.createElementVNode("h3",null,"要素情報を編集",-1)),e.createElementVNode("div",Gd,[e.createElementVNode("button",{onClick:qt,class:"di-btn-auto",title:"自動検出"},[e.createVNode(e.unref(Ot),{style:{width:"16px",height:"16px"}})]),e.createElementVNode("button",{onClick:nt,class:"di-editor-close"},[e.createVNode(e.unref(rt),{style:{width:"20px",height:"20px"}})])])]),mt.value?(e.openBlock(),e.createElementBlock("div",Xd,[e.createElementVNode("span",{class:e.normalizeClass(["di-source-badge","di-source-"+ae.value])},e.toDisplayString(mt.value),3),M.value?(e.openBlock(),e.createElementBlock("span",Wd,e.toDisplayString(M.value),1)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",Zd,[e.createElementVNode("div",Jd,[o[95]||(o[95]=e.createElementVNode("label",{class:"di-context-label di-context-label-tab"},"タブ:",-1)),e.createElementVNode("div",Qd,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>tt.value=l),type:"text",class:"di-context-input",placeholder:"例: 予習, 受講者一覧",onFocus:o[1]||(o[1]=l=>vt.value=!0),onBlur:gt,autocomplete:"off"},null,544),[[e.vModelText,tt.value]]),vt.value&&Ze.value.length>0?(e.openBlock(),e.createElementBlock("div",er,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Ze.value,l=>(e.openBlock(),e.createElementBlock("div",{key:l,class:"di-dropdown-item",onMousedown:e.withModifiers(k=>ot(l),["prevent"])},e.toDisplayString(l),41,tr))),128))])):e.createCommentVNode("",!0)])]),e.createElementVNode("div",or,[o[96]||(o[96]=e.createElementVNode("label",{class:"di-context-label di-context-label-modal"},"モーダル:",-1)),e.createElementVNode("div",lr,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[2]||(o[2]=l=>Ae.value=l),type:"text",class:"di-context-input",placeholder:"例: 確認ダイアログ",onFocus:o[3]||(o[3]=l=>it.value=!0),onBlur:St,autocomplete:"off"},null,544),[[e.vModelText,Ae.value]]),it.value&&J.value.length>0?(e.openBlock(),e.createElementBlock("div",nr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(J.value,l=>(e.openBlock(),e.createElementBlock("div",{key:l,class:"di-dropdown-item",onMousedown:e.withModifiers(k=>Tt(l),["prevent"])},e.toDisplayString(l),41,ar))),128))])):e.createCommentVNode("",!0)])])]),e.createElementVNode("div",ir,[e.createElementVNode("button",{onClick:o[4]||(o[4]=l=>b.value="datasource"),class:e.normalizeClass(["di-editor-tab",{"di-editor-tab-active":b.value==="datasource"}])},[e.createVNode(e.unref(Bt),{style:{width:"14px",height:"14px"}}),o[97]||(o[97]=e.createTextVNode(" データソース ",-1))],2),e.createElementVNode("button",{onClick:o[5]||(o[5]=l=>b.value="action"),class:e.normalizeClass(["di-editor-tab",{"di-editor-tab-active":b.value==="action"}])},[e.createVNode(e.unref(cl),{style:{width:"14px",height:"14px"}}),o[98]||(o[98]=e.createTextVNode(" アクション ",-1))],2),e.createElementVNode("button",{onClick:o[6]||(o[6]=l=>b.value="form"),class:e.normalizeClass(["di-editor-tab",{"di-editor-tab-active":b.value==="form"}])},[e.createVNode(e.unref(Qo),{style:{width:"14px",height:"14px"}}),o[99]||(o[99]=e.createTextVNode(" フォーム ",-1))],2),e.createElementVNode("button",{onClick:o[7]||(o[7]=l=>b.value="chart"),class:e.normalizeClass(["di-editor-tab",{"di-editor-tab-active":b.value==="chart"}])},[e.createVNode(e.unref(Yo),{style:{width:"14px",height:"14px"}}),o[100]||(o[100]=e.createTextVNode(" チャート ",-1))],2)]),e.createElementVNode("div",sr,[b.value==="datasource"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("div",dr,[o[101]||(o[101]=e.createElementVNode("label",{class:"di-form-label"},"表示タイプ",-1)),e.createElementVNode("div",rr,[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(ze,l=>e.createElementVNode("button",{key:l.value,onClick:k=>P.value=l.value,class:e.normalizeClass(["di-display-type-card",{"di-display-type-active":P.value===l.value}]),style:e.normalizeStyle(P.value===l.value?{borderColor:l.color,background:l.color+"18"}:{})},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.icon),{style:e.normalizeStyle([{width:"20px",height:"20px"},{color:P.value===l.value?l.color:"#64748b"}])},null,8,["style"])),e.createElementVNode("span",{class:"di-display-type-label",style:e.normalizeStyle({color:P.value===l.value?l.color:"#94a3b8"})},e.toDisplayString(l.label),5),e.createElementVNode("span",ur,e.toDisplayString(l.description),1)],14,cr)),64))])]),P.value==="db_direct"||P.value==="db_formatted"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[oe.value.length>0?(e.openBlock(),e.createElementBlock("div",mr,[o[102]||(o[102]=e.createElementVNode("label",{class:"di-form-label"},"登録済みカラム",-1)),e.createElementVNode("div",pr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(oe.value,(l,k)=>(e.openBlock(),e.createElementBlock("div",{key:k,class:"di-field-tag"},[e.createElementVNode("span",vr,e.toDisplayString(l.table)+"."+e.toDisplayString(l.column),1),l.type?(e.openBlock(),e.createElementBlock("span",fr,e.toDisplayString(l.type),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:c=>Lt(k),class:"di-field-tag-remove"},"×",8,kr)]))),128))])])):e.createCommentVNode("",!0),a.value?(e.openBlock(),e.createElementBlock("div",Vr,[e.createElementVNode("div",Er,[e.createElementVNode("label",hr,[e.createVNode(e.unref(Bt),{style:{width:"12px",height:"12px",display:"inline","vertical-align":"middle"}}),o[103]||(o[103]=e.createTextVNode(" schema.rb から選択 ",-1))]),e.createElementVNode("div",yr,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[8]||(o[8]=l=>Qe.value=l),onFocus:o[9]||(o[9]=l=>dt.value=!0),type:"text",placeholder:"テーブル.カラムを検索... (例: users, email)",class:"di-input di-binding-search"},null,544),[[e.vModelText,Qe.value]]),Qe.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:o[10]||(o[10]=l=>{Qe.value="",dt.value=!1}),class:"di-binding-clear"},[e.createVNode(e.unref(rt),{style:{width:"14px",height:"14px"}})])):e.createCommentVNode("",!0)]),dt.value&&Dt.value.length>0?(e.openBlock(),e.createElementBlock("div",gr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Dt.value,l=>(e.openBlock(),e.createElementBlock("button",{key:l.fullName,onClick:k=>Ft(l),class:"di-binding-item has-db"},[e.createElementVNode("div",Nr,[e.createElementVNode("span",Br,e.toDisplayString(l.fullName),1),e.createElementVNode("span",Cr,e.toDisplayString(l.type),1)]),l.comment?(e.openBlock(),e.createElementBlock("span",wr,e.toDisplayString(l.comment),1)):e.createCommentVNode("",!0)],8,br))),128))])):dt.value&&Qe.value&&Dt.value.length===0?(e.openBlock(),e.createElementBlock("div",xr," 該当するカラムが見つかりません ")):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0),a.value?(e.openBlock(),e.createElementBlock("div",Dr,[...o[104]||(o[104]=[e.createElementVNode("span",null,"または手動入力",-1)])])):e.createCommentVNode("",!0),e.createElementVNode("div",_r,[e.createElementVNode("div",$r,[o[105]||(o[105]=e.createElementVNode("label",{class:"di-form-label"},"テーブル名 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[11]||(o[11]=l=>Z.value=l),onFocus:o[12]||(o[12]=l=>t.value=!0),onBlur:o[13]||(o[13]=l=>r()),type:"text",placeholder:"users, users.sheets",class:"di-input",autocomplete:"off"},null,544),[[e.vModelText,Z.value]]),t.value&&C.value.length>0?(e.openBlock(),e.createElementBlock("div",Tr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value.slice(0,10),l=>(e.openBlock(),e.createElementBlock("button",{key:l,onMousedown:e.withModifiers(k=>V(l),["prevent"]),class:"di-suggest-item"},e.toDisplayString(l),41,Sr))),128))])):e.createCommentVNode("",!0)]),e.createElementVNode("div",Mr,[o[106]||(o[106]=e.createElementVNode("label",{class:"di-form-label"},"カラム名 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[14]||(o[14]=l=>$.value=l),onFocus:o[15]||(o[15]=l=>v.value=!0),onBlur:o[16]||(o[16]=l=>d()),type:"text",placeholder:"name",class:"di-input",autocomplete:"off"},null,544),[[e.vModelText,$.value]]),v.value&&n.value.length>0?(e.openBlock(),e.createElementBlock("div",Ir,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value.slice(0,10),l=>(e.openBlock(),e.createElementBlock("button",{key:l,onMousedown:e.withModifiers(k=>E(l),["prevent"]),class:"di-suggest-item"},e.toDisplayString(l),41,Ur))),128))])):e.createCommentVNode("",!0)])]),e.createElementVNode("div",Fr,[o[108]||(o[108]=e.createElementVNode("label",{class:"di-form-label"},"データ型",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[17]||(o[17]=l=>De.value=l),class:"di-select"},[o[107]||(o[107]=e.createElementVNode("option",{value:""},"選択してください",-1)),(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(xt,l=>e.createElementVNode("option",{key:l,value:l},e.toDisplayString(l),9,Lr)),64))],512),[[e.vModelSelect,De.value]])]),e.createElementVNode("button",{onClick:Ht,class:"di-btn-add-field",disabled:!Z.value||!$.value}," + カラムを追加 ",8,Pr),Te.value?(e.openBlock(),e.createElementBlock("div",Ar,[e.createElementVNode("button",{onClick:Jt,class:e.normalizeClass(["di-btn-condition-toggle",{"di-condition-active":$e.value}])},[e.createVNode(e.unref(ro),{style:{width:"14px",height:"14px"}}),o[109]||(o[109]=e.createTextVNode(" マスタ値を定義 ",-1)),ft.value?(e.openBlock(),e.createElementBlock("span",zr,e.toDisplayString(ft.value.entries.length)+"件",1)):e.createCommentVNode("",!0)],2),$e.value?(e.openBlock(),e.createElementBlock("div",Or,[xe.value.length>0?(e.openBlock(),e.createElementBlock("div",jr,[o[110]||(o[110]=e.createElementVNode("div",{class:"di-master-entries-header"},[e.createElementVNode("span",{class:"di-master-col-val"},"値"),e.createElementVNode("span",{class:"di-master-col-lbl"},"ラベル"),e.createElementVNode("span",{class:"di-master-col-color"},"色"),e.createElementVNode("span",{class:"di-master-col-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(xe.value,(l,k)=>(e.openBlock(),e.createElementBlock("div",{key:k,class:"di-master-entry-row"},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>l.value=c,placeholder:"1",class:"di-master-input di-master-col-val"},null,8,qr),[[e.vModelText,l.value]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>l.label=c,placeholder:"受付",class:"di-master-input di-master-col-lbl"},null,8,Hr),[[e.vModelText,l.label]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>l.color=c,type:"color",class:"di-master-color-input"},null,8,Rr),[[e.vModelText,l.color]]),e.createElementVNode("button",{onClick:c=>eo(k),class:"di-master-entry-remove"},"×",8,Kr)]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:Qt,class:"di-btn-add-field",style:{"margin-top":"4px"}}," + 値を追加 ")])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),P.value==="db_formatted"?(e.openBlock(),e.createElementBlock("div",Yr,[o[111]||(o[111]=e.createElementVNode("label",{class:"di-form-label"},"整形方法",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[18]||(o[18]=l=>_e.value=l),rows:"2",placeholder:"YYYY年MM月DD日 に整形、姓 + 名 で結合 など",class:"di-textarea"},null,512),[[e.vModelText,_e.value]])])):e.createCommentVNode("",!0),e.createElementVNode("div",Gr,[e.createElementVNode("button",{onClick:o[19]||(o[19]=l=>ke.value=!ke.value),class:e.normalizeClass(["di-btn-condition-toggle",{"di-condition-active":ke.value}])},[e.createVNode(e.unref(lo),{style:{width:"14px",height:"14px"}}),o[112]||(o[112]=e.createTextVNode(" このカラムは計算値を保存している ",-1)),ke.value?(e.openBlock(),e.createElementBlock("span",Xr,"設定あり")):e.createCommentVNode("",!0)],2)]),ke.value?(e.openBlock(),e.createElementBlock("div",Wr,[e.createElementVNode("div",Zr,[o[113]||(o[113]=e.createElementVNode("label",{class:"di-form-label"},"計算ロジック",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[20]||(o[20]=l=>st.value=l),rows:"2",placeholder:"SUM(order_items.price * quantity)、unit_price × quantity など",class:"di-textarea di-textarea-mono"},null,512),[[e.vModelText,st.value]])]),e.createElementVNode("div",Jr,[o[114]||(o[114]=e.createElementVNode("label",{class:"di-form-label"},"元データ（テーブル.カラム）",-1)),e.createElementVNode("div",Qr,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Me.value,(l,k)=>(e.openBlock(),e.createElementBlock("span",{key:k,class:"di-calc-tag"},[e.createTextVNode(e.toDisplayString(l)+" ",1),e.createElementVNode("button",{onClick:e.withModifiers(c=>Me.value.splice(k,1),["stop"]),class:"di-calc-tag-remove"},"×",8,ec)]))),128)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[21]||(o[21]=l=>Ie.value=l),onFocus:o[22]||(o[22]=l=>lt.value=!0),onBlur:go,onKeydown:o[23]||(o[23]=e.withKeys(e.withModifiers(l=>bo(),["prevent"]),["enter"])),type:"text",placeholder:"order_items.price",class:"di-calc-tags-field",autocomplete:"off"},null,544),[[e.vModelText,Ie.value]])]),lt.value&&Gt.value.length>0?(e.openBlock(),e.createElementBlock("div",tc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Gt.value.slice(0,12),l=>(e.openBlock(),e.createElementBlock("button",{key:l,onMousedown:e.withModifiers(k=>No(l),["prevent"]),class:"di-suggest-item"},[e.createVNode(e.unref(Bt),{style:{width:"10px",height:"10px",opacity:"0.5","flex-shrink":"0"}}),e.createTextVNode(" "+e.toDisplayString(l),1)],40,oc))),128))])):e.createCommentVNode("",!0),o[115]||(o[115]=e.createElementVNode("span",{class:"di-form-hint"},"Enter で追加、またはドロップダウンから選択",-1))]),e.createElementVNode("div",lc,[o[117]||(o[117]=e.createElementVNode("label",{class:"di-form-label"},"計算タイミング",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[24]||(o[24]=l=>kt.value=l),class:"di-select"},[...o[116]||(o[116]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"on_save"},"保存時（アプリ側で計算）",-1),e.createElementVNode("option",{value:"trigger"},"DBトリガー",-1),e.createElementVNode("option",{value:"batch"},"バッチ（定期実行）",-1),e.createElementVNode("option",{value:"realtime"},"リアルタイム（ビュー/マテビュー）",-1)])],512),[[e.vModelSelect,kt.value]])])])):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),P.value==="calculated"?(e.openBlock(),e.createElementBlock("div",nc,[o[118]||(o[118]=e.createElementVNode("label",{class:"di-form-label"},"計算ロジック",-1)),e.createElementVNode("div",{class:"di-calc-tags-input",onClick:o[28]||(o[28]=l=>{var k;return(k=u.$refs.calcInputEl)==null?void 0:k.focus()})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(me.value,(l,k)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:k},[l.type==="tag"?(e.openBlock(),e.createElementBlock("span",ac,[e.createTextVNode(e.toDisplayString(l.value)+" ",1),e.createElementVNode("button",{onClick:e.withModifiers(c=>at(k),["stop"]),class:"di-calc-tag-remove"},"×",8,ic)])):(e.openBlock(),e.createElementBlock("span",sc,e.toDisplayString(l.value),1))],64))),128)),e.withDirectives(e.createElementVNode("input",{ref:"calcInputEl","onUpdate:modelValue":o[25]||(o[25]=l=>le.value=l),onFocus:o[26]||(o[26]=l=>i.value=!0),onBlur:o[27]||(o[27]=l=>yo()),onKeydown:Pt,type:"text",placeholder:me.value.length===0?"カラムを選択 or 自由入力 (例: × 2)":"",class:"di-calc-tags-field",autocomplete:"off"},null,40,dc),[[e.vModelText,le.value]])]),i.value&&Y.value.length>0?(e.openBlock(),e.createElementBlock("div",rc,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Y.value.slice(0,12),l=>(e.openBlock(),e.createElementBlock("button",{key:l,onMousedown:e.withModifiers(k=>H(l),["prevent"]),class:"di-suggest-item"},[e.createVNode(e.unref(Bt),{style:{width:"10px",height:"10px",opacity:"0.5","flex-shrink":"0"}}),e.createTextVNode(" "+e.toDisplayString(l),1)],40,cc))),128))])):e.createCommentVNode("",!0),o[119]||(o[119]=e.createElementVNode("span",{class:"di-form-hint"},"DBカラムはドロップダウンから挿入、演算子や数値はそのまま入力",-1))])):e.createCommentVNode("",!0),P.value==="static"||P.value==="other"?(e.openBlock(),e.createElementBlock("div",uc,[o[120]||(o[120]=e.createElementVNode("label",{class:"di-form-label"},"メモ",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[29]||(o[29]=l=>K.value=l),rows:"4",placeholder:"この要素についてのメモ...",class:"di-textarea"},null,512),[[e.vModelText,K.value]])])):e.createCommentVNode("",!0),P.value&&P.value!=="other"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[e.createElementVNode("div",mc,[e.createElementVNode("button",{onClick:o[30]||(o[30]=l=>Ve.value=!Ve.value),class:e.normalizeClass(["di-btn-condition-toggle",{"di-condition-active":Ve.value||Ue.value}])},[e.createVNode(e.unref(po),{style:{width:"14px",height:"14px"}}),o[121]||(o[121]=e.createTextVNode(" 条件付き表示 ",-1)),Ue.value?(e.openBlock(),e.createElementBlock("span",pc,"設定あり")):e.createCommentVNode("",!0)],2)]),Ve.value?(e.openBlock(),e.createElementBlock("div",vc,[e.createElementVNode("div",fc,[o[122]||(o[122]=e.createElementVNode("label",{class:"di-form-label"},"表示条件",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[31]||(o[31]=l=>Ue.value=l),type:"text",placeholder:"管理者ロール時のみ / ステータスがactiveの時",class:"di-input"},null,512),[[e.vModelText,Ue.value]])]),e.createElementVNode("div",kc,[o[123]||(o[123]=e.createElementVNode("label",{class:"di-form-label"},"判定カラム",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[32]||(o[32]=l=>Vt.value=l),type:"text",placeholder:"users.role / orders.status",class:"di-input di-input-mono"},null,512),[[e.vModelText,Vt.value]])]),e.createElementVNode("div",Vc,[e.createElementVNode("div",Ec,[o[125]||(o[125]=e.createElementVNode("label",{class:"di-form-label"},"条件不一致時の挙動",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[33]||(o[33]=l=>x.value=l),class:"di-select"},[...o[124]||(o[124]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"hidden"},"非表示",-1),e.createElementVNode("option",{value:"disabled"},"無効化 (グレーアウト)",-1),e.createElementVNode("option",{value:"different_value"},"別の値を表示",-1),e.createElementVNode("option",{value:"empty"},"空欄",-1)])],512),[[e.vModelSelect,x.value]])])]),x.value==="different_value"?(e.openBlock(),e.createElementBlock("div",hc,[o[126]||(o[126]=e.createElementVNode("label",{class:"di-form-label"},"代わりに表示する値",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[34]||(o[34]=l=>ue.value=l),type:"text",placeholder:"「権限がありません」/ 「***」",class:"di-input"},null,512),[[e.vModelText,ue.value]])])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),P.value==="db_direct"||P.value==="db_formatted"||P.value==="calculated"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:4},[o[134]||(o[134]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"表示の詳細")],-1)),e.createElementVNode("div",yc,[e.createElementVNode("div",gc,[o[127]||(o[127]=e.createElementVNode("label",{class:"di-form-label"},"サンプル値",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[35]||(o[35]=l=>ct.value=l),type:"text",placeholder:"12,500 / 田中太郎",class:"di-input di-input-mono"},null,512),[[e.vModelText,ct.value]])]),e.createElementVNode("div",bc,[o[128]||(o[128]=e.createElementVNode("label",{class:"di-form-label"},"単位",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[36]||(o[36]=l=>q.value=l),type:"text",placeholder:"円 / %",class:"di-input"},null,512),[[e.vModelText,q.value]])])]),e.createElementVNode("div",Nc,[e.createElementVNode("div",Bc,[o[130]||(o[130]=e.createElementVNode("label",{class:"di-form-label"},"小数点の扱い",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[37]||(o[37]=l=>ut.value=l),class:"di-select"},[...o[129]||(o[129]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"round"},"四捨五入",-1),e.createElementVNode("option",{value:"floor"},"切り捨て",-1),e.createElementVNode("option",{value:"ceil"},"切り上げ",-1),e.createElementVNode("option",{value:"decimal_1"},"小数第1位まで",-1),e.createElementVNode("option",{value:"decimal_2"},"小数第2位まで",-1),e.createElementVNode("option",{value:"integer"},"整数のみ",-1)])],512),[[e.vModelSelect,ut.value]])]),e.createElementVNode("div",Cc,[o[131]||(o[131]=e.createElementVNode("label",{class:"di-form-label"},"NULL/ゼロ時",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[38]||(o[38]=l=>ce.value=l),type:"text",placeholder:"- / 0 / 非表示 / N/A",class:"di-input"},null,512),[[e.vModelText,ce.value]])])]),e.createElementVNode("div",wc,[o[132]||(o[132]=e.createElementVNode("label",{class:"di-form-label"},"表示フォーマット",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[39]||(o[39]=l=>Je.value=l),type:"text",placeholder:"カンマ区切り / ¥記号付き / YYYY/MM/DD",class:"di-input"},null,512),[[e.vModelText,Je.value]])]),e.createElementVNode("div",xc,[o[133]||(o[133]=e.createElementVNode("label",{class:"di-form-label"},"補足メモ（任意）",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[40]||(o[40]=l=>K.value=l),rows:"2",placeholder:"補足情報があれば...",class:"di-textarea"},null,512),[[e.vModelText,K.value]])])],64)):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0),b.value==="action"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("div",Dc,[o[136]||(o[136]=e.createElementVNode("label",{class:"di-form-label"},"アクションタイプ",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[41]||(o[41]=l=>_.value=l),class:"di-select"},[...o[135]||(o[135]=[e.createElementVNode("option",{value:""},"選択してください",-1),e.createElementVNode("option",{value:"navigate"},"画面遷移",-1),e.createElementVNode("option",{value:"api"},"API呼び出し",-1),e.createElementVNode("option",{value:"modal"},"モーダル表示",-1),e.createElementVNode("option",{value:"emit"},"イベント発火",-1),e.createElementVNode("option",{value:"function"},"関数実行",-1),e.createElementVNode("option",{value:"csv_export"},"CSV出力",-1),e.createElementVNode("option",{value:"csv_import"},"CSV取込",-1),e.createElementVNode("option",{value:"email"},"メール送信",-1),e.createElementVNode("option",{value:"sort"},"ソート",-1)])],512),[[e.vModelSelect,_.value]])]),e.createElementVNode("div",_c,[o[137]||(o[137]=e.createElementVNode("label",{class:"di-form-label"},"ターゲット",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[42]||(o[42]=l=>G.value=l),type:"text",placeholder:_.value==="navigate"?"/tasks":_.value==="api"?"/api/users":_.value==="modal"?"confirm-dialog":_.value==="csv_export"?"/api/export/users":_.value==="csv_import"?"/api/import/users":"",class:"di-input di-input-mono"},null,8,$c),[[e.vModelText,G.value]])]),_.value==="api"?(e.openBlock(),e.createElementBlock("div",Tc,[o[139]||(o[139]=e.createElementVNode("label",{class:"di-form-label"},"HTTPメソッド",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[43]||(o[43]=l=>j.value=l),class:"di-select"},[...o[138]||(o[138]=[e.createElementVNode("option",{value:""},"選択してください",-1),e.createElementVNode("option",{value:"GET"},"GET",-1),e.createElementVNode("option",{value:"POST"},"POST",-1),e.createElementVNode("option",{value:"PUT"},"PUT",-1),e.createElementVNode("option",{value:"DELETE"},"DELETE",-1),e.createElementVNode("option",{value:"PATCH"},"PATCH",-1)])],512),[[e.vModelSelect,j.value]])])):e.createCommentVNode("",!0),e.createElementVNode("div",Sc,[o[140]||(o[140]=e.createElementVNode("label",{class:"di-form-label"},"説明",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[44]||(o[44]=l=>W.value=l),rows:"3",placeholder:"このアクションの説明...",class:"di-textarea"},null,512),[[e.vModelText,W.value]])]),_.value==="csv_export"||_.value==="csv_import"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createElementVNode("div",Mc,[e.createElementVNode("span",null,[e.createVNode(e.unref(vo),{style:{width:"12px",height:"12px",display:"inline","vertical-align":"middle"}}),o[141]||(o[141]=e.createTextVNode(" CSV仕様",-1))])]),e.createElementVNode("div",Ic,[o[148]||(o[148]=e.createElementVNode("label",{class:"di-form-label"},"ファイル設定",-1)),e.createElementVNode("div",Uc,[e.createElementVNode("div",Fc,[o[143]||(o[143]=e.createElementVNode("label",{class:"di-form-label"},"エンコーディング",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[45]||(o[45]=l=>we.value=l),class:"di-select"},[...o[142]||(o[142]=[e.createElementVNode("option",{value:"UTF-8"},"UTF-8",-1),e.createElementVNode("option",{value:"Shift_JIS"},"Shift_JIS",-1),e.createElementVNode("option",{value:"EUC-JP"},"EUC-JP",-1),e.createElementVNode("option",{value:"UTF-8 BOM"},"UTF-8 BOM",-1)])],512),[[e.vModelSelect,we.value]])]),e.createElementVNode("div",Lc,[o[145]||(o[145]=e.createElementVNode("label",{class:"di-form-label"},"区切り文字",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[46]||(o[46]=l=>ye.value=l),class:"di-select"},[...o[144]||(o[144]=[e.createElementVNode("option",{value:","},"カンマ (,)",-1),e.createElementVNode("option",{value:"	"},"タブ",-1),e.createElementVNode("option",{value:"|"},"パイプ (|)",-1)])],512),[[e.vModelSelect,ye.value]])])]),e.createElementVNode("div",Pc,[e.createElementVNode("label",Ac,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":o[47]||(o[47]=l=>ve.value=l),class:"di-checkbox"},null,512),[[e.vModelCheckbox,ve.value]]),o[146]||(o[146]=e.createTextVNode(" ヘッダー行あり ",-1))])]),e.createElementVNode("div",zc,[o[147]||(o[147]=e.createElementVNode("label",{class:"di-form-label"},"ファイル名パターン",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[48]||(o[48]=l=>Oe.value=l),type:"text",placeholder:"users_{YYYYMMDD}.csv",class:"di-input di-input-mono"},null,512),[[e.vModelText,Oe.value]])])]),e.createElementVNode("div",Oc,[o[151]||(o[151]=e.createElementVNode("label",{class:"di-form-label"},"CSV列定義",-1)),y.value.length>0?(e.openBlock(),e.createElementBlock("div",jc,[o[150]||(o[150]=e.createElementVNode("div",{class:"di-csv-columns-header"},[e.createElementVNode("span",{class:"di-csv-col-no"},"No"),e.createElementVNode("span",{class:"di-csv-col-name"},"項目名"),e.createElementVNode("span",{class:"di-csv-col-db"},"DBマッピング"),e.createElementVNode("span",{class:"di-csv-col-proc"},"加工"),e.createElementVNode("span",{class:"di-csv-col-type"},"型"),e.createElementVNode("span",{class:"di-csv-col-req"},"必須"),e.createElementVNode("span",{class:"di-csv-col-desc"},"説明"),e.createElementVNode("span",{class:"di-csv-col-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(y.value,(l,k)=>(e.openBlock(),e.createElementBlock("div",{key:k,class:"di-csv-column-row"},[e.createElementVNode("span",qc,e.toDisplayString(k+1),1),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>l.name=c,placeholder:"項目名",class:"di-csv-input di-csv-col-name"},null,8,Hc),[[e.vModelText,l.name]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>l.dbMapping=c,placeholder:"table.col",class:"di-csv-input di-csv-col-db"},null,8,Rc),[[e.vModelText,l.dbMapping]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>l.processing=c,placeholder:"姓+名, IF...",class:"di-csv-input di-csv-col-proc"},null,8,Kc),[[e.vModelText,l.processing]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":c=>l.type=c,class:"di-csv-select di-csv-col-type"},[...o[149]||(o[149]=[e.createElementVNode("option",{value:""},"-",-1),e.createElementVNode("option",{value:"string"},"string",-1),e.createElementVNode("option",{value:"integer"},"integer",-1),e.createElementVNode("option",{value:"decimal"},"decimal",-1),e.createElementVNode("option",{value:"date"},"date",-1),e.createElementVNode("option",{value:"datetime"},"datetime",-1),e.createElementVNode("option",{value:"boolean"},"boolean",-1)])],8,Yc),[[e.vModelSelect,l.type]]),e.createElementVNode("label",Gc,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":c=>l.required=c,class:"di-checkbox"},null,8,Xc),[[e.vModelCheckbox,l.required]])]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>l.description=c,placeholder:"備考",class:"di-csv-input di-csv-col-desc"},null,8,Wc),[[e.vModelText,l.description]]),e.createElementVNode("div",Zc,[e.createElementVNode("button",{onClick:c=>Wt(k,-1),disabled:k===0,class:"di-csv-move-btn",title:"上へ"},[e.createVNode(e.unref(no),{style:{width:"12px",height:"12px"}})],8,Jc),e.createElementVNode("button",{onClick:c=>Wt(k,1),disabled:k===y.value.length-1,class:"di-csv-move-btn",title:"下へ"},[e.createVNode(e.unref(Yt),{style:{width:"12px",height:"12px"}})],8,Qc),e.createElementVNode("button",{onClick:c=>$o(k),class:"di-csv-remove-btn",title:"削除"},"×",8,eu)])]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:_o,class:"di-btn-add-field"}," + 列を追加 ")]),_.value==="csv_export"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[o[155]||(o[155]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"出力オプション")],-1)),e.createElementVNode("div",tu,[o[152]||(o[152]=e.createElementVNode("label",{class:"di-form-label"},"ソート順",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[49]||(o[49]=l=>F.value=l),type:"text",placeholder:"created_at DESC",class:"di-input di-input-mono"},null,512),[[e.vModelText,F.value]])]),e.createElementVNode("div",ou,[o[153]||(o[153]=e.createElementVNode("label",{class:"di-form-label"},"抽出条件",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[50]||(o[50]=l=>Ne.value=l),type:"text",placeholder:"status = 'active'",class:"di-input di-input-mono"},null,512),[[e.vModelText,Ne.value]])]),e.createElementVNode("div",lu,[o[154]||(o[154]=e.createElementVNode("label",{class:"di-form-label"},"最大行数",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[51]||(o[51]=l=>Be.value=l),type:"number",placeholder:"10000",class:"di-input"},null,512),[[e.vModelText,Be.value,void 0,{number:!0}]])])],64)):e.createCommentVNode("",!0),_.value==="csv_import"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[o[161]||(o[161]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"取込オプション")],-1)),e.createElementVNode("div",nu,[o[157]||(o[157]=e.createElementVNode("label",{class:"di-form-label"},"エラー処理",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[52]||(o[52]=l=>re.value=l),class:"di-select"},[...o[156]||(o[156]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"stop_on_first"},"最初のエラーで停止",-1),e.createElementVNode("option",{value:"skip_and_continue"},"スキップして続行",-1),e.createElementVNode("option",{value:"collect_all"},"全エラー収集",-1)])],512),[[e.vModelSelect,re.value]])]),e.createElementVNode("div",au,[o[159]||(o[159]=e.createElementVNode("label",{class:"di-form-label"},"重複処理",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[53]||(o[53]=l=>X.value=l),class:"di-select"},[...o[158]||(o[158]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"skip"},"スキップ",-1),e.createElementVNode("option",{value:"overwrite"},"上書き",-1),e.createElementVNode("option",{value:"error"},"エラー",-1)])],512),[[e.vModelSelect,X.value]])]),e.createElementVNode("div",iu,[o[160]||(o[160]=e.createElementVNode("label",{class:"di-form-label"},"事前バリデーション",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[54]||(o[54]=l=>D.value=l),rows:"2",placeholder:"取込前のチェック内容...",class:"di-textarea"},null,512),[[e.vModelText,D.value]])])],64)):e.createCommentVNode("",!0),o[165]||(o[165]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"エラー定義")],-1)),e.createElementVNode("div",su,[g.value.length>0?(e.openBlock(),e.createElementBlock("div",du,[o[164]||(o[164]=e.createElementVNode("div",{class:"di-csv-columns-header"},[e.createElementVNode("span",{class:"di-csv-err-col"},"対象列"),e.createElementVNode("span",{class:"di-csv-err-cond"},"エラー条件"),e.createElementVNode("span",{class:"di-csv-err-msg"},"エラーメッセージ"),e.createElementVNode("span",{class:"di-csv-err-sev"},"種別"),e.createElementVNode("span",{class:"di-csv-err-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.value,(l,k)=>(e.openBlock(),e.createElementBlock("div",{key:k,class:"di-csv-column-row"},[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":c=>l.column=c,class:"di-csv-select di-csv-err-col"},[o[162]||(o[162]=e.createElementVNode("option",{value:""},"（全体）",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Uo.value,c=>(e.openBlock(),e.createElementBlock("option",{key:c,value:c},e.toDisplayString(c),9,cu))),128))],8,ru),[[e.vModelSelect,l.column]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>l.condition=c,placeholder:"必須項目が空",class:"di-csv-input di-csv-err-cond"},null,8,uu),[[e.vModelText,l.condition]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>l.message=c,placeholder:"○○は必須です",class:"di-csv-input di-csv-err-msg"},null,8,mu),[[e.vModelText,l.message]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":c=>l.severity=c,class:"di-csv-select di-csv-err-sev"},[...o[163]||(o[163]=[e.createElementVNode("option",{value:"error"},"エラー",-1),e.createElementVNode("option",{value:"warning"},"警告",-1)])],8,pu),[[e.vModelSelect,l.severity]]),e.createElementVNode("button",{onClick:c=>Io(k),class:"di-csv-remove-btn",title:"削除"},"×",8,vu)]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:Mo,class:"di-btn-add-field"}," + エラー定義を追加 ")])],64)):e.createCommentVNode("",!0),_.value==="email"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createElementVNode("div",fu,[e.createElementVNode("span",null,[e.createVNode(e.unref(ol),{style:{width:"12px",height:"12px",display:"inline","vertical-align":"middle"}}),o[166]||(o[166]=e.createTextVNode(" メール基本設定",-1))])]),e.createElementVNode("div",ku,[e.createElementVNode("div",Vu,[o[167]||(o[167]=e.createElementVNode("label",{class:"di-form-label"},"トリガー *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[55]||(o[55]=l=>p.value=l),type:"text",placeholder:"注文確定時、ボタンクリック",class:"di-input"},null,512),[[e.vModelText,p.value]])]),e.createElementVNode("div",Eu,[o[168]||(o[168]=e.createElementVNode("label",{class:"di-form-label"},"宛先 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[56]||(o[56]=l=>w.value=l),type:"text",placeholder:"ユーザーメール、管理者固定",class:"di-input"},null,512),[[e.vModelText,w.value]])])]),e.createElementVNode("div",hu,[e.createElementVNode("div",yu,[o[169]||(o[169]=e.createElementVNode("label",{class:"di-form-label"},"CC",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[57]||(o[57]=l=>L.value=l),type:"text",placeholder:"CC宛先",class:"di-input"},null,512),[[e.vModelText,L.value]])]),e.createElementVNode("div",gu,[o[170]||(o[170]=e.createElementVNode("label",{class:"di-form-label"},"BCC",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[58]||(o[58]=l=>z.value=l),type:"text",placeholder:"BCC宛先",class:"di-input"},null,512),[[e.vModelText,z.value]])])]),e.createElementVNode("div",bu,[o[171]||(o[171]=e.createElementVNode("label",{class:"di-form-label"},"件名テンプレート *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[59]||(o[59]=l=>N.value=l),type:"text",placeholder:"【注文確認】ご注文番号 {orderNumber}",class:"di-input"},null,512),[[e.vModelText,N.value]])]),e.createElementVNode("div",Nu,[o[172]||(o[172]=e.createElementVNode("label",{class:"di-form-label"},"本文テンプレート概要",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[60]||(o[60]=l=>B.value=l),rows:"3",placeholder:"本文の概要を記述...",class:"di-textarea"},null,512),[[e.vModelText,B.value]])]),e.createElementVNode("div",Bu,[o[173]||(o[173]=e.createElementVNode("label",{class:"di-form-label"},"テンプレートファイルパス",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[61]||(o[61]=l=>f.value=l),type:"text",placeholder:"resources/mail/order_confirm.blade.php",class:"di-input di-input-mono"},null,512),[[e.vModelText,f.value]])]),o[178]||(o[178]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"差し込み変数")],-1)),e.createElementVNode("div",Cu,[e.createElementVNode("div",wu,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,(l,k)=>(e.openBlock(),e.createElementBlock("span",{key:k,class:"di-calc-tag"},[e.createTextVNode(e.toDisplayString(l)+" ",1),e.createElementVNode("button",{onClick:e.withModifiers(c=>Ao(k),["stop"]),class:"di-calc-tag-remove"},"×",8,xu)]))),128)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[62]||(o[62]=l=>R.value=l),onKeydown:[o[63]||(o[63]=e.withKeys(e.withModifiers(l=>Po(),["prevent"]),["enter"])),zo],type:"text",placeholder:"変数名を入力してEnter (例: userName)",class:"di-calc-tags-field",autocomplete:"off"},null,544),[[e.vModelText,R.value]])]),o[174]||(o[174]=e.createElementVNode("span",{class:"di-form-hint"},"Enter で追加",-1))]),o[179]||(o[179]=e.createElementVNode("div",{class:"di-form-divider"},[e.createElementVNode("span",null,"オプション")],-1)),e.createElementVNode("div",Du,[o[175]||(o[175]=e.createElementVNode("label",{class:"di-form-label"},"添付ファイル",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[64]||(o[64]=l=>I.value=l),type:"text",placeholder:"添付ファイルの説明",class:"di-input"},null,512),[[e.vModelText,I.value]])]),e.createElementVNode("div",_u,[o[176]||(o[176]=e.createElementVNode("label",{class:"di-form-label"},"送信条件",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[65]||(o[65]=l=>O.value=l),type:"text",placeholder:"メール送信設定がONの場合",class:"di-input"},null,512),[[e.vModelText,O.value]])]),e.createElementVNode("div",$u,[o[177]||(o[177]=e.createElementVNode("label",{class:"di-form-label"},"エラー処理",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[66]||(o[66]=l=>fe.value=l),type:"text",placeholder:"キューに入れてリトライ",class:"di-input"},null,512),[[e.vModelText,fe.value]])])],64)):e.createCommentVNode("",!0),_.value==="sort"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[e.createElementVNode("div",Tu,[e.createElementVNode("span",null,[e.createVNode(e.unref(Ko),{style:{width:"12px",height:"12px",display:"inline","vertical-align":"middle"}}),o[180]||(o[180]=e.createTextVNode(" ソート設定",-1))])]),e.createElementVNode("div",Su,[e.createElementVNode("label",Mu,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":o[67]||(o[67]=l=>ee.value=l),class:"di-checkbox"},null,512),[[e.vModelCheckbox,ee.value]]),o[181]||(o[181]=e.createTextVNode(" このカラムはソート可能 ",-1))])]),ee.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("div",Iu,[e.createElementVNode("div",Uu,[o[183]||(o[183]=e.createElementVNode("label",{class:"di-form-label"},"データ型",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[68]||(o[68]=l=>Ce.value=l),class:"di-select"},[...o[182]||(o[182]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"string"},"文字列",-1),e.createElementVNode("option",{value:"number"},"数値",-1),e.createElementVNode("option",{value:"date"},"日付",-1),e.createElementVNode("option",{value:"custom"},"カスタム",-1)])],512),[[e.vModelSelect,Ce.value]])]),e.createElementVNode("div",Fu,[o[185]||(o[185]=e.createElementVNode("label",{class:"di-form-label"},"デフォルト方向",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[69]||(o[69]=l=>Ge.value=l),class:"di-select"},[...o[184]||(o[184]=[e.createElementVNode("option",{value:""},"未指定",-1),e.createElementVNode("option",{value:"asc"},"昇順 (A→Z, 1→9)",-1),e.createElementVNode("option",{value:"desc"},"降順 (Z→A, 9→1)",-1)])],512),[[e.vModelSelect,Ge.value]])])]),e.createElementVNode("div",Lu,[o[186]||(o[186]=e.createElementVNode("label",{class:"di-form-label"},"ソートキー (DBカラム/APIフィールド)",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[70]||(o[70]=l=>je.value=l),type:"text",placeholder:"users.name / created_at",class:"di-input di-input-mono"},null,512),[[e.vModelText,je.value]])]),e.createElementVNode("div",Pu,[e.createElementVNode("label",Au,[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":o[71]||(o[71]=l=>et.value=l),class:"di-checkbox"},null,512),[[e.vModelCheckbox,et.value]]),o[187]||(o[187]=e.createTextVNode(" 初期表示時のデフォルトソート ",-1))])])],64)):e.createCommentVNode("",!0),e.createElementVNode("div",zu,[o[188]||(o[188]=e.createElementVNode("label",{class:"di-form-label"},"未ソート時の並び順",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[72]||(o[72]=l=>qe.value=l),type:"text",placeholder:"ID昇順 / 登録日降順 / APIレスポンス順",class:"di-input"},null,512),[[e.vModelText,qe.value]])]),e.createElementVNode("div",Ou,[o[189]||(o[189]=e.createElementVNode("label",{class:"di-form-label"},"補足",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[73]||(o[73]=l=>He.value=l),type:"text",placeholder:"サーバーサイドソート / ページネーション時はリセット",class:"di-input"},null,512),[[e.vModelText,He.value]])])],64)):e.createCommentVNode("",!0),e.createElementVNode("div",ju,[o[190]||(o[190]=e.createElementVNode("label",{class:"di-form-label"},"補足メモ（任意）",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[74]||(o[74]=l=>K.value=l),rows:"2",placeholder:"補足情報があれば...",class:"di-textarea"},null,512),[[e.vModelText,K.value]])])],64)):e.createCommentVNode("",!0),b.value==="form"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createElementVNode("div",qu,[o[192]||(o[192]=e.createElementVNode("label",{class:"di-form-label"},"入力タイプ",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[75]||(o[75]=l=>te.value=l),class:"di-select"},[...o[191]||(o[191]=[e.createElementVNode("option",{value:""},"選択してください",-1),e.createElementVNode("option",{value:"text"},"テキスト (text)",-1),e.createElementVNode("option",{value:"number"},"数値 (number)",-1),e.createElementVNode("option",{value:"email"},"メール (email)",-1),e.createElementVNode("option",{value:"password"},"パスワード (password)",-1),e.createElementVNode("option",{value:"tel"},"電話番号 (tel)",-1),e.createElementVNode("option",{value:"url"},"URL (url)",-1),e.createElementVNode("option",{value:"date"},"日付 (date)",-1),e.createElementVNode("option",{value:"datetime-local"},"日時 (datetime-local)",-1),e.createElementVNode("option",{value:"select"},"セレクト (select)",-1),e.createElementVNode("option",{value:"textarea"},"テキストエリア (textarea)",-1),e.createElementVNode("option",{value:"checkbox"},"チェックボックス (checkbox)",-1),e.createElementVNode("option",{value:"radio"},"ラジオボタン (radio)",-1),e.createElementVNode("option",{value:"file"},"ファイル (file)",-1)])],512),[[e.vModelSelect,te.value]])]),oe.value.length>0?(e.openBlock(),e.createElementBlock("div",Hu,[o[193]||(o[193]=e.createElementVNode("label",{class:"di-form-label"},"対応カラム",-1)),e.createElementVNode("div",Ru,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(oe.value,(l,k)=>(e.openBlock(),e.createElementBlock("div",{key:k,class:"di-field-tag"},[e.createElementVNode("span",Ku,e.toDisplayString(l.table)+"."+e.toDisplayString(l.column),1),l.type?(e.openBlock(),e.createElementBlock("span",Yu,e.toDisplayString(l.type),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:c=>Lt(k),class:"di-field-tag-remove"},"×",8,Gu)]))),128))])])):e.createCommentVNode("",!0),a.value?(e.openBlock(),e.createElementBlock("div",Xu,[e.createElementVNode("div",Wu,[e.createElementVNode("label",Zu,[e.createVNode(e.unref(Bt),{style:{width:"12px",height:"12px",display:"inline","vertical-align":"middle"}}),o[194]||(o[194]=e.createTextVNode(" 対応するDBカラム ",-1))]),e.createElementVNode("div",Ju,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[76]||(o[76]=l=>Qe.value=l),onFocus:o[77]||(o[77]=l=>dt.value=!0),type:"text",placeholder:"テーブル.カラムを検索...",class:"di-input di-binding-search"},null,544),[[e.vModelText,Qe.value]]),Qe.value?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:o[78]||(o[78]=l=>{Qe.value="",dt.value=!1}),class:"di-binding-clear"},[e.createVNode(e.unref(rt),{style:{width:"14px",height:"14px"}})])):e.createCommentVNode("",!0)]),dt.value&&Dt.value.length>0?(e.openBlock(),e.createElementBlock("div",Qu,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Dt.value,l=>(e.openBlock(),e.createElementBlock("button",{key:l.fullName,onClick:k=>Ft(l),class:"di-binding-item has-db"},[e.createElementVNode("div",tm,[e.createElementVNode("span",om,e.toDisplayString(l.fullName),1),e.createElementVNode("span",lm,e.toDisplayString(l.type),1)]),l.comment?(e.openBlock(),e.createElementBlock("span",nm,e.toDisplayString(l.comment),1)):e.createCommentVNode("",!0)],8,em))),128))])):e.createCommentVNode("",!0)])])):e.createCommentVNode("",!0),Te.value&&(te.value==="select"||te.value==="radio"||te.value==="checkbox")?(e.openBlock(),e.createElementBlock("div",am,[e.createElementVNode("button",{onClick:Jt,class:e.normalizeClass(["di-btn-condition-toggle",{"di-condition-active":$e.value}])},[e.createVNode(e.unref(ro),{style:{width:"14px",height:"14px"}}),o[195]||(o[195]=e.createTextVNode(" 選択肢を定義 ",-1)),ft.value?(e.openBlock(),e.createElementBlock("span",im,e.toDisplayString(ft.value.entries.length)+"件",1)):e.createCommentVNode("",!0)],2),$e.value?(e.openBlock(),e.createElementBlock("div",sm,[xe.value.length>0?(e.openBlock(),e.createElementBlock("div",dm,[o[196]||(o[196]=e.createElementVNode("div",{class:"di-master-entries-header"},[e.createElementVNode("span",{class:"di-master-col-val"},"値"),e.createElementVNode("span",{class:"di-master-col-lbl"},"ラベル"),e.createElementVNode("span",{class:"di-master-col-color"},"色"),e.createElementVNode("span",{class:"di-master-col-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(xe.value,(l,k)=>(e.openBlock(),e.createElementBlock("div",{key:k,class:"di-master-entry-row"},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>l.value=c,placeholder:"1",class:"di-master-input di-master-col-val"},null,8,rm),[[e.vModelText,l.value]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>l.label=c,placeholder:"受付",class:"di-master-input di-master-col-lbl"},null,8,cm),[[e.vModelText,l.label]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>l.color=c,type:"color",class:"di-master-color-input"},null,8,um),[[e.vModelText,l.color]]),e.createElementVNode("button",{onClick:c=>eo(k),class:"di-master-entry-remove"},"×",8,mm)]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:Qt,class:"di-btn-add-field",style:{"margin-top":"4px"}}," + 値を追加 ")])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("div",pm,[e.createElementVNode("button",{onClick:o[79]||(o[79]=l=>S.value=!S.value),class:e.normalizeClass(["di-btn-condition-toggle",{"di-condition-active":S.value}])},[e.createVNode(e.unref(po),{style:{width:"14px",height:"14px"}}),o[197]||(o[197]=e.createTextVNode(" 必須入力 ",-1)),S.value?(e.openBlock(),e.createElementBlock("span",vm,"必須")):e.createCommentVNode("",!0)],2)]),e.createElementVNode("div",fm,[o[198]||(o[198]=e.createElementVNode("label",{class:"di-form-label"},"バリデーションルール",-1)),e.createElementVNode("div",km,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(Q.value,(l,k)=>(e.openBlock(),e.createElementBlock("span",{key:k,class:"di-calc-tag",style:{background:"#ec4899"}},[e.createTextVNode(e.toDisplayString(l)+" ",1),e.createElementVNode("button",{onClick:e.withModifiers(c=>xo(k),["stop"]),class:"di-calc-tag-remove"},"×",8,Vm)]))),128)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[80]||(o[80]=l=>Ee.value=l),onKeydown:[o[81]||(o[81]=e.withKeys(e.withModifiers(l=>wo(),["prevent"]),["enter"])),Do],type:"text",placeholder:Q.value.length===0?"max:255, email, 必須 など (Enter で追加)":"",class:"di-calc-tags-field",autocomplete:"off"},null,40,Em),[[e.vModelText,Ee.value]])]),o[199]||(o[199]=e.createElementVNode("span",{class:"di-form-hint"},"Enter で追加、Backspace で削除",-1))]),e.createElementVNode("div",hm,[o[200]||(o[200]=e.createElementVNode("label",{class:"di-form-label"},"プレースホルダー",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[82]||(o[82]=l=>se.value=l),type:"text",placeholder:"例: user@example.com",class:"di-input"},null,512),[[e.vModelText,se.value]])]),e.createElementVNode("div",ym,[o[201]||(o[201]=e.createElementVNode("label",{class:"di-form-label"},"デフォルト値",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[83]||(o[83]=l=>de.value=l),type:"text",placeholder:"初期値",class:"di-input di-input-mono"},null,512),[[e.vModelText,de.value]])]),e.createElementVNode("div",gm,[o[202]||(o[202]=e.createElementVNode("label",{class:"di-form-label"},"説明",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[84]||(o[84]=l=>he.value=l),rows:"3",placeholder:"このフォーム要素の説明...",class:"di-textarea"},null,512),[[e.vModelText,he.value]])]),e.createElementVNode("div",bm,[o[203]||(o[203]=e.createElementVNode("label",{class:"di-form-label"},"補足メモ（任意）",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[85]||(o[85]=l=>K.value=l),rows:"2",placeholder:"補足情報があれば...",class:"di-textarea"},null,512),[[e.vModelText,K.value]])])],64)):e.createCommentVNode("",!0),b.value==="chart"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:3},[e.createElementVNode("div",Nm,[o[205]||(o[205]=e.createElementVNode("label",{class:"di-form-label"},"チャート種別",-1)),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[86]||(o[86]=l=>Le.value=l),class:"di-select"},[...o[204]||(o[204]=[e.createElementVNode("option",{value:""},"選択してください",-1),e.createElementVNode("option",{value:"bar"},"棒グラフ (bar)",-1),e.createElementVNode("option",{value:"line"},"折れ線グラフ (line)",-1),e.createElementVNode("option",{value:"pie"},"円グラフ (pie)",-1),e.createElementVNode("option",{value:"area"},"エリアチャート (area)",-1),e.createElementVNode("option",{value:"scatter"},"散布図 (scatter)",-1),e.createElementVNode("option",{value:"doughnut"},"ドーナツ (doughnut)",-1),e.createElementVNode("option",{value:"radar"},"レーダー (radar)",-1),e.createElementVNode("option",{value:"other"},"その他 (other)",-1)])],512),[[e.vModelSelect,Le.value]])]),e.createElementVNode("div",Bm,[o[206]||(o[206]=e.createElementVNode("label",{class:"di-form-label"},"タイトル",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[87]||(o[87]=l=>Re.value=l),type:"text",placeholder:"例: 月別受講者数",class:"di-input"},null,512),[[e.vModelText,Re.value]])]),e.createElementVNode("div",Cm,[e.createElementVNode("div",wm,[o[207]||(o[207]=e.createElementVNode("label",{class:"di-form-label"},"X軸",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[88]||(o[88]=l=>Ke.value=l),type:"text",placeholder:"例: 月, 日付",class:"di-input"},null,512),[[e.vModelText,Ke.value]])]),e.createElementVNode("div",xm,[o[208]||(o[208]=e.createElementVNode("label",{class:"di-form-label"},"Y軸",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[89]||(o[89]=l=>Pe.value=l),type:"text",placeholder:"例: 件数, 金額",class:"di-input"},null,512),[[e.vModelText,Pe.value]])])]),e.createElementVNode("div",Dm,[o[210]||(o[210]=e.createElementVNode("label",{class:"di-form-label"},"系列定義",-1)),ie.value.length>0?(e.openBlock(),e.createElementBlock("div",_m,[o[209]||(o[209]=e.createElementVNode("div",{class:"di-csv-columns-header"},[e.createElementVNode("span",{class:"di-chart-col-label"},"系列名"),e.createElementVNode("span",{class:"di-chart-col-field"},"フィールド"),e.createElementVNode("span",{class:"di-chart-col-color"},"色"),e.createElementVNode("span",{class:"di-csv-col-act"})],-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(ie.value,(l,k)=>(e.openBlock(),e.createElementBlock("div",{key:k,class:"di-csv-column-row"},[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>l.label=c,placeholder:"予習",class:"di-csv-input di-chart-col-label"},null,8,$m),[[e.vModelText,l.label]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>l.field=c,placeholder:"preview_count",class:"di-csv-input di-chart-col-field"},null,8,Tm),[[e.vModelText,l.field]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":c=>l.color=c,type:"color",class:"di-master-color-input"},null,8,Sm),[[e.vModelText,l.color]]),e.createElementVNode("div",Mm,[e.createElementVNode("button",{onClick:c=>Zt(k,-1),disabled:k===0,class:"di-csv-move-btn",title:"上へ"},[e.createVNode(e.unref(no),{style:{width:"12px",height:"12px"}})],8,Im),e.createElementVNode("button",{onClick:c=>Zt(k,1),disabled:k===ie.value.length-1,class:"di-csv-move-btn",title:"下へ"},[e.createVNode(e.unref(Yt),{style:{width:"12px",height:"12px"}})],8,Um),e.createElementVNode("button",{onClick:c=>So(k),class:"di-csv-remove-btn",title:"削除"},"×",8,Fm)])]))),128))])):e.createCommentVNode("",!0),e.createElementVNode("button",{onClick:To,class:"di-btn-add-field"}," + 系列を追加 ")]),e.createElementVNode("div",Lm,[o[211]||(o[211]=e.createElementVNode("label",{class:"di-form-label"},"データ取得元",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[90]||(o[90]=l=>Ye.value=l),type:"text",placeholder:"例: GET /api/stats/monthly",class:"di-input di-input-mono"},null,512),[[e.vModelText,Ye.value]])]),e.createElementVNode("div",Pm,[o[212]||(o[212]=e.createElementVNode("label",{class:"di-form-label"},"集計方法",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[91]||(o[91]=l=>ge.value=l),type:"text",placeholder:"例: 月別集計, GROUP BY month",class:"di-input"},null,512),[[e.vModelText,ge.value]])]),e.createElementVNode("div",Am,[o[213]||(o[213]=e.createElementVNode("label",{class:"di-form-label"},"フィルタ条件",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":o[92]||(o[92]=l=>pe.value=l),type:"text",placeholder:"例: 直近12ヶ月, status=active",class:"di-input"},null,512),[[e.vModelText,pe.value]])]),e.createElementVNode("div",zm,[o[214]||(o[214]=e.createElementVNode("label",{class:"di-form-label"},"説明",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":o[93]||(o[93]=l=>Xe.value=l),rows:"3",placeholder:"このチャートの説明...",class:"di-textarea"},null,512),[[e.vModelText,Xe.value]])])],64)):e.createCommentVNode("",!0)]),e.createElementVNode("div",Om,[e.createElementVNode("button",{onClick:Mt,class:"di-btn-delete"},[e.createVNode(e.unref(It),{style:{width:"14px",height:"14px"}}),o[215]||(o[215]=e.createTextVNode(" 削除 ",-1))]),e.createElementVNode("div",jm,[e.createElementVNode("button",{onClick:nt,class:"di-btn-cancel"},"キャンセル"),e.createElementVNode("button",{onClick:wt,class:"di-btn-save"},[e.createVNode(e.unref(fo),{style:{width:"14px",height:"14px"}}),o[216]||(o[216]=e.createTextVNode(" 保存 ",-1))])])])],2)])):e.createCommentVNode("",!0)],8,["to"]))}}),Vo=jt(qm,[["__scopeId","data-v-6216bf9b"]]),Hm={key:0,"data-dev-inspector":"",class:"di-loading-overlay"},Rm={class:"di-highlight-label"},Km=["onClick"],Ym={key:0,class:"di-note-label-row"},Gm=["onClick"],Xm={"data-dev-inspector":"",class:"di-scan-banner"},Wm=["onClick"],Zm={class:"di-analysis-type"},Jm={key:0,class:"di-analysis-tags"},Qm={key:1,class:"di-analysis-db"},ep={key:2,class:"di-analysis-api-source"},tp={key:3,class:"di-analysis-conditional"},op=["onClick"],lp={key:0,class:"di-analysis-text"},np={"data-dev-inspector":"",class:"di-analysis-banner"},ap=["onClick"],ip={key:0,class:"di-unannotated-label-text"},sp=e.defineComponent({__name:"DevPickOverlay",setup(A){const m=Ut.useDevInspectorStore(),s=e.inject("teleportTarget","body"),b=e.ref(null),_=e.ref(null),G=e.ref(0),j=e.ref(0),W=e.ref(0),te={db_direct:"#3b82f6",db_formatted:"#8b5cf6",calculated:"#f59e0b",static:"#10b981",other:"#94a3b8"},S={action:"#a78bfa",form:"#ec4899"};function Q(D){return{db:"DB",form:"フォーム",button:"ボタン",link:"リンク",modal:"モーダル",conditional:"条件",computed:"計算",api:"API",other:"その他"}[D]||D}function Ee(D){var p,w;const g=m.getElementConfig(D);if(g!=null&&g.elementType&&S[g.elementType])return S[g.elementType];if((p=g==null?void 0:g.note)!=null&&p.displayType)return te[g.note.displayType]||"#60a5fa";if(!(g!=null&&g.sourceBinding)){const L=((w=g==null?void 0:g.note)==null?void 0:w.type)||"info";return{info:"#60a5fa",warning:"#fbbf24",todo:"#10b981",question:"#a78bfa"}[L]||"#60a5fa"}return g.sourceBinding.isStatic?"#10b981":g.sourceBinding.type==="v-model"?"#8b5cf6":g.sourceBinding.type==="api"?"#f59e0b":"#60a5fa"}function se(D){var B,f,h,R,I,O;const g=m.noteHighlightFilter,p=m.noteTableFilter,w=m.getElementConfig(D);if(!w||p!=="all"&&!((B=w.fieldInfoList)!=null&&B.length?w.fieldInfoList:w.fieldInfo?[w.fieldInfo]:[]).some(Ce=>Ce.table===p||Ce.table.startsWith(p+".")))return!1;if(g==="all")return!0;const L=(f=w.note)==null?void 0:f.displayType,z=!!((h=w.note)!=null&&h.condition||(R=w.note)!=null&&R.conditionColumn),N=!!((I=w.note)!=null&&I.storedCalc);switch(g){case"db":return L==="db_direct"||L==="db_formatted";case"calculated":return L==="calculated";case"storedCalc":return N;case"static":return L==="static";case"conditional":return z;case"action":return w.elementType==="action";case"form":return w.elementType==="form";case"other":return L==="other"||!L&&!w.elementType&&!!((O=w.note)!=null&&O.text);default:return!0}}function de(D){let g=D.parentElement;for(;g&&g!==document.body;){const p=getComputedStyle(g);if(p.display==="none"||(p.overflow==="hidden"||p.overflowY==="hidden")&&g.clientHeight===0)return!0;g=g.parentElement}return!1}function he(){var L,z;const D=document.querySelector("dialog[open]");if(D)return D;const g=document.querySelectorAll('[role="dialog"], [role="alertdialog"]');for(const N of g){const B=N.getBoundingClientRect();if(B.width>0&&B.height>0)return N}const p='.v-overlay--active .v-overlay__content, .el-dialog__wrapper:not([style*="display: none"]) .el-dialog, .modal.show .modal-dialog, .modal-overlay[style*="display: block"], .v-dialog--active';try{const N=document.querySelector(p);if(N){const B=N.getBoundingClientRect();if(B.width>0&&B.height>0)return N}}catch{}const w=document.querySelectorAll(".fixed.inset-0, .fixed.inset-x-0.inset-y-0, [data-modal], [data-overlay]");for(const N of w){if(((L=N.dataset)==null?void 0:L.devInspector)!==void 0)continue;const B=getComputedStyle(N),f=parseInt(B.zIndex,10);if(isNaN(f)||f<40)continue;const h=N.getBoundingClientRect();if(h.width>=window.innerWidth*.9&&h.height>=window.innerHeight*.9)return N}for(const N of document.body.children){if(((z=N.dataset)==null?void 0:z.devInspector)!==void 0)continue;const B=getComputedStyle(N);if(B.position!=="fixed")continue;const f=parseInt(B.zIndex,10);if(isNaN(f)||f<40)continue;const h=N.getBoundingClientRect();if(h.width>=window.innerWidth*.9&&h.height>=window.innerHeight*.9)return N}return null}function y(D,g){return g.contains(D)}const we=e.computed(()=>{var z,N,B,f,h,R,I,O,fe,ee,Ce,je,Ge,et,qe,He,Le,Re,Ke,Pe,ie,Ye,ge,pe,Xe,tt,Ae,vt,it,Ct,We,Ze,J,ot,Tt,gt,St,$e,xe,Te,ft,P,oe,Z,$,De,Se;const D=G.value,g=j.value;W.value;const p=[];if(!m.isEnabled)return p;const w=he(),L=m.getConfiguredSelectors();for(const _e of L)try{const me=document.querySelector(_e);if(me){if(w&&!y(me,w))continue;const le=me.getBoundingClientRect();if(le.width===0||le.height===0||!me.offsetParent&&me.tagName!=="BODY"&&getComputedStyle(me).position!=="fixed"||de(me))continue;const i=m.getElementConfig(_e),ct=((z=i==null?void 0:i.sourceBinding)==null?void 0:z.isStatic)||!1,ut=((N=i==null?void 0:i.sourceBinding)==null?void 0:N.type)||"";let q="",ce="";const Je=(B=i==null?void 0:i.note)==null?void 0:B.displayType,ke=[];if((f=i==null?void 0:i.note)!=null&&f.sampleValue?ke.push(`例: ${i.note.sampleValue}${i.note.unit?i.note.unit:""}`):(h=i==null?void 0:i.note)!=null&&h.unit&&ke.push(`単位: ${i.note.unit}`),(R=i==null?void 0:i.note)!=null&&R.decimalHandling){const x={round:"四捨五入",floor:"切り捨て",ceil:"切り上げ",decimal_1:"小数第1位",decimal_2:"小数第2位",integer:"整数"};ke.push(x[i.note.decimalHandling]||i.note.decimalHandling)}(I=i==null?void 0:i.note)!=null&&I.nullDisplay&&ke.push(`NULL時: ${i.note.nullDisplay}`),(O=i==null?void 0:i.note)!=null&&O.displayFormat&&ke.push(i.note.displayFormat);const st=ke.length>0?`
${ke.join(" / ")}`:"",Me=!!((fe=i==null?void 0:i.note)!=null&&fe.condition||(ee=i==null?void 0:i.note)!=null&&ee.conditionColumn);let Ie="";if(Me){const x={hidden:"非表示",disabled:"無効化",different_value:"別の値",empty:"空欄"},ue=[];(Ce=i==null?void 0:i.note)!=null&&Ce.condition&&ue.push(i.note.condition),(je=i==null?void 0:i.note)!=null&&je.conditionColumn&&ue.push(`判定: ${i.note.conditionColumn}`),(Ge=i==null?void 0:i.note)!=null&&Ge.hiddenBehavior&&ue.push(`不一致時: ${x[i.note.hiddenBehavior]||i.note.hiddenBehavior}`),(et=i==null?void 0:i.note)!=null&&et.hiddenNote&&ue.push(`→ ${i.note.hiddenNote}`),Ie=`
条件: ${ue.join(" / ")}`}const lt=Me?" ⚡":"";if((i==null?void 0:i.elementType)==="action"&&(i!=null&&i.actionInfo)){const x=i.actionInfo;x.type==="navigate"?q=`遷移: ${x.target||"?"}`:x.type==="api"?q=`API: ${x.method||"GET"} ${x.target||"?"}`:x.type==="modal"?q=`モーダル: ${x.target||"?"}`:x.type==="emit"?q=`イベント: ${x.target||"?"}`:x.type==="function"?q=`関数: ${x.target||"?"}`:q="アクション",ce=(x.description||q)+((qe=i==null?void 0:i.note)!=null&&qe.text?`
${i.note.text}`:"")}else if((i==null?void 0:i.elementType)==="form"&&(i!=null&&i.formInfo)){const x=i.formInfo,ue=(He=i==null?void 0:i.fieldInfoList)!=null&&He.length?i.fieldInfoList:i!=null&&i.fieldInfo?[i.fieldInfo]:[],Ve=ue.length>0?ue.map(ne=>`${ne.table}.${ne.column}`).join(", "):"",K=ue.length>0?`${ue[0].table}.${ue[0].column}`:"",ae=K?m.getMasterDefinition(K):null;x.inputType==="select"?q=`選択: ${Ve||x.description||"?"}${ae?` (${ae.entries.length}件)`:""}`:x.inputType==="textarea"?q=`テキスト: ${Ve||x.description||"?"}`:x.inputType==="checkbox"?q=`チェック: ${Ve||x.description||"?"}`:x.inputType==="radio"?q=`ラジオ: ${Ve||x.description||"?"}`:q=`入力: ${Ve||x.description||x.inputType||"?"}`,x.required&&(q+=" (必須)");const M=[];x.description&&M.push(x.description),(Le=x.validation)!=null&&Le.length&&M.push(`検証: ${x.validation.join(", ")}`),x.placeholder&&M.push(`placeholder: ${x.placeholder}`),x.defaultValue&&M.push(`初期値: ${x.defaultValue}`),ce=M.join(`
`)+((Re=i==null?void 0:i.note)!=null&&Re.text?`
${i.note.text}`:"")}else if((i==null?void 0:i.elementType)==="action")q="アクション",ce=((Ke=i==null?void 0:i.note)==null?void 0:Ke.text)||"";else if((i==null?void 0:i.elementType)==="form")q="フォーム",ce=((Pe=i==null?void 0:i.note)==null?void 0:Pe.text)||"";else if(Je==="db_direct"){const x=(ie=i==null?void 0:i.fieldInfoList)!=null&&ie.length?i.fieldInfoList:i!=null&&i.fieldInfo?[i.fieldInfo]:[];if(x.length>0){const ue=x.map(M=>`${M.table}.${M.column}`).join(", "),Ve=`${x[0].table}.${x[0].column}`,K=m.getMasterDefinition(Ve),ae=K?` (${K.entries.length}値)`:"";q=`DB: ${ue}${ae}${lt}`,ce=x.map(M=>`${M.table}.${M.column}${M.type?` (${M.type})`:""}`).join(`
`)+st+Ie+((Ye=i==null?void 0:i.note)!=null&&Ye.text?`
${i.note.text}`:"")}}else if(Je==="db_formatted"){const x=(ge=i==null?void 0:i.fieldInfoList)!=null&&ge.length?i.fieldInfoList:i!=null&&i.fieldInfo?[i.fieldInfo]:[];if(x.length>0){const ue=x.map(M=>`${M.table}.${M.column}`).join(", "),Ve=`${x[0].table}.${x[0].column}`,K=m.getMasterDefinition(Ve),ae=K?` (${K.entries.length}値)`:"";q=`DB: ${ue} (整形)${ae}${lt}`,ce=x.map(M=>`${M.table}.${M.column}`).join(`
`)+((pe=i==null?void 0:i.note)!=null&&pe.formatDescription?`
整形: ${i.note.formatDescription}`:"")+st+Ie+((Xe=i==null?void 0:i.note)!=null&&Xe.text?`
${i.note.text}`:"")}}else Je==="calculated"?(q="計算値"+((tt=i==null?void 0:i.note)!=null&&tt.unit?` (${i.note.unit})`:"")+lt,ce=(((Ae=i==null?void 0:i.note)==null?void 0:Ae.calcDescription)||"計算値")+((it=(vt=i==null?void 0:i.note)==null?void 0:vt.calcSources)!=null&&it.length?`
参照: ${i.note.calcSources.join(", ")}`:"")+st+Ie+((Ct=i==null?void 0:i.note)!=null&&Ct.text?`
${i.note.text}`:"")):Je==="static"?(q="固定"+lt,ce=(((We=i==null?void 0:i.note)==null?void 0:We.text)||"固定文言")+Ie):Je==="other"?(q="メモ",ce=((Ze=i==null?void 0:i.note)==null?void 0:Ze.text)||""):(J=i==null?void 0:i.fieldInfoList)!=null&&J.length||(ot=i==null?void 0:i.fieldInfo)!=null&&ot.table&&((Tt=i==null?void 0:i.fieldInfo)!=null&&Tt.column)?(q=`DB: ${((gt=i==null?void 0:i.fieldInfoList)!=null&&gt.length?i.fieldInfoList:i!=null&&i.fieldInfo?[i.fieldInfo]:[]).map(Ve=>`${Ve.table}.${Ve.column}`).join(", ")}`,ce=((St=i==null?void 0:i.note)==null?void 0:St.text)||""):ct?(q="固定",ce=(($e=i==null?void 0:i.note)==null?void 0:$e.text)||"固定文言"):ut==="v-model"?(q="フォーム",ce=((xe=i==null?void 0:i.note)==null?void 0:xe.text)||""):ut==="api"?(q="データ",ce=((Te=i==null?void 0:i.note)==null?void 0:Te.text)||""):(ft=i==null?void 0:i.note)!=null&&ft.type?(q={info:"情報",warning:"注意",todo:"TODO",question:"質問"}[i.note.type]||"メモ",ce=((P=i==null?void 0:i.note)==null?void 0:P.text)||""):(q="メモ",ce=((oe=i==null?void 0:i.note)==null?void 0:oe.text)||"");const kt=ce||((Z=i==null?void 0:i.note)==null?void 0:Z.text)||"",Ue=(($=i==null?void 0:i.note)==null?void 0:$.type)||"info",Vt=!!((De=i==null?void 0:i.note)!=null&&De.text||(Se=i==null?void 0:i.note)!=null&&Se.displayType);p.push({selector:_e,top:`${le.top+D}px`,left:`${le.left+g}px`,width:`${le.width}px`,height:`${le.height}px`,color:Ee(_e),isStatic:ct,label:q,noteText:kt,noteType:Ue,hasNote:Vt})}}catch{}return p}),ye=e.computed(()=>{var L;const D=G.value,g=j.value;W.value;const p=[];if(!m.isEnabled||m.scanResults.length===0)return p;const w=he();for(const z of m.scanResults)try{const N=document.querySelector(z.selector);if(N){if(w&&!y(N,w))continue;const B=N.getBoundingClientRect();if(B.width===0||B.height===0||!N.offsetParent&&N.tagName!=="BODY"&&getComputedStyle(N).position!=="fixed"||de(N))continue;p.push({selector:z.selector,top:`${B.top+D}px`,left:`${B.left+g}px`,width:`${B.width}px`,height:`${B.height}px`,isStatic:((L=z.detected.sourceBinding)==null?void 0:L.isStatic)||!1})}}catch{}return p}),ve=e.computed(()=>{var z,N;const D=G.value,g=j.value;W.value;const p=[],w=m.analysisFilter;if(w==="none"||!m.isEnabled||m.analysisResults.length===0)return p;const L=he();for(const B of m.analysisResults){if(!B.matched)continue;const f=B.element;try{const h=document.querySelector(B.selector);if(!h||L&&!y(h,L))continue;const R=h.getBoundingClientRect();if(R.width===0||R.height===0||!h.offsetParent&&h.tagName!=="BODY"&&getComputedStyle(h).position!=="fixed"||de(h)||R.width>window.innerWidth*.8||R.height>window.innerHeight*.5)continue;const I=h.querySelector("[data-di-binding]")||(h.hasAttribute("data-di-binding")?h:null);let O="",fe=f.binding||"";const ee=[...f.tags||[]];if(I){const pe=I.getAttribute("data-di-db"),Xe=I.getAttribute("data-di-binding");pe&&(O=pe,ee.includes("db")||ee.push("db")),Xe&&(fe=Xe)}!O&&f.db&&(O=`${f.db.table}.${f.db.column}`,ee.includes("db")||ee.push("db"));let Ce="";f.api&&(Ce=`${f.api.method} ${f.api.endpoint}`,ee.includes("api")||ee.push("api"));let je="";if(fe){const pe=m.getApiSourceForBinding(fe);pe&&pe.endpoint?je=`${pe.method||"GET"} ${pe.endpoint}`:pe&&pe.composable&&(je=pe.composable)}const Ge=(z=f.conditional)==null?void 0:z.expression,et=(N=f.modal)==null?void 0:N.target,qe=!!O||ee.includes("db"),He=!!Ce||ee.includes("api"),Le=ee.includes("form"),Re=ee.includes("button"),Ke=ee.includes("link"),Pe=ee.includes("modal"),ie=ee.includes("conditional"),Ye=ee.includes("computed");if(w==="db-api"){if(!qe&&!He)continue}else if(w==="form"){if(!Le)continue}else if(w==="button"){if(!Re)continue}else if(w==="link"){if(!Ke)continue}else if(w==="modal"){if(!Pe)continue}else if(w==="conditional"){if(!ie)continue}else if(w==="computed"){if(!Ye)continue}else if(w==="other"&&(qe||He||Le||Re||Ke||Pe||ie||Ye))continue;let ge="other";qe?ge="db":He?ge="api":Le?ge="form":Re?ge="button":Ke?ge="link":Pe?ge="modal":ie?ge="conditional":Ye&&(ge="computed"),p.push({selector:B.selector,top:`${R.top+D}px`,left:`${R.left+g}px`,width:`${R.width}px`,height:`${R.height}px`,tags:ee,primaryTag:ge,text:f.text||fe||"",dbInfo:O,apiInfo:Ce,apiSource:je,conditionalExpr:Ge,modalTarget:et})}catch{}}return p}),Oe=e.computed(()=>{const D=G.value,g=j.value;W.value;const p=[];if(!m.isEnabled||!m.showUnannotatedDetection||m.unannotatedElements.length===0)return p;const w=he();for(const L of m.unannotatedElements)try{const z=document.querySelector(L.selector);if(!z||w&&!y(z,w))continue;const N=z.getBoundingClientRect();if(N.width===0||N.height===0||!z.offsetParent&&z.tagName!=="BODY"&&getComputedStyle(z).position!=="fixed"||de(z))continue;p.push({selector:L.selector,top:`${N.top+D}px`,left:`${N.left+g}px`,width:`${N.width}px`,height:`${N.height}px`,category:L.category,text:L.text})}catch{}return p});function F(D){if(!m.isPickMode)return;if(D.target.closest("[data-dev-inspector]")){b.value=null,_.value=null,m.setHoveredSelector(null);return}const p=document.elementFromPoint(D.clientX,D.clientY);if(!p||p===document.body||p===document.documentElement){b.value=null,_.value=null,m.setHoveredSelector(null);return}if(p.closest("[data-dev-inspector]"))return;_.value=p;const w=p.getBoundingClientRect();b.value={top:`${w.top+window.scrollY}px`,left:`${w.left+window.scrollX}px`,width:`${w.width}px`,height:`${w.height}px`};const L=m.generateSelector(p);m.setHoveredSelector(L)}function Ne(D){if(!(!m.isPickMode||D.target.closest("[data-dev-inspector]"))&&(D.preventDefault(),D.stopPropagation(),_.value)){const p=m.generateSelector(_.value);if(m.remapTargetId){m.remapAnnotation(m.remapTargetId,p),m.remapTargetId=null,m.togglePickMode(),m.openPanel();return}m.startEditing(p),m.togglePickMode()}}function Be(D){D.key==="Escape"&&m.isPickMode&&(m.remapTargetId=null,m.togglePickMode())}function re(){G.value=window.scrollY,j.value=window.scrollX,W.value++}let X=null;return e.onMounted(()=>{window.addEventListener("mousemove",F,!0),window.addEventListener("click",Ne,!0),window.addEventListener("keydown",Be),window.addEventListener("scroll",re),window.addEventListener("resize",re);let D=null;X=new MutationObserver(()=>{D&&clearTimeout(D),D=setTimeout(()=>{W.value++},100)}),X.observe(document.body,{childList:!0,subtree:!0})}),e.onUnmounted(()=>{window.removeEventListener("mousemove",F,!0),window.removeEventListener("click",Ne,!0),window.removeEventListener("keydown",Be),window.removeEventListener("scroll",re),window.removeEventListener("resize",re),X==null||X.disconnect()}),e.watch(()=>m.isPickMode,D=>{D||(b.value=null,_.value=null)}),(D,g)=>(e.openBlock(),e.createBlock(e.Teleport,{to:e.unref(s)},[e.unref(m).isInitializing?(e.openBlock(),e.createElementBlock("div",Hm,[...g[1]||(g[1]=[e.createElementVNode("div",{class:"di-loading-content"},[e.createElementVNode("div",{class:"di-loading-spinner"}),e.createElementVNode("span",{class:"di-loading-text"},"Developer Mode 起動中...")],-1)])])):e.createCommentVNode("",!0),e.unref(m).isPickMode&&b.value?(e.openBlock(),e.createElementBlock("div",{key:1,"data-dev-inspector":"",class:"di-highlight",style:e.normalizeStyle({top:b.value.top,left:b.value.left,width:b.value.width,height:b.value.height})},[e.createElementVNode("div",Rm,e.toDisplayString(e.unref(m).hoveredSelector),1)],4)):e.createCommentVNode("",!0),e.unref(m).isPickMode?(e.openBlock(),e.createElementBlock("div",{key:2,"data-dev-inspector":"",class:"di-pick-banner",style:e.normalizeStyle(e.unref(m).remapTargetId?{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)"}:{})},[e.createElementVNode("span",null,e.toDisplayString(e.unref(m).remapTargetId?"新しい要素をクリックして再設定":"要素をクリックしてメモを追加"),1),g[2]||(g[2]=e.createElementVNode("kbd",null,"ESC",-1)),g[3]||(g[3]=e.createElementVNode("span",{class:"di-pick-hint"},"でキャンセル",-1))],4)):e.createCommentVNode("",!0),e.unref(m).isEnabled&&!e.unref(m).isPickMode&&!e.unref(m).editingElementId?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:3},e.renderList(we.value,p=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{key:p.selector,"data-dev-inspector":"",class:e.normalizeClass([p.hasNote?"di-note-highlight":"di-annotation-box",{"di-element-hovered-pulse":e.unref(m).hoveredSelector===p.selector}]),style:e.normalizeStyle({top:p.top,left:p.left,width:p.width,height:p.height,borderColor:(p.hasNote,p.color),backgroundColor:e.unref(m).hoveredSelector===p.selector?p.color+"30":p.color+(p.hasNote?"18":"15")}),onClick:w=>e.unref(m).startEditing(p.selector)},[p.hasNote?(e.openBlock(),e.createElementBlock("div",Ym,[e.createElementVNode("span",{class:"di-note-indicator",style:e.normalizeStyle({backgroundColor:p.color})},null,4),e.createElementVNode("div",{class:"di-annotation-label",style:e.normalizeStyle({backgroundColor:p.color})},e.toDisplayString(p.label),5)])):(e.openBlock(),e.createElementBlock("div",{key:1,class:"di-annotation-label",style:e.normalizeStyle({backgroundColor:p.color})},e.toDisplayString(p.label),5))],14,Km)),[[e.vShow,!p.hasNote||e.unref(m).showNoteHighlights&&se(p.selector)]])),128)):e.createCommentVNode("",!0),e.unref(m).isEnabled&&!e.unref(m).editingElementId&&ye.value.length>0&&e.unref(m).analysisResults.length===0?(e.openBlock(),e.createElementBlock(e.Fragment,{key:4},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(ye.value,p=>(e.openBlock(),e.createElementBlock("div",{key:"scan-"+p.selector,"data-dev-inspector":"",class:e.normalizeClass(["di-scan-highlight",{"di-scan-static":p.isStatic}]),style:e.normalizeStyle({top:p.top,left:p.left,width:p.width,height:p.height}),onClick:w=>e.unref(m).startEditing(p.selector)},[e.createElementVNode("div",{class:e.normalizeClass(["di-scan-label",{"di-scan-label-static":p.isStatic}])},e.toDisplayString(p.isStatic?"固定文言":"動的データ"),3)],14,Gm))),128)),e.createElementVNode("div",Xm,[e.createElementVNode("span",null,e.toDisplayString(ye.value.length)+"件の要素を検出",1),e.createElementVNode("button",{onClick:g[0]||(g[0]=p=>e.unref(m).clearScanResults()),class:"di-scan-banner-close"},"✕ 閉じる")])],64)):e.createCommentVNode("",!0),e.unref(m).isEnabled&&!e.unref(m).editingElementId&&ve.value.length>0?(e.openBlock(),e.createElementBlock(e.Fragment,{key:5},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(ve.value,p=>(e.openBlock(),e.createElementBlock("div",{key:"analysis-"+p.selector,"data-dev-inspector":"",class:e.normalizeClass(["di-analysis-highlight","di-analysis-"+p.primaryTag]),style:e.normalizeStyle({top:p.top,left:p.left,width:p.width,height:p.height}),onClick:w=>e.unref(m).startEditing(p.selector)},[e.createElementVNode("div",{class:e.normalizeClass(["di-analysis-label","di-analysis-label-"+p.primaryTag])},[e.createElementVNode("span",Zm,e.toDisplayString(Q(p.primaryTag)),1),p.tags.length>1?(e.openBlock(),e.createElementBlock("span",Jm,"+"+e.toDisplayString(p.tags.length-1),1)):e.createCommentVNode("",!0),p.dbInfo?(e.openBlock(),e.createElementBlock("span",Qm,e.toDisplayString(p.dbInfo),1)):e.createCommentVNode("",!0),p.apiSource?(e.openBlock(),e.createElementBlock("span",ep,"← "+e.toDisplayString(p.apiSource),1)):e.createCommentVNode("",!0),p.conditionalExpr?(e.openBlock(),e.createElementBlock("span",tp,e.toDisplayString(p.conditionalExpr),1)):e.createCommentVNode("",!0),e.createElementVNode("button",{class:"di-analysis-delete",onClick:e.withModifiers(w=>e.unref(m).removeAnalysisResult(p.selector),["stop"]),title:"この要素を非表示"},"×",8,op)],2),p.text&&p.text.length<30?(e.openBlock(),e.createElementBlock("div",lp,e.toDisplayString(p.text),1)):e.createCommentVNode("",!0)],14,Wm))),128)),e.createElementVNode("div",np,[e.createElementVNode("span",null,"📊 分析データ: "+e.toDisplayString(ve.value.length)+"件の要素",1)])],64)):e.createCommentVNode("",!0),e.unref(m).isEnabled&&!e.unref(m).isPickMode&&!e.unref(m).editingElementId&&Oe.value.length>0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:6},e.renderList(Oe.value,p=>(e.openBlock(),e.createElementBlock("div",{key:"unannotated-"+p.selector,"data-dev-inspector":"",class:e.normalizeClass(["di-unannotated-highlight",{"di-unannotated-hovered":e.unref(m).hoveredUnannotatedSelector===p.selector,["di-unannotated-hovered-"+p.category]:e.unref(m).hoveredUnannotatedSelector===p.selector}]),style:e.normalizeStyle({top:p.top,left:p.left,width:p.width,height:p.height}),onClick:w=>e.unref(m).quickAnnotate(p.selector,p.category==="form"?"form":p.category==="action"?"action":"datasource")},[e.createElementVNode("div",{class:e.normalizeClass(["di-unannotated-label",{["di-unannotated-label-"+p.category]:e.unref(m).hoveredUnannotatedSelector===p.selector}])},[e.createElementVNode("span",null,e.toDisplayString(p.category==="binding"?"DB":p.category==="form"?"Form":"Act"),1),p.text?(e.openBlock(),e.createElementBlock("span",ip,e.toDisplayString(p.text),1)):e.createCommentVNode("",!0)],2)],14,ap))),128)):e.createCommentVNode("",!0)],8,["to"]))}}),Eo=jt(sp,[["__scopeId","data-v-07ca574d"]]),dp={class:"di-editor-modal"},rp={class:"di-editor-header"},cp={class:"di-header-actions"},up={class:"di-path-badge"},mp={class:"di-editor-content"},pp={class:"di-form-group"},vp={class:"di-form-group"},fp={class:"di-form-section"},kp={class:"di-form-section-header"},Vp={class:"di-api-header-actions"},Ep={class:"di-dropdown-wrapper"},hp={key:1,class:"di-suggestion-dropdown"},yp={key:0,class:"di-suggestion-actions"},gp=["onMousedown","disabled"],bp={class:"di-suggestion-endpoint"},Np={key:0,class:"di-suggestion-timing"},Bp={key:1,class:"di-suggestion-empty"},Cp={key:0,class:"di-suggestion-banner"},wp={key:1,class:"di-suggestion-banner di-suggestion-banner-empty"},xp={key:2,class:"di-empty-hint"},Dp={class:"di-api-entry-row"},_p=["onUpdate:modelValue"],$p=["value"],Tp=["onUpdate:modelValue"],Sp=["onClick"],Mp={class:"di-api-entry-row2"},Ip=["onUpdate:modelValue"],Up=["onUpdate:modelValue"],Fp=["value"],Lp={class:"di-form-section"},Pp={class:"di-auth-row"},Ap={key:0,class:"di-auth-details"},zp={class:"di-form-group"},Op={class:"di-form-group"},jp={class:"di-form-group"},qp={class:"di-form-group"},Hp={class:"di-editor-footer"},Rp={class:"di-editor-actions"},Kp=["disabled"],Yp=e.defineComponent({__name:"DevScreenEditor",setup(A){const m=Ut.useDevInspectorStore(),s=e.inject("teleportTarget","body"),b=e.ref(""),_=e.ref(""),G=e.ref([]),j=e.ref(!1),W=e.ref(""),te=e.ref(""),S=e.ref(""),Q=e.ref(""),Ee=e.ref(!1),se=e.ref([]),de=e.ref(!1),he=e.computed(()=>typeof window<"u"?window.location.pathname:"/");e.watch(()=>m.editingScreen,B=>{B&&y()});function y(){var f,h,R,I;const B=m.getScreenConfig();B?(b.value=B.name,_.value=B.description||"",G.value=B.apis.map(O=>({...O})),j.value=((f=B.auth)==null?void 0:f.required)||!1,W.value=((R=(h=B.auth)==null?void 0:h.roles)==null?void 0:R.join(", "))||"",te.value=((I=B.auth)==null?void 0:I.description)||"",S.value=B.figmaUrl||"",Q.value=B.notes||""):we()}function we(){b.value="",_.value="",G.value=[],j.value=!1,W.value="",te.value="",S.value="",Q.value=""}function ye(){m.editingScreen=!1,we()}function ve(){G.value.push({method:"GET",endpoint:"",description:"",loadTiming:"onMount"})}function Oe(B){G.value.splice(B,1)}function F(){if(!b.value.trim())return;const B={path:he.value,name:b.value.trim(),description:_.value.trim()||void 0,apis:G.value.filter(f=>f.endpoint.trim()),auth:j.value||W.value.trim()?{required:j.value,roles:W.value.trim()?W.value.split(",").map(f=>f.trim()).filter(Boolean):void 0,description:te.value.trim()||void 0}:void 0,figmaUrl:S.value.trim()||void 0,notes:Q.value.trim()||void 0,updatedAt:new Date().toISOString()};m.setScreenConfig(B),ye()}function Ne(){m.deleteScreenConfig(he.value),ye()}const Be={GET:"#10b981",POST:"#3b82f6",PUT:"#f59e0b",DELETE:"#ef4444",PATCH:"#8b5cf6"},re={onMount:"読込時",action:"アクション",conditional:"条件付き"};function X(){se.value=m.suggestScreenApis(),Ee.value=!0}function D(B){return G.value.some(f=>f.method===B.method&&f.endpoint===B.endpoint)}const g=e.computed(()=>se.value.filter(B=>!D(B)));function p(B){D(B)||G.value.push({...B})}function w(){for(const B of g.value)G.value.push({...B})}function L(){setTimeout(()=>{de.value=!1},150)}const z=["GET","POST","PUT","DELETE","PATCH"],N=[{value:"onMount",label:"画面読込時"},{value:"action",label:"アクション時"},{value:"conditional",label:"条件付き"}];return(B,f)=>(e.openBlock(),e.createBlock(e.Teleport,{to:e.unref(s)},[e.unref(m).editingScreen?(e.openBlock(),e.createElementBlock("div",{key:0,class:"di-editor-overlay",onClick:e.withModifiers(ye,["self"]),"data-dev-inspector":""},[e.createElementVNode("div",dp,[e.createElementVNode("div",rp,[f[9]||(f[9]=e.createElementVNode("h3",null,"画面情報を編集",-1)),e.createElementVNode("div",cp,[e.createElementVNode("span",up,e.toDisplayString(he.value),1),e.createElementVNode("button",{onClick:ye,class:"di-editor-close"},[e.createVNode(e.unref(rt),{style:{width:"20px",height:"20px"}})])])]),e.createElementVNode("div",mp,[e.createElementVNode("div",pp,[f[10]||(f[10]=e.createElementVNode("label",{class:"di-form-label"},"画面名 *",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":f[0]||(f[0]=h=>b.value=h),type:"text",placeholder:"ユーザー詳細",class:"di-input"},null,512),[[e.vModelText,b.value]])]),e.createElementVNode("div",vp,[f[11]||(f[11]=e.createElementVNode("label",{class:"di-form-label"},"画面の説明",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":f[1]||(f[1]=h=>_.value=h),rows:"2",placeholder:"この画面の概要...",class:"di-textarea"},null,512),[[e.vModelText,_.value]])]),e.createElementVNode("div",fp,[e.createElementVNode("div",kp,[f[15]||(f[15]=e.createElementVNode("label",{class:"di-form-label"},"API一覧",-1)),e.createElementVNode("div",Vp,[e.createElementVNode("button",{onClick:X,class:"di-btn-suggest",title:"要素情報からAPI推定"},[e.createVNode(e.unref(Ot),{style:{width:"13px",height:"13px"}}),f[12]||(f[12]=e.createTextVNode(" 自動推定 ",-1))]),e.createElementVNode("div",Ep,[se.value.length>0?(e.openBlock(),e.createElementBlock("button",{key:0,onClick:f[2]||(f[2]=h=>de.value=!de.value),onBlur:f[3]||(f[3]=h=>L()),class:"di-btn-dropdown",title:"推定結果から選択"},[e.createVNode(e.unref(Yt),{style:{width:"13px",height:"13px"}}),f[13]||(f[13]=e.createTextVNode(" 候補から選択 ",-1))],32)):e.createCommentVNode("",!0),de.value&&se.value.length>0?(e.openBlock(),e.createElementBlock("div",hp,[g.value.length>0?(e.openBlock(),e.createElementBlock("div",yp,[e.createElementVNode("button",{onMousedown:e.withModifiers(w,["prevent"]),class:"di-suggestion-add-all"}," すべて追加 ("+e.toDisplayString(g.value.length)+") ",33)])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(se.value,(h,R)=>(e.openBlock(),e.createElementBlock("button",{key:R,onMousedown:e.withModifiers(I=>p(h),["prevent"]),class:e.normalizeClass(["di-suggestion-item",{"di-suggestion-added":D(h)}]),disabled:D(h)},[e.createElementVNode("span",{class:"di-suggestion-method",style:e.normalizeStyle({backgroundColor:Be[h.method]+"20",color:Be[h.method]})},e.toDisplayString(h.method),5),e.createElementVNode("code",bp,e.toDisplayString(h.endpoint),1),h.loadTiming?(e.openBlock(),e.createElementBlock("span",Np,e.toDisplayString(re[h.loadTiming]||h.loadTiming),1)):e.createCommentVNode("",!0),D(h)?(e.openBlock(),e.createBlock(e.unref(Go),{key:1,style:{width:"12px",height:"12px",color:"#10b981","flex-shrink":"0"}})):e.createCommentVNode("",!0)],42,gp))),128)),se.value.length===0?(e.openBlock(),e.createElementBlock("div",Bp," 推定結果がありません ")):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)]),e.createElementVNode("button",{onClick:ve,class:"di-btn-add"},[e.createVNode(e.unref(Nt),{style:{width:"14px",height:"14px"}}),f[14]||(f[14]=e.createTextVNode(" 手動追加 ",-1))])])]),Ee.value&&se.value.length>0&&g.value.length>0?(e.openBlock(),e.createElementBlock("div",Cp,[e.createVNode(e.unref(Ot),{style:{width:"13px",height:"13px",color:"#f59e0b","flex-shrink":"0"}}),e.createElementVNode("span",null,e.toDisplayString(se.value.length)+"件のAPIを推定しました",1),e.createElementVNode("button",{onMousedown:e.withModifiers(w,["prevent"]),class:"di-suggestion-banner-btn"},"すべて追加",32)])):Ee.value&&se.value.length===0?(e.openBlock(),e.createElementBlock("div",wp,[...f[16]||(f[16]=[e.createElementVNode("span",null,"要素のDB情報からAPIを推定できませんでした。要素にDB情報を登録してください。",-1)])])):e.createCommentVNode("",!0),G.value.length===0&&!Ee.value?(e.openBlock(),e.createElementBlock("div",xp," APIが未登録です。「自動推定」で要素情報からAPIを推定できます。 ")):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(G.value,(h,R)=>(e.openBlock(),e.createElementBlock("div",{key:R,class:"di-api-entry"},[e.createElementVNode("div",Dp,[e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":I=>h.method=I,class:"di-select di-select-method"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(z,I=>e.createElementVNode("option",{key:I,value:I},e.toDisplayString(I),9,$p)),64))],8,_p),[[e.vModelSelect,h.method]]),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":I=>h.endpoint=I,type:"text",placeholder:"/api/users/:id",class:"di-input di-input-endpoint"},null,8,Tp),[[e.vModelText,h.endpoint]]),e.createElementVNode("button",{onClick:I=>Oe(R),class:"di-btn-remove"},[e.createVNode(e.unref(nl),{style:{width:"14px",height:"14px"}})],8,Sp)]),e.createElementVNode("div",Mp,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":I=>h.description=I,type:"text",placeholder:"説明（任意）",class:"di-input di-input-desc"},null,8,Ip),[[e.vModelText,h.description]]),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":I=>h.loadTiming=I,class:"di-select di-select-timing"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(N,I=>e.createElementVNode("option",{key:I.value,value:I.value},e.toDisplayString(I.label),9,Fp)),64))],8,Up),[[e.vModelSelect,h.loadTiming]])])]))),128))]),e.createElementVNode("div",Lp,[f[20]||(f[20]=e.createElementVNode("label",{class:"di-form-label"},"認証設定",-1)),e.createElementVNode("div",Pp,[e.createElementVNode("button",{onClick:f[4]||(f[4]=h=>j.value=!j.value),class:e.normalizeClass(["di-toggle-btn",{active:j.value}])},[e.createElementVNode("span",{class:e.normalizeClass(["di-toggle-knob",{active:j.value}])},null,2)],2),f[17]||(f[17]=e.createElementVNode("span",{class:"di-auth-label"},"ログイン必須",-1))]),j.value?(e.openBlock(),e.createElementBlock("div",Ap,[e.createElementVNode("div",zp,[f[18]||(f[18]=e.createElementVNode("label",{class:"di-form-label"},"必要ロール（カンマ区切り）",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":f[5]||(f[5]=h=>W.value=h),type:"text",placeholder:"admin, manager",class:"di-input"},null,512),[[e.vModelText,W.value]])]),e.createElementVNode("div",Op,[f[19]||(f[19]=e.createElementVNode("label",{class:"di-form-label"},"認証メモ",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":f[6]||(f[6]=h=>te.value=h),type:"text",placeholder:"自分のデータのみ閲覧可",class:"di-input"},null,512),[[e.vModelText,te.value]])])])):e.createCommentVNode("",!0)]),e.createElementVNode("div",jp,[f[21]||(f[21]=e.createElementVNode("label",{class:"di-form-label"},"Figma URL",-1)),e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":f[7]||(f[7]=h=>S.value=h),type:"text",placeholder:"https://www.figma.com/design/...",class:"di-input"},null,512),[[e.vModelText,S.value]])]),e.createElementVNode("div",qp,[f[22]||(f[22]=e.createElementVNode("label",{class:"di-form-label"},"メモ",-1)),e.withDirectives(e.createElementVNode("textarea",{"onUpdate:modelValue":f[8]||(f[8]=h=>Q.value=h),rows:"3",placeholder:"この画面に関するメモ...",class:"di-textarea"},null,512),[[e.vModelText,Q.value]])])]),e.createElementVNode("div",Hp,[e.createElementVNode("button",{onClick:Ne,class:"di-btn-delete"},[e.createVNode(e.unref(It),{style:{width:"14px",height:"14px"}}),f[23]||(f[23]=e.createTextVNode(" 削除 ",-1))]),e.createElementVNode("div",Rp,[e.createElementVNode("button",{onClick:ye,class:"di-btn-cancel"},"キャンセル"),e.createElementVNode("button",{onClick:F,class:"di-btn-save",disabled:!b.value.trim()},[e.createVNode(e.unref(fo),{style:{width:"14px",height:"14px"}}),f[24]||(f[24]=e.createTextVNode(" 保存 ",-1))],8,Kp)])])])])):e.createCommentVNode("",!0)],8,["to"]))}}),ho=jt(Yp,[["__scopeId","data-v-f0e1b0be"]]),Gp={key:0,"data-dev-inspector":""},Xp=e.defineComponent({__name:"DevInspector",props:{storageKey:{default:"devInspector:elementConfigs"},enabledInProduction:{type:Boolean,default:!1},initialAnnotations:{},analysisData:{},analysisDataUrl:{},autoLoadAnalysis:{type:Boolean},autoApplyAnalysis:{type:Boolean}},setup(A){const m=A,s=Ut.useDevInspectorStore();function b(){s.toggle()}return e.onMounted(()=>{s.init({storageKey:m.storageKey,enabledInProduction:m.enabledInProduction,initialAnnotations:m.initialAnnotations}),window.addEventListener("dev-inspector-toggle",b)}),e.onUnmounted(()=>{window.removeEventListener("dev-inspector-toggle",b)}),(_,G)=>e.unref(s).isAvailable?(e.openBlock(),e.createElementBlock("div",Gp,[e.createVNode(ko),e.createVNode(Vo),e.createVNode(ho),e.createVNode(Eo)])):e.createCommentVNode("",!0)}});exports.DevElementEditor=Vo;exports.DevPanel=ko;exports.DevPickOverlay=Eo;exports.DevScreenEditor=ho;exports._sfc_main=Xp;
