"use strict";const l=require("vue"),V=require("pinia");var S=typeof document<"u"?document.currentScript:null;const Y={},z="devInspector:elementConfigs",C=V.defineStore("devInspector",()=>{const v=l.ref({}),u=l.ref(!1),i=l.ref(!1),s=l.ref(!1),p=l.ref(null),f=l.ref(!1),o=l.ref({}),c=l.ref(null),g=l.ref(null),I=l.computed(()=>v.value.storageKey||z),m=l.computed(()=>v.value.enabledInProduction?!0:typeof{url:typeof document>"u"?require("url").pathToFileURL(__filename).href:S&&S.tagName.toUpperCase()==="SCRIPT"&&S.src||new URL("useDevInspector-ez7iSOpX.cjs",document.baseURI).href}<"u"&&Y?!1:process.env.NODE_ENV==="development");function E(e={}){v.value=e,b()}function b(){try{const e=v.value.initialAnnotations||{};if(typeof window<"u"){const n=localStorage.getItem(I.value),t=n?JSON.parse(n):{};o.value={...e,...t}}else o.value=e}catch(e){console.error("[DevInspector] Failed to load configs:",e)}}function O(){try{typeof window<"u"&&localStorage.setItem(I.value,JSON.stringify(o.value))}catch(e){console.error("[DevInspector] Failed to save configs:",e)}}l.watch(o,O,{deep:!0});function P(){m.value&&(u.value=!u.value,u.value||(i.value=!1,c.value=null))}function _(){m.value&&(u.value=!0)}function D(){u.value=!1,i.value=!1,c.value=null}function A(){i.value=!i.value,i.value||(c.value=null),i.value&&(s.value=!1)}function N(){s.value=!s.value,s.value&&(i.value=!1),g.value=null}function U(e){g.value=e}function L(e){if(e.id)return`#${e.id}`;if(e.dataset.devId)return`[data-dev-id="${e.dataset.devId}"]`;const n=[];let t=e;for(;t&&t!==document.body;){let a=t.tagName.toLowerCase();if(t.id){a=`#${t.id}`,n.unshift(a);break}const r=Array.from(t.classList).filter(d=>!d.startsWith("hover:")&&!d.startsWith("focus:")).slice(0,2);r.length>0&&(a+="."+r.join("."));const w=t.parentElement;if(w){const d=Array.from(w.children).filter(h=>h.tagName===t.tagName);if(d.length>1){const h=d.indexOf(t)+1;a+=`:nth-child(${h})`}}n.unshift(a),t=t.parentElement}return n.join(" > ")}function R(){const e=typeof window<"u"?window.location.pathname:"/";return Object.keys(o.value).filter(n=>{const t=o.value[n];return t?(n.includes(">")||n.startsWith("#")||n.startsWith("[")||n.startsWith("."))&&(!t.componentPath||t.componentPath.includes(e)||e==="/"):!1})}function j(e){p.value=e}function k(){p.value=null}function F(){f.value=!f.value}function J(){f.value=!0}function W(){f.value=!1}function M(e){return o.value[e]}function T(e,n){var r;const t=new Date().toISOString(),a=o.value[e];o.value[e]={...a,...n,id:e,componentPath:n.componentPath||((r=p.value)==null?void 0:r.componentPath)||"",createdAt:(a==null?void 0:a.createdAt)||t,updatedAt:t}}function $(e){delete o.value[e]}function q(e){c.value=e}function x(){c.value=null}function K(){return JSON.stringify(o.value,null,2)}function y(){const e={_meta:{version:"1.0.0",description:"Dev Inspector annotations",lastUpdated:new Date().toISOString()},annotations:o.value};return JSON.stringify(e,null,2)}function B(e="dev-annotations.json"){const n=y(),t=new Blob([n],{type:"application/json"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)}function G(e){try{const n=JSON.parse(e),t=n.annotations||n;o.value={...o.value,...t}}catch(n){throw console.error("[DevInspector] Failed to import configs:",n),new Error("Invalid JSON format")}}function H(){o.value={}}return{isEnabled:u,isAvailable:m,isEditMode:i,isPickMode:s,hoveredSelector:g,currentScreenSpec:p,isPanelOpen:f,elementConfigs:o,editingElementId:c,init:E,toggle:P,enable:_,disable:D,toggleEditMode:A,togglePickMode:N,setHoveredSelector:U,generateSelector:L,getConfiguredSelectors:R,setScreenSpec:j,clearScreenSpec:k,togglePanel:F,openPanel:J,closePanel:W,getElementConfig:M,setElementConfig:T,deleteElementConfig:$,startEditing:q,stopEditing:x,exportConfigs:K,exportAsFile:y,downloadAnnotations:B,importConfigs:G,clearAllConfigs:H}});function Q(){return C()}exports.useDevInspector=Q;exports.useDevInspectorStore=C;
